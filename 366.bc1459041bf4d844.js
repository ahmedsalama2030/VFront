"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[366],{56701:($,T,d)=>{d.d(T,{g:()=>B});var s=d(54438),c=d(62984),p=d(51188),S=d(3888);let B=(()=>{class v{constructor(f,j,_){this.authservice=f,this.router=j,this.alertService=_}canActivate(f){return!!this.authservice.permissionMatch(f.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(j){return new(j||v)(s.KVO(c.J),s.KVO(p.Ix),s.KVO(S.u))}}static{this.\u0275prov=s.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},69433:($,T,d)=>{d.d(T,{a:()=>B});var s=d(67569),c=d(45312),p=d(54438),S=d(21626);let B=(()=>{class v extends s.d{constructor(f){super(f,c.c.apiUrl+"Store/")}ToDelete(f){return this.http.delete(`${this.baseUrl}${f}`)}ToEdit(f,j){return this.http.put(this.baseUrl+"Edit/"+f,j)}static{this.\u0275fac=function(j){return new(j||v)(p.KVO(S.Qq))}}static{this.\u0275prov=p.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},56131:($,T,d)=>{d.d(T,{E:()=>p});var s=d(7673),c=d(99437);class p{constructor(B,v,E){this.router=B,this.BaseService=v,this.alertService=E,this.pagination={pageNumber:1,pageSize:10}}resolve(B,v){return this.BaseService.get(this.pagination).pipe((0,c.W)(E=>(this.router.navigate([""]),this.alertService.error(E),(0,s.of)(null))))}}},56366:($,T,d)=>{d.r(T),d.d(T,{StoresModule:()=>Je});var s=d(60177),c=d(89417),p=d(69005),S=d(91022),B=d(70255),v=d(63789),E=d(98982),f=d.n(E),j=d(53978),_=d(73955),k=d(68709),H=d(65430),Q=d(41631),C=d(1530),Y=d(72510),I=d(71144),M=d(38542),g=d(51188),h=d(56977),b=d(37021),x=d(35335),y=d(45236),F=d(70980),w=d(75622),t=d(54438),G=d(3888),tt=d(69433),A=d(54384),O=d(91426),L=d(26364),K=d(40724),et=d(15084),J=d(88148),q=d(91580),X=d(5779),P=d(29935);function gt(o,m){1&o&&(t.j41(0,"tr",24)(1,"th",25),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",26),t.nrm(4,"i",27),t.EFF(5," stores.store.nameEn "),t.k0s(),t.j41(6,"th",28),t.nrm(7,"i",27),t.EFF(8," stores.store.nameAr "),t.k0s(),t.j41(9,"th",29),t.nrm(10,"i",27),t.EFF(11," stores.store.isActive "),t.k0s(),t.j41(12,"th",30),t.nrm(13,"i",27),t.EFF(14," stores.store.isMain "),t.k0s(),t.nrm(15,"th",31),t.k0s())}function _t(o,m){1&o&&t.nrm(0,"span",41)}function ut(o,m){1&o&&t.nrm(0,"span",42)}function ht(o,m){1&o&&t.nrm(0,"span",41)}function ft(o,m){1&o&&t.nrm(0,"span",42)}function bt(o,m){if(1&o&&(t.nrm(0,"i",43),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br")(4,"i",44),t.EFF(5),t.nI1(6,"date"),t.nrm(7,"br")(8,"i",45),t.EFF(9),t.nrm(10,"br")(11,"i",45),t.EFF(12)),2&o){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,4,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",t.i5U(6,7,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",n.creatorName,""),t.R7$(3),t.SpI(" ",n.lastModificationName," ")}}function vt(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",32)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.DNE(8,_t,1,0,"span",33)(9,ut,1,0,"span",34),t.k0s(),t.j41(10,"td"),t.DNE(11,ht,1,0,"span",33)(12,ft,1,0,"span",34),t.k0s(),t.DNE(13,bt,13,10,"ng-template",null,3,t.C5r),t.j41(15,"td")(16,"span",35),t.nrm(17,"i",36),t.k0s(),t.j41(18,"button",37),t.nI1(19,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(23);return t.Njj(a.editModal(e.id,l))}),t.nrm(20,"i",38),t.k0s(),t.j41(21,"button",39),t.nI1(22,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(25);return t.Njj(a.openModal(e.id,l))}),t.nrm(23,"i",40),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex,e=t.sdS(14);t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(n.nameEn),t.R7$(2),t.JRh(n.nameAr),t.R7$(2),t.Y8G("ngIf",n.isActive),t.R7$(),t.Y8G("ngIf",!n.isActive),t.R7$(2),t.Y8G("ngIf",n.isMain),t.R7$(),t.Y8G("ngIf",!n.isMain),t.R7$(4),t.Y8G("ngbTooltip",e),t.R7$(2),t.FS9("pTooltip",t.bMT(19,10,"general.edit")),t.R7$(3),t.FS9("pTooltip",t.bMT(22,12,"general.delete"))}}function It(o,m){1&o&&(t.j41(0,"div",46),t.EFF(1," general.table.noData"),t.k0s())}function St(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",47)(1,"div",48),t.nrm(2,"ngb-pagination-info",49),t.j41(3,"table-length",50),t.bIt("lengthChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",51)(5,"ngb-pagination",52),t.bIt("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.pagination.pageNumber,e)||(a.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(2),t.Y8G("pagination",n.pagination),t.R7$(),t.Y8G("lengthTable",n.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),t.R50("page",n.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function jt(o,m){1&o&&(t.j41(0,"span",76),t.EFF(1,"general.action.register "),t.k0s())}function Ct(o,m){1&o&&(t.j41(0,"span",76),t.EFF(1,"general.action.edit "),t.k0s())}function kt(o,m){1&o&&(t.j41(0,"div",77),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function xt(o,m){1&o&&(t.j41(0,"div",77),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function Ft(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",53)(1,"h4",54),t.DNE(2,jt,2,0,"span",55)(3,Ct,2,0,"span",55),t.nrm(4,"span",56),t.k0s(),t.j41(5,"button",57),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()(),t.j41(6,"form",58,4),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onSubmit())}),t.nrm(8,"ngx-ui-loader",17),t.j41(9,"div",59)(10,"div",60)(11,"div",61)(12,"div",8)(13,"div",62)(14,"label",63),t.EFF(15,"stores.store.nameEn"),t.k0s(),t.j41(16,"input",64,5),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameEn,e)||(a.form.nameEn=e),t.Njj(e)}),t.k0s(),t.DNE(18,kt,2,0,"div",65),t.k0s(),t.j41(19,"div",62)(20,"label",66),t.EFF(21,"stores.store.nameAr"),t.k0s(),t.j41(22,"input",67,6),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameAr,e)||(a.form.nameAr=e),t.Njj(e)}),t.k0s(),t.DNE(24,xt,2,0,"div",65),t.k0s(),t.j41(25,"div",68)(26,"label",69),t.EFF(27,"stores.store.isActive"),t.k0s(),t.j41(28,"p-inputSwitch",70),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.isActive,e)||(a.form.isActive=e),t.Njj(e)}),t.k0s()(),t.j41(29,"div",68)(30,"label",71),t.EFF(31,"stores.store.isMain"),t.k0s(),t.j41(32,"p-inputSwitch",72),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.isMain,e)||(a.form.isMain=e),t.Njj(e)}),t.k0s()()(),t.j41(33,"div",73),t.nrm(34,"button",74),t.j41(35,"button",75),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()()()()()()}if(2&o){const n=t.sdS(7),i=t.sdS(17),e=t.sdS(23),a=t.XpG();t.R7$(2),t.Y8G("ngIf",!a.isEditForm),t.R7$(),t.Y8G("ngIf",a.isEditForm),t.R7$(5),t.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),t.R7$(8),t.R50("ngModel",a.form.nameEn),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(4),t.R50("ngModel",a.form.nameAr),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",a.form.isActive),t.R7$(4),t.R50("ngModel",a.form.isMain),t.R7$(2),t.Y8G("disabled",!n.valid)}}function Tt(o,m){if(1&o){const n=t.RV6();t.j41(0,"delete-modal",78),t.bIt("deleteConfirm",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.DeleteConfirm())})("dismiss",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()}}let Et=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.excelService=N,this.router=V,this.title="stores.store.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.isResolveList=!0,this.configRoute()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}editEntity(){let n=this.mapForm(this.form);this.baseService.ToEdit(n.id,n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),n}editModal(n,i,e="md"){this.isEditForm=!0,this.baseService.getById(n).subscribe({next:a=>{this.form=a.data}}),this.modalService.open(i,{centered:!0,size:e})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.ToDelete(this.selectedRow[0].id).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(tt.a),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(O.V),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-store"]],features:[t.Vt3],decls:26,vars:24,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","nameEn","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],["InputTirmFilter","","name","nameAr","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameEn","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameAr","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","10%"],["pSortableColumn","isMain","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"px-3","py-2",3,"ngbTooltip"],[1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","stores.store.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","mb-3"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["for","isMain","translate","",1,"fw-bold","form-label","d-block"],["id","isMain","name","isMain","inputId","isMain",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-success",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",7),t.nI1(1,"translate"),t.j41(2,"div",8)(3,"div",9)(4,"div",10)(5,"base-filter",11),t.bIt("reset",function(){return t.eBV(a),t.Njj(e.onReset())})("search",function(){return t.eBV(a),t.Njj(e.onSearch())})("exportXlsx",function(){return t.eBV(a),t.Njj(e.onExportXlsx())})("addNew",function(){t.eBV(a);const r=t.sdS(23);return t.Njj(e.openModalTitle(r))}),t.qex(6,12),t.j41(7,"div",13)(8,"input",14),t.nI1(9,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameEn,r)||(e.pagination.nameEn=r),t.Njj(r)}),t.k0s()(),t.j41(10,"div",13)(11,"input",15),t.nI1(12,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameAr,r)||(e.pagination.nameAr=r),t.Njj(r)}),t.k0s()(),t.bVm(),t.k0s(),t.j41(13,"div",16),t.nrm(14,"ngx-ui-loader",17),t.j41(15,"div",18)(16,"p-table",19,0),t.bIt("onLazyLoad",function(r){return t.eBV(a),t.Njj(e.tableChange(r))})("selectionChange",function(r){return t.eBV(a),t.Njj(e.onSelectionChange(r))}),t.DNE(18,gt,16,0,"ng-template",20)(19,vt,24,14,"ng-template",21),t.k0s()(),t.DNE(20,It,2,0,"div",22)(21,St,6,8,"div",23),t.k0s()()()(),t.DNE(22,Ft,36,12,"ng-template",null,1,t.C5r)(24,Tt,1,0,"ng-template",null,2,t.C5r)}2&i&&(t.FS9("title",t.bMT(1,18,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(5),t.Y8G("showExport",!1)("totalItems",e.pagination.totalItems)("title",e.title),t.R7$(3),t.FS9("placeholder",t.bMT(9,20,"stores.store.nameEn")),t.R50("ngModel",e.pagination.nameEn),t.R7$(3),t.FS9("placeholder",t.bMT(12,22,"stores.store.nameAr")),t.R50("ngModel",e.pagination.nameAr),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.entities)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[s.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,p.s5,L.m,K.b,et.w,J.p,q.g,_.Mm,k.XI,X.Ei,k.Tg,Q.HW,C.Cv,p.md,P.m,M.m,s.vh,_.D9],encapsulation:2})}}return o})();var nt=d(56131);let yt=(()=>{class o extends nt.E{constructor(n,i,e){super(n,i,e)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(g.Ix),t.KVO(tt.a),t.KVO(G.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var U=d(56701),st=d(99437),rt=d(18810),it=d(45312),mt=d(67569),dt=d(21626);let W=(()=>{class o extends mt.d{constructor(n){super(n,it.c.apiUrl+"StoreItem/")}ToDelete(n){return this.http.delete(`${this.baseUrl}${n}`)}ToEdit(n,i){return this.http.put(this.baseUrl+"Edit/"+n,i)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(dt.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ct=d(99902);function Rt(o,m){1&o&&(t.j41(0,"tr",30)(1,"th",31),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",32),t.EFF(4," stores.items.image "),t.k0s(),t.j41(5,"th",33),t.nrm(6,"i",34),t.EFF(7," stores.items.nameEn "),t.k0s(),t.j41(8,"th",35),t.nrm(9,"i",34),t.EFF(10," stores.items.nameAr "),t.k0s(),t.j41(11,"th",36),t.nrm(12,"i",34),t.EFF(13," stores.items.quantity "),t.k0s(),t.j41(14,"th",37),t.nrm(15,"i",34),t.EFF(16," stores.items.minimumQuantity "),t.k0s(),t.nrm(17,"th",38),t.k0s())}function Mt(o,m){if(1&o&&(t.nrm(0,"i",46),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br")(4,"i",47),t.EFF(5),t.nI1(6,"date"),t.nrm(7,"br")(8,"i",48),t.EFF(9),t.nrm(10,"br")(11,"i",48),t.EFF(12)),2&o){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,4,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",t.i5U(6,7,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",n.creatorName,""),t.R7$(3),t.SpI(" ",n.lastModificationName," ")}}function Dt(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",39)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"img",40),t.bIt("error",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.setDefaultImage(e,"assets/images/custom/no-img.jpg"))}),t.k0s()(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.DNE(13,Mt,13,10,"ng-template",null,3,t.C5r),t.j41(15,"td"),t.nrm(16,"i",41),t.j41(17,"button",42),t.nI1(18,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.goItemEdit(e.id))}),t.nrm(19,"i",43),t.k0s(),t.j41(20,"button",44),t.nI1(21,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(28);return t.Njj(a.openModal(e.id,l))}),t.nrm(22,"i",45),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex,e=t.sdS(14),a=t.XpG();t.R7$(2),t.JRh(i+1),t.R7$(2),t.Y8G("src",a.serverPath+n.imagePath,t.B4B),t.R7$(2),t.JRh(n.nameEn),t.R7$(2),t.JRh(n.nameAr),t.R7$(2),t.JRh(n.quantity),t.R7$(2),t.JRh(n.minimumQuantity),t.R7$(4),t.Y8G("ngbTooltip",e),t.R7$(),t.FS9("pTooltip",t.bMT(18,9,"general.edit")),t.R7$(3),t.FS9("pTooltip",t.bMT(21,11,"general.delete"))}}function Nt(o,m){1&o&&(t.j41(0,"div",49),t.EFF(1," general.table.noData"),t.k0s())}function Vt(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",50)(1,"div",51),t.nrm(2,"ngb-pagination-info",52),t.j41(3,"table-length",53),t.bIt("lengthChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",54)(5,"ngb-pagination",55),t.bIt("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.pagination.pageNumber,e)||(a.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(2),t.Y8G("pagination",n.pagination),t.R7$(),t.Y8G("lengthTable",n.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),t.R50("page",n.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Bt(o,m){1&o&&(t.j41(0,"span",92),t.EFF(1,"general.action.register "),t.k0s())}function Gt(o,m){1&o&&(t.j41(0,"span",92),t.EFF(1,"general.action.edit "),t.k0s())}function Ut(o,m){1&o&&(t.j41(0,"div",93),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function wt(o,m){1&o&&(t.j41(0,"div",93),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function At(o,m){1&o&&(t.j41(0,"div",93),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function Lt(o,m){1&o&&(t.j41(0,"div",93),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function Xt(o,m){1&o&&(t.j41(0,"div",93),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function $t(o,m){1&o&&(t.j41(0,"div",94),t.nrm(1,"i",95),t.k0s())}function Yt(o,m){if(1&o){const n=t.RV6();t.j41(0,"i",96),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.removeImage())}),t.k0s()}}function Ot(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",56)(1,"h4",57),t.DNE(2,Bt,2,0,"span",58)(3,Gt,2,0,"span",58),t.nrm(4,"span",59),t.k0s(),t.j41(5,"button",60),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()(),t.j41(6,"form",61,4),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onSubmit())}),t.nrm(8,"ngx-ui-loader",23),t.j41(9,"div",62)(10,"div",63)(11,"div",64)(12,"div",12)(13,"div",65)(14,"label",66),t.EFF(15,"stores.items.nameEn"),t.k0s(),t.j41(16,"input",67,5),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameEn,e)||(a.form.nameEn=e),t.Njj(e)}),t.k0s(),t.DNE(18,Ut,2,0,"div",68),t.k0s(),t.j41(19,"div",65)(20,"label",69),t.EFF(21,"stores.items.nameAr"),t.k0s(),t.j41(22,"input",70,6),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameAr,e)||(a.form.nameAr=e),t.Njj(e)}),t.k0s(),t.DNE(24,wt,2,0,"div",68),t.k0s(),t.j41(25,"div",65)(26,"label",71),t.EFF(27,"stores.items.quantity"),t.k0s(),t.j41(28,"input",72,7),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.quantity,e)||(a.form.quantity=e),t.Njj(e)}),t.k0s(),t.DNE(30,At,2,0,"div",68),t.k0s(),t.j41(31,"div",65)(32,"label",73),t.EFF(33,"stores.items.minimumQuantity"),t.k0s(),t.j41(34,"input",74,8),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.minimumQuantity,e)||(a.form.minimumQuantity=e),t.Njj(e)}),t.k0s(),t.DNE(36,Lt,2,0,"div",68),t.k0s(),t.j41(37,"div",75)(38,"label",66),t.EFF(39,"stores.items.title"),t.k0s(),t.j41(40,"div")(41,"ng-select",76,9),t.nI1(43,"translate"),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.storeId,e)||(a.form.storeId=e),t.Njj(e)}),t.k0s(),t.DNE(44,Xt,2,0,"div",68),t.k0s()(),t.j41(45,"div",77)(46,"div",78)(47,"div",79)(48,"label",80),t.bIt("click",function(){t.eBV(n);const e=t.sdS(52);return t.Njj(e.click())}),t.j41(49,"div",81),t.DNE(50,$t,2,0,"div",82),t.k0s()(),t.j41(51,"input",83,10),t.bIt("change",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.onFileChanged(e))}),t.k0s()(),t.j41(53,"div",84)(54,"div",85),t.DNE(55,Yt,1,0,"i",86),t.j41(56,"div",87),t.nrm(57,"img",88),t.k0s()()()()()(),t.j41(58,"div",89),t.nrm(59,"button",90),t.j41(60,"button",91),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()()()()()()}if(2&o){const n=t.sdS(7),i=t.sdS(17),e=t.sdS(23),a=t.sdS(29),l=t.sdS(35),r=t.sdS(42),u=t.XpG();t.R7$(2),t.Y8G("ngIf",!u.isEditForm),t.R7$(),t.Y8G("ngIf",u.isEditForm),t.R7$(5),t.Y8G("hasProgressBar",!1)("fgsType",u.loaderOperationShap)("loaderId",u.operationLoader),t.R7$(8),t.R50("ngModel",u.form.nameEn),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(4),t.R50("ngModel",u.form.nameAr),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",u.form.quantity),t.R7$(2),t.Y8G("ngIf",a.invalid&&a.touched),t.R7$(4),t.R50("ngModel",u.form.minimumQuantity),t.R7$(2),t.Y8G("ngIf",l.invalid&&l.touched),t.R7$(5),t.FS9("bindLabel","en"==u.lang?"nameEn":"nameAR"),t.FS9("placeholder",t.bMT(43,23,"stores.items.title")),t.Y8G("items",u.stores)("multiple",!1),t.R50("ngModel",u.form.storeId),t.R7$(3),t.Y8G("ngIf",r.invalid&&r.touched),t.R7$(6),t.Y8G("ngIf",!u.file.path),t.R7$(5),t.Y8G("ngIf",u.file.path),t.R7$(2),t.Y8G("src",u.file.isApi?u.serverPath+u.file.path:u.file.path,t.B4B),t.R7$(2),t.Y8G("disabled",!n.valid)}}function Pt(o,m){if(1&o){const n=t.RV6();t.j41(0,"delete-modal",97),t.bIt("deleteConfirm",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.DeleteConfirm())})("dismiss",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()}}let zt=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V,R,z){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.storesService=N,this.excelService=V,this._formDataService=R,this.router=z,this.title="stores.items.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.stores=[{id:1,name:"Store"}],this.isResolveList=!0,this.file={isApi:!1,path:""},this.form={file:""},this.serverPath=it.c.mediaUrl,this.configRoute(),this.getStores()}goToAdd(){this.router.navigateByUrl("/stores/items/register")}goItemEdit(n){this.router.navigateByUrl("/stores/items/edit",{state:{id:n}})}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}getStores(){this.storesService.getDropDown().pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.stores=n.data},()=>{this.alertService.error()})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}registerEntity(){let n=this._formDataService.formatFormData(this.form);this.baseService.register(n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,st.W)(i=>(0,rt.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let n=this._formDataService.formatFormData(this.form);this.baseService.ToEdit(this.form.id,n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),n}editModal(n,i,e="md"){this.isEditForm=!0,this.baseService.getById(n).subscribe({next:a=>{this.form=a.data,this.file={isApi:!0,path:a.data.imagePath}}}),this.modalService.open(i,{centered:!0,size:e})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.ToDelete(this.selectedRow[0].id).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}onFileChanged(n){if(n.target.files&&n.target.files[0]){let i=n.target.files.length;for(let e=0;e<i;e++){let a=new FileReader;this.form.file=n.target.files.item(e),a.onload=l=>{this.file={isApi:!1,path:l.target.result}},a.readAsDataURL(n.target.files[e])}}}removeImage(){console.log(),this.form.file="",this.file={id:0,path:""}}setDefaultImage(n,i){n.target.src=i}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(W),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(tt.a),t.rXU(O.V),t.rXU(ct.Q),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-store-items"]],features:[t.Vt3],decls:29,vars:31,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],["quantity","ngModel"],["minimumQuantity","ngModel"],["storeId","ngModel"],["FileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","nameEn","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],["InputTirmFilter","","name","nameAr","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"col-12","col-md-4","mb-2"],["name","storeName","bindValue","id",3,"ngModelChange","items","multiple","bindLabel","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","10%"],["pSortableColumn","nameEn","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameAr","translate","",2,"width","10%"],["pSortableColumn","quantity","translate","",2,"width","10%"],["pSortableColumn","minimumQuantity","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["width","50","height","50","alt","Image",2,"border-radius","15px",3,"error","src"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","stores.items.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-6","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","quantity","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","quantity","type","text","required","","id","quantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","minimumQuantity","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","minimumQuantity","type","text","required","","id","minimumQuantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["name","storeId","bindValue","id","id","storeId","required","",3,"ngModelChange","items","multiple","bindLabel","placeholder","ngModel"],[1,"col-12","col-md-12","mb-3","d-flex","justify-content-center"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],["class","avatar-title bg-light border rounded-circle text-muted cursor-pointer",4,"ngIf"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","justify-content-center","w-100"],[1,"avatar-xl-custom","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: -3px; right: -4px; font-size: 1rem;\n                                                border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-xl-custom","h-auto",3,"src"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","-3px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[3,"deleteConfirm","dismiss"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",11),t.nI1(1,"translate"),t.j41(2,"div",12)(3,"div",13)(4,"div",14)(5,"base-filter",15),t.bIt("reset",function(){return t.eBV(a),t.Njj(e.onReset())})("search",function(){return t.eBV(a),t.Njj(e.onSearch())})("exportXlsx",function(){return t.eBV(a),t.Njj(e.onExportXlsx())})("addNew",function(){return t.eBV(a),t.Njj(e.goToAdd())}),t.qex(6,16),t.j41(7,"div",17)(8,"input",18),t.nI1(9,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameEn,r)||(e.pagination.nameEn=r),t.Njj(r)}),t.k0s()(),t.j41(10,"div",17)(11,"input",19),t.nI1(12,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameAr,r)||(e.pagination.nameAr=r),t.Njj(r)}),t.k0s()(),t.j41(13,"div",20)(14,"ng-select",21),t.nI1(15,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.storeId,r)||(e.pagination.storeId=r),t.Njj(r)}),t.k0s()(),t.bVm(),t.k0s(),t.j41(16,"div",22),t.nrm(17,"ngx-ui-loader",23),t.j41(18,"div",24)(19,"p-table",25,0),t.bIt("onLazyLoad",function(r){return t.eBV(a),t.Njj(e.tableChange(r))})("selectionChange",function(r){return t.eBV(a),t.Njj(e.onSelectionChange(r))}),t.DNE(21,Rt,18,0,"ng-template",26)(22,Dt,23,13,"ng-template",27),t.k0s()(),t.DNE(23,Nt,2,0,"div",28)(24,Vt,6,8,"div",29),t.k0s()()()(),t.DNE(25,Ot,61,25,"ng-template",null,1,t.C5r)(27,Pt,1,0,"ng-template",null,2,t.C5r)}2&i&&(t.FS9("title",t.bMT(1,23,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(5),t.Y8G("showExport",!1)("totalItems",e.pagination.totalItems)("title",e.title),t.R7$(3),t.FS9("placeholder",t.bMT(9,25,"stores.items.nameEn")),t.R50("ngModel",e.pagination.nameEn),t.R7$(3),t.FS9("placeholder",t.bMT(12,27,"stores.items.nameAr")),t.R50("ngModel",e.pagination.nameAr),t.R7$(3),t.FS9("bindLabel","en"==e.lang?"nameEn":"nameAR"),t.FS9("placeholder",t.bMT(15,29,"stores.items.title")),t.Y8G("items",e.stores)("multiple",!1),t.R50("ngModel",e.pagination.storeId),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.entities)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[s.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,p.s5,L.m,K.b,et.w,J.p,q.g,_.Mm,k.XI,X.Ei,k.Tg,C.Cv,Y.vr,p.md,P.m,M.m,s.vh,_.D9],encapsulation:2})}}return o})(),Ht=(()=>{class o extends nt.E{constructor(n,i,e){super(n,i,e)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(g.Ix),t.KVO(W),t.KVO(G.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),ot=(()=>{class o extends mt.d{constructor(n){super(n,it.c.apiUrl+"Stock/")}registerDetails(n,i){return this.http.post(this.baseUrl+"addDetail/"+i,n)}getDetails(n,i){return this.http.post(this.baseUrl+n,i)}ToDelete(n){return this.http.delete(`${this.baseUrl}${n}`)}ToEdit(n,i){return this.http.put(this.baseUrl+"Edit/"+n,i)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(dt.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Qt(o,m){1&o&&(t.j41(0,"tr",28)(1,"th",29),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",30),t.nrm(4,"i",31),t.EFF(5," stores.stocktaking.date "),t.k0s(),t.j41(6,"th",32),t.nrm(7,"i",31),t.EFF(8," stores.stocktaking.stockingStatusName "),t.k0s(),t.j41(9,"th",33),t.nrm(10,"i",31),t.EFF(11," stores.stocktaking.note "),t.k0s(),t.nrm(12,"th",34),t.k0s())}function Kt(o,m){if(1&o&&(t.nrm(0,"i",43),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br")(4,"i",44),t.EFF(5),t.nI1(6,"date"),t.nrm(7,"br")(8,"i",45),t.EFF(9),t.nrm(10,"br")(11,"i",45),t.EFF(12)),2&o){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,4,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",t.i5U(6,7,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",n.creatorName,""),t.R7$(3),t.SpI(" ",n.lastModificationName," ")}}function Jt(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",35)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td")(7,"span"),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.DNE(12,Kt,13,10,"ng-template",null,3,t.C5r),t.j41(14,"td"),t.nrm(15,"i",36),t.j41(16,"button",37),t.nI1(17,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(28);return t.Njj(a.editModal(e,l))}),t.nrm(18,"i",38),t.k0s(),t.j41(19,"button",39),t.nI1(20,"translate"),t.nrm(21,"i",40),t.k0s(),t.j41(22,"button",41),t.nI1(23,"translate"),t.nrm(24,"i",42),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex,e=t.sdS(13);t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(t.i5U(5,16,n.date,"d/M/y")),t.R7$(3),t.ZvI("badge ",1==n.stockingStatus?"bg-success":2==n.stockingStatus?"bg-danger":"",""),t.R7$(),t.SpI(" ",t.bMT(9,19,"stores.stocktaking."+n.stockingStatusName)," "),t.R7$(3),t.JRh(n.note),t.R7$(4),t.Y8G("ngbTooltip",e),t.R7$(),t.FS9("pTooltip",t.bMT(17,21,"general.edit")),t.R7$(3),t.FS9("pTooltip",t.bMT(20,23,"stores.stocktaking.registerDetails")),t.Mz_("routerLink","add-details/",n.id,""),t.Y8G("disabled",2==n.stockingStatus),t.R7$(3),t.FS9("pTooltip",t.bMT(23,25,"stores.stocktaking.show")),t.Mz_("routerLink","show-details/",n.id,"")}}function qt(o,m){1&o&&(t.j41(0,"div",46),t.EFF(1," general.table.noData "),t.k0s())}function Wt(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",47)(1,"div",48),t.nrm(2,"ngb-pagination-info",49),t.j41(3,"table-length",50),t.bIt("lengthChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",51)(5,"ngb-pagination",52),t.bIt("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.pagination.pageNumber,e)||(a.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(2),t.Y8G("pagination",n.pagination),t.R7$(),t.Y8G("lengthTable",n.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),t.R50("page",n.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Zt(o,m){1&o&&(t.j41(0,"span",74),t.EFF(1,"general.action.register "),t.k0s())}function te(o,m){1&o&&(t.j41(0,"span",74),t.EFF(1,"general.action.edit "),t.k0s())}function ee(o,m){1&o&&(t.j41(0,"div",75),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function ne(o,m){1&o&&(t.j41(0,"div",75),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function ie(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",53)(1,"h4",54),t.DNE(2,Zt,2,0,"span",55)(3,te,2,0,"span",55),t.nrm(4,"span",56),t.k0s(),t.j41(5,"button",57),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()(),t.j41(6,"form",58,4),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onSubmit())}),t.nrm(8,"ngx-ui-loader",21),t.j41(9,"div",59)(10,"div",60)(11,"div",61)(12,"div",8)(13,"div",62)(14,"label",63),t.EFF(15,"stores.stocktaking.date"),t.k0s(),t.j41(16,"div",64)(17,"input",65,5),t.nI1(19,"translate"),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.date,e)||(a.form.date=e),t.Njj(e)}),t.bIt("change",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.controlDateFormat("date"))}),t.k0s()(),t.DNE(20,ee,2,0,"div",66),t.k0s(),t.j41(21,"div",62)(22,"label",67),t.EFF(23,"stores.stocktaking.status"),t.k0s(),t.j41(24,"ng-select",68,6),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.stockingStatus,e)||(a.form.stockingStatus=e),t.Njj(e)}),t.k0s(),t.DNE(26,ne,2,0,"div",66),t.k0s(),t.j41(27,"div",62)(28,"label",69),t.EFF(29,"stores.stocktaking.note"),t.k0s(),t.j41(30,"div",64)(31,"textarea",70),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.note,e)||(a.form.note=e),t.Njj(e)}),t.EFF(32,"                                 "),t.k0s()()()(),t.j41(33,"div",71),t.nrm(34,"button",72),t.j41(35,"button",73),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()()()()()()}if(2&o){const n=t.sdS(7),i=t.sdS(18),e=t.sdS(25),a=t.XpG();t.R7$(2),t.Y8G("ngIf",!a.isEditForm),t.R7$(),t.Y8G("ngIf",a.isEditForm),t.R7$(5),t.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),t.R7$(9),t.FS9("placeholder",t.bMT(19,17,"stores.stocktaking.date")),t.Y8G("altInput",!0)("convertModelValue",!0),t.R50("ngModel",a.form.date),t.R7$(3),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(4),t.FS9("bindLabel","en"==a.lang?"nameEn":"nameAr"),t.Y8G("items",a.statusEnum)("multiple",!1),t.R50("ngModel",a.form.stockingStatus),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(5),t.R50("ngModel",a.form.note),t.R7$(3),t.Y8G("disabled",!n.valid)}}function oe(o,m){if(1&o){const n=t.RV6();t.j41(0,"delete-modal",76),t.bIt("deleteConfirm",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.DeleteConfirm())})("dismiss",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()}}let ae=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.excelService=N,this.router=V,this.title="stores.stocktaking.title",this.submitted=!1,this.statusEnum=[{nameEn:"Open",nameAr:"\u0645\u0641\u062a\u0648\u062d",id:1},{nameEn:"Close",nameAr:"\u0645\u063a\u0644\u0642",id:2}],this.searchForm={},this.isResolveList=!0,this.setDates=(R,z,at)=>{if(R?.from||R?.to){const We=R.to||R.from;this.pagination[z]=this.datePipe.transform(R.from||R.to,"yyyy-MM-ddT00:00:00"),this.pagination[at]=this.datePipe.transform(We,"yyyy-MM-ddT23:59:59.999")}else this.pagination[z]=null,this.pagination[at]=null},this.configRoute()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}controlDateFormat(n){this.form[n]=this.datePipe.transform(this.form[n],"yyyy-MM-ddT00:00:00")}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}editEntity(){let n=this.mapForm(this.form);this.baseService.ToEdit(n.id,n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}onSearch(){let n={...this.searchForm};this.setDates(n.dates,"dateFrom","dateTo"),this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),n}editModal(n,i,e="md"){this.isEditForm=!0,this.form=n,this.modalService.open(i,{centered:!0,size:e})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.ToDelete(this.selectedRow[0].id).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm={},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(ot),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(O.V),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-stocks"]],features:[t.Vt3],decls:31,vars:34,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["date","ngModel"],["stockingStatus","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["required","",3,"ngModelChange","bindValue","items","multiple","placeholder","bindLabel","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","date","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","stockingStatus","translate","",2,"width","10%"],["pSortableColumn","note","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","me-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","me-2",3,"disabled","pTooltip","routerLink"],[1,"ri-settings-3-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","remove-list",3,"pTooltip","routerLink"],[1,"ri-eye-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","stores.stocktaking.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","date","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["type","text","mwlFlatpickr","","name","date","id","date","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","change","altInput","convertModelValue","placeholder","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["translate","",1,"fw-bold","form-label","required"],["name","stockingStatus","bindValue","id","required","",3,"ngModelChange","items","multiple","bindLabel","ngModel"],["for","note","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","note","rows","3","id","note",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",7),t.nI1(1,"translate"),t.j41(2,"div",8)(3,"div",9)(4,"div",10)(5,"base-filter",11),t.bIt("reset",function(){return t.eBV(a),t.Njj(e.onReset())})("search",function(){return t.eBV(a),t.Njj(e.onSearch())})("exportXlsx",function(){return t.eBV(a),t.Njj(e.onExportXlsx())})("addNew",function(){t.eBV(a);const r=t.sdS(28);return t.Njj(e.openModalTitle(r))}),t.qex(6,12),t.j41(7,"div",13)(8,"div",14)(9,"input",15),t.nI1(10,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.filterValue,r)||(e.pagination.filterValue=r),t.Njj(r)}),t.k0s(),t.nrm(11,"i",16),t.k0s()(),t.j41(12,"div",17)(13,"input",18),t.nI1(14,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.searchForm.dates,r)||(e.searchForm.dates=r),t.Njj(r)}),t.k0s()(),t.j41(15,"div",17)(16,"ng-select",19),t.nI1(17,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.stockingStatusName,r)||(e.pagination.stockingStatusName=r),t.Njj(r)}),t.k0s()(),t.bVm(),t.k0s(),t.j41(18,"div",20),t.nrm(19,"ngx-ui-loader",21),t.j41(20,"div",22)(21,"p-table",23,0),t.bIt("onLazyLoad",function(r){return t.eBV(a),t.Njj(e.tableChange(r))})("selectionChange",function(r){return t.eBV(a),t.Njj(e.onSelectionChange(r))}),t.DNE(23,Qt,13,0,"ng-template",24)(24,Jt,25,27,"ng-template",25),t.k0s()(),t.DNE(25,qt,2,0,"div",26)(26,Wt,6,8,"div",27),t.k0s()()()(),t.DNE(27,ie,36,19,"ng-template",null,1,t.C5r)(29,oe,1,0,"ng-template",null,2,t.C5r)}2&i&&(t.FS9("title",t.bMT(1,26,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(5),t.Y8G("showExport",!1)("totalItems",e.pagination.totalItems)("title",e.title),t.R7$(4),t.FS9("placeholder",t.bMT(10,28,"task.tasklist.subject")),t.R50("ngModel",e.pagination.filterValue),t.R7$(4),t.FS9("placeholder",t.bMT(14,30,"hr.target.fromToDate")),t.Y8G("altInput",!0)("convertModelValue",!0),t.R50("ngModel",e.searchForm.dates),t.R7$(3),t.FS9("bindValue","en"==e.lang?"nameEn":"nameAr"),t.FS9("placeholder",t.bMT(17,32,"stores.stocktaking.status")),t.FS9("bindLabel","en"==e.lang?"nameEn":"nameAr"),t.Y8G("items",e.statusEnum)("multiple",!1),t.R50("ngModel",e.pagination.stockingStatusName),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.entities)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[s.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,p.s5,S.kL,g.Wk,L.m,K.b,et.w,J.p,q.g,_.Mm,k.XI,X.Ei,k.Tg,C.Cv,Y.vr,p.md,P.m,M.m,s.vh,_.D9],encapsulation:2})}}return o})(),se=(()=>{class o extends nt.E{constructor(n,i,e){super(n,i,e)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(g.Ix),t.KVO(ot),t.KVO(G.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Z=d(36158);function re(o,m){1&o&&(t.j41(0,"tr",16)(1,"th",17),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",18),t.EFF(4," stores.stocktaking.itemName "),t.k0s(),t.j41(5,"th",18),t.EFF(6," stores.stocktaking.quantity "),t.k0s(),t.j41(7,"th",18),t.EFF(8," stores.stocktaking.note "),t.k0s()())}function le(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",19)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"input",20),t.nI1(7,"translate"),t.mxI("ngModelChange",function(e){const a=t.eBV(n).rowIndex,l=t.XpG();return t.DH7(l.form[a].stockingQuantity,e)||(l.form[a].stockingQuantity=e),t.Njj(e)}),t.k0s()(),t.j41(8,"td")(9,"input",21),t.nI1(10,"translate"),t.mxI("ngModelChange",function(e){const a=t.eBV(n).rowIndex,l=t.XpG();return t.DH7(l.form[a].note,e)||(l.form[a].note=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex,e=t.XpG();t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(n.itemName),t.R7$(2),t.FS9("placeholder",t.bMT(7,6,"stores.stocktaking.quantity")),t.R50("ngModel",e.form[i].stockingQuantity),t.R7$(3),t.FS9("placeholder",t.bMT(10,8,"stores.stocktaking.note")),t.R50("ngModel",e.form[i].note)}}function me(o,m){1&o&&(t.j41(0,"div",22),t.EFF(1," general.table.noData "),t.k0s())}function de(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",23)(1,"a",24),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.closeStock())}),t.nrm(2,"i",25),t.j41(3,"span"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()}2&o&&(t.R7$(4),t.JRh(t.bMT(5,1,"stores.stocktaking.closeStock")))}let ce=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.storeItemsService=N,this.router=V,this.title="stores.stocktaking.titleAddDetails",this.submitted=!1,this.pagination={pageNumber:1,pageSize:1e3},this.form=[],this.stockId=0,this.routerActive.params.subscribe(R=>{this.stockId=+R.id})}addAllItems(){this.ngxLoader.startLoader(Z.a7),this.storeItemsService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(Z.a7),n.data.forEach(i=>{this.form.push({itemName:"en"==this.lang?i.nameEn:i.nameAr,storeItemId:i.id,stockingQuantity:0,note:""})}),this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(Z.a7),this.alertService.error(n)})}closeStock(){this.baseService.registerDetails(this.form,this.stockId).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,st.W)(n=>(0,rt.$)(n))).subscribe(n=>{n.success?(this.submitFunished(),this.router.navigate(["/stores/stocks"])):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(ot),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(W),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-stock-details"]],features:[t.Vt3],decls:20,vars:14,consts:[["tableMaster",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[1,"d-flex","justify-content-end","m-3"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"value","rows"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","text-center text-danger text-bold fs-6 p-3",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","number",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"text-center","text-danger","text-bold","fs-6","p-3"],["href","javascript:void(0);",1,"btn","btn-success",3,"click"],[1,"ri-check-double-fill","align-bottom"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",1),t.nI1(1,"translate"),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),t.bIt("click",function(){return t.eBV(a),t.Njj(e.addAllItems())}),t.nrm(7,"i",7),t.j41(8,"span"),t.EFF(9),t.nI1(10,"translate"),t.k0s()()(),t.j41(11,"div",8),t.nrm(12,"ngx-ui-loader",9),t.j41(13,"div",10)(14,"p-table",11,0),t.DNE(16,re,9,0,"ng-template",12)(17,le,11,10,"ng-template",13),t.k0s()(),t.DNE(18,me,2,0,"div",14)(19,de,6,3,"div",15),t.k0s()()()()}2&i&&(t.FS9("title",t.bMT(1,10,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(9),t.JRh(t.bMT(10,12,"stores.stocktaking.addAllItems")),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.form)("rows",null==e.form?null:e.form.length),t.R7$(4),t.Y8G("ngIf",(null==e.form?null:e.form.length)<=0),t.R7$(),t.Y8G("ngIf",(null==e.form?null:e.form.length)>0))},dependencies:[s.bT,c.me,c.Q0,c.BC,c.vS,L.m,_.Mm,k.XI,X.Ei,C.Cv,_.D9],encapsulation:2})}}return o})();function pe(o,m){1&o&&(t.j41(0,"tr",24)(1,"th",25),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",26),t.nrm(4,"i",27),t.EFF(5," stores.stocktaking.itemName "),t.k0s(),t.j41(6,"th",28),t.nrm(7,"i",27),t.EFF(8," stores.stocktaking.quantity "),t.k0s(),t.j41(9,"th",29),t.nrm(10,"i",27),t.EFF(11," stores.stocktaking.note "),t.k0s()())}function ge(o,m){if(1&o&&(t.j41(0,"tr",30)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s()()),2&o){const n=m.$implicit,i=m.rowIndex,e=t.XpG();t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh("en"==e.lang?n.storeItemNameEn:n.storeItemNameAr),t.R7$(2),t.JRh(n.stockingQuantity),t.R7$(2),t.JRh(n.note)}}function _e(o,m){1&o&&(t.j41(0,"div",31),t.EFF(1," general.table.noData "),t.k0s())}function ue(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",32)(1,"div",33),t.nrm(2,"ngb-pagination-info",34),t.j41(3,"table-length",35),t.bIt("lengthChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",36)(5,"ngb-pagination",37),t.bIt("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.pagination.pageNumber,e)||(a.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(2),t.Y8G("pagination",n.pagination),t.R7$(),t.Y8G("lengthTable",n.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),t.R50("page",n.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}let he=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.excelService=N,this.router=V,this.title="stores.stocktaking.titleDetails",this.stockId=0,this.routerActive.params.subscribe(R=>{this.stockId=+R.id})}setSearchValue(n){console.log(n.target.value),"en"==this.lang?(this.pagination.storeItemNameEn=n.target.value,this.pagination.storeItemNameAr=""):(this.pagination.storeItemNameEn="",this.pagination.storeItemNameAr=n.target.value)}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.baseService.getDetails(this.stockId,this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(Z.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(Z.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),n}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(ot),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(O.V),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-stocks-details"]],features:[t.Vt3],decls:41,vars:48,consts:[["tableMaster",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","showExport","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"keyup","placeholder"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","number",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"row","row-cols-3","p-3"],[1,"col","text-muted"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","storeItemId","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","stockingQuantity","translate","",2,"width","10%"],["pSortableColumn","note","translate","",2,"width","10%"],[1,"fs-5"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",1),t.nI1(1,"translate"),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"base-filter",5),t.bIt("reset",function(){return t.eBV(a),t.Njj(e.onReset())})("search",function(){return t.eBV(a),t.Njj(e.onSearch())})("exportXlsx",function(){return t.eBV(a),t.Njj(e.onExportXlsx())}),t.qex(6,6),t.j41(7,"div",7)(8,"div",8)(9,"input",9),t.nI1(10,"translate"),t.bIt("keyup",function(r){return t.eBV(a),t.Njj(e.setSearchValue(r))}),t.k0s(),t.nrm(11,"i",10),t.k0s()(),t.j41(12,"div",11)(13,"input",12),t.nI1(14,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.stockingQuantity,r)||(e.pagination.stockingQuantity=r),t.Njj(r)}),t.k0s()(),t.j41(15,"div",11)(16,"input",13),t.nI1(17,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.note,r)||(e.pagination.note=r),t.Njj(r)}),t.k0s()(),t.bVm(),t.k0s(),t.j41(18,"div",14)(19,"div",15),t.EFF(20),t.nI1(21,"translate"),t.nI1(22,"date"),t.k0s(),t.j41(23,"div",15),t.EFF(24),t.nI1(25,"translate"),t.j41(26,"span"),t.EFF(27),t.nI1(28,"translate"),t.k0s()(),t.j41(29,"div",15),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.j41(32,"div",16),t.nrm(33,"ngx-ui-loader",17),t.j41(34,"div",18)(35,"p-table",19,0),t.bIt("onLazyLoad",function(r){return t.eBV(a),t.Njj(e.tableChange(r))})("selectionChange",function(r){return t.eBV(a),t.Njj(e.onSelectionChange(r))}),t.DNE(37,pe,12,0,"ng-template",20)(38,ge,9,4,"ng-template",21),t.k0s()(),t.DNE(39,_e,2,0,"div",22)(40,ue,6,8,"div",23),t.k0s()()()()}2&i&&(t.FS9("title",t.bMT(1,29,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(5),t.Y8G("showExport",!1)("showAdd",!1)("totalItems",e.pagination.totalItems)("title",e.title),t.R7$(4),t.FS9("placeholder",t.bMT(10,31,"task.tasklist.subject")),t.R7$(4),t.FS9("placeholder",t.bMT(14,33,"stores.stocktaking.quantity")),t.R50("ngModel",e.pagination.stockingQuantity),t.R7$(3),t.FS9("placeholder",t.bMT(17,35,"stores.stocktaking.note")),t.R50("ngModel",e.pagination.note),t.R7$(4),t.Lme(" ",t.bMT(21,37,"stores.stocktaking.date"),": ",t.i5U(22,39,null==e.entities?null:e.entities.date,"d/M/y")," "),t.R7$(4),t.SpI(" ",t.bMT(25,42,"stores.stocktaking.stockingStatusName"),": "),t.R7$(2),t.ZvI("badge ",1==(null==e.entities?null:e.entities.stockingStatus)?"bg-success":2==(null==e.entities?null:e.entities.stockingStatus)?"bg-danger":"",""),t.R7$(),t.SpI(" ",t.bMT(28,44,"stores.stocktaking."+(null==e.entities?null:e.entities.stockingStatusName))," "),t.R7$(3),t.Lme(" ",t.bMT(31,46,"stores.stocktaking.note"),": ",null==e.entities?null:e.entities.note," "),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",null==e.entities?null:e.entities.details)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[s.bT,c.me,c.Q0,c.BC,c.vS,p.s5,L.m,K.b,J.p,q.g,_.Mm,k.XI,X.Ei,k.Tg,C.Cv,P.m,s.vh,_.D9],encapsulation:2})}}return o})();var lt=d(34618);function fe(o,m){1&o&&(t.j41(0,"tr",23)(1,"th",24),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",25),t.nrm(4,"i",26),t.EFF(5," stores.storesUnits.nameEn "),t.k0s(),t.j41(6,"th",27),t.nrm(7,"i",26),t.EFF(8," stores.storesUnits.nameAr "),t.k0s(),t.j41(9,"th",28),t.nrm(10,"i",26),t.EFF(11," stores.storesUnits.isActive "),t.k0s(),t.nrm(12,"th",29),t.k0s())}function be(o,m){1&o&&t.nrm(0,"span",39)}function ve(o,m){1&o&&t.nrm(0,"span",40)}function Ie(o,m){if(1&o&&(t.nrm(0,"i",41),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br")(4,"i",42),t.EFF(5),t.nI1(6,"date"),t.nrm(7,"br")(8,"i",43),t.EFF(9),t.nrm(10,"br")(11,"i",43),t.EFF(12)),2&o){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,4,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",t.i5U(6,7,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",n.creatorName,""),t.R7$(3),t.SpI(" ",n.lastModificationName," ")}}function Se(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",30)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.DNE(8,be,1,0,"span",31)(9,ve,1,0,"span",32),t.k0s(),t.DNE(10,Ie,13,10,"ng-template",null,3,t.C5r),t.j41(12,"td")(13,"span",33),t.nrm(14,"i",34),t.k0s(),t.j41(15,"button",35),t.nI1(16,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(21);return t.Njj(a.editModal(e.id,l))}),t.nrm(17,"i",36),t.k0s(),t.j41(18,"button",37),t.nI1(19,"translate"),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG(),l=t.sdS(23);return t.Njj(a.openModal(e.id,l))}),t.nrm(20,"i",38),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex,e=t.sdS(11);t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(n.nameEn),t.R7$(2),t.JRh(n.nameAr),t.R7$(2),t.Y8G("ngIf",n.isActive),t.R7$(),t.Y8G("ngIf",!n.isActive),t.R7$(4),t.Y8G("ngbTooltip",e),t.R7$(2),t.FS9("pTooltip",t.bMT(16,8,"general.edit")),t.R7$(3),t.FS9("pTooltip",t.bMT(19,10,"general.delete"))}}function je(o,m){1&o&&(t.j41(0,"div",44),t.EFF(1," general.table.noData"),t.k0s())}function Ce(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",45)(1,"div",46),t.nrm(2,"ngb-pagination-info",47),t.j41(3,"table-length",48),t.bIt("lengthChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",49)(5,"ngb-pagination",50),t.bIt("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.pagination.pageNumber,e)||(a.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(2),t.Y8G("pagination",n.pagination),t.R7$(),t.Y8G("lengthTable",n.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),t.R50("page",n.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ke(o,m){1&o&&(t.j41(0,"span",72),t.EFF(1,"general.action.register "),t.k0s())}function xe(o,m){1&o&&(t.j41(0,"span",72),t.EFF(1,"general.action.edit "),t.k0s())}function Fe(o,m){1&o&&(t.j41(0,"div",73),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function Te(o,m){1&o&&(t.j41(0,"div",73),t.EFF(1," general.message.filedIdRequired"),t.k0s())}function Ee(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",51)(1,"h4",52),t.DNE(2,ke,2,0,"span",53)(3,xe,2,0,"span",53),t.nrm(4,"span",54),t.k0s(),t.j41(5,"button",55),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()(),t.j41(6,"form",56,4),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onSubmit())}),t.nrm(8,"ngx-ui-loader",16),t.j41(9,"div",57)(10,"div",58)(11,"div",59)(12,"div",7)(13,"div",60)(14,"label",61),t.EFF(15,"stores.storesUnits.nameEn"),t.k0s(),t.j41(16,"input",62,5),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameEn,e)||(a.form.nameEn=e),t.Njj(e)}),t.k0s(),t.DNE(18,Fe,2,0,"div",63),t.k0s(),t.j41(19,"div",60)(20,"label",64),t.EFF(21,"stores.storesUnits.nameAr"),t.k0s(),t.j41(22,"input",65,6),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameAr,e)||(a.form.nameAr=e),t.Njj(e)}),t.k0s(),t.DNE(24,Te,2,0,"div",63),t.k0s(),t.j41(25,"div",66)(26,"label",67),t.EFF(27,"stores.storesUnits.isActive"),t.k0s(),t.j41(28,"p-inputSwitch",68),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.isActive,e)||(a.form.isActive=e),t.Njj(e)}),t.k0s()()(),t.j41(29,"div",69),t.nrm(30,"button",70),t.j41(31,"button",71),t.bIt("click",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()()()()()()}if(2&o){const n=t.sdS(7),i=t.sdS(17),e=t.sdS(23),a=t.XpG();t.R7$(2),t.Y8G("ngIf",!a.isEditForm),t.R7$(),t.Y8G("ngIf",a.isEditForm),t.R7$(5),t.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),t.R7$(8),t.R50("ngModel",a.form.nameEn),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(4),t.R50("ngModel",a.form.nameAr),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",a.form.isActive),t.R7$(2),t.Y8G("disabled",!n.valid)}}function ye(o,m){if(1&o){const n=t.RV6();t.j41(0,"delete-modal",74),t.bIt("deleteConfirm",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.DeleteConfirmSoft())})("dismiss",function(){const e=t.eBV(n).$implicit;return t.Njj(e.dismiss())}),t.k0s()}}let Re=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.excelService=N,this.router=V,this.title="stores.storesUnits.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.isResolveList=!0,this.configRoute()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}editEntity(){let n=this.mapForm(this.form);this.baseService.ToEdit(n.id,n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),n}editModal(n,i,e="md"){this.isEditForm=!0,this.baseService.getById(n).subscribe({next:a=>{this.form=a.data}}),this.modalService.open(i,{centered:!0,size:e})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(lt.S),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(O.V),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-store-units"]],features:[t.Vt3],decls:24,vars:20,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","nameEn","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],["InputTirmFilter","","name","nameAr","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameEn","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameAr","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"px-3","py-2",3,"ngbTooltip"],[1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","stores.storesUnits.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","mb-3"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-success",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,e){if(1&i){const a=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"base-filter",10),t.bIt("reset",function(){return t.eBV(a),t.Njj(e.onReset())})("search",function(){return t.eBV(a),t.Njj(e.onSearch())})("exportXlsx",function(){return t.eBV(a),t.Njj(e.onExportXlsx())})("addNew",function(){t.eBV(a);const r=t.sdS(21);return t.Njj(e.openModalTitle(r))}),t.qex(4,11),t.j41(5,"div",12)(6,"input",13),t.nI1(7,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameEn,r)||(e.pagination.nameEn=r),t.Njj(r)}),t.k0s()(),t.j41(8,"div",12)(9,"input",14),t.nI1(10,"translate"),t.mxI("ngModelChange",function(r){return t.eBV(a),t.DH7(e.pagination.nameAr,r)||(e.pagination.nameAr=r),t.Njj(r)}),t.k0s()(),t.bVm(),t.k0s(),t.j41(11,"div",15),t.nrm(12,"ngx-ui-loader",16),t.j41(13,"div",17)(14,"p-table",18,0),t.bIt("onLazyLoad",function(r){return t.eBV(a),t.Njj(e.tableChange(r))})("selectionChange",function(r){return t.eBV(a),t.Njj(e.onSelectionChange(r))}),t.DNE(16,fe,13,0,"ng-template",19)(17,Se,21,12,"ng-template",20),t.k0s()(),t.DNE(18,je,2,0,"div",21)(19,Ce,6,8,"div",22),t.k0s()()()(),t.DNE(20,Ee,32,11,"ng-template",null,1,t.C5r)(22,ye,1,0,"ng-template",null,2,t.C5r)}2&i&&(t.R7$(3),t.Y8G("showExport",!1)("totalItems",e.pagination.totalItems)("title",e.title),t.R7$(3),t.FS9("placeholder",t.bMT(7,16,"stores.storesUnits.nameEn")),t.R50("ngModel",e.pagination.nameEn),t.R7$(3),t.FS9("placeholder",t.bMT(10,18,"stores.storesUnits.nameAr")),t.R50("ngModel",e.pagination.nameAr),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderSearchShap)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.entities)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[s.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,p.s5,K.b,et.w,J.p,q.g,_.Mm,k.XI,X.Ei,k.Tg,Q.HW,C.Cv,p.md,P.m,M.m,s.vh,_.D9],encapsulation:2})}}return o})();function Me(o,m){1&o&&t.nrm(0,"app-store-units")}let De=(()=>{class o{constructor(){this.title="stores.storeSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-store-setting"]],decls:15,vars:7,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","stores.storesItemsUnits.title",1,"d-sm-block"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(i,e){if(1&i&&(t.nrm(0,"app-breadcrumbs",1),t.nI1(1,"translate"),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),t.nrm(10,"i",9),t.k0s(),t.nrm(11,"span",10),t.k0s(),t.DNE(12,Me,1,0,"ng-template",11),t.k0s()(),t.j41(13,"div",12),t.nrm(14,"div",13),t.k0s()()()()),2&i){const a=t.sdS(6);t.FS9("title",t.bMT(1,5,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(5),t.Y8G("activeId",1),t.R7$(2),t.Y8G("ngbNavItem",1),t.R7$(7),t.Y8G("ngbNavOutlet",a)}},dependencies:[p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,L.m,_.Mm,Re,_.D9],encapsulation:2})}}return o})(),Ne=(()=>{class o extends nt.E{constructor(n,i,e){super(n,i,e)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(g.Ix),t.KVO(lt.S),t.KVO(G.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Ve(o,m){1&o&&(t.j41(0,"div",53),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function Be(o,m){1&o&&(t.j41(0,"div",53),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function Ge(o,m){1&o&&(t.j41(0,"div",53),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function Ue(o,m){1&o&&(t.j41(0,"div",53),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function we(o,m){1&o&&(t.j41(0,"div",53),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function Ae(o,m){1&o&&(t.j41(0,"div",54),t.nrm(1,"i",55),t.k0s())}function Le(o,m){if(1&o){const n=t.RV6();t.j41(0,"i",56),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.removeImage())}),t.k0s()}}function Xe(o,m){if(1&o){const n=t.RV6();t.nrm(0,"ngx-ui-loader",26),t.j41(1,"div",27)(2,"div",28)(3,"div",29)(4,"label",30),t.EFF(5,"stores.items.nameEn"),t.k0s(),t.j41(6,"input",31,2),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameEn,e)||(a.form.nameEn=e),t.Njj(e)}),t.k0s(),t.DNE(8,Ve,2,0,"div",32),t.k0s(),t.j41(9,"div",29)(10,"label",33),t.EFF(11,"stores.items.nameAr"),t.k0s(),t.j41(12,"input",34,3),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.nameAr,e)||(a.form.nameAr=e),t.Njj(e)}),t.k0s(),t.DNE(14,Be,2,0,"div",32),t.k0s(),t.j41(15,"div",29)(16,"label",35),t.EFF(17,"stores.items.quantity"),t.k0s(),t.j41(18,"input",36,4),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.quantity,e)||(a.form.quantity=e),t.Njj(e)}),t.k0s(),t.DNE(20,Ge,2,0,"div",32),t.k0s(),t.j41(21,"div",29)(22,"label",37),t.EFF(23,"stores.items.minimumQuantity"),t.k0s(),t.j41(24,"input",38,5),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.minimumQuantity,e)||(a.form.minimumQuantity=e),t.Njj(e)}),t.k0s(),t.DNE(26,Ue,2,0,"div",32),t.k0s(),t.j41(27,"div",39)(28,"label",30),t.EFF(29,"stores.store.title"),t.k0s(),t.j41(30,"div")(31,"ng-select",40,6),t.nI1(33,"translate"),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.form.storeId,e)||(a.form.storeId=e),t.Njj(e)}),t.k0s(),t.DNE(34,we,2,0,"div",32),t.k0s()(),t.j41(35,"div",41)(36,"div",42)(37,"div",43)(38,"label",44),t.bIt("click",function(){t.eBV(n);const e=t.sdS(42);return t.Njj(e.click())}),t.j41(39,"div",45),t.DNE(40,Ae,2,0,"div",46),t.k0s()(),t.j41(41,"input",47,7),t.bIt("change",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.onFileChanged(e))}),t.k0s()(),t.j41(43,"div",48)(44,"div",49),t.DNE(45,Le,1,0,"i",50),t.j41(46,"div",51),t.nrm(47,"img",52),t.k0s()()()()()()()}if(2&o){const n=t.sdS(7),i=t.sdS(13),e=t.sdS(19),a=t.sdS(25),l=t.sdS(32),r=t.XpG();t.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),t.R7$(6),t.R50("ngModel",r.form.nameEn),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",r.form.nameAr),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(4),t.R50("ngModel",r.form.quantity),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",r.form.minimumQuantity),t.R7$(2),t.Y8G("ngIf",a.invalid&&a.touched),t.R7$(5),t.FS9("bindLabel","en"==r.lang?"nameEn":"nameAR"),t.FS9("placeholder",t.bMT(33,20,"stores.store.title")),t.Y8G("items",r.stores)("multiple",!1),t.R50("ngModel",r.form.storeId),t.R7$(3),t.Y8G("ngIf",l.invalid&&l.touched),t.R7$(6),t.Y8G("ngIf",!r.file.path),t.R7$(5),t.Y8G("ngIf",r.file.path),t.R7$(2),t.Y8G("src",r.file.isApi?r.serverPath+r.file.path:r.file.path,t.B4B)}}function $e(o,m){1&o&&(t.j41(0,"tr",73)(1,"th"),t.EFF(2,"#"),t.k0s(),t.j41(3,"th",74),t.EFF(4," stores.items.smallUnit "),t.k0s(),t.j41(5,"th",74),t.EFF(6," stores.items.largeUnit "),t.k0s(),t.j41(7,"th",74),t.EFF(8," stores.items.conversionFactor "),t.k0s(),t.nrm(9,"th",75),t.k0s())}function Ye(o,m){if(1&o){const n=t.RV6();t.j41(0,"tr",76)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"button",77),t.nI1(11,"translate"),t.bIt("click",function(){const e=t.eBV(n).rowIndex,a=t.XpG(2);return t.Njj(a.removeUnitsData(e))}),t.nrm(12,"i",78),t.k0s()()()}if(2&o){const n=m.$implicit,i=m.rowIndex;t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(n.smallUnitId),t.R7$(2),t.JRh(n.largeUnitId),t.R7$(2),t.JRh(n.conversionFactor),t.R7$(2),t.FS9("pTooltip",t.bMT(11,5,"general.delete"))}}function Oe(o,m){1&o&&(t.j41(0,"tr")(1,"td",79),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"orderManagement.order.noData")))}function Pe(o,m){if(1&o){const n=t.RV6();t.j41(0,"div",27)(1,"div",57)(2,"div",58)(3,"label",30),t.EFF(4,"stores.items.smallUnit"),t.k0s(),t.j41(5,"div")(6,"ng-select",59),t.nI1(7,"translate"),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.unitForm.smallUnitId,e)||(a.unitForm.smallUnitId=e),t.Njj(e)}),t.k0s()()(),t.j41(8,"div",58)(9,"label",30),t.EFF(10,"stores.items.largeUnit"),t.k0s(),t.j41(11,"div")(12,"ng-select",60),t.nI1(13,"translate"),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.unitForm.largeUnitId,e)||(a.unitForm.largeUnitId=e),t.Njj(e)}),t.k0s()()(),t.j41(14,"div",58)(15,"label",61),t.EFF(16,"stores.items.conversionFactor"),t.k0s(),t.j41(17,"input",62),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.unitForm.conversionFactor,e)||(a.unitForm.conversionFactor=e),t.Njj(e)}),t.k0s()(),t.j41(18,"div",63)(19,"span",64),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.addUnitsData())}),t.nrm(20,"i",65),t.k0s(),t.j41(21,"span",66),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.clearUnitsData())}),t.nrm(22,"i",67),t.k0s()(),t.j41(23,"div",68)(24,"p-table",69),t.DNE(25,$e,10,0,"ng-template",70)(26,Ye,13,7,"ng-template",71)(27,Oe,4,3,"ng-template",72),t.k0s()()()()}if(2&o){const n=t.XpG();t.R7$(6),t.FS9("bindLabel","en"==n.lang?"nameEn":"nameAR"),t.FS9("placeholder",t.bMT(7,15,"stores.items.smallUnit")),t.Y8G("items",n.units)("multiple",!1),t.R50("ngModel",n.unitForm.smallUnitId),t.R7$(6),t.FS9("bindLabel","en"==n.lang?"nameEn":"nameAR"),t.FS9("placeholder",t.bMT(13,17,"stores.items.largeUnit")),t.Y8G("items",n.units)("multiple",!1),t.R50("ngModel",n.unitForm.largeUnitId),t.R7$(5),t.R50("ngModel",n.unitForm.conversionFactor),t.R7$(2),t.Aen(n.unitForm.smallUnitId&&n.unitForm.largeUnitId&&n.unitForm.conversionFactor?"":"pointer-events: none; opacity:70%"),t.R7$(5),t.Y8G("value",n.unitsList)}}let pt=(()=>{class o extends w.w{constructor(n,i,e,a,l,r,u,D,N,V,R,z,at){super(n,i,u,l,e,a,r),this.baseService=l,this.service=D,this.storesService=N,this.unitsService=V,this.excelService=R,this._formDataService=z,this.router=at,this.editItem="stores.items.editItem",this.addItem="stores.items.addItem",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.unitsList=[],this.units=[],this.stores=[{id:1,name:"Store"}],this.isResolveList=!0,this.file={isApi:!1,path:""},this.unitForm={},this.form={file:"",storeItemUnits:[]},this.serverPath=it.c.mediaUrl,this.configRoute(),this.getStores(),this.getUnits(),this.breadCrumbItems=[{label:"layout.sidebar.store"},{label:"stores.items.title",active:!0,url:"stores/items"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}]}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(n=>{let i=n.data?.data;i&&(this.isEditForm=!0,this.form=i)},()=>{this.alertService.error()})}getStores(){this.storesService.getDropDown().pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.stores=n.data},()=>{this.alertService.error()})}getUnits(){this.unitsService.getDropDown().pipe((0,h.Q)(this.notifier)).subscribe(n=>{this.units=n.data},()=>{this.alertService.error()})}addUnitsData(){this.unitsList.push({smallUnitId:"en"==this.lang?this.unitForm.smallUnitId.nameEn:this.unitForm.smallUnitId.nameAr,largeUnitId:"en"==this.lang?this.unitForm.largeUnitId.nameEn:this.unitForm.largeUnitId.nameAr,conversionFactor:this.unitForm.conversionFactor}),this.form.storeItemUnits.push({smallUnitId:this.unitForm.smallUnitId.id,largeUnitId:this.unitForm.largeUnitId.id,conversionFactor:this.unitForm.conversionFactor}),console.log(this.unitsList),console.log(this.form.storeItemUnits),this.unitForm={}}clearUnitsData(){this.unitForm={}}removeUnitsData(n){this.unitsList.splice(n,1),this.form.storeItemUnits.splice(n,1)}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}goBack(){this.router.navigateByUrl("/stores/items")}registerEntity(){let n=this._formDataService.formatFormData(this.form);this.baseService.register(n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,st.W)(i=>(0,rt.$)(i))).subscribe(i=>{i.success?(this.submitFunished(),this.goBack()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let n=this._formDataService.formatFormData(this.form);this.baseService.ToEdit(this.form.id,n).pipe((0,b.O)(),(0,x.c)(this.mainDelay),(0,y.Z)(),(0,h.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?(this.submitFunished(),this.goBack()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onFileChanged(n){if(n.target.files&&n.target.files[0]){let i=n.target.files.length;for(let e=0;e<i;e++){let a=new FileReader;this.form.file=n.target.files.item(e),a.onload=l=>{this.file={isApi:!1,path:l.target.result}},a.readAsDataURL(n.target.files[e])}}}removeImage(){console.log(),this.form.file="",this.file={id:0,path:""}}setDefaultImage(n,i){n.target.src=i}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g.nX),t.rXU(_.c$),t.rXU(G.u),t.rXU(s.vh),t.rXU(W),t.rXU(C.eD),t.rXU(p.Bq),t.rXU(A.m),t.rXU(tt.a),t.rXU(lt.S),t.rXU(O.V),t.rXU(ct.Q),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-store-items-operation"]],features:[t.Vt3],decls:26,vars:9,consts:[["formEntity","ngForm"],["Arrow","ngbNav"],["nameEn","ngModel"],["nameAr","ngModel"],["quantity","ngModel"],["minimumQuantity","ngModel"],["storeId","ngModel"],["FileInput",""],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],[3,"ngSubmit"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","stores.items.basicData",1,"d-sm-block"],["ngbNavContent",""],["translate","stores.storesItemsUnits.title",1,"d-sm-block"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"hasProgressBar","fgsType","loaderId"],[1,"mx-2",2,"min-height","60vh"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","quantity","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","quantity","type","number","required","","id","quantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","minimumQuantity","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","minimumQuantity","type","number","required","","id","minimumQuantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["name","storeId","bindValue","id","id","storeId","required","",3,"ngModelChange","items","multiple","bindLabel","placeholder","ngModel"],[1,"col-12","col-md-12","mb-3","d-flex","justify-content-center"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],["class","avatar-title bg-light border rounded-circle text-muted cursor-pointer",4,"ngIf"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","justify-content-center","w-100"],[1,"avatar-xl-custom","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: -3px; right: -4px; font-size: 1rem;\n                                                border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-xl-custom","h-auto",3,"src"],["translate","",1,"text-danger","text-center"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","-3px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[1,"row","mt-3"],[1,"col-6","col-md-3","mb-3"],["name","smallUnitId","id","smallUnitId",3,"ngModelChange","items","multiple","bindLabel","placeholder","ngModel"],["name","largeUnitId","id","largeUnitId",3,"ngModelChange","items","multiple","bindLabel","placeholder","ngModel"],["for","conversionFactor","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","conversionFactor","type","number","id","conversionFactor",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3","mb-3","d-flex","align-items-end","justify-content-center"],[1,"btn","btn-sm","btn-success","edit-list","mx-2","mb-1",3,"click"],[1,"ri-check-double-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-danger","edit-list","mx-2","mb-1",3,"click"],[1,"ri-close-circle-fill","align-bottom","mx-1"],[1,"mt-3"],[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,""],["translate",""],[2,"width","20%"],[1,"fs-5"],["tooltipPosition","top",1,"btn","btn-sm","btn-danger","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-delete-bin-3-fill","align-bottom","mx-1"],["colspan","5"]],template:function(i,e){if(1&i){const a=t.RV6();t.nrm(0,"app-breadcrumbs",8),t.nI1(1,"translate"),t.j41(2,"div",9)(3,"div",10)(4,"div",11)(5,"form",12,0),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(e.onSubmit())}),t.j41(7,"ul",13,1)(9,"li",14)(10,"a",15)(11,"span",16),t.nrm(12,"i",17),t.k0s(),t.nrm(13,"span",18),t.k0s(),t.DNE(14,Xe,48,22,"ng-template",19),t.k0s(),t.j41(15,"li",14)(16,"a",15)(17,"span",16),t.nrm(18,"i",17),t.k0s(),t.nrm(19,"span",20),t.k0s(),t.DNE(20,Pe,28,19,"ng-template",19),t.k0s()(),t.j41(21,"div",21),t.nrm(22,"div",22),t.k0s(),t.j41(23,"div",23),t.nrm(24,"button",24),t.j41(25,"button",25),t.bIt("click",function(){return t.eBV(a),t.Njj(e.goBack())}),t.k0s()()()()()()}if(2&i){const a=t.sdS(6),l=t.sdS(8);t.FS9("title",e.isEditForm?t.bMT(1,7,e.editItem):e.addItem),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(7),t.Y8G("activeId",1),t.R7$(2),t.Y8G("ngbNavItem",1),t.R7$(6),t.Y8G("ngbNavItem",2),t.R7$(7),t.Y8G("ngbNavOutlet",l),t.R7$(2),t.Y8G("disabled",!a.valid)}},dependencies:[s.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,L.m,_.Mm,k.XI,X.Ei,C.Cv,Y.vr,p.md,P.m,M.m,_.D9],encapsulation:2})}}return o})();var ze=d(7673);const Qe=[{path:"list",component:Et,resolve:{data:yt},canActivate:[U.g],data:{permission:["order.view"]}},{path:"items",component:zt,resolve:{data:Ht},canActivate:[U.g],data:{permission:["order.view"]}},{path:"stocks",component:ae,resolve:{data:se},canActivate:[U.g],data:{}},{path:"setting",component:De,resolve:{data:Ne},canActivate:[U.g],data:{}},{path:"items/register",component:pt,canActivate:[U.g],data:{}},{path:"items/edit",component:pt,resolve:{data:(()=>{class o{constructor(n,i,e){this.router=n,this.storeItemService=i,this.alertService=e}resolve(n,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return""===a?(this.alertService.error(),this.router.navigateByUrl("/clients"),(0,ze.of)(null)):this.storeItemService.getById(a)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(g.Ix),t.KVO(W),t.KVO(G.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},canActivate:[U.g],data:{}},{path:"stocks/add-details/:id",component:ce,canActivate:[U.g],data:{}},{path:"stocks/show-details/:id",component:he,canActivate:[U.g],data:{}}];let Ke=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(Qe),g.iI]})}}return o})(),Je=(()=>{class o{constructor(){(0,v.eV)(f().loadAnimation)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[s.MD,c.YN,c.X1,p.zH,p.Pv,p.c9,S.ND,B.r,Ke,j.G,_.h,k.bG,H.q4,Q.H_,p.c9,C.th,Y.MQ,p.n8,I.j,p._f,M.S]})}}return o})()},40724:($,T,d)=>{d.d(T,{b:()=>Y});var s=d(54438),c=d(73955),p=d(60177),S=d(69005),B=d(94575);const v=[[["","menuBtn",""]],[["","control",""]],[["","action",""]]],E=["[menuBtn]","[control]","[action]"];function f(I,M){1&I&&(s.j41(0,"span"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&I&&(s.R7$(),s.JRh(s.bMT(2,1,"general.table.all")))}function j(I,M){if(1&I){const g=s.RV6();s.j41(0,"a",17),s.bIt("click",function(){s.eBV(g),s.XpG(2);const b=s.sdS(11);return s.Njj(b.toggle())}),s.nrm(1,"i",18)(2,"span",19),s.k0s()}if(2&I){const g=s.XpG(2);s.BMQ("aria-expanded",!g.isCollapsed)}}function _(I,M){if(1&I){const g=s.RV6();s.j41(0,"div",21)(1,"button",22),s.nrm(2,"i",23)(3,"span",24),s.k0s(),s.j41(4,"ul",25)(5,"li",26),s.bIt("click",function(){s.eBV(g);const b=s.XpG(3);return s.Njj(b.onExportXlsx())}),s.j41(6,"a",27),s.nrm(7,"span",28),s.k0s()(),s.j41(8,"li",26),s.bIt("click",function(){s.eBV(g);const b=s.XpG(3);return s.Njj(b.onExportPDF())}),s.j41(9,"a",27),s.nrm(10,"span",29),s.k0s()()()()}if(2&I){const g=s.XpG(3);s.FS9("placement","en"===g.lang?"bottom-start":"bottom-end"),s.R7$(),s.Y8G("disabled",g.totalItems<=0)}}function k(I,M){if(1&I&&(s.qex(0),s.DNE(1,_,11,2,"div",20),s.bVm()),2&I){const g=s.XpG(2);s.R7$(),s.Y8G("hasPermission",g.exportPermission)}}function H(I,M){if(1&I){const g=s.RV6();s.j41(0,"a",31),s.bIt("click",function(){s.eBV(g);const b=s.XpG(3);return s.Njj(b.onAddNew())}),s.nrm(1,"i",32),s.j41(2,"span"),s.EFF(3),s.nI1(4,"translate"),s.k0s()()}if(2&I){const g=s.XpG(3);s.R7$(3),s.JRh(s.bMT(4,1,g.newLocal))}}function Q(I,M){if(1&I&&(s.qex(0),s.DNE(1,H,5,3,"a",30),s.bVm()),2&I){const g=s.XpG(2);s.R7$(),s.Y8G("hasPermission",g.addPermission)}}function C(I,M){if(1&I&&(s.j41(0,"div",15),s.DNE(1,j,3,1,"a",16)(2,k,2,1,"ng-container",4)(3,Q,2,1,"ng-container",4),s.SdG(4,2),s.k0s()),2&I){const g=s.XpG();s.R7$(),s.Y8G("ngIf",g.showSearch),s.R7$(),s.Y8G("ngIf",g.showExport),s.R7$(),s.Y8G("ngIf",g.showAdd)}}let Y=(()=>{class I{constructor(g){this.translateService=g,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new s.bkB,this.exportXlsx=new s.bkB,this.exportPDF=new s.bkB,this.search=new s.bkB,this.reset=new s.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(h){return new(h||I)(s.rXU(c.c$))}}static{this.\u0275cmp=s.VBU({type:I,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:E,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(h,b){if(1&h){const x=s.RV6();s.NAR(v),s.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),s.SdG(4),s.k0s(),s.j41(5,"span"),s.DNE(6,f,3,3,"span",4),s.EFF(7),s.nI1(8,"translate"),s.k0s()(),s.DNE(9,C,5,3,"div",5),s.k0s(),s.j41(10,"div",6,0),s.mxI("ngbCollapseChange",function(F){return s.eBV(x),s.DH7(b.isCollapsed,F)||(b.isCollapsed=F),s.Njj(F)}),s.j41(12,"div",7),s.SdG(13,1),s.j41(14,"div",8)(15,"button",9),s.bIt("click",function(){return s.eBV(x),s.Njj(b.onSearch())}),s.nrm(16,"i",10)(17,"span",11),s.k0s(),s.j41(18,"button",12),s.bIt("click",function(){return s.eBV(x),s.Njj(b.onReset())}),s.nrm(19,"i",13)(20,"span",14),s.k0s()()()()()}2&h&&(s.R7$(6),s.Y8G("ngIf",b.showAllStr),s.R7$(),s.Lme(" ",s.bMT(8,5,b.title)," ",b.titleMore,""),s.R7$(2),s.Y8G("ngIf",b.showAction),s.R7$(),s.R50("ngbCollapse",b.isCollapsed))},dependencies:[p.bT,S.tg,S.do,S.U0,c.Mm,S.$G,B.p,c.D9],encapsulation:2})}}return I})()},88148:($,T,d)=>{d.d(T,{p:()=>p});var s=d(54438),c=d(73955);let p=(()=>{class S{static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275cmp=s.VBU({type:S,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(E,f){1&E&&(s.j41(0,"span",0),s.EFF(1),s.k0s(),s.nrm(2,"span",1),s.j41(3,"span",0),s.EFF(4),s.k0s(),s.nrm(5,"span",2)),2&E&&(s.R7$(),s.JRh(f.pagination.totalItems>f.pagination.pageNumber*f.pagination.pageSize?f.pagination.pageNumber*f.pagination.pageSize:f.pagination.totalItems),s.R7$(3),s.JRh(f.pagination.totalItems))},dependencies:[c.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return S})()},91580:($,T,d)=>{d.d(T,{g:()=>B});var s=d(54438),c=d(60177),p=d(89417);function S(v,E){if(1&v&&(s.j41(0,"option"),s.EFF(1),s.k0s()),2&v){const f=E.$implicit;s.R7$(),s.JRh(f)}}let B=(()=>{class v{constructor(){this.lengthChange=new s.bkB}ListItemChange(f){this.lengthChange.emit(f)}static{this.\u0275fac=function(j){return new(j||v)}}static{this.\u0275cmp=s.VBU({type:v,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(j,_){1&j&&(s.j41(0,"div",0),s.nrm(1,"span",1),s.j41(2,"select",2),s.bIt("change",function(H){return _.ListItemChange(H)}),s.DNE(3,S,2,1,"option",3),s.k0s()()),2&j&&(s.R7$(3),s.Y8G("ngForOf",_.lengthTable))},dependencies:[c.Sq,p.xH,p.y7],encapsulation:2})}}return v})()}}]);