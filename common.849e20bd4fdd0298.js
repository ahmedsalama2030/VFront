"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[76],{94562:(O,o,e)=>{e.d(o,{c:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"Position/")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}GetPositionsByDepartment(t){return this.http.get(this.baseUrl+"GetPositionsByDepartment/"+t)}GetHeadDropDown(){return this.http.get(this.baseUrl+"GetHeadDropDown")}GetDropDown(){return this.http.get(this.baseUrl+"GetDropDown")}GetManagementChainAsync(t){return this.http.get(this.baseUrl+"GetManagementChainAsync/"+t)}delete(t){return this.http.delete(`${this.baseUrl}SoftDelete/${t}`,this.httpOptions)}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},95883:(O,o,e)=>{e.d(o,{O:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"Branch/")}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},91020:(O,o,e)=>{e.d(o,{e:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"CancelReason/")}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},75312:(O,o,e)=>{e.d(o,{Y:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"ReturnReason/")}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},56009:(O,o,e)=>{e.d(o,{j:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"ServiceCategory/")}serviceCategoryLookUp(){return this.http.get(this.baseUrl+"serviceCategoryLookUp")}serviceCategoryGetDropDown(){return this.http.get(this.baseUrl+"GetDropDown")}getServiceCategoryByType(t=!0){return this.http.get(this.baseUrl+"GetServiceCategoryByType/"+t)}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},34578:(O,o,e)=>{e.d(o,{N:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"PositionName/")}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},79284:(O,o,e)=>{e.d(o,{G:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"WorkTime/")}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},45943:(O,o,e)=>{e.d(o,{L:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"ProductOffer/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}GetActiveOffer(){return this.http.get(this.baseUrl+"GetActiveOffer")}checkItemOffer(t,n){return this.checkOffers(t,n)}checkOffers(t,n){const l=n.filter(r=>{const E=r.productServicesX.map(v=>v.id),h=t.items.filter(v=>E.includes(v.itemId)&&!v.isFree).reduce((v,D)=>v+D.quantity,0);if(6===r.offerType){const v=r.productOfferQuantities.filter(D=>h>=D.quantityX);if(v.length){const D=v.reduce((p,P)=>P.quantityX>p.quantityX?P:p);return r.quantityX=D.quantityX,r.quantityY=D.quantityY,!0}return!1}return h>=r.quantityX});return 0===l.length?(t.itemsOffers=[],t.items=t.items.filter(r=>!r.isFree),t):(t.itemsOffers=[],t.offerNames=[],l.forEach(r=>{[1,6].includes(r.offerType)&&this.checkOfferXToY(t,r)}),t)}checkOfferXToY(t,n){const l=t.items.reduce((E,d)=>E+(n.productServicesX.some(v=>v.id===d.itemId&&!d.isFree)?d.quantity:0),0);if(n.quantityY=this.getBestQuantity(l,n),t.items.some(E=>n.productServicesX.some(d=>d.id===E.itemId))&&l>=n.quantityX){n.productServicesY.forEach(d=>{d.isSelected=!1,d.quantityY=n.quantityY}),t.offerNames.push({id:n.id,title:n.title,isSelected:!1,count:n.productServicesY.length});const E=6===n.offerType?this.resetQuantityX(n.quantityY,n.productServicesY):n.productServicesY;t.itemsOffers.push(...E)}else t.itemsOffers=[];return this.updateLimit(t)}updateLimit(t){return t.items.filter(n=>n.isFree).forEach(n=>{const l=t.itemsOffers.find(r=>r.id===n.itemId);l&&(n.quantityY=l.quantityY,n.quantity=Math.min(n.quantity,l.quantityY))}),t.items=this.removeExceededOfferItems(t.items),t}removeExceededOfferItems(t){const n={};t.forEach(r=>{const E=r.offerId;n[E]||(n[E]={total:0,max:r.quantityY}),n[E].total+=r.quantity});const l=Object.entries(n).filter(([r,E])=>E.total>E.max).map(([r])=>+r);return t.filter(r=>!l.includes(r.offerId))}resetQuantityX(t,n){return n.map(l=>({...l,quantityY:t}))}getBestQuantity(t,n){let l=t,r=0;const E=[...n.productOfferQuantities].sort((d,h)=>h.quantityX-d.quantityX);for(let d of E){const h=Math.floor(l/d.quantityX);h>0&&(r+=h*d.quantityY,l-=h*d.quantityX)}return r}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},63022:(O,o,e)=>{e.d(o,{U:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"Invoice/")}SaveInvoice(t){return this.http.post(this.baseUrl+"SaveInvoice",t)}GetOrderServiceAndPayment(t){return this.http.get(this.baseUrl+`GetOrderServiceAndPayment/${t}`)}GetByCode(t){return this.http.get(this.baseUrl+`GetByCode/${t}`)}SendInvoice(t){return this.http.post(this.baseUrl+`SendInvoice/${t}`,{})}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},34618:(O,o,e)=>{e.d(o,{S:()=>u});var i=e(67569),c=e(45312),a=e(54438),_=e(21626);let u=(()=>{class s extends i.d{constructor(t){super(t,c.c.apiUrl+"Unit/")}ToDelete(t){return this.http.delete(`${this.baseUrl}${t}`)}ToEdit(t,n){return this.http.put(this.baseUrl+"Edit/"+t,n)}static{this.\u0275fac=function(n){return new(n||s)(a.KVO(_.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},83229:(O,o,e)=>{e.d(o,{s:()=>u});var i=e(39974),c=e(85343),a=e(54360),_=e(58750);function u(s){return(0,i.N)((M,t)=>{let n=!1,l=null,r=null;const E=()=>{if(r?.unsubscribe(),r=null,n){n=!1;const d=l;l=null,t.next(d)}};M.subscribe((0,a._)(t,d=>{r?.unsubscribe(),n=!0,l=d,r=(0,a._)(t,E,c.l),(0,_.Tg)(s(d)).subscribe(r)},()=>{E(),t.complete()},void 0,()=>{l=r=null}))})}}}]);