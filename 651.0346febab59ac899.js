"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[651],{12822:(Ye,pe,u)=>{u.d(pe,{l:()=>ce});var m=u(67569),d=u(45312),_=u(54438),z=u(21626);let ce=(()=>{class B extends m.d{constructor(A){super(A,d.c.apiUrl+"Channel/")}static{this.\u0275fac=function(me){return new(me||B)(_.KVO(z.Qq))}}static{this.\u0275prov=_.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}}return B})()},16229:(Ye,pe,u)=>{u.d(pe,{m:()=>ce});var m=u(67569),d=u(45312),_=u(54438),z=u(21626);let ce=(()=>{class B extends m.d{constructor(A){super(A,d.c.apiUrl+"District/")}getByCityId(A){return this.http.get(this.baseUrl+"getByCityId/"+A)}static{this.\u0275fac=function(me){return new(me||B)(_.KVO(z.Qq))}}static{this.\u0275prov=_.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}}return B})()},96402:(Ye,pe,u)=>{u.d(pe,{N:()=>ce});var m=u(67569),d=u(45312),_=u(54438),z=u(21626);let ce=(()=>{class B extends m.d{constructor(A){super(A,d.c.apiUrl+"Service/"),this.ServiceStatus=[{name:"Published",id:1},{name:"NotPublish",id:2},{name:"Draft",id:3}]}deleteImage(A){return this.http.delete(this.baseUrl+"deleteImage/"+A,this.httpOptions)}deleteUnit(A){return this.http.delete(this.baseUrl+"deleteUnit/"+A,this.httpOptions)}getItemDropDown(){return this.http.get(this.baseUrl+"GetItemDropDown")}servicesByCategory(A){return this.http.post(this.baseUrl+"servicesByCategory",A)}GetServiceList(A,me){return this.http.get(this.baseUrl+"GetServiceList/"+me+"/"+A)}SyncOdoo(A){return this.http.post(this.baseUrl+"SyncOdoo",A)}static{this.\u0275fac=function(me){return new(me||B)(_.KVO(z.Qq))}}static{this.\u0275prov=_.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}}return B})()},70053:(Ye,pe,u)=>{u.d(pe,{n:()=>ce});var m=u(67569),d=u(45312),_=u(54438),z=u(21626);let ce=(()=>{class B extends m.d{constructor(A){super(A,d.c.apiUrl+"Team/")}GetTeamLookUp(){return this.http.get(this.baseUrl+"TeamLookUp")}getAllDropDown(){return this.http.get(this.baseUrl+"GetAllDropDown")}static{this.\u0275fac=function(me){return new(me||B)(_.KVO(z.Qq))}}static{this.\u0275prov=_.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}}return B})()},3651:(Ye,pe,u)=>{u.r(pe),u.d(pe,{SalesModule:()=>w0});var m=u(60177),d=u(89417),_=u(69005),z=u(91022),ce=u(70255),B=u(63789),xi=u(98982),A=u.n(xi),me=u(53978),b=u(73955),E=u(68709),yi=u(65430),be=u(41631),R=u(1530),$=u(72510),w=u(51188),e=u(54438),L=u(21413),Pe=u(70152),Ve=u(23294),le=u(25558),p=u(56977),k=u(37021),M=u(35335),T=u(45236),S=u(70980),H=u(99437),Q=u(18810),Ie=u(7673),f=u(36158),q=u(45312),re=u(70072),nt=u(17478),D=u(3888),ve=u(75922),_t=u(96402),Ci=u(45943),Si=u(95279),X=u(29935),W=u(94575),ke=u(38542);function Ii(a,s){1&a&&(e.j41(0,"div")(1,"div",2)(2,"div",3),e.nrm(3,"span",4),e.j41(4,"div",5),e.nrm(5,"span",6)(6,"span",7),e.k0s()(),e.nrm(7,"div",8),e.k0s()())}function ki(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"img",14),e.bIt("error",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()(),e.j41(6,"div",15)(7,"div",16)(8,"div",17)(9,"h5",18),e.EFF(10),e.k0s(),e.j41(11,"div",19)(12,"span",20),e.nrm(13,"i",21),e.EFF(14),e.k0s(),e.j41(15,"span",22),e.EFF(16),e.nI1(17,"translate"),e.k0s()()(),e.j41(18,"div",23)(19,"div",24),e.nrm(20,"i",25),e.j41(21,"a",26),e.EFF(22),e.k0s()(),e.j41(23,"div",24),e.nrm(24,"i",27),e.j41(25,"a",26),e.EFF(26),e.k0s()(),e.j41(27,"div",24),e.nrm(28,"i",28),e.j41(29,"span",29),e.EFF(30),e.nI1(31,"translate"),e.k0s()(),e.j41(32,"div",24),e.nrm(33,"i",30),e.j41(34,"span",29),e.EFF(35),e.nI1(36,"translate"),e.k0s()(),e.j41(37,"div",24),e.nrm(38,"i",31),e.j41(39,"span",29),e.EFF(40),e.nI1(41,"translate"),e.k0s()()()()()(),e.j41(42,"div",32)(43,"div",33)(44,"div",34)(45,"div",10)(46,"h6",35),e.nrm(47,"i",36)(48,"span",37),e.k0s(),e.j41(49,"div",38)(50,"div",33)(51,"div",39)(52,"div",40)(53,"div",41)(54,"div",42),e.nrm(55,"i",43),e.k0s()(),e.j41(56,"div",44)(57,"div",45),e.EFF(58,"sales.salesOrder.creditLimit"),e.k0s(),e.j41(59,"div",29),e.EFF(60),e.k0s()()(),e.j41(61,"div",40)(62,"div",41)(63,"div",42),e.nrm(64,"i",46),e.k0s()(),e.j41(65,"div",47),e.nrm(66,"div",48),e.j41(67,"div",29),e.EFF(68),e.k0s()()()()(),e.j41(69,"div",49)(70,"div",50),e.nrm(71,"div",51),e.k0s(),e.j41(72,"div",52)(73,"small",53),e.EFF(74,"sales.salesOrder.CurrentUsage"),e.k0s(),e.j41(75,"small",54),e.EFF(76),e.nI1(77,"number"),e.k0s()()()()()()()()()(),e.j41(78,"div",55)(79,"div",10)(80,"div",56)(81,"h6",57),e.nrm(82,"i",58),e.j41(83,"span",59),e.EFF(84,"sales.salesOrder.terms"),e.k0s()()(),e.j41(85,"textarea",60),e.nI1(86,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.terms,i)||(r.form.terms=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(5),e.Y8G("src",t.mediaUrl+(null==t.clientInfo?null:t.clientInfo.externalPhotoPath),e.B4B),e.R7$(5),e.JRh(null==t.clientInfo?null:t.clientInfo.name),e.R7$(4),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.vatNumber)||"N/A"," "),e.R7$(2),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.clientGroupName)||e.bMT(17,26,"sales.salesOrder.clientGroupName")," "),e.R7$(5),e.Mz_("href","tel:",null==t.clientInfo?null:t.clientInfo.mobile,"",e.B4B),e.R7$(),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.mobile)||"N/A"," "),e.R7$(3),e.Mz_("href","mailto:",null==t.clientInfo?null:t.clientInfo.email,"",e.B4B),e.R7$(),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.email)||"N/A"," "),e.R7$(4),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.nationalAddress)||e.bMT(31,28,"sales.salesOrder.Notprovided")," "),e.R7$(5),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.region)||e.bMT(36,30,"sales.salesOrder.Notspecified")," "),e.R7$(5),e.SpI(" ",(null==t.clientInfo?null:t.clientInfo.priceList)||e.bMT(41,32,"sales.salesOrder.Notspecified")," "),e.R7$(20),e.JRh((null==t.clientInfo?null:t.clientInfo.creditLimit)||"0"),e.R7$(8),e.JRh((null==t.clientInfo?null:t.clientInfo.balance)||"0"),e.R7$(3),e.xc7("width",t.usagePercent+"%"),e.AVh("bg-success",t.usagePercent<=70)("bg-warning",t.usagePercent>70&&t.usagePercent<=90)("bg-danger",t.usagePercent>90),e.R7$(5),e.SpI("",e.i5U(77,34,(null==t.clientInfo?null:t.clientInfo.balance)/(null==t.clientInfo?null:t.clientInfo.creditLimit)*100||0,"1.0-0"),"%"),e.R7$(9),e.Y8G("placeholder",e.bMT(86,37,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",t.form.terms)}}let Ti=(()=>{class a{constructor(t){this.offerOrder=t,this.form={},this.errorMessage="",this.mediaUrl=q.c.mediaUrl,this.isOrderEdit=!0}ngOnInit(){this.form=this.offerOrder.salesOrderForm}setDefaultImage(t,n){t.target.src=n}ngOnDestroy(){}get usagePercent(){return this.clientInfo?.creditLimit&&this.clientInfo?.balance?this.clientInfo.balance/this.clientInfo.creditLimit*100:0}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(re.A))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-client-info-salse"]],inputs:{form:"form",isOrderEdit:"isOrderEdit",clientInfo:"clientInfo"},decls:3,vars:2,consts:[["clientInfoContent",""],[4,"ngIf","ngIfElse"],[1,"placeholder-glow"],[1,"d-flex","gap-3","align-items-center","mb-3"],[1,"placeholder","rounded-3",2,"width","90px","height","90px"],[1,"flex-grow-1"],[1,"placeholder","col-6","mb-2"],[1,"placeholder","col-4"],[1,"placeholder","col-12","mb-2",2,"height","100px"],[1,"card","border-0","shadow-sm","rounded-3","mb-4","mt-3","overflow-hidden","animate-fade-in-up"],[1,"card-body","p-3"],[1,"row","align-items-center","mb-3"],[1,"col-auto","pe-3"],[1,"position-relative",2,"width","90px","height","90px"],["alt","Client Photo","loading","lazy","decoding","async","width","90","height","90",1,"rounded-3","border","border-2","shadow-sm",2,"width","100%","height","100%","object-fit","cover",3,"error","src"],[1,"col","ps-0"],[1,"d-flex","flex-column","justify-content-between"],[1,"mb-2"],[1,"mb-1","text-primary","fw-bold"],[1,"d-flex","flex-wrap","align-items-center","gap-2"],[1,"badge","bg-light","text-dark"],[1,"ri-hashtag","text-secondary"],[1,"badge","bg-primary-subtle","text-primary","rounded-pill"],[1,"d-flex","flex-wrap","align-items-center","gap-3"],[1,"d-flex","align-items-center","text-muted","small"],[1,"ri-phone-line","text-primary","me-1"],[1,"text-decoration-none","text-break","fw-medium",3,"href"],[1,"ri-mail-line","text-primary","me-1"],[1,"ri-home-line","text-primary","me-1"],[1,"fw-medium"],[1,"ri-map-2-line","text-primary","me-1"],[1,"ri-percent-fill","text-danger","me-1"],[1,"row","g-3"],[1,"col-12"],[1,"card","h-100","shadow","border-0","bg-light","bg-opacity-50","rounded-3"],[1,"card-title","text-primary","mb-3"],[1,"ri-funds-line","me-1"],["translate","sales.salesOrder.financialInfo"],[1,"row","g-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0"],[1,"avatar","avatar-xs","bg-primary","bg-opacity-10","rounded","p-1"],[1,"ri-money-dollar-circle-line","text-primary"],[1,"flex-grow-1","ms-2","text-start"],["translate","",1,"text-muted","small"],[1,"ri-bank-card-line","text-primary"],[1,"flex-grow-1","ms-2","text-end"],["translate","sales.salesOrder.Balance",1,"text-muted","small"],[1,"col-12","mt-2"],[1,"progress",2,"height","5px"],["role","progressbar","aria-valuenow","usagePercent","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"d-flex","justify-content-between","mt-1"],["translate","",1,"text-muted"],[1,"text-success"],[1,"card","border-0","shadow-sm","rounded-3","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0","fw-semibold"],[1,"ri-file-list-3-line","me-2","text-primary"],["translate",""],["id","terms","rows","4","name","terms","type","text",1,"form-control","border-0","bg-light",3,"ngModelChange","placeholder","ngModel"]],template:function(n,i){if(1&n&&e.DNE(0,Ii,8,0,"div",1)(1,ki,87,39,"ng-template",null,0,e.C5r),2&n){const r=e.sdS(2);e.Y8G("ngIf",!i.clientInfo)("ngIfElse",r)}},dependencies:[m.bT,d.me,d.BC,d.vS,b.Mm,m.QX,b.D9],styles:[".animate-fade-in-up[_ngcontent-%COMP%] {\n        opacity: 0;\n        transform: translateY(20px);\n        animation: _ngcontent-%COMP%_fadeInUp 0.7s ease-out forwards;\n    }\n    \n    @keyframes _ngcontent-%COMP%_fadeInUp {\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }"]})}}return a})();var ji=u(25947),wi=u(33121),xe=u(12260),ae=u(15084);const Mi=a=>({"border-primary shadow-sm":a});function Ri(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",26)(1,"div",32),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.locationChange(i))}),e.j41(2,"input",33),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.k0s(),e.j41(3,"label",34)(4,"span",35),e.EFF(5),e.k0s(),e.j41(6,"span",36),e.EFF(7),e.k0s()(),e.j41(8,"div",37)(9,"div",38)(10,"button",39),e.bIt("click",function(i){const r=e.eBV(t).$implicit,o=e.XpG(),l=e.sdS(26);return i.stopPropagation(),e.Njj(o.openEditModal(r,l))}),e.nrm(11,"i",40)(12,"span",41),e.k0s(),e.j41(13,"button",42),e.bIt("click",function(i){const r=e.eBV(t).$implicit,o=e.XpG(),l=e.sdS(28);return i.stopPropagation(),e.Njj(o.confirm(r.id,l))}),e.nrm(14,"i",43)(15,"span",44),e.k0s()()()()()}if(2&a){const t=s.$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(9,Mi,t.isSelected)),e.R7$(),e.Mz_("id","S",t.id,""),e.Y8G("checked",t.isSelected),e.R7$(),e.Mz_("for","S",t.id,""),e.R7$(2),e.Lme(" ",t.cityName," - ",t.name," "),e.R7$(2),e.SpI(" ",t.address," ")}}function Fi(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.register"),e.k0s())}function Oi(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.edit"),e.k0s())}function Vi(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Ei(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Di(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",45)(1,"div",46)(2,"h4",47),e.DNE(3,Fi,2,0,"span",48)(4,Oi,2,0,"span",48),e.k0s(),e.j41(5,"button",49),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",50),e.nrm(7,"ngx-ui-loader",51),e.j41(8,"form",52,2),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(10,"div",24)(11,"div",53),e.nrm(12,"label",54),e.j41(13,"ng-select",55,3),e.nI1(15,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.cityCode,i)||(r.formEdit.cityCode=i),e.Njj(i)}),e.k0s()(),e.j41(16,"div",56)(17,"div",57)(18,"label",58),e.EFF(19,"general.table.isMain"),e.k0s(),e.j41(20,"div",59)(21,"p-inputSwitch",60),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.isMain,i)||(r.formEdit.isMain=i),e.Njj(i)}),e.k0s()()()(),e.j41(22,"div",61),e.nrm(23,"label",62),e.j41(24,"input",63,4),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.name,i)||(r.formEdit.name=i),e.Njj(i)}),e.k0s(),e.DNE(26,Vi,2,0,"div",64),e.k0s(),e.j41(27,"div",61),e.nrm(28,"label",65),e.j41(29,"textarea",66,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.address,i)||(r.formEdit.address=i),e.Njj(i)}),e.k0s(),e.DNE(31,Ei,2,0,"div",64),e.k0s(),e.j41(32,"div",61),e.nrm(33,"label",67),e.j41(34,"input",68,6),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onUrlChange(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.mapURL,i)||(r.formEdit.mapURL=i),e.Njj(i)}),e.k0s()(),e.j41(36,"div",69),e.nrm(37,"label",70),e.j41(38,"input",71,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.lat,i)||(r.formEdit.lat=i),e.Njj(i)}),e.k0s()(),e.j41(40,"div",69),e.nrm(41,"label",72),e.j41(42,"input",73,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formEdit.lng,i)||(r.formEdit.lng=i),e.Njj(i)}),e.k0s()()(),e.j41(44,"div",74)(45,"button",75),e.nrm(46,"i",76)(47,"span",77),e.k0s()()()()()}if(2&a){const t=e.sdS(9),n=e.sdS(25),i=e.sdS(30),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId","locationOperation"),e.R7$(6),e.FS9("placeholder",e.bMT(15,18,"orderManagement.order.cityName")),e.R50("ngModel",r.formEdit.cityCode),e.Y8G("items",r.cities)("multiple",!1),e.R7$(8),e.R50("ngModel",r.formEdit.isMain),e.R7$(3),e.R50("ngModel",r.formEdit.name),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(3),e.R50("ngModel",r.formEdit.address),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(3),e.R50("ngModel",r.formEdit.mapURL),e.R7$(4),e.R50("ngModel",r.formEdit.lat),e.R7$(4),e.R50("ngModel",r.formEdit.lng),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Ni(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let Pi=(()=>{class a{constructor(t,n,i,r,o,l,c,h){this.modalService=t,this.baseService=n,this.alertService=i,this.ngxLoader=r,this.whatsupService=o,this.whatsAppMessagesService=l,this.cityService=c,this.offerOrder=h,this.submitted=!1,this.form={},this.mainDelay=20,this.notifier=new L.B,this.operationLoader=f.ZW,this.isEditForm=!1,this.loaderOperationShap=f.$$,this.isLoad=!1,this.formEdit={},this.cities=[],this.idSelected=0,this.isOrderEdit=!0,this.modalRefs={}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&this.checkLocation(),this.form.clientLocationId&&this.checkSelected(this.form.clientLocationId),this.GetCities()}confirm(t,n){this.idSelected=t,this.modalService.open(n,{centered:!0})}openModal(t){this.ngxLoader.stopLoader(this.operationLoader),this.submitted=!1,this.modalRefs=this.modalService.open(t,{size:"md",centered:!0})}openEditModal(t,n){this.submitted=!1,this.formEdit=t,this.isEditForm=!0,this.modalRefs=this.modalService.open(n,{size:"md",centered:!0})}changeActiveTab(t){this.nav.select(t)}GetCities(){this.cityService.GetAllDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}registerEntity(t=!1){this.ngxLoader.startLoader("locationOperation");let n=this.mapRegisterForm(this.formEdit);n.isSend=t,this.baseService.AddLocation(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("locationOperation")),(0,H.W)(i=>(0,Q.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(t=!1){this.ngxLoader.startLoader("locationOperation");let n=this.mapForm(this.formEdit);n.isSend=t,this.baseService.EditLocation(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("locationOperation"))).subscribe(i=>{i.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}mapForm(t){let n={...t};return n.agentCode=this.form.clientId,n.cityCode=n.cityCode,n.agentName="",n.mobile="",n.mapURL=n.mapURL,n.isMain=n.isMain,n.lat=n.lat?n.lat.toString():"",n.lng=n.lng?n.lng.toString():"",n}mapRegisterForm(t){let n={...t};return n.id=0,n.cityCode=n.cityCode,n.agentName="",n.mobile="",n.agentCode=this.form.clientId,n.mapURL=n.mapURL,n.isMain=n.isMain,n.lat=n.lat?n.lat.toString():"",n.lng=n.lng?n.lng.toString():"",n}submitFunished(){this.alertService.success(),this.modalService?.dismissAll()}OnSubmit(t=!1){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity(t):this.registerEntity(t)}getFromClient(){this.form.agent.mobile||this.alertService.error("orderManagement.order.mustEnterNumber"),this.isLoad=!0,this.whatsupService.GetLocationFromClient(this.form.agent.mobile).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.isLoad=!1)).subscribe(t=>{t.success?this.alertService.success("orderManagement.order.successSendLocation"):this.alertService.error("orderManagement.order.failSendLocation")},()=>{this.alertService.error("orderManagement.order.failSendLocation")})}DeleteConfirm(){this.baseService.DeleteLocation(this.idSelected).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("deleteLoader"))).subscribe(t=>{if(t.success){const n=this.form.locations.findIndex(i=>i.id===this.idSelected);-1!==n&&this.form.locations.splice(n,1),this.alertService.success(),this.modalService.dismissAll()}else this.alertService.error("general.message."+t)},()=>{this.alertService.error()})}getClientLocations(t){this.baseService.GetClientLocations(t).subscribe(n=>{this.form.locations=n.data,this.offerOrder.salesOrderForm.locations=n.data})}refresh(){this.getClientLocations(this.offerOrder.salesOrderForm.clientId),this.checkLocation()}locationChange(t){this.form.clientLocationId=t.id;let n=this.form.locations.find(i=>i.id==t.id);n.isSelected=!n.isSelected,this.offerOrder.salesOrderForm.clientLocationId=this.form.clientLocationId,this.offerOrder.checkValidationSource.next(!0)}checkSelected(t){this.offerOrder.checkValidationSource.next(!0),this.form.locations.find(i=>i.id==t).isSelected=!0}checkLocation(){this.offerOrder.checkValidationSource.next(!0)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}onUrlChange(t){let n=t.target.value.trim(),i=null;try{i=new URL(n).searchParams.get("q")}catch{i=n}if(i){let[r,o]=i.split(",").map(l=>Number(l.trim()));!isNaN(r)&&!isNaN(o)&&(this.formEdit.lat=r,this.formEdit.lng=o)}}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(_.Bq),e.rXU(ve.X),e.rXU(D.u),e.rXU(R.eD),e.rXU(ji.A),e.rXU(wi.Q),e.rXU(xe.h),e.rXU(re.A))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["client-location-salse"]],viewQuery:function(n,i){if(1&n&&e.GBs(_.X9,5),2&n){let r;e.mGM(r=e.lsd())&&(i.nav=r.first)}},inputs:{form:"form",isOrderEdit:"isOrderEdit"},features:[e.Jv_([_.X9])],decls:29,vars:6,consts:[["content",""],["deleteModal",""],["formEntity","ngForm"],["cityCode","ngModel"],["name","ngModel"],["address","ngModel"],["mapURL","ngModel"],["lat","ngModel"],["lng","ngModel"],[1,"container-fluid","mt-4"],[1,"row","mb-4"],[1,"col-12","col-md-6","col-lg-4"],[1,"form-group"],["for","clientVisitDate",1,"form-label","fw-bold"],[1,"ri-calendar-event-line","me-2"],["translate",""],["name","clientVisitDate","id","clientVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],[1,"card","mb-4"],[1,"card-header","bg-light"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","fs-4","fw-bold","mb-0"],[1,"ri-map-pin-line","me-2"],["translate","orderManagement.order.savedAddress"],[1,"card-body"],[1,"row","g-3"],["class","col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6"],[1,"card","h-100","border-dashed","border-1","border-primary","add-card",3,"click"],[1,"card-body","d-flex","flex-column","justify-content-center","align-items-center","py-4"],[1,"text-primary","mb-2"],[1,"ri-add-circle-line","fs-1"],["translate","",1,"text-primary","mb-0"],[1,"form-check","card-radio","h-100","location-card",3,"click","ngClass"],["type","radio","name","location",1,"form-check-input",3,"click","id","checked"],[1,"form-check-label",3,"for"],[1,"mb-4","fw-bold","d-block","text-muted","text-uppercase"],[1,"text-muted","fw-normal","text-wrap","mb-1","d-block"],[1,"card-footer","bg-light","p-0"],[1,"d-flex"],[1,"btn","btn-outline-primary","flex-grow-1","rounded-0","border-0",3,"click"],[1,"ri-pencil-fill","me-1"],["translate","general.action.edit"],[1,"btn","btn-outline-danger","flex-grow-1","rounded-0","border-0",3,"click"],[1,"ri-delete-bin-fill","me-1"],["translate","general.action.delete"],[1,"modal-content","border-0"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["class","fw-bold","translate","",4,"ngIf"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"needs-validation",3,"submit"],[1,"col-md-8"],["for","cityCode","translate","orderManagement.order.cityName",1,"form-label","fw-bold","required"],["name","cityCode","id","cityCode","bindValue","code","bindLabel","name",1,"form-control","p-0",3,"ngModelChange","ngModel","placeholder","items","multiple"],[1,"col-md-4"],[1,"form-group","h-100","d-flex","flex-column","justify-content-end"],["for","isMain","translate","",1,"form-label","fw-bold"],[1,"form-check","form-switch","mt-2"],["name","isMain","inputId","isMain",3,"ngModelChange","ngModel"],[1,"col-12"],["for","name","translate","orderManagement.order.name",1,"form-label","fw-bold","required"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","invalid-feedback d-block","translate","",4,"ngIf"],["for","address","translate","orderManagement.order.address",1,"form-label","fw-bold"],["rows","2","InputTirmFilter","","name","address","id","address",1,"form-control",3,"ngModelChange","ngModel"],["for","mapURL","translate","orderManagement.order.mapURL",1,"form-label","fw-bold"],["InputTirmFilter","","name","mapURL","type","text","id","mapURL",1,"form-control",3,"change","ngModelChange","ngModel"],[1,"col-md-6"],["for","lat","translate","orderManagement.order.lat",1,"form-label","fw-bold"],["disabled","","InputTirmFilter","","name","lat","type","text","id","lat",1,"form-control","bg-light",3,"ngModelChange","ngModel"],["for","lng","translate","orderManagement.order.lng",1,"form-label","fw-bold"],["disabled","","InputTirmFilter","","name","lng","type","text","id","lng",1,"form-control","bg-light",3,"ngModelChange","ngModel"],[1,"text-center","mt-4"],["type","submit",1,"btn","btn-primary","px-4",3,"disabled"],[1,"ri-check-double-line","me-1"],["translate","general.action.save"],["translate","",1,"fw-bold"],["translate","",1,"invalid-feedback","d-block"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"label",13),e.nrm(5,"i",14),e.j41(6,"span",15),e.EFF(7,"sales.salesOrder.acutalVisitDate"),e.k0s()(),e.j41(8,"input",16),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.form.clientVisitDate,l)||(i.form.clientVisitDate=l),e.Njj(l)}),e.k0s()()()(),e.j41(9,"div",17)(10,"div",18)(11,"div",19)(12,"h3",20),e.nrm(13,"i",21)(14,"span",22),e.k0s()()(),e.j41(15,"div",23)(16,"div",24),e.DNE(17,Ri,16,11,"div",25),e.j41(18,"div",26)(19,"div",27),e.bIt("click",function(){e.eBV(r);const l=e.sdS(26);return e.Njj(i.openModal(l))}),e.j41(20,"div",28)(21,"div",29),e.nrm(22,"i",30),e.k0s(),e.j41(23,"h5",31),e.EFF(24," sales.salesOrder.AddNewAddress "),e.k0s()()()()()()()(),e.DNE(25,Di,48,20,"ng-template",null,0,e.C5r)(27,Ni,1,0,"ng-template",null,1,e.C5r)}2&n&&(e.R7$(8),e.R50("ngModel",i.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(9),e.Y8G("ngForOf",i.form.locations))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,b.Mm,X.m,$.vr,z.kL,be.HW,R.Cv,ae.w,b.D9],styles:[".border-dashed[_ngcontent-%COMP%] {\n    border-style: dashed !important;\n  }\n\n  .location-card[_ngcontent-%COMP%] {\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .location-card[_ngcontent-%COMP%]:hover {\n    border-color: #dee2e6;\n    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\n  }\n\n  .add-card[_ngcontent-%COMP%] {\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .add-card[_ngcontent-%COMP%]:hover {\n    background-color: rgba(13, 110, 253, 0.04);\n  }"]})}}return a})();function Gi(a,s){if(1&a){const t=e.RV6();e.j41(0,"h3",9),e.nrm(1,"span",10),e.j41(2,"a",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goOrders())}),e.EFF(3),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(3),e.SpI("#SR#",t.orderCode,"")}}let $i=(()=>{class a{constructor(t){this.router=t,this.form={},this.orderCode=0,this.statusOrder=0,this.newOrder=new e.bkB,this.editOrderActiveTab=new e.bkB}ngOnDestroy(){}ngOnInit(){}newOrderAgain(){this.newOrder.next(!0)}goOrders(){this.router.navigateByUrl("/sales/sales-order")}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-finish-order-salse"]],inputs:{form:"form",orderCode:"orderCode",statusOrder:"statusOrder"},outputs:{newOrder:"newOrder",editOrderActiveTab:"editOrderActiveTab"},decls:9,vars:1,consts:[[1,"text-center","py-5"],[1,"mb-4"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","orderManagement.order.orderSaveSuccess"],["class","fw-semibold",4,"ngIf"],[1,"d-flex","align-items-start","gap-3","mt-4"],["type","button","data-nexttab","pills-finish-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-chat-new-line","label-icon","align-middle","fs-16","ms-2"],["translate","orderManagement.order.newOrderAgain"],[1,"fw-semibold"],["translate","orderManagement.order.orderCode"],["routerLink","/ecommerce/order-details",1,"text-decoration-underline",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"lord-icon",2),e.k0s(),e.nrm(3,"h5",3),e.DNE(4,Gi,4,1,"h3",4),e.k0s(),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){return i.newOrderAgain()}),e.nrm(7,"i",7)(8,"span",8),e.k0s()()),2&n&&(e.R7$(4),e.Y8G("ngIf",i.orderCode>0))},dependencies:[m.bT,b.Mm,w.Wk],encapsulation:2})}}return a})();const Bi=a=>({"border-success border-5":a}),Ai=(a,s,t)=>({"text-success":a,"text-warning":s,"text-danger":t}),Xi=(a,s,t)=>({"bg-success":a,"bg-danger":s,"bg-warning":t});function Yi(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.chooseCategory(i))}),e.EFF(1),e.k0s()}if(2&a){const t=s.$implicit;e.AVh("active",t.isSelected),e.R7$(),e.SpI(" ",t.name," ")}}function zi(a,s){1&a&&(e.j41(0,"div",20),e.nrm(1,"button",21),e.k0s())}function Ui(a,s){if(1&a&&(e.j41(0,"span",46)(1,"del"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.Lme(" ",t.priceOld," ",e.bMT(3,2,"orderManagement.order.currancy"),"")}}function qi(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",22)(2,"div",23)(3,"div",24),e.bIt("click",function(i){const r=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.onServiceChange(r.id,i))}),e.j41(4,"div",25)(5,"div",26),e.nrm(6,"img",27),e.k0s(),e.j41(7,"div",26)(8,"h5",28),e.EFF(9),e.k0s()()(),e.j41(10,"div",29),e.nrm(11,"div",30),e.j41(12,"div",31),e.EFF(13),e.k0s()(),e.j41(14,"div",32),e.nrm(15,"div",33),e.j41(16,"div",31)(17,"span",34),e.EFF(18),e.k0s()()(),e.j41(19,"div",32),e.nrm(20,"div",35),e.j41(21,"div",36)(22,"span",37),e.EFF(23),e.k0s()()(),e.j41(24,"div",32),e.nrm(25,"div",38),e.j41(26,"div",39),e.DNE(27,Ui,4,4,"span",40),e.j41(28,"span"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()(),e.j41(31,"div",41)(32,"div",42),e.nrm(33,"div",43),e.j41(34,"div",44)(35,"ng-select",45),e.bIt("change",function(i){const r=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.unitChange(r,i))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()()()()()(),e.bVm()}if(2&a){const t=s.$implicit,n=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(17,Bi,t.isSelected)),e.R7$(4),e.Y8G("src",n.serverImage+t.image,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(4),e.JRh(t.categoryName),e.R7$(4),e.Y8G("ngClass",e.sMw(19,Ai,t.stock>10,t.stock<=10&&t.stock>0,t.stock<=0)),e.R7$(),e.SpI(" ",t.stock," "),e.R7$(4),e.Y8G("ngClass",e.sMw(23,Xi,"Active"===t.status,"Inactive"===t.status,"Active"!==t.status&&"Inactive"!==t.status)),e.R7$(),e.SpI(" ",t.status," "),e.R7$(4),e.Y8G("ngIf",t.price<t.priceOld),e.R7$(2),e.Lme("",t.price," ",e.bMT(30,15,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("clearable",!1)("items",t.units),e.R50("ngModel",t.unitId)}}let Hi=(()=>{class a{constructor(t,n){this.translateService=t,this.offerOrder=n,this.form={},this.selectedServices=[],this.notifier=new L.B,this.mainDelay=100,this.loaderSearchShap=f.cX,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.isEditForm=!1,this.showEdit=!1,this.serviceCategories=[],this.services=[],this.currentLang=this.translateService.currentLang,this.subtotal=0,this.total=0,this.serverImage=q.c.mediaUrl,this.filteredServices=[],this.seviceCount=0,this.serviceSelected=[],this.allItems=this.getTranslationText("basicData.item.allItems"),this.CalcTotal=new e.bkB,this.isOrderEdit=!0,this.productsLookUp=[],this.init=0,this.responsiveOptions=[{breakpoint:"1400px",numVisible:4,numScroll:3},{breakpoint:"1220px",numVisible:4,numScroll:2},{breakpoint:"1100px",numVisible:4,numScroll:1}]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.getCategory(),this.getServicesByCategory(),this.offerOrder.removeServiceQ.pipe((0,p.Q)(this.notifier)).subscribe(t=>{if(0==this.init)return void(this.init=1);const n=this.filteredServices.find(i=>i.id==t);n&&(n.isSelected=!1),this.seviceCount=this.filteredServices.filter(i=>i.isSelected).length})}getCategory(){let t=this.offerOrder.salesOrderForm.serviceCategoryCode;this.serviceCategories=this.productsLookUp.categories,this.serviceCategories=this.serviceCategories.map(n=>({...n,isSelected:n.id===t}))}addService(t){const n=this.form.items.findIndex(i=>i.itemId===t.id&&0==i.isFree);n>-1?this.form.items.splice(n,1):(t.isSelected=!0,this.form.items.push({itemGroup:null,itemName:t.name,itemId:t.id,image:t.image,description:t.description,unitId:t.units[0].id,units:t.units,quantity:t.quantity,isFree:!1,priceUnit:t.units[0].price,discount:0,discountType:1,originalPrice:t.units[0].price,price:t.units[0].price,net:t.price*t.quantity})),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0)}updatePrice(t){const n=this.form.orderServices.find(i=>i.serviceCode===t.code);n.quantity=t.quantity,n.price=t.price}checkTotal(){this.CalcTotal.next(!0)}deleteService(t){this.form.orderServices.splice(t,1)}deletePayment(t){this.form.orderPayments.splice(t,1)}resetServiceForm(){let t=this.form.formServices;t.serviceCode=void 0,t.price=null,t.notes=null}resetPaymentForm(){let t=this.form.formPayment;t.paymentTypeCode=null,t.value=null,t.attachRecietPath=null,t.fileName=null}configRoute(){}getServicesByCategory(){this.services=this.setupUnit(this.productsLookUp.servies),this.filteredServices=this.services}setupUnit(t){return t.forEach(n=>{n.units.length>0&&(n.unitId=n.units[0].id,n.price=n.units[0].price)}),t}unitChange(t,n){if(!t.isSelected)return;let i=this.form.items.find(o=>o.itemId===t.id),r=this.filteredServices.find(o=>o.id===t.id);i.unitId=n.id,i.unitPrice=n.price,i.price=n.price,i.priceOld=n.priceOld,r.unitPrice=n.price,r.price=n.price,r.unitId=n.id,this.checkTotal()}checkSelected(){this.form.items.forEach(t=>{let n=this.filteredServices.find(i=>i.id===t.itemId);n&&(n.isSelected=!0)})}getTranslationText(t){let n="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{n=i}),n}onTimeSelected(t){this.form.orderTeams=t}chooseCategory(t){this.serviceCategories=this.serviceCategories.map(n=>({...n,isSelected:n.id===t.id})),this.offerOrder.salesOrderForm.serviceCategoryCode=t.id,this.filteredServices=0==t.id?this.services:this.services?.filter(n=>n?.categoryId===t?.id)??[]}onServiceChange(t,n){n.stopPropagation();let i=this.filteredServices.find(r=>r.id===t);i&&(i.isSelected=!i.isSelected),this.seviceCount=this.filteredServices.filter(r=>r.isSelected).length,this.addService(i)}btnPlus(t,n){n.stopPropagation();const i=this.filteredServices.find(r=>r.code===t);i&&(i.quantity++,this.updatePrice(i),this.checkTotal())}btnMinus(t,n){n.stopPropagation();const i=this.filteredServices.find(r=>r.code===t);i&&i.quantity>1?i.quantity-=1:i.quantity=1,this.updatePrice(i),this.checkTotal()}searchChange(t){const n=t.target.value.toLowerCase();this.filteredServices=""===n?[...this.services]:this.services.filter(i=>i.name.toLowerCase().includes(n)||i.sku.toLowerCase().includes(n))}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(b.c$),e.rXU(re.A))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-products"]],inputs:{form:"form",serviceCategories:"serviceCategories",isOrderEdit:"isOrderEdit",productsLookUp:"productsLookUp"},outputs:{CalcTotal:"CalcTotal"},decls:25,vars:12,consts:[["categoriesContainer",""],[1,"service-container"],[1,"mt-2"],[1,"categories-container"],[1,"categories-title"],[1,"categories-slider-container"],[1,"categories-slider"],["class","category-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"row","justify-content-center","align-items-center","border-bottom"],[1,"col-12","col-md-12","mx-5"],[1,"search-box","mb-3"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","rounded-pill",3,"keyup","placeholder"],[1,"ri-search-line","search-icon"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-5"],[1,"mb-0","d-inline-block","position-relative"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3","row","row-cols-3"],[4,"ngFor","ngForOf"],[1,"category-btn",3,"click"],[1,"d-flex","justify-content-center"],["type","button","translate","orderManagement.order.noProduct",1,"btn","btn-sm","my-2","btn-danger","fs-4","mb-3"],[1,"col-12","col-md-4","mb-4"],[1,"card","card-service","h-100","shadow-sm","hover-shadow","transition-all",3,"ngClass"],[1,"card-body","p-3",3,"click"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-12","col-md-6"],["onerror","this.onerror=null;this.src='assets/images/custom/no-img.jpg';",1,"img-fluid","rounded",2,"height","120px","object-fit","cover",3,"src","alt"],[1,"card-title","fw-bold","text-primary","mb-0"],[1,"row","g-2","mb-2","border-top","pt-2"],["translate","sales.salesOrder.category",1,"col-5","text-muted","small"],[1,"col-7","small","fw-medium"],[1,"row","g-2","mb-2"],["translate","sales.salesOrder.stock",1,"col-5","text-muted","small"],[3,"ngClass"],["translate","sales.salesOrder.status",1,"col-5","text-muted","small"],[1,"col-7","small"],[1,"badge",3,"ngClass"],["translate","sales.salesOrder.price",1,"col-5","text-muted","small"],[1,"col-7","small","fw-bold"],["class","text-danger mx-3 ",4,"ngIf"],[1,"card-footer","bg-light","p-3"],[1,"row","g-2","align-items-center"],["translate","sales.salesOrder.unit",1,"col-5","text-muted","small"],[1,"col-7"],["bindValue","id","bindLabel","name",1,"form-control-sm","p-0",3,"change","ngModelChange","clearable","items","ngModel"],[1,"text-danger","mx-3"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"bdi")(3,"div",3)(4,"h4",4),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"div",5,0)(9,"div",6),e.DNE(10,Yi,2,3,"button",7),e.k0s()()()()(),e.j41(11,"div",8)(12,"div",9)(13,"div",10)(14,"input",11),e.nI1(15,"translate"),e.bIt("keyup",function(l){return e.eBV(r),e.Njj(i.searchChange(l))}),e.k0s(),e.nrm(16,"i",12),e.k0s()()(),e.j41(17,"div",13)(18,"div",14)(19,"h4",15),e.EFF(20),e.nI1(21,"translate"),e.k0s()()(),e.DNE(22,zi,2,0,"div",16),e.j41(23,"div",17),e.DNE(24,qi,36,27,"ng-container",18),e.k0s()()}2&n&&(e.R7$(5),e.SpI(" ",e.bMT(6,6,"orderManagement.order.serviceProduct"),""),e.R7$(5),e.Y8G("ngForOf",i.serviceCategories),e.R7$(4),e.FS9("placeholder",e.bMT(15,8,"orderManagement.order.searchProduct")),e.R7$(6),e.SpI(" ",e.bMT(21,10,"orderManagement.order.selectedProducts")," "),e.R7$(2),e.Y8G("ngIf",0==i.filteredServices.length),e.R7$(2),e.Y8G("ngForOf",i.filteredServices))},dependencies:[m.YU,m.Sq,m.bT,d.BC,d.vS,b.Mm,$.vr,b.D9],styles:[".categories-container[_ngcontent-%COMP%]{padding:16px}.categories-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:12px}.categories-slider-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:8px;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories-slider[_ngcontent-%COMP%]{display:flex;gap:8px;padding:4px 0;width:max-content}.category-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;border:1px solid #ddd;background:#fff;white-space:nowrap;font-size:14px;cursor:pointer;transition:all .3s ease}.category-btn.active[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;border-color:#3f51b5}.category-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.category-btn[_ngcontent-%COMP%]:hover.active{background:#303f9f}"]})}}return a})();var Qi=u(53132);const Wi=a=>({"border-danger border-5":a});function Ji(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"button",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onOfferChange(i))}),e.j41(2,"span"),e.EFF(3),e.k0s(),e.j41(4,"span",19),e.EFF(5),e.k0s()(),e.bVm()}if(2&a){const t=s.$implicit;e.R7$(),e.AVh("active",t.isSelected),e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.count)}}function Zi(a,s){1&a&&(e.j41(0,"div",20),e.nrm(1,"button",21),e.k0s())}function Ki(a,s){if(1&a&&(e.j41(0,"span",43)(1,"del"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.Lme(" ",t.priceOld," ",e.bMT(3,2,"orderManagement.order.currancy"),"")}}function en(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",22)(2,"div",23)(3,"div",24),e.bIt("click",function(i){const r=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.onServiceOfferChange(r.id,i))}),e.j41(4,"div",25),e.EFF(5),e.k0s(),e.j41(6,"div",26)(7,"div",27),e.nrm(8,"img",28),e.k0s(),e.j41(9,"div",27)(10,"h5",29),e.EFF(11),e.k0s()()(),e.j41(12,"div",30),e.nrm(13,"div",31),e.j41(14,"div",32),e.EFF(15),e.k0s()(),e.j41(16,"div",30),e.nrm(17,"div",33),e.j41(18,"div",32),e.EFF(19),e.k0s()(),e.j41(20,"div",34),e.nrm(21,"div",35),e.j41(22,"div",36),e.DNE(23,Ki,4,4,"span",37),e.j41(24,"span"),e.EFF(25),e.nI1(26,"translate"),e.k0s()()()(),e.j41(27,"div",38)(28,"div",39),e.nrm(29,"div",40),e.j41(30,"div",41)(31,"ng-select",42),e.bIt("change",function(i){const r=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.unitChange(r,i))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()()()()()(),e.bVm()}if(2&a){const t=s.$implicit,n=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(15,Wi,t.isSelected)),e.R7$(3),e.JRh(t.quantityY),e.R7$(3),e.Y8G("src",n.serverImage+t.image,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(4),e.JRh(t.categoryName),e.R7$(4),e.JRh(t.offerName),e.R7$(4),e.Y8G("ngIf",t.price<t.priceOld),e.R7$(2),e.Lme("",t.price," ",e.bMT(26,13,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("clearable",!1)("items",t.units),e.R50("ngModel",t.unitId)}}let tn=(()=>{class a{constructor(t,n,i){this.translateService=t,this.offerOrder=n,this.alertService=i,this.form={},this.selectedServices=[],this.notifier=new L.B,this.mainDelay=100,this.loaderSearchShap=f.cX,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.isEditForm=!1,this.showEdit=!1,this.serviceCategories=[],this.services=[],this.currentLang=this.translateService.currentLang,this.subtotal=0,this.total=0,this.serverImage=q.c.mediaUrl,this.filteredServices=[],this.seviceCount=0,this.serviceSelected=[],this.allItems=this.getTranslationText("basicData.item.allItems"),this.isOrderEdit=!0,this.init=0,this.offerServices=[],this.responsiveOptions=[{breakpoint:"1400px",numVisible:4,numScroll:3},{breakpoint:"1220px",numVisible:4,numScroll:2},{breakpoint:"1100px",numVisible:4,numScroll:1}]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnChanges(t){t.form&&t.form.currentValue?.itemsOffers&&(this.offerServices=structuredClone(this.form.itemsOffers),this.getServicesByCategory(),this.checkSelected())}ngOnInit(){this.offerServices=structuredClone(this.form.itemsOffers),this.getCategory(),this.getServicesByCategory(),this.offerOrder.removeServiceOfferQ.pipe((0,p.Q)(this.notifier)).subscribe(t=>{if(0==this.init)return void(this.init=1);const n=this.filteredServices.find(i=>i.id==t);n&&(n.isSelected=!1),this.seviceCount=this.filteredServices.filter(i=>i.isSelected).length}),this.checkSelected()}getCategory(){let t=this.offerOrder.salesOrderForm.serviceCategoryCode;this.serviceCategories=this.serviceCategories.map(n=>({...n,isSelected:n.id===t}))}addService(t){const n=this.form.items.findIndex(i=>i.itemId===t.id&&1==i.isFree);n>-1?this.form.items.splice(n,1):this.checkOffer(t,1)?this.form.items.push({itemGroup:null,itemName:t.name,itemId:t.id,image:t.image,description:t.description,unitId:t.units[0].id,units:t.units,offerId:t.offerId,quantityY:t.quantityY,quantity:t.quantity,isFree:t.isFree,priceUnit:t.units[0].price,discount:0,discountType:1,originalPrice:t.units[0].price,price:t.units[0].price,net:t.price*t.quantity}):t.isSelected=!1}deleteService(t){this.form.orderServices.splice(t,1)}configRoute(){}getServicesByCategory(){this.services=this.setupUnit(this.offerServices),this.filteredServices=structuredClone(this.services)}setupUnit(t){return t.forEach(n=>{n.units.length>0&&(n.unitId=n.units[0].id,n.price=n.units[0].price)}),t}unitChange(t,n){if(!t.isSelected)return;let i=this.form.items.find(o=>o.itemId===t.id),r=this.filteredServices.find(o=>o.id===t.id);i.unitId=n.id,i.unitPrice=n.price,i.price=n.price,i.priceOld=n.priceOld,r.unitPrice=n.price,r.price=n.price,r.unitId=n.id}checkSelected(){this.form.items.filter(t=>t.isFree).forEach(t=>{let n=this.filteredServices.find(i=>i.id===t.itemId);n&&(n.isSelected=!0)})}getTranslationText(t){let n="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{n=i}),n}onTimeSelected(t){this.form.orderTeams=t}onOfferChange(t){this.form.offerNames=this.form.offerNames.map(n=>({...n,isSelected:n.id===t.id})),this.filteredServices=0==t.id?this.services:this.services?.filter(n=>n?.offerId===t?.id)??[],this.checkSelected()}onServiceOfferChange(t,n){n.stopPropagation();const i=this.filteredServices.find(r=>r.id===t);i&&(i.isSelected=!i.isSelected,this.seviceCount=this.filteredServices.filter(r=>r.isSelected).length,this.addService(i))}checkOffer(t,n){return!t.isFree||this.form.itemsOffers.length<=0||!(this.form.items.filter(r=>r.offerId==t.offerId&&1==r.isFree).reduce((r,o)=>r+o.quantity,0)+n>t.quantityY)||(this.alertService.info("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0633\u0645\u0648\u062d \u0628\u064a\u0647\u0627 "+t.quantityY),!1)}btnPlus(t,n){n.stopPropagation();const i=this.filteredServices.find(r=>r.code===t);i&&i.quantity++}btnMinus(t,n){n.stopPropagation();const i=this.filteredServices.find(r=>r.code===t);i&&i.quantity>1?i.quantity-=1:i.quantity=1}searchChange(t){const n=t.target.value.toLowerCase();this.filteredServices=""===n?[...this.services]:this.services.filter(i=>i.name.toLowerCase().includes(n)||i.sku.toLowerCase().includes(n))}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(b.c$),e.rXU(re.A),e.rXU(D.u))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-offer-products"]],inputs:{form:"form",serviceCategories:"serviceCategories",isOrderEdit:"isOrderEdit"},features:[e.OA$],decls:24,vars:12,consts:[["categoriesContainer",""],[1,"service-container"],[1,"mt-2"],[1,"categories-container"],[1,"categories-title"],[1,"categories-slider-container"],[1,"categories-slider"],[4,"ngFor","ngForOf"],[1,"row","justify-content-center","align-items-center","border-bottom"],[1,"col-12","col-md-12","mx-5"],[1,"search-box","mb-3"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","rounded-pill",3,"keyup","placeholder"],[1,"ri-search-line","search-icon"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-5"],[1,"mb-0","d-inline-block","position-relative"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3","row","row-cols-3"],[1,"category-btn",3,"click"],[1,"badge","bg-danger","ms-1"],[1,"d-flex","justify-content-center"],["type","button","translate","orderManagement.order.noProduct",1,"btn","btn-sm","my-2","btn-danger","fs-4","mb-3"],[1,"col-12","col-md-4","mb-4"],[1,"card","ribbon-box","border","ribbon-fill","shadow-none","right","mb-lg-0","material-shadow","card-service","h-100","shadow-sm","hover-shadow","transition-all",3,"ngClass"],[1,"card-body","p-3",3,"click"],[1,"ribbon","ribbon-success"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-12","col-md-6"],["onerror","this.onerror=null;this.src='assets/images/custom/no-img.jpg';",1,"img-fluid","rounded",2,"height","120px","object-fit","cover",3,"src","alt"],[1,"card-title","fw-bold","text-primary","mb-0"],[1,"row","g-2","mb-2","border-top","pt-2"],["translate","sales.salesOrder.category",1,"col-5","text-muted","small"],[1,"col-7","small","fw-medium"],["translate","sales.salesOrder.offerName",1,"col-5","text-muted","small"],[1,"row","g-2","mb-2"],["translate","sales.salesOrder.price",1,"col-5","text-muted","small"],[1,"col-7","small","fw-bold"],["class","text-danger mx-3 ",4,"ngIf"],[1,"card-footer","bg-light","p-3"],[1,"row","g-2","align-items-center"],["translate","sales.salesOrder.unit",1,"col-5","text-muted","small"],[1,"col-7"],["bindValue","id","bindLabel","name",1,"form-control-sm","p-0",3,"change","ngModelChange","clearable","items","ngModel"],[1,"text-danger","mx-3"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"div",5,0)(8,"div",6),e.DNE(9,Ji,6,4,"ng-container",7),e.k0s()()()(),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"input",11),e.nI1(14,"translate"),e.bIt("keyup",function(l){return e.eBV(r),e.Njj(i.searchChange(l))}),e.k0s(),e.nrm(15,"i",12),e.k0s()()(),e.j41(16,"div",13)(17,"div",14)(18,"h4",15),e.EFF(19),e.nI1(20,"translate"),e.k0s()()(),e.DNE(21,Zi,2,0,"div",16),e.j41(22,"div",17),e.DNE(23,en,32,17,"ng-container",7),e.k0s()()}2&n&&(e.R7$(4),e.SpI(" ",e.bMT(5,6,"orderManagement.order.offers"),""),e.R7$(5),e.Y8G("ngForOf",i.form.offerNames),e.R7$(4),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.searchProduct")),e.R7$(6),e.SpI(" ",e.bMT(20,10,"orderManagement.order.selectedProducts")," "),e.R7$(2),e.Y8G("ngIf",0==i.filteredServices.length),e.R7$(2),e.Y8G("ngForOf",i.filteredServices))},dependencies:[m.YU,m.Sq,m.bT,d.BC,d.vS,b.Mm,$.vr,b.D9],styles:[".categories-container[_ngcontent-%COMP%]{padding:16px}.categories-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:12px}.categories-slider-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:8px;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none;&::-webkit-scrollbar{display:none}}.categories-slider[_ngcontent-%COMP%]{display:flex;gap:8px;padding:4px 0;width:max-content}.category-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;border:1px solid #ddd;background:#fff;white-space:nowrap;font-size:14px;cursor:pointer;transition:all .3s ease;&.active{background:var(--vz-danger);color:#fff;border-color:var(--vz-danger)}&:hover{background:#f5f5f5;&.active{background:var(--vz-danger)}}}"]})}}return a})();const nn=["clientModal"],an=()=>["salesOrder.editTotalDiscont"];function rn(a,s){if(1&a&&(e.j41(0,"span",13),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.visitId)}}function sn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",68)(1,"div",69)(2,"label",70),e.EFF(3,"orderManagement.order.clientSearch"),e.k0s(),e.j41(4,"ng-select",71),e.bIt("scrollToEnd",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.clientId,i)||(r.form.clientId=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.getClientInfo(i))}),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(4),e.Y8G("virtualScroll",!0)("items",t.clients)("typeahead",t.searchClient)("loading",t.loading)("multiple",!1),e.R50("ngModel",t.form.clientId),e.Y8G("disabled",!t.isOrderEdit)}}function on(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-client-info-salse",72),e.bIt("calacTotal",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.checkTotal())})("setFormByOrderCode",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.setFormByOrderCode(i))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",t.isInner)("clientInfo",t.clientInfo)("form",t.form)}}function ln(a,s){if(1&a){const t=e.RV6();e.j41(0,"order-products",73),e.bIt("CalcTotal",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.checkTotal())}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("isOrderEdit",t.isOrderEdit)("productsLookUp",t.productsLookUp)("form",t.form)}}function dn(a,s){if(1&a&&(e.j41(0,"span",13),e.EFF(1),e.k0s()),2&a){const t=e.XpG(3);e.R7$(),e.JRh(t.form.offerNames.length)}}function cn(a,s){if(1&a&&e.nrm(0,"order-offer-products",75),2&a){const t=e.XpG(3);e.Y8G("serviceCategories",null==t.productsLookUp?null:t.productsLookUp.categories)("form",t.form)}}function mn(a,s){if(1&a&&(e.j41(0,"li",22)(1,"a",27),e.nrm(2,"i",74),e.j41(3,"span",25)(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.DNE(7,dn,2,1,"span",9),e.k0s()(),e.DNE(8,cn,1,2,"ng-template",26),e.k0s()),2&a){const t=e.XpG(2);e.Y8G("ngbNavItem",3),e.R7$(5),e.SpI(" ",e.bMT(6,3,"orderManagement.order.offers"),""),e.R7$(2),e.Y8G("ngIf",t.form.offerNames.length)}}function pn(a,s){if(1&a&&e.nrm(0,"client-location-salse",76),2&a){const t=e.XpG(2);e.Y8G("isOrderEdit",t.isOrderEdit)("form",t.form)}}function un(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-finish-order-salse",77),e.bIt("editOrderActiveTab",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.editOrder())})("newOrder",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.newOrder())}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("statusOrder",t.statusOrder)("orderCode",t.orderCode)("form",t.form)}}function gn(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",78),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.back())}),e.nrm(1,"i",79)(2,"span",80),e.k0s()}}function hn(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",81),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.next())}),e.nrm(1,"i",82)(2,"span",83),e.k0s()}}function _n(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.orderFinished())}),e.j41(1,"span",92),e.nrm(2,"i",95)(3,"span",96),e.k0s()()}}function fn(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3),r=e.sdS(7);return e.Njj(i.openModalRequest(r))}),e.j41(1,"span",92),e.nrm(2,"i",97)(3,"span",98),e.k0s()()}}function bn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",36)(1,"span",84)(2,"div",85)(3,"button",86),e.nrm(4,"i",87)(5,"span",88),e.k0s(),e.j41(6,"ul",89),e.DNE(7,_n,4,0,"li",90),e.j41(8,"li",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.orderFinished(0))}),e.j41(9,"span",92),e.nrm(10,"i",93)(11,"span",94),e.k0s()(),e.DNE(12,fn,4,0,"li",90),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(7),e.Y8G("ngIf",+t.form.creditLimit>+t.VATTotal),e.R7$(5),e.Y8G("ngIf",+t.form.creditLimit<+t.VATTotal)}}function vn(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"tr")(2,"td")(3,"div",100),e.nrm(4,"img",101),e.k0s()(),e.j41(5,"td")(6,"h5",102)(7,"a",103),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.goEdit(i.itemId))}),e.EFF(8),e.k0s()(),e.j41(9,"p",104)(10,"span",105),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"span",106),e.EFF(14),e.k0s()(),e.j41(15,"div",107)(16,"div",108)(17,"div",109)(18,"button",110),e.bIt("click",function(){const i=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.decrement(i))}),e.EFF(19," \u2013 "),e.k0s(),e.j41(20,"input",111),e.bIt("keyup",function(i){const r=e.eBV(t).index,o=e.XpG(3);return e.Njj(o.quantityChange(i,r))})("change",function(i){const r=e.eBV(t).index,o=e.XpG(3);return e.Njj(o.quantityChange(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s(),e.j41(21,"button",112),e.bIt("click",function(){const i=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.increment(i))}),e.EFF(22," + "),e.k0s()()()()(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"translate"),e.j41(26,"div",113)(27,"i",114),e.bIt("click",function(){const i=e.eBV(t),r=i.$implicit,o=i.index,l=e.XpG(3);return l.removeService(o,r.itemId,r.isFree),e.Njj(l.checkTotal())}),e.k0s()()()(),e.bVm()}if(2&a){const t=s.$implicit,n=e.XpG(3);e.R7$(),e.AVh("bg-danger-subtle",t.isFree),e.R7$(3),e.Y8G("src",n.serverImage+t.image,e.B4B),e.R7$(4),e.JRh(t.itemName),e.R7$(3),e.Lme(" ",t.price," ",e.bMT(12,12,"orderManagement.order.currancy"),""),e.R7$(3),e.SpI(" x",t.quantity,""),e.R7$(6),e.Mz_("id","cart-",t.code,""),e.R50("ngModel",t.quantity),e.R7$(4),e.Lme(" ",(t.price*t.quantity-t.discount).toFixed(2)," ",e.bMT(25,14,"orderManagement.order.currancy")," ")}}function xn(a,s){if(1&a&&(e.qex(0),e.DNE(1,vn,28,16,"ng-container",99),e.bVm()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.form.items)}}function yn(a,s){1&a&&(e.j41(0,"tr")(1,"td",115)(2,"div",116)(3,"div",117)(4,"div",118),e.nrm(5,"i",119),e.k0s()(),e.j41(6,"h5",120),e.EFF(7),e.nI1(8,"translate"),e.k0s()()()()),2&a&&(e.R7$(7),e.SpI(" ",e.bMT(8,1,"orderManagement.order.noProducts")," "))}function Cn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",121)(1,"button",122),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",123),e.nI1(5,"translate"),e.j41(6,"input",124),e.bIt("change",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.checkPrecentageChange(i))}),e.k0s(),e.j41(7,"span",125),e.EFF(8,"%"),e.k0s()(),e.j41(9,"input",126,4),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.validateDiscount())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.discountAmount,i)||(r.form.discountAmount=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,5,"orderManagement.order.Discount")," "),e.R7$(2),e.FS9("pTooltip",e.bMT(5,7,"orderManagement.order.discount")),e.R7$(2),e.Y8G("checked",t.form.isPrecentage),e.R7$(3),e.Y8G("max",t.form.isPrecentage?100:t.subtotal),e.R50("ngModel",t.form.discountAmount)}}function Sn(a,s){if(1&a&&(e.j41(0,"div",127),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.E5c(" ",e.bMT(2,3,"orderManagement.order.discountValue"),": ",(t.subtotal*t.form.discountAmount/100).toFixed(2)," ",e.bMT(3,5,"orderManagement.order.currancy")," ")}}function In(a,s){if(1&a&&(e.j41(0,"div",128),e.EFF(1),e.nI1(2,"translate"),e.EFF(3),e.nI1(4,"translate"),e.nI1(5,"translate"),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,5,"orderManagement.order.discountValue"),": ",t.form.discountAmount||0," "),e.R7$(2),e.E5c(" ",e.bMT(4,7,"orderManagement.order.currancy")," ",e.bMT(5,9,"orderManagement.order.discountPercentage"),": ",t.getDiscountPercentage()," ")}}function kn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),e.DNE(4,sn,5,7,"div",18),e.nrm(5,"ngx-ui-loader",19),e.j41(6,"form",null,2)(8,"div",20)(9,"ul",21,3),e.bIt("navChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onNavChange(i))}),e.j41(11,"li",22)(12,"a",23),e.nrm(13,"i",24),e.j41(14,"span",25),e.EFF(15),e.nI1(16,"translate"),e.k0s()(),e.DNE(17,on,1,4,"ng-template",26),e.k0s(),e.j41(18,"li",22)(19,"a",27),e.nrm(20,"i",28),e.j41(21,"span",25),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.DNE(24,ln,1,3,"ng-template",26),e.k0s(),e.DNE(25,mn,9,5,"li",29),e.j41(26,"li",22)(27,"a",27),e.nrm(28,"i",30),e.j41(29,"span",25),e.EFF(30),e.nI1(31,"translate"),e.k0s()(),e.DNE(32,pn,1,2,"ng-template",26),e.k0s(),e.j41(33,"li",22)(34,"a",27),e.nrm(35,"i",31),e.j41(36,"span",25),e.EFF(37),e.nI1(38,"translate"),e.k0s()(),e.DNE(39,un,1,3,"ng-template",26),e.k0s()(),e.j41(40,"div",32),e.nrm(41,"div",33),e.k0s()()()(),e.j41(42,"div",34)(43,"div",35)(44,"div",36),e.DNE(45,gn,3,0,"button",37),e.k0s(),e.j41(46,"div",36),e.DNE(47,hn,3,0,"button",38),e.k0s(),e.DNE(48,bn,13,2,"div",39),e.k0s()()()(),e.j41(49,"div",40)(50,"div",16)(51,"div",41)(52,"div",42)(53,"div",43)(54,"h5",44),e.EFF(55),e.nI1(56,"translate"),e.k0s()()()(),e.j41(57,"div",45)(58,"div",46)(59,"table",47)(60,"thead",48)(61,"tr")(62,"th",49),e.EFF(63),e.nI1(64,"translate"),e.k0s(),e.j41(65,"th",50),e.EFF(66),e.nI1(67,"translate"),e.k0s(),e.j41(68,"th",51),e.EFF(69),e.nI1(70,"translate"),e.k0s()()(),e.j41(71,"tbody"),e.DNE(72,xn,2,1,"ng-container",12)(73,yn,9,3,"tr",12),e.j41(74,"tr",52)(75,"td",53)(76,"div",54)(77,"div",55),e.EFF(78),e.nI1(79,"translate"),e.k0s(),e.j41(80,"div",56),e.EFF(81),e.nI1(82,"translate"),e.k0s()(),e.DNE(83,Cn,11,9,"div",57),e.j41(84,"div",58),e.DNE(85,Sn,4,7,"div",59)(86,In,6,11,"div",60),e.k0s()()(),e.j41(87,"tr",52)(88,"td",53)(89,"div",61)(90,"div",62),e.EFF(91),e.nI1(92,"translate"),e.k0s(),e.j41(93,"div",63),e.EFF(94),e.nI1(95,"translate"),e.k0s()(),e.j41(96,"div",61)(97,"div",62),e.EFF(98),e.nI1(99,"translate"),e.k0s(),e.j41(100,"div",63),e.EFF(101),e.nI1(102,"translate"),e.k0s()(),e.j41(103,"div",61)(104,"div",62),e.EFF(105),e.nI1(106,"translate"),e.k0s(),e.j41(107,"div",63),e.EFF(108),e.nI1(109,"translate"),e.k0s()()()(),e.j41(110,"tr",64)(111,"td",53)(112,"div",54)(113,"div",62),e.EFF(114),e.nI1(115,"translate"),e.k0s(),e.j41(116,"div",63),e.EFF(117),e.nI1(118,"translate"),e.k0s()()()(),e.j41(119,"tr",65)(120,"td",66),e.EFF(121),e.nI1(122,"translate"),e.k0s(),e.j41(123,"td",67),e.EFF(124),e.nI1(125,"translate"),e.k0s()()()()()()()()()}if(2&a){const t=e.sdS(10),n=e.XpG();e.R7$(4),e.Y8G("ngIf",n.visitId<=0),e.R7$(),e.Y8G("loaderId","order"),e.R7$(4),e.Y8G("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.SpI(" ",e.bMT(16,43,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(4),e.SpI(" ",e.bMT(23,45,"orderManagement.order.items")," "),e.R7$(3),e.Y8G("ngIf",(null==n.form||null==n.form.itemsOffers?null:n.form.itemsOffers.length)>0),e.R7$(),e.Y8G("ngbNavItem",4),e.R7$(4),e.SpI(" ",e.bMT(31,47,"orderManagement.order.shipping")," "),e.R7$(3),e.Y8G("ngbNavItem",5),e.R7$(4),e.SpI(" ",e.bMT(38,49,"orderManagement.order.finish")," "),e.R7$(4),e.Y8G("ngbNavOutlet",t),e.R7$(4),e.Y8G("ngIf",n.active>1),e.R7$(2),e.Y8G("ngIf",n.active<n.maxNav),e.R7$(),e.Y8G("ngIf",!n.disabledStatus&&n.form.clientId>0),e.R7$(7),e.SpI(" ",e.bMT(56,51,"orderManagement.order.orderSummary")," "),e.R7$(8),e.SpI(" ",e.bMT(64,53,"sales.salesOrder.product")," "),e.R7$(3),e.SpI(" ",e.bMT(67,55,"sales.salesOrder.productInfo")," "),e.R7$(3),e.SpI(" ",e.bMT(70,57,"sales.salesOrder.price")," "),e.R7$(3),e.Y8G("ngIf",n.form.items.length>0),e.R7$(),e.Y8G("ngIf",0==n.form.items.length),e.R7$(5),e.SpI(" ",e.bMT(79,59,"orderManagement.order.SubTotal")," "),e.R7$(3),e.Lme(" ",n.subtotal," ",e.bMT(82,61,"orderManagement.order.currancy")," "),e.R7$(2),e.Y8G("hasPermission",e.lJ4(83,an)),e.R7$(2),e.Y8G("ngIf",n.form.isPrecentage),e.R7$(),e.Y8G("ngIf",!n.form.isPrecentage),e.R7$(5),e.SpI(" ",e.bMT(92,63,"orderManagement.order.PriceAfterDisaccount")," "),e.R7$(3),e.Lme(" ",n.beforeVatTotal.toFixed(2)," ",e.bMT(95,65,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(99,67,"orderManagement.order.PriceBeforeVat")," "),e.R7$(3),e.Lme(" ",n.beforeVatTotal.toFixed(2)," ",e.bMT(102,69,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(106,71,"orderManagement.order.tax")," (15%) "),e.R7$(3),e.Lme(" ",(n.VATTotal-n.beforeVatTotal).toFixed(2)," ",e.bMT(109,73,"orderManagement.order.currancy")," "),e.R7$(6),e.SpI(" ",e.bMT(115,75,"orderManagement.order.VAT")," "),e.R7$(3),e.Lme(" ",n.VATTotal.toFixed(2)," ",e.bMT(118,77,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(122,79,"orderManagement.order.creditLimit"),": "),e.R7$(3),e.Lme(" ",n.form.creditLimit," ",e.bMT(125,81,"orderManagement.order.currancy")," ")}}function Tn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"requestNewCustomer",129),e.bIt("OnStepChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onStepChange(i))}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("showBreadcrumbs",!1)("form",t.customer)("isEdit",!0)("errors",t.errors)}}function jn(a,s){1&a&&(e.j41(0,"div",146),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function wn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",130)(1,"div",131)(2,"h4",44),e.nrm(3,"span",98),e.k0s(),e.j41(4,"button",132),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",133),e.nrm(6,"ngx-ui-loader",134),e.j41(7,"form",135,2),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnRequestSubmit())}),e.j41(9,"div",136)(10,"label",137),e.EFF(11,"sales.clientCollection.cost"),e.k0s(),e.j41(12,"input",138,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formRequest.cost,i)||(r.formRequest.cost=i),e.Njj(i)}),e.k0s(),e.DNE(14,jn,2,0,"div",139),e.k0s(),e.j41(15,"div",136)(16,"label",140),e.EFF(17,"sales.clientCollection.notes"),e.k0s(),e.j41(18,"textarea",141,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.formRequest.notes,i)||(r.formRequest.notes=i),e.Njj(i)}),e.k0s()(),e.j41(20,"div",142)(21,"button",143),e.nrm(22,"i",144)(23,"span",145),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.sdS(13),i=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.R50("ngModel",i.formRequest.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",i.formRequest.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Mn(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"approvals.customerRequest."+t)," , ")}}function Rn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",147)(1,"div",148)(2,"button",149),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(3,"div",133)(4,"div",150),e.nrm(5,"lord-icon",151)(6,"div",152),e.j41(7,"div",153),e.nrm(8,"i",154),e.DNE(9,Mn,3,3,"span",99),e.k0s()(),e.j41(10,"div",155)(11,"button",156),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goUpdate())}),e.k0s(),e.j41(12,"button",157),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(9),e.Y8G("ngForOf",t.errors)}}let Fn=(()=>{class a{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I){this.translateService=t,this.baseService=n,this.requestPersonSalesService=i,this.alertService=r,this.ngxLoader=o,this.datePipe=l,this.modalService=c,this.router=h,this.activatedRoute=g,this.clientService=x,this.serviceService=v,this.productOfferService=C,this.generalSettingService=I,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.active=1,this.language=this.translateService.currentLang,this.searchForm="",this.breadCrumbItems=[],this.serverImage=q.c.mediaUrl,this.disabledStatus=!0,this.form={itemsOffers:[],clientVisitDate:new Date,id:null,cityCode:0,clientLocationId:0,clientId:0,isUrgent:!1,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderPayments:[],orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:"",serviceCategoryCode:0},this.orderCode=0,this.mobile=0,this.cityCode=0,this.agentName="",this.pendingCode=0,this.isInner=!1,this.isOrderEdit=!0,this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.paidTotal=0,this.VATTotal=0,this.beforeVatTotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new L.B,this.mainDelay=100,this.loaderSearchShap=f.cX,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.isEditForm=!1,this.showEdit=!1,this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.isFinished=!1,this.isUpdate=!1,this.isReopen=!1,this.formRequest={},this.statusOrder=10,this.clients=[],this.searchClient=new L.B,this.clientParam={pageSize:50,pageNumber:1,search:""},this.loading=!1,this.productsLookUp=[],this.productsOffer=[],this.step=1,this.customer={},this.errors={},this.isCustomerDataValid=!1,this.loaderStart=!1,this.productOffer=[],this.setting={salesOrderApproval:!0},this.maxNav=3,this.visitId=null,this.clientId=null,this.form=this.baseService.salesOrderForm}OpenChangInput(t,n){this.showEdit=!0,this.priceModel=n.price,this.priceModelIndex=t}ChangInput(){this.form.orderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}ngOnDestroy(){this.removeLocalStorage(),this.notifier.next(),this.notifier.complete(),sessionStorage.removeItem("visitId")}ngOnInit(){localStorage.getItem("isReopen")&&(this.isReopen=!0),this.resetForm(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.checkTotal(),this.baseService.checkValidation.subscribe(n=>{this.checkdisableForm()}),this.form.clientId&&(this.getClientSearchDropdwon(this.form.clientId),this.getClientInfo(this.form.clientId)),this.searchClient.pipe((0,Pe.B)(300),(0,Ve.F)(),(0,le.n)(n=>this.loadClient(n))).subscribe(),this.getProductOffer(),this.GetSetting(),this.visitId=sessionStorage.getItem("visitId")||null,this.clientId=sessionStorage.getItem("clientId")||null,this.visitId>0&&this.getClientInfo(this.clientId)}GetSetting(){this.generalSettingService.get().subscribe(t=>{this.setting=t.data},t=>{console.log(t)})}GetServiceList(t,n){this.serviceService.GetServiceList(t,n).subscribe(i=>{i.data.categories.unshift({id:0,name:this.getTranslationText("general.table.all"),isSelected:!0}),this.productsLookUp=i.data,this.productsOffer=i.data})}getTranslationText(t){let n="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{n=i}),n}checkTotal(){this.subtotal=this.form.items.filter(n=>!n.isFree).reduce((n,i)=>n+((i.price||0)*(i.quantity||0)-(i.discount||0)),0),this.form.discountAmount<0&&(this.form.discountAmount=0),this.form.discountAmountAdd<0&&(this.form.discountAmountAdd=0);let t=0;if(this.form.isPrecentage?(this.form.discountAmount=this.form.discountAmount>100?100:this.form.discountAmount,t=this.subtotal-this.subtotal*(+this.form.discountAmount||0)*.01):t=this.subtotal-(+this.form.discountAmount||0),this.form.isPrecentageAdd?(this.form.discountAmountAdd=this.form.discountAmountAdd>100?100:this.form.discountAmountAdd,t-=this.subtotal*(+this.form.discountAmount||0)*.01):t-=+this.form.discountAmountAdd||0,this.beforeVatTotal=t,this.VATTotal=0==t?0:t+.15*t,this.form.total=this.total=this.VATTotal,this.productOffer.length>0&&this.form.items.length>0){let n=this.productOfferService.checkItemOffer(this.form,this.productOffer);this.form={...n}}this.maxNav=4}setFormByOrderCode(t){this.form=t,this.checkTotal(),this.form.isFree&&(this.form.isPrecentage=!0,this.form.discountAmount=100)}onTimeSelected(t){this.form.visitDate=t.dataVisit,this.form.orderTeams=t.selectedTimes}onNavChange(t){this.baseService.salesOrderForm.isCustomerDataValid?2===t.nextId||t.nextId===this.maxNav?this.baseService.salesOrderForm.clientId?this.active=t.nextId:(this.alertService.error("orderManagement.order.mustSelectClient"),t.preventDefault()):t.nextId===this.maxNav+1?this.isFinished?this.active=t.nextId:t.preventDefault():this.active=t.nextId:(this.alertService.error("orderManagement.order.mustSelectClient"),t.preventDefault())}changeTab(){}finishedOrder(t){this.isFinished=!0,this.orderCode=t,this.active=4,this.resetForm()}finishedUpdateOrder(t){this.isFinished=!0,this.orderCode=t,this.active=6}newOrder(){this.resetForm(),this.active=1,this.total=0,this.subtotal=0,this.isFinished=!1}editOrder(){this.active=1}resetForm(){this.form=this.baseService.salesOrderForm={clientVisitDate:new Date,id:null,clientLocationId:0,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:"",serviceCategoryCode:0,isCustomerDataValid:!1},this.clientInfo={}}removeService(t,n,i=!0){this.form.items.splice(t,1),i?this.baseService.removeServiceOfferQ.next(n):this.baseService.removeServiceQ.next(n)}updatePrice(t,n){this.form.items[n].price=t.price*t.quantity}itemIsFreeChange(t,n){let i=this.form.items[n];i.price=0==t.target.checked?i.originalPrice:0,this.checkTotal()}decrement(t){let n=this.form.items[t];n.quantity<=1||(n&&(n.quantity=n.quantity-1),this.checkTotal())}increment(t){let n=this.form.items[t];n&&this.checkOffer(n,1)&&(n.quantity=n.quantity+1),this.checkTotal()}checkOffer(t,n){return!t.isFree||this.form.itemsOffers.length<=0||!(this.form.items.filter(r=>r.offerId==t.offerId&&1==r.isFree).reduce((r,o)=>r+o.quantity,0)+n>t.quantityY)||(this.alertService.info("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0633\u0645\u0648\u062d \u0628\u064a\u0647\u0627 "+t.quantityY),!1)}quantityChange(t,n){let i=parseInt(t.target.value),r=this.form.items[n];if(i<=0||isNaN(i))return r.quantity=1,void this.checkTotal();r.quantity=this.checkOffer(r,i)?i:r.quantity,this.checkTotal()}checkPrecentageChange(t){this.form.isPrecentage=t.target.checked,this.checkTotal()}checkPrecentageAddChange(t){this.form.isPrecentageAdd=t.target.checked,this.checkTotal()}onIsFreeChange(t){t?(this.form.isPrecentage=!0,this.form.discountAmount=100):(this.form.isPrecentage=!1,this.form.discountAmount=0),this.checkTotal()}orderFinished(t=20){if(this.loaderStart)return;this.loaderStart=!0;let n={id:0,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:t,notes:this.form.notes,terms:this.form.terms,visitId:this.visitId,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.items.map(i=>({discount:i.discount,discountType:i.discountType,itemId:i.itemId,clientQuantity:i.quantity,id:0,price:i.price,unitId:i.unitId,isFree:i.isFree,originalPrice:i.originalPrice}))};this.ngxLoader.startLoader("order"),this.setting.salesOrderApproval?this.registerForApproval(n,t):this.registerForDirectSales(n,t)}registerForApproval(t,n){t.salesRequestDetails=t.offerOrderDetails,t.salesRequestStatus=t.offerOrderStatus,delete t.offerOrderDetails,delete t.offerOrderStatus,this.baseService.registerRequestSales(t).subscribe(i=>{i.success?(this.ngxLoader.stopLoader("order"),this.statusOrder=n,this.orderCode=i.data.id,this.finishedOrder(i.data.id),this.subtotal=0,this.beforeVatTotal=0,this.VATTotal=0,this.alertService.success(),this.visitId>0&&this.goVisit(),this.checkdisableForm()):(this.alertService.error(),this.loaderStart=!1,this.ngxLoader.stopLoader("order"))},()=>{this.loaderStart=!1,this.alertService.error(),this.ngxLoader.stopLoader("order")})}registerForDirectSales(t,n){this.baseService.register(t).subscribe(i=>{i.success?(this.ngxLoader.stopLoader("order"),this.statusOrder=n,this.orderCode=i.data.id,this.finishedOrder(i.data.id),this.subtotal=0,this.beforeVatTotal=0,this.VATTotal=0,this.alertService.success(),this.checkdisableForm()):(this.alertService.error(),this.loaderStart=!1,this.ngxLoader.stopLoader("order"))},()=>{this.loaderStart=!1,this.alertService.error(),this.ngxLoader.stopLoader("order")})}checkdisableForm(){this.form.clientLocationId=this.baseService.salesOrderForm.clientLocationId;let t=!1;null==this.form.clientId||0==this.form.clientId||null==this.form.clientId||null==this.form.clientLocationId||0==this.form.clientLocationId||null==this.form.clientLocationId||this.form.items.length<=0?t=!0:this.form.items.length>0?(this.form.items.forEach(n=>{0!=n.itemId||(t=!0)}),t=!!t):t=!1,this.disabledStatus=t}openModalRequest(t,n="md"){this.formRequest={id:0,clientId:this.form.clientId},this.modalService.open(t,{centered:!0,size:n})}OnRequestSubmit(){this.ngxLoader.start(this.operationLoader),this.requestPersonSalesService.register(this.formRequest).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.alertService.success(),this.modalService.dismissAll()):this.alertService.error(t.message)},t=>{this.alertService.error("general.message."+t)})}next(){let t=this.active+1;this.baseService.salesOrderForm.isCustomerDataValid&&(2!==t&&t!==this.maxNav||this.baseService.salesOrderForm.clientId)?t===this.maxNav+1&&!this.isFinished||(null!=this.form?.itemsOffers&&this.form.itemsOffers.length>0?this.active=Math.min(t,this.maxNav):(t=2==this.active?4:t,this.active=Math.min(t,this.maxNav+1))):this.alertService.error("orderManagement.order.mustSelectClient")}back(){let t=this.active-1;null!=this.form?.itemsOffers&&this.form.itemsOffers.length<=0&&4==this.active&&(t-=1,this.active=t<=0?1:t),t-=1,this.active=t<=0?1:t}goEdit(t){this.router.navigateByUrl("/basicData/products/edit",{state:{id:t}})}getClientSearchDropdwon(t){this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=n.data})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getClientInfo(t){null!=t&&(this.baseService.salesOrderForm.clientId=t,this.baseService.salesOrderForm.clientVisitDate=this.form.clientVisitDate,this.clientService.GetClientInfo(t).subscribe(n=>{if(n.data.isValid){this.baseService.salesOrderForm.isCustomerDataValid=!0;let i=n.data.client;this.form.creditLimit=i.creditLimit,this.baseService.salesOrderForm.terms=i.terms,this.baseService.salesOrderForm.clientGroupId=i.clientGroupId,this.baseService.checkValidationSource.next(!0),this.clientInfo=i,this.form.isPrecentage=2==i.discountType,this.form.discountAmount=i.discount,this.GetServiceList(this.baseService.salesOrderForm.clientGroupId,i.priceListId),this.getClientLocations(t)}else{this.baseService.salesOrderForm.isCustomerDataValid=!1;let i=n.data.client;i.postalCode=+i.postalCode,i.subNumber=+i.subNumber,i.buildingNumber=+i.buildingNumber,this.customer=i,this.errors=n.data.errors,this.modalService.open(this.clientModal,{centered:!0,size:"md"})}}))}getClientDropdwon(t){return this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,le.n)(n=>(this.clients=n.data,this.loading=!1,[])))}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Ie.of)([])):this.getClientDropdwon(t)}getClientLocations(t){this.clientService.GetClientLocations(t).subscribe(n=>{this.form.locations=n.data,this.baseService.salesOrderForm.locations=n.data})}onStepChange(t=1){this.resetForm(),this.step=t}goUpdate(){this.modalService.dismissAll(),this.step=2}validateDiscount(){!this.form.isPrecentage&&this.form.discountAmount>this.subtotal&&(this.form.discountAmount=this.subtotal),this.checkTotal()}getDiscountPercentage(){return this.form.discountAmount&&0!==this.subtotal?((this.form.discountAmount||0)/this.subtotal*100).toFixed(2)+"%":"0%"}getProductOffer(){this.productOfferService.GetActiveOffer().subscribe(t=>{this.productOffer=t.data})}goVisit(){this.removeLocalStorage(),this.router.navigate(["/sales/startVisits"],{state:{id:this.visitId}})}removeLocalStorage(){sessionStorage.removeItem("visitId"),sessionStorage.removeItem("clientId")}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(b.c$),e.rXU(re.A),e.rXU(nt.u),e.rXU(D.u),e.rXU(R.eD),e.rXU(m.vh),e.rXU(_.Bq),e.rXU(w.Ix),e.rXU(w.nX),e.rXU(ve.X),e.rXU(_t.N),e.rXU(Ci.L),e.rXU(Si.k))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["sales-operation"]],viewQuery:function(n,i){if(1&n&&e.GBs(nn,5),2&n){let r;e.mGM(r=e.lsd())&&(i.clientModal=r.first)}},inputs:{form:"form",orderCode:"orderCode",mobile:"mobile",cityCode:"cityCode",agentName:"agentName",pendingCode:"pendingCode",isInner:"isInner",isOrderEdit:"isOrderEdit",isReopen:"isReopen",clients:"clients"},decls:10,vars:7,consts:[["RequestModal",""],["clientModal",""],["formEntity","ngForm"],["customNav","ngbNav"],["discountAmount","ngModel"],["cost","ngModel"],["notes","ngModel"],[1,"step-wizard"],["translate","sales.salesOrder.salesOrderNew",1,"step",3,"click"],["class","badge bg-danger ms-1",4,"ngIf"],["translate","sales.salesOrder.completeCustomerData",1,"step"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"badge","bg-danger","ms-1"],[1,"row"],[1,"col-xl-8"],[1,"card"],[1,"card-body","checkout-tab"],["class","row my-2",4,"ngIf"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"step-arrow-nav"],["ngbNav","","role","tablist",1,"nav","nav-pills","nav-justified","custom-nav",3,"navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink","","id","pills-bill-info-tab","data-bs-toggle","pill","data-bs-target","#pills-bill-info","role","tab","aria-controls","pills-bill-info","aria-selected","true","data-position","0",1,"nav-link","fs-16","p-2"],[1,"ri-user-3-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"d-inline","mt-2"],["ngbNavContent",""],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link","fs-15","p-2"],[1,"ri-shopping-cart-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[3,"ngbNavItem",4,"ngIf"],[1,"ri-truck-line","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","me-2"],[1,"ri-checkbox-circle-line","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","me-2"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"card-footer","text-center",2,"padding","0.5rem","position","relative"],[1,"row","justify-content-center"],[1,"col-12","col-md-3"],["type","button","class","btn btn-primary btn-label waves-effect waves-light rounded-pill mx-1",3,"click",4,"ngIf"],["type","button","class","btn btn-primary btn-label waves-effect right waves-light rounded-pill",3,"click",4,"ngIf"],["class","col-12 col-md-3",4,"ngIf"],[1,"col-xl-4"],[1,"card-header"],[1,"d-flex"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col",2,"width","90px"],["scope","col"],["scope","col",1,"text-end"],["lass","py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px !important"],["colspan","3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"w-75","fw-semibold"],[1,"w-25","fw-semibold","text-end"],["class","col-6 input-group",4,"hasPermission"],[1,"mt-2","text-left"],["class","text-danger small",4,"ngIf"],["class","small text-danger",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"fw-semibold","text-end"],[1,"table-active","py-0"],[1,"py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px !important"],["colspan","2",1,"fw-semibold"],[1,"fw-semibold","text-end","text-danger"],[1,"row","my-2"],[1,"col-12"],["for","mobile","translate","",1,"form-label","text-secondary"],["bindLabel","displayName","id","mobile","bindValue","id","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel","disabled"],[3,"calacTotal","setFormByOrderCode","isOrderEdit","isInner","clientInfo","form"],[3,"CalcTotal","isOrderEdit","productsLookUp","form"],[1,"ri-alarm-warning-line","fs-16","p-2","bg-danger-subtle","text-danger","rounded-circle","align-middle","mx-2"],[3,"serviceCategories","form"],[3,"isOrderEdit","form"],[3,"editOrderActiveTab","newOrder","statusOrder","orderCode","form"],["type","button",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click"],[1,"ri-arrow-left-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.back"],["type","button",1,"btn","btn-primary","btn-label","waves-effect","right","waves-light","rounded-pill",3,"click"],[1,"ri-arrow-right-circle-fill","label-icon","align-middle","rounded-pill","fs-16","ms-2"],["translate","general.action.next"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-primary","btn-label","waves-effect","right","waves-light","rounded-pill"],[1,"ri-more-2-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.actions"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"ngIf"],[3,"click"],[1,"dropdown-item"],[1,"text-warning","ri-add-box-fill","align-bottom","me-2"],["translate","orderManagement.order.orderSavedAsDraft"],[1,"text-success","ri-add-box-fill","align-bottom","me-2"],["translate","orderManagement.order.orderSaved"],[1,"text-info","ri-add-box-fill","align-bottom","me-2"],["translate","sales.salesOrder.addRequestLimit"],[4,"ngFor","ngForOf"],[1,"avatar-container","bg-light","rounded","p-1"],["alt","",1,"img-fluid","d-block",3,"src"],[1,"fs-14"],["href","javascript: void(0);",1,"text-body",3,"click"],[1,"text-muted","mb-0"],[1,"text-muted","me-0"],[1,"text-muted","me-2"],[1,"row","align-items-center"],[1,"col-12","col-md-6","text-mute","text-center"],[1,"input-step","mt-2"],["type","button",1,"minus","btn-success",3,"click"],["type","number","min","1","max","100",1,"product-quantity",3,"keyup","change","ngModelChange","id","ngModel"],["type","button",1,"plus","btn-success",3,"click"],[1,"col-12","col-md-4","text-mute","text-right"],[1,"ri-close-fill","text-danger","cursor-pointer",3,"click"],["colspan","3",1,"text-center","text-danger"],["id","empty-cart",1,"text-center","empty-cart",2,"display","block"],[1,"avatar-md","mx-auto","my-3"],[1,"avatar-title","bg-info-subtle","text-info","fs-36","rounded-circle"],[1,"bx","bx-cart","bx-tada"],[1,"mb-3","text-danger"],[1,"col-6","input-group"],["type","button",1,"btn","btn-danger"],["tooltipPosition","top",1,"input-group-text","d-inline",3,"pTooltip"],["type","checkbox","aria-label","Checkbox for following text input",1,"form-check-input",3,"change","checked"],[1,"p-1"],["min","0","InputTirmFilter","","name","discountAmount","type","number","id","discountAmount","required","",1,"form-control","text-right",3,"change","ngModelChange","max","ngModel"],[1,"text-danger","small"],[1,"small","text-danger"],[3,"OnStepChange","showBreadcrumbs","form","isEdit","errors"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","number","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],["translate","approvals.customerRequest.requiedFields",1,"fs-5"],["role","alert",1,"alert","alert-danger","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"ri-error-warning-line","label-icon"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","id","save","translate","general.action.update",1,"btn","w-sm","btn-success","fs-4",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",7)(1,"div",8),e.bIt("click",function(){return e.eBV(r),e.Njj(i.step=1)}),e.DNE(2,rn,2,1,"span",9),e.k0s(),e.nrm(3,"div",10),e.k0s(),e.DNE(4,kn,126,84,"div",11)(5,Tn,2,4,"div",12)(6,wn,24,7,"ng-template",null,0,e.C5r)(8,Rn,13,1,"ng-template",null,1,e.C5r)}2&n&&(e.R7$(),e.AVh("active",1==i.step),e.R7$(),e.Y8G("ngIf",i.visitId),e.R7$(),e.AVh("active",2==i.step),e.R7$(),e.Y8G("ngIf",1==i.step),e.R7$(),e.Y8G("ngIf",2==i.step))},dependencies:[m.Sq,m.bT,_.Um,_.X9,_.sy,_.Gx,_.Ri,_.WA,_.m_,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.VZ,d.zX,d.vS,d.cV,b.Mm,X.m,W.p,$.vr,R.Cv,ke.m,Ti,Pi,$i,Hi,Qi.z,tn,b.D9],styles:[".avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;background-color:#f8f9fa;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.avatar-container[_ngcontent-%COMP%]{width:40px;height:40px}}"]})}}return a})(),On=(()=>{class a{constructor(){this.breadCrumbItems=[],this.addOrders="orderManagement.order.addOrders"}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-register"]],decls:1,vars:0,template:function(n,i){1&n&&e.nrm(0,"sales-operation")},dependencies:[Fn],encapsulation:2})}}return a})();var ee=u(56701),Ee=u(26364),Y=u(75622),ye=u(67569),ue=u(21626);let Vn=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"ShippingTruck/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var K=u(91426),se=u(53928),ie=u(40724),J=u(88148),Z=u(91580),te=u(5779);const En=()=>["salesSetting.register"],Dn=()=>["salesSetting.edit"],Nn=()=>["salesSetting.delete"];function Ln(a,s){1&a&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," sales.shippingTruck.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," sales.shippingTruck.truckNumber "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," sales.shippingTruck.truckDriverName "),e.k0s(),e.j41(12,"th",31),e.EFF(13," sales.shippingTruck.cityName "),e.k0s(),e.j41(14,"th",32),e.nrm(15,"i",28),e.EFF(16," general.table.isActive "),e.k0s(),e.nrm(17,"th",31),e.k0s())}function Pn(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",40),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t.cityName)}}function Gn(a,s){1&a&&e.nrm(0,"span",41)}function $n(a,s){1&a&&e.nrm(0,"span",42)}function Bn(a,s){if(1&a&&(e.nrm(0,"i",43),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",44),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",45),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function An(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(20);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",47),e.k0s()}}function Xn(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(22);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",49),e.k0s()}}function Yn(a,s){if(1&a&&(e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Pn,3,1,"ng-container",34),e.k0s(),e.j41(11,"td"),e.DNE(12,Gn,1,0,"span",35)(13,$n,1,0,"span",36),e.k0s(),e.j41(14,"td"),e.DNE(15,Bn,10,9,"ng-template",null,3,e.C5r),e.nrm(17,"i",37),e.DNE(18,An,2,0,"button",38)(19,Xn,2,0,"button",39),e.k0s()()),2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(16);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.truckNumber),e.R7$(2),e.JRh(t.truckDriverName),e.R7$(2),e.Y8G("ngForOf",t.cities),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,Dn)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Nn))}}function zn(a,s){1&a&&(e.j41(0,"div",50),e.EFF(1," general.table.noData "),e.k0s())}function Un(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",51)(1,"div",52),e.nrm(2,"ngb-pagination-info",53),e.j41(3,"table-length",54),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",55)(5,"ngb-pagination",56),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function qn(a,s){1&a&&(e.j41(0,"span",82),e.EFF(1,"general.action.register "),e.k0s())}function Hn(a,s){1&a&&(e.j41(0,"span",82),e.EFF(1,"general.action.edit "),e.k0s())}function Qn(a,s){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wn(a,s){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Jn(a,s){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Zn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",57)(1,"div",58)(2,"h4",59),e.DNE(3,qn,2,0,"span",60)(4,Hn,2,0,"span",60),e.j41(5,"span",61),e.EFF(6),e.k0s()(),e.j41(7,"button",62),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",63),e.nrm(9,"ngx-ui-loader",18),e.j41(10,"form",64,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",65)(13,"label",66),e.EFF(14,"sales.shippingTruck.name"),e.k0s(),e.j41(15,"input",67,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.name,i)||(r.form.name=i),e.Njj(i)}),e.k0s(),e.DNE(17,Qn,2,0,"div",68),e.k0s(),e.j41(18,"div",65)(19,"label",69),e.EFF(20,"sales.shippingTruck.truckNumber"),e.k0s(),e.j41(21,"input",70,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.truckNumber,i)||(r.form.truckNumber=i),e.Njj(i)}),e.k0s(),e.DNE(23,Wn,2,0,"div",68),e.k0s(),e.j41(24,"div",65)(25,"label",71),e.EFF(26,"sales.shippingTruck.driver"),e.k0s(),e.j41(27,"ng-select",72,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.truckDriverId,i)||(r.form.truckDriverId=i),e.Njj(i)}),e.k0s(),e.DNE(29,Jn,2,0,"div",68),e.k0s(),e.j41(30,"div",73)(31,"label",71),e.EFF(32,"sales.shippingTruck.cities"),e.k0s(),e.j41(33,"ng-select",74),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cities,i)||(r.form.cities=i),e.Njj(i)}),e.k0s()(),e.j41(34,"div",75)(35,"label",76),e.EFF(36,"general.table.isActive"),e.k0s(),e.j41(37,"p-inputSwitch",77),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(38,"div",78)(39,"button",79),e.nrm(40,"i",80)(41,"span",81),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.sdS(28),o=e.XpG();e.R7$(3),e.Y8G("ngIf",!o.isEditForm),e.R7$(),e.Y8G("ngIf",o.isEditForm),e.R7$(2),e.JRh(o.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId",o.operationLoader),e.R7$(6),e.R50("ngModel",o.form.name),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",o.form.truckNumber),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.Y8G("items",o.employees)("multiple",!1),e.R50("ngModel",o.form.truckDriverId),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.Y8G("items",o.cities)("multiple",!0),e.R50("ngModel",o.form.cities),e.R7$(4),e.R50("ngModel",o.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Kn(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",84),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let ea=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.employeeService=x,this.cityService=v,this.title="sales.shippingTruck.title",this.titleOperation="sales.shippingTruck.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities=[],this.nameSerach="shippingTrunk",this.configRoute(),this.getEmployees(),this.getCities()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getEmployees(){this.employeeService.getDropDown().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.employees=t.data},()=>{this.alertService.error()})}getCities(){this.cityService.GetAllDropDown().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.cities=t.data},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({workTime:n.workTime,isActive:this.getTranslationText("general.table.active")})}),t}mapRegisterForm(t){let n={...t};return n.id=0,n.cities=n.cities.map(i=>({cityId:i,shippingTruckId:0})),n}mapForm(t){let n={...t};return n.cities=n.cities.map(i=>({cityId:i,shippingTruckId:n.id})),n}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(Vn),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(se.O),e.rXU(xe.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-shipping-trucks"]],features:[e.Vt3],decls:23,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["truckNumber","ngModel"],["truckDriverId","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","truckNumber","translate","",2,"width","10%"],["pSortableColumn","truckDriverId","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],[1,"fs-5"],[4,"ngFor","ngForOf"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"badge","badge-pill","bg-primary","mx-1"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","truckNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","truckNumber","type","text","id","truckNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","truckDriverId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","mb-1"],["name","cities","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("addNew",function(){e.eBV(r);const l=e.sdS(20);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.filterValue,l)||(i.pagination.filterValue=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17),e.nrm(11,"ngx-ui-loader",18),e.j41(12,"div",19)(13,"p-table",20,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(15,Ln,18,0,"ng-template",21)(16,Yn,20,12,"ng-template",22),e.k0s()(),e.DNE(17,zn,2,0,"div",23)(18,Un,6,8,"div",24),e.k0s()()()(),e.DNE(19,Zn,42,19,"ng-template",null,1,e.C5r)(21,Kn,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(17,En))("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,15,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderSearchShap)("loaderId",i.searchLoader),e.R7$(2),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.Sq,m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,$.vr,_.md,X.m,W.p,m.vh,b.D9],encapsulation:2})}}return a})(),ta=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"VisitType/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const ia=()=>["salesSetting.register"],na=()=>["salesSetting.edit"],aa=()=>["salesSetting.delete"];function ra(a,s){1&a&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",28),e.nrm(7,"i",27),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",29),e.nrm(10,"i",27),e.EFF(11," sales.visitType.color "),e.k0s(),e.j41(12,"th",30),e.nrm(13,"i",27),e.EFF(14," general.table.isActive "),e.k0s(),e.nrm(15,"th",31),e.k0s())}function sa(a,s){1&a&&e.nrm(0,"span",38)}function oa(a,s){1&a&&e.nrm(0,"span",39)}function la(a,s){if(1&a&&(e.nrm(0,"i",40),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",41),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",42),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function da(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(19);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",44),e.k0s()}}function ca(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(21);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",46),e.k0s()}}function ma(a,s){if(1&a&&(e.j41(0,"tr",32)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.nrm(7,"td"),e.j41(8,"td"),e.DNE(9,sa,1,0,"span",33)(10,oa,1,0,"span",34),e.k0s(),e.j41(11,"td"),e.DNE(12,la,10,9,"ng-template",null,3,e.C5r),e.nrm(14,"i",35),e.DNE(15,da,2,0,"button",36)(16,ca,2,0,"button",37),e.k0s()()),2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(13);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(),e.xc7("background-color",t.color),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,na)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,aa))}}function pa(a,s){1&a&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function ua(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ga(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.register "),e.k0s())}function ha(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.edit "),e.k0s())}function _a(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function fa(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ba(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",54)(1,"div",55)(2,"h4",56),e.DNE(3,ga,2,0,"span",57)(4,ha,2,0,"span",57),e.j41(5,"span",58),e.EFF(6),e.k0s()(),e.j41(7,"button",59),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",60),e.nrm(9,"ngx-ui-loader",61),e.j41(10,"form",62,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",63)(13,"label",64),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",65,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameAr,i)||(r.form.nameAr=i),e.Njj(i)}),e.k0s(),e.DNE(17,_a,2,0,"div",66),e.k0s(),e.j41(18,"div",63)(19,"label",67),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",68,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameEn,i)||(r.form.nameEn=i),e.Njj(i)}),e.k0s(),e.DNE(23,fa,2,0,"div",66),e.k0s(),e.j41(24,"div",63)(25,"label",69),e.EFF(26,"sales.visitType.color"),e.k0s(),e.j41(27,"input",70,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.color,i)||(r.form.color=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div",71)(30,"label",72),e.EFF(31,"general.table.isActive"),e.k0s(),e.j41(32,"p-inputSwitch",73),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(33,"div",74)(34,"button",75),e.nrm(35,"i",76)(36,"span",77),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.color),e.R7$(5),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function va(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let xa=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.employeeService=x,this.cityService=v,this.title="sales.visitType.title",this.titleOperation="sales.visitType.titleOperation",this.keySelected="",this.configRoute()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Visit Types",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(ta),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(se.O),e.rXU(xe.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["visitType"]],features:[e.Vt3],decls:22,vars:15,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["color","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","color","translate","",2,"width","3%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","color","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","color","type","color","id","color",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("addNew",function(){e.eBV(r);const l=e.sdS(19);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.filterValue,l)||(i.pagination.filterValue=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17)(11,"div",18)(12,"p-table",19,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(14,ra,16,0,"ng-template",20)(15,ma,17,12,"ng-template",21),e.k0s()(),e.DNE(16,pa,2,0,"div",22)(17,ua,6,8,"div",23),e.k0s()()()(),e.DNE(18,ba,37,13,"ng-template",null,1,e.C5r)(20,va,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(14,ia))("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(5),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.vS,d.cV,_.s5,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,_.md,X.m,W.p,m.vh,b.D9]})}}return a})(),ya=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"VisitObjective/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Ca=()=>["salesSetting.register"],Sa=()=>["salesSetting.edit"],Ia=()=>["salesSetting.delete"];function ka(a,s){1&a&&(e.j41(0,"tr",23)(1,"th",24),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",25),e.nrm(4,"i",26),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",27),e.nrm(7,"i",26),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",28),e.nrm(10,"i",26),e.EFF(11," general.table.isActive "),e.k0s(),e.nrm(12,"th",29),e.k0s())}function Ta(a,s){1&a&&e.nrm(0,"span",36)}function ja(a,s){1&a&&e.nrm(0,"span",37)}function wa(a,s){if(1&a&&(e.nrm(0,"i",38),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",39),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",40),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ma(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(19);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",42),e.k0s()}}function Ra(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(21);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",44),e.k0s()}}function Fa(a,s){if(1&a&&(e.j41(0,"tr",30)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,Ta,1,0,"span",31)(9,ja,1,0,"span",32),e.k0s(),e.j41(10,"td"),e.DNE(11,wa,10,9,"ng-template",null,3,e.C5r),e.nrm(13,"i",33),e.DNE(14,Ma,2,0,"button",34)(15,Ra,2,0,"button",35),e.k0s()()),2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(12);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(8,Sa)),e.R7$(),e.Y8G("hasPermission",e.lJ4(9,Ia))}}function Oa(a,s){1&a&&(e.j41(0,"div",45),e.EFF(1," general.table.noData "),e.k0s())}function Va(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",46)(1,"div",47),e.nrm(2,"ngb-pagination-info",48),e.j41(3,"table-length",49),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",50)(5,"ngb-pagination",51),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ea(a,s){1&a&&(e.j41(0,"span",74),e.EFF(1,"general.action.register "),e.k0s())}function Da(a,s){1&a&&(e.j41(0,"span",74),e.EFF(1,"general.action.edit "),e.k0s())}function Na(a,s){1&a&&(e.j41(0,"div",75),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function La(a,s){1&a&&(e.j41(0,"div",75),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Pa(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",52)(1,"div",53)(2,"h4",54),e.DNE(3,Ea,2,0,"span",55)(4,Da,2,0,"span",55),e.j41(5,"span",56),e.EFF(6),e.k0s()(),e.j41(7,"button",57),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",58),e.nrm(9,"ngx-ui-loader",59),e.j41(10,"form",60,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",61)(13,"label",62),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",63,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameAr,i)||(r.form.nameAr=i),e.Njj(i)}),e.k0s(),e.DNE(17,Na,2,0,"div",64),e.k0s(),e.j41(18,"div",61)(19,"label",65),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",66,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameEn,i)||(r.form.nameEn=i),e.Njj(i)}),e.k0s(),e.DNE(23,La,2,0,"div",64),e.k0s(),e.j41(24,"div",67)(25,"label",68),e.EFF(26,"general.table.isActive"),e.k0s(),e.j41(27,"p-inputSwitch",69),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(28,"div",70)(29,"button",71),e.nrm(30,"i",72)(31,"span",73),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Ga(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",76),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let $a=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.employeeService=x,this.cityService=v,this.title="sales.visitObjective.title",this.titleOperation="sales.visitObjective.titleOperation",this.keySelected="",this.configRoute()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Visit Types",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(ya),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(se.O),e.rXU(xe.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["visitObjective"]],features:[e.Vt3],decls:22,vars:15,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"base-filter",10),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("addNew",function(){e.eBV(r);const l=e.sdS(19);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,11),e.j41(5,"div",12)(6,"div",13)(7,"input",14),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.filterValue,l)||(i.pagination.filterValue=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",15),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",16)(11,"div",17)(12,"p-table",18,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(14,ka,13,0,"ng-template",19)(15,Fa,16,10,"ng-template",20),e.k0s()(),e.DNE(16,Oa,2,0,"div",21)(17,Va,6,8,"div",22),e.k0s()()()(),e.DNE(18,Pa,32,12,"ng-template",null,1,e.C5r)(20,Ga,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(14,Ca))("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(5),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.vS,d.cV,_.s5,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,_.md,X.m,W.p,m.vh,b.D9]})}}return a})(),ft=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"VisitRescheduleReason/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Ba=()=>["salesSetting.register"],Aa=()=>["salesSetting.edit"],Xa=()=>["salesSetting.delete"];function Ya(a,s){1&a&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",28),e.nrm(7,"i",27),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",29),e.nrm(10,"i",27),e.EFF(11," sales.visitType.color "),e.k0s(),e.j41(12,"th",30),e.nrm(13,"i",27),e.EFF(14," general.table.isActive "),e.k0s(),e.nrm(15,"th",31),e.k0s())}function za(a,s){1&a&&e.nrm(0,"span",38)}function Ua(a,s){1&a&&e.nrm(0,"span",39)}function qa(a,s){if(1&a&&(e.nrm(0,"i",40),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",41),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",42),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ha(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(19);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",44),e.k0s()}}function Qa(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(21);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",46),e.k0s()}}function Wa(a,s){if(1&a&&(e.j41(0,"tr",32)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.nrm(7,"td"),e.j41(8,"td"),e.DNE(9,za,1,0,"span",33)(10,Ua,1,0,"span",34),e.k0s(),e.j41(11,"td"),e.DNE(12,qa,10,9,"ng-template",null,3,e.C5r),e.nrm(14,"i",35),e.DNE(15,Ha,2,0,"button",36)(16,Qa,2,0,"button",37),e.k0s()()),2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(13);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(),e.xc7("background-color",t.color),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,Aa)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Xa))}}function Ja(a,s){1&a&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function Za(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ka(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.register "),e.k0s())}function er(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.edit "),e.k0s())}function tr(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ir(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function nr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",54)(1,"div",55)(2,"h4",56),e.DNE(3,Ka,2,0,"span",57)(4,er,2,0,"span",57),e.j41(5,"span",58),e.EFF(6),e.k0s()(),e.j41(7,"button",59),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",60),e.nrm(9,"ngx-ui-loader",61),e.j41(10,"form",62,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",63)(13,"label",64),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",65,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameAr,i)||(r.form.nameAr=i),e.Njj(i)}),e.k0s(),e.DNE(17,tr,2,0,"div",66),e.k0s(),e.j41(18,"div",63)(19,"label",67),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",68,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameEn,i)||(r.form.nameEn=i),e.Njj(i)}),e.k0s(),e.DNE(23,ir,2,0,"div",66),e.k0s(),e.j41(24,"div",63)(25,"label",69),e.EFF(26,"sales.visitType.color"),e.k0s(),e.j41(27,"input",70,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.color,i)||(r.form.color=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div",71)(30,"label",72),e.EFF(31,"general.table.isActive"),e.k0s(),e.j41(32,"p-inputSwitch",73),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(33,"div",74)(34,"button",75),e.nrm(35,"i",76)(36,"span",77),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.color),e.R7$(5),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function ar(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let bt=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.title="sales.visitRescheduleReason.title",this.titleOperation="sales.visitRescheduleReason.titleOperation",this.keySelected="",this.configRoute()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Visit Types",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(ft),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["visitRescheduleReason"]],features:[e.Vt3],decls:22,vars:15,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["color","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","color","translate","",2,"width","3%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","color","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","color","type","color","id","color",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("addNew",function(){e.eBV(r);const l=e.sdS(19);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.filterValue,l)||(i.pagination.filterValue=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17)(11,"div",18)(12,"p-table",19,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(14,Ya,16,0,"ng-template",20)(15,Wa,17,12,"ng-template",21),e.k0s()(),e.DNE(16,Ja,2,0,"div",22)(17,Za,6,8,"div",23),e.k0s()()()(),e.DNE(18,nr,37,13,"ng-template",null,1,e.C5r)(20,ar,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(14,Ba))("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(5),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.vS,d.cV,_.s5,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,_.md,X.m,W.p,m.vh,b.D9]})}}return a})(),at=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"VisitCancelReason/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const rr=()=>["salesSetting.register"],sr=()=>["salesSetting.edit"],or=()=>["salesSetting.delete"];function lr(a,s){1&a&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",28),e.nrm(7,"i",27),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",29),e.nrm(10,"i",27),e.EFF(11," sales.visitType.color "),e.k0s(),e.j41(12,"th",30),e.nrm(13,"i",27),e.EFF(14," general.table.isActive "),e.k0s(),e.nrm(15,"th",31),e.k0s())}function dr(a,s){1&a&&e.nrm(0,"span",38)}function cr(a,s){1&a&&e.nrm(0,"span",39)}function mr(a,s){if(1&a&&(e.nrm(0,"i",40),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",41),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",42),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function pr(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(19);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",44),e.k0s()}}function ur(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(21);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",46),e.k0s()}}function gr(a,s){if(1&a&&(e.j41(0,"tr",32)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.nrm(7,"td"),e.j41(8,"td"),e.DNE(9,dr,1,0,"span",33)(10,cr,1,0,"span",34),e.k0s(),e.j41(11,"td"),e.DNE(12,mr,10,9,"ng-template",null,3,e.C5r),e.nrm(14,"i",35),e.DNE(15,pr,2,0,"button",36)(16,ur,2,0,"button",37),e.k0s()()),2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(13);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(),e.xc7("background-color",t.color),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,sr)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,or))}}function hr(a,s){1&a&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function _r(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function fr(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.register "),e.k0s())}function br(a,s){1&a&&(e.j41(0,"span",78),e.EFF(1,"general.action.edit "),e.k0s())}function vr(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function xr(a,s){1&a&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function yr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",54)(1,"div",55)(2,"h4",56),e.DNE(3,fr,2,0,"span",57)(4,br,2,0,"span",57),e.j41(5,"span",58),e.EFF(6),e.k0s()(),e.j41(7,"button",59),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",60),e.nrm(9,"ngx-ui-loader",61),e.j41(10,"form",62,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",63)(13,"label",64),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",65,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameAr,i)||(r.form.nameAr=i),e.Njj(i)}),e.k0s(),e.DNE(17,vr,2,0,"div",66),e.k0s(),e.j41(18,"div",63)(19,"label",67),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",68,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.nameEn,i)||(r.form.nameEn=i),e.Njj(i)}),e.k0s(),e.DNE(23,xr,2,0,"div",66),e.k0s(),e.j41(24,"div",63)(25,"label",69),e.EFF(26,"sales.visitType.color"),e.k0s(),e.j41(27,"input",70,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.color,i)||(r.form.color=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div",71)(30,"label",72),e.EFF(31,"general.table.isActive"),e.k0s(),e.j41(32,"p-inputSwitch",73),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(33,"div",74)(34,"button",75),e.nrm(35,"i",76)(36,"span",77),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.color),e.R7$(5),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Cr(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let vt=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.title="sales.visitCancelReason.title",this.titleOperation="sales.visitCancelReason.titleOperation",this.keySelected="",this.configRoute()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Visit Types",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(at),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["visitCancelReason"]],features:[e.Vt3],decls:22,vars:15,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["color","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","color","translate","",2,"width","3%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","color","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","color","type","color","id","color",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("addNew",function(){e.eBV(r);const l=e.sdS(19);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.filterValue,l)||(i.pagination.filterValue=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17)(11,"div",18)(12,"p-table",19,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(14,lr,16,0,"ng-template",20)(15,gr,17,12,"ng-template",21),e.k0s()(),e.DNE(16,hr,2,0,"div",22)(17,_r,6,8,"div",23),e.k0s()()()(),e.DNE(18,yr,37,13,"ng-template",null,1,e.C5r)(20,Cr,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(14,rr))("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(5),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.vS,d.cV,_.s5,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,_.md,X.m,W.p,m.vh,b.D9]})}}return a})();function Sr(a,s){1&a&&e.nrm(0,"app-shipping-trucks")}function Ir(a,s){1&a&&e.nrm(0,"visitType")}function kr(a,s){1&a&&e.nrm(0,"visitObjective")}function Tr(a,s){1&a&&e.nrm(0,"visitRescheduleReason")}function jr(a,s){1&a&&e.nrm(0,"visitCancelReason")}let wr=(()=>{class a{constructor(){this.title="sales.salesSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-setting"]],decls:39,vars:11,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","sales.shippingTruck.title",1,"d-sm-block"],["ngbNavContent",""],["translate","sales.visitType.title",1,"d-sm-block"],["translate","sales.visitObjective.title",1,"d-sm-block"],["translate","sales.visitRescheduleReason.title",1,"d-sm-block"],["translate","sales.visitCancelReason.title",1,"d-sm-block"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(n,i){if(1&n&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),e.nrm(10,"i",9),e.k0s(),e.nrm(11,"span",10),e.k0s(),e.DNE(12,Sr,1,0,"ng-template",11),e.k0s(),e.j41(13,"li",6)(14,"a",7)(15,"span",8),e.nrm(16,"i",9),e.k0s(),e.nrm(17,"span",12),e.k0s(),e.DNE(18,Ir,1,0,"ng-template",11),e.k0s(),e.j41(19,"li",6)(20,"a",7)(21,"span",8),e.nrm(22,"i",9),e.k0s(),e.nrm(23,"span",13),e.k0s(),e.DNE(24,kr,1,0,"ng-template",11),e.k0s(),e.j41(25,"li",6)(26,"a",7)(27,"span",8),e.nrm(28,"i",9),e.k0s(),e.nrm(29,"span",14),e.k0s(),e.DNE(30,Tr,1,0,"ng-template",11),e.k0s(),e.j41(31,"li",6)(32,"a",7)(33,"span",8),e.nrm(34,"i",9),e.k0s(),e.nrm(35,"span",15),e.k0s(),e.DNE(36,jr,1,0,"ng-template",11),e.k0s()(),e.j41(37,"div",16),e.nrm(38,"div",17),e.k0s()()()()),2&n){const r=e.sdS(6);e.FS9("title",e.bMT(1,9,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(6),e.Y8G("ngbNavItem",2),e.R7$(6),e.Y8G("ngbNavItem",3),e.R7$(6),e.Y8G("ngbNavItem",4),e.R7$(6),e.Y8G("ngbNavItem",5),e.R7$(7),e.Y8G("ngbNavOutlet",r)}},dependencies:[_.Um,_.X9,_.sy,_.Gx,_.Ri,_.WA,_.m_,Ee.m,b.Mm,ea,xa,$a,bt,vt,b.D9],encapsulation:2})}}return a})();var ze=u(96357),rt=u(12128),we=u(99902),Ge=u(35419),ge=u(26366),Ue=u(3200);const Mr=()=>["salesInvoices.register"],Rr=(a,s)=>({"bg-success-subtle text-success":a,"bg-danger-subtle text-danger":s}),Fr=()=>["salesInvoices.odooSync","salesInvoices.printPill"],Or=()=>["salesInvoices.odooSync"],Vr=()=>["salesInvoices.printPill"];function Er(a,s){1&a&&(e.j41(0,"tr",38)(1,"th",39),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",40),e.nrm(4,"i",41),e.EFF(5," orderManagement.order.invoiceCode "),e.k0s(),e.j41(6,"th",42),e.nrm(7,"i",41),e.EFF(8," orderManagement.order.clientName "),e.k0s(),e.j41(9,"th",43),e.nrm(10,"i",41),e.EFF(11," orderManagement.order.orderCode "),e.k0s(),e.j41(12,"th",44),e.nrm(13,"i",41),e.EFF(14," sales.salesInvoices.creationDue "),e.k0s(),e.j41(15,"th",45),e.EFF(16," sales.salesOrder.salsePerson "),e.k0s(),e.j41(17,"th",46),e.nrm(18,"i",41),e.EFF(19," sales.salesInvoices.total "),e.k0s(),e.j41(20,"th",47),e.nrm(21,"i",41),e.EFF(22," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(23,"th",48),e.nrm(24,"i",41),e.EFF(25," sales.salesInvoices.tax "),e.k0s(),e.j41(26,"th",49),e.nrm(27,"i",41),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.j41(29,"th",50),e.nrm(30,"i",41),e.EFF(31," sales.salesOrder.invoiceStatus "),e.k0s(),e.j41(32,"th",51),e.nrm(33,"i",41),e.EFF(34," sales.salesOrder.isSync "),e.k0s(),e.j41(35,"th",52),e.nrm(36,"i",41),e.EFF(37," sales.salesInvoices.notes "),e.k0s(),e.nrm(38,"th",53),e.k0s())}function Dr(a,s){1&a&&e.nrm(0,"span",69)}function Nr(a,s){1&a&&e.nrm(0,"span",70)}function Lr(a,s){1&a&&e.nrm(0,"span",71)}function Pr(a,s){1&a&&e.nrm(0,"span",72)}function Gr(a,s){1&a&&e.nrm(0,"span",73)}function $r(a,s){1&a&&(e.j41(0,"li")(1,"span",78),e.nrm(2,"i",83)(3,"span",84),e.k0s()())}function Br(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.Print(i.id))}),e.j41(1,"span",78),e.nrm(2,"i",83)(3,"span",85),e.k0s()()}}function Ar(a,s){if(1&a){const t=e.RV6();e.j41(0,"span",67)(1,"div",74)(2,"button",75),e.nrm(3,"i",76),e.k0s(),e.j41(4,"ul",77)(5,"li",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(55);return e.Njj(r.getInvoiceAttachments(i.id,o))}),e.j41(6,"span",78),e.nrm(7,"i",79)(8,"span",80),e.k0s()(),e.DNE(9,$r,4,0,"li",81)(10,Br,4,0,"li",82),e.k0s()()()}2&a&&(e.R7$(9),e.Y8G("hasPermission",e.lJ4(2,Or)),e.R7$(),e.Y8G("hasPermission",e.lJ4(3,Vr)))}function Xr(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",54)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",55),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.Print(i.id))}),e.nrm(4,"i",56),e.j41(5,"bdi",57),e.EFF(6),e.k0s()(),e.j41(7,"td",55),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(57);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(8,"a",58),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.nrm(11,"i",56),e.j41(12,"bdi",59),e.EFF(13),e.k0s()(),e.j41(14,"td")(15,"div"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"div",60),e.EFF(19),e.nI1(20,"date"),e.k0s()(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td")(30,"span",61),e.EFF(31),e.k0s()(),e.j41(32,"td"),e.DNE(33,Dr,1,0,"span",62)(34,Nr,1,0,"span",63)(35,Lr,1,0,"span",64),e.k0s(),e.j41(36,"td"),e.DNE(37,Pr,1,0,"span",65)(38,Gr,1,0,"span",66),e.k0s(),e.j41(39,"td"),e.EFF(40),e.k0s(),e.j41(41,"td")(42,"div",67),e.DNE(43,Ar,11,4,"span",68),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.rowIndex;e.R7$(2),e.JRh(n+1),e.R7$(4),e.SpI("#INV#",t.id,""),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(4),e.SpI("#SO#",t.offerOrderId," "),e.R7$(3),e.JRh(e.i5U(17,19,t.creationTime,"yyyy-MM-dd")),e.R7$(2),e.Y8G("ngClass",e.l_i(25,Rr,!t.isDue,t.isDue)),e.R7$(),e.JRh(e.i5U(20,22,t.dueDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.total),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.tax),e.R7$(3),e.JRh(t.net),e.R7$(2),e.Y8G("ngIf",0==t.status),e.R7$(),e.Y8G("ngIf",2==t.status),e.R7$(),e.Y8G("ngIf",3==t.status),e.R7$(2),e.Y8G("ngIf",t.isSync),e.R7$(),e.Y8G("ngIf",!t.isSync),e.R7$(2),e.JRh(t.notes),e.R7$(3),e.Y8G("hasPermission",e.lJ4(28,Fr))}}function Yr(a,s){1&a&&(e.j41(0,"div",86),e.EFF(1," general.table.noData "),e.k0s())}function zr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",87)(1,"div",88),e.nrm(2,"ngb-pagination-info",89),e.j41(3,"table-length",90),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",91)(5,"ngb-pagination",92),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ur(a,s){1&a&&(e.j41(0,"span",118),e.EFF(1,"general.action.register "),e.k0s())}function qr(a,s){1&a&&(e.j41(0,"span",118),e.EFF(1,"general.action.edit "),e.k0s())}function Hr(a,s){1&a&&(e.j41(0,"div",119),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Qr(a,s){1&a&&(e.j41(0,"div",119),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",122)(1,"i",123),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,r=e.XpG(2);return e.Njj(r.removeFile(i))}),e.k0s(),e.j41(2,"p-image",124),e.bIt("error",function(i){e.eBV(t);const r=e.XpG(3);return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}2&a&&(e.R7$(2),e.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function Jr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",122)(1,"i",123),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,r=e.XpG(2);return e.Njj(r.removeFile(i))}),e.k0s(),e.j41(2,"p-image",124),e.bIt("error",function(i){e.eBV(t);const r=e.XpG(3);return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&a){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("src",t.isNew?t.attachment:n.serverPath+t.attachment)("preview",!0)("alt","image")}}function Zr(a,s){if(1&a&&(e.j41(0,"div",120),e.DNE(1,Wr,3,3,"div",121)(2,Jr,3,3,"div",121),e.k0s()),2&a){const t=s.index,n=e.XpG(2);e.R7$(),e.Y8G("ngIf","application/pdf"===n.filesNames[t]),e.R7$(),e.Y8G("ngIf","application/pdf"!==n.filesNames[t])}}function Kr(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",93)(1,"div",94)(2,"h4",95),e.DNE(3,Ur,2,0,"span",96)(4,qr,2,0,"span",96),e.j41(5,"span",97),e.EFF(6),e.k0s()(),e.j41(7,"button",98),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",99),e.nrm(9,"ngx-ui-loader",31),e.j41(10,"form",100,5),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",101)(13,"label",102),e.EFF(14,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(15,"ng-select",103,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.paymentTypeId,i)||(r.form.paymentTypeId=i),e.Njj(i)}),e.k0s(),e.DNE(17,Hr,2,0,"div",104),e.k0s(),e.j41(18,"div",101)(19,"label",105),e.EFF(20,"sales.salesInvoices.cost"),e.k0s(),e.j41(21,"input",106,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(23,Qr,2,0,"div",107),e.k0s(),e.j41(24,"div",101)(25,"label",108),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"textarea",109),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.EFF(28,"                    "),e.k0s()(),e.j41(29,"div",10)(30,"div",110)(31,"label",102),e.EFF(32," orderManagement.order.attachment"),e.k0s(),e.j41(33,"input",111,8),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileSelected(i))}),e.k0s()(),e.j41(35,"div",112),e.DNE(36,Zr,3,2,"div",113),e.k0s()(),e.j41(37,"div",114)(38,"button",115),e.nrm(39,"i",116)(40,"span",117),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(16),i=e.sdS(22),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.Y8G("items",r.paymentMethods)("multiple",!1),e.R50("ngModel",r.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.cost),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.notes),e.R7$(9),e.Y8G("ngForOf",r.filesToShow),e.R7$(2),e.Y8G("disabled",!t.valid)}}function es(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",125),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function ts(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",128)(1,"p-image",129),e.bIt("error",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Y8G("src",n.serverPath+t.path)("preview",!0)}}function is(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",93)(1,"div",94),e.nrm(2,"h2",80),e.j41(3,"button",98),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",126)(5,"div",10),e.DNE(6,ts,2,2,"div",127),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.images)}}function ns(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",130),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let as=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C){super(t,n,c,i,r,o,l),this.baseService=i,this.paymentTypesService=h,this.formData=g,this.employeeService=x,this.regionService=v,this.cityService=C,this.title="sales.salesInvoices.title",this.titleOperation="sales.salesInvoices.payment",this.paymentMethods=[],this.searchForm={},this.form={file:""},this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.isResolveList=!0,this.serverPath=q.c.mediaUrl,this.countLoad=0,this.isOrderEdit=!1,this.images=[],this.salesPersons=[],this.regions=[],this.cities=[],this.sumResult={},this.nameSerach="salesinvoice",this.setDates=(I,y,j)=>{if(I?.from||I?.to){const O=I.to||I.from;this.pagination[y]=this.datePipe.transform(I.from||I.to,"yyyy-MM-ddT00:00:00"),this.pagination[j]=this.datePipe.transform(O,"yyyy-MM-ddT23:59:59.999")}else this.pagination[y]=null,this.pagination[j]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getInvoiceAttachments(t,n){this.baseService.getInvoiceAttachments(t).subscribe({next:i=>{this.images=i.data,this.modalService.open(n,{centered:!0,size:"md"})}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader(f.a7),this.setDates(t.dueDates,"dueDateFrom","dueDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader(f.a7)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}openInvoiceModal(t,n,i="md",r){if(this.isEditForm=r,this.form={},this.clearFiles(),this.operationId=t.id,r){this.form=t,console.log(this.form);let o="";t.path&&(o=t.path.split(".")[1]),this.filesToSend.push({id:0,isNew:!1,attachment:t.path}),this.filesToShow.push({id:0,isNew:!1,attachment:t.path}),this.filesNames.push("pdf"===o?"application/pdf":o),this.modalService.open(n,{centered:!0,size:i})}else this.form.invoiceMasterId=t.id,this.modalService.open(n,{centered:!0,size:i})}onFileSelected(t){this.clearFiles();const n=t.target;if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let r=0;r<i;r++){let o=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:t.target.files.item(r)}),this.filesNames.push(t.target.files[r].type),o.onload=l=>{this.filesToShow.push({id:0,isNew:!0,attachment:l.target.result}),console.log(this.filesToShow)},o.readAsDataURL(t.target?.files[r])}n.value=""}}setDefaultImage(t,n){t.target.src=n}checkExtension(t){const i=t.split("/").pop().split(".").pop();return console.log(),i}checkUrl(t){return null==t||""==t?"":t.startsWith("/upload")?t.replace("/upload","upload"):t}removeFile(t){this.filesToShow.splice(t,1),this.filesNames.splice(t,1),this.filesToSend.splice(t,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}registerEntity(){let t=this.mapRegisterForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.register(this.formData.formatFormData(t)).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(n=>(0,Q.$)(n))).subscribe(n=>{n.success?(this.modalService.dismissAll(),this.submitFunished()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}editEntity(){let t=this.mapForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.edit(this.formData.formatFormData(t)).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}Print(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.print(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(ze.Q),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(rt.z),e.rXU(we.Q),e.rXU(se.O),e.rXU(Ge.S),e.rXU(xe.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-invoices"]],features:[e.Vt3],decls:58,vars:62,consts:[["tableMaster",""],["addPaymentModal",""],["deleteModal",""],["viewMedia",""],["ClientInfo",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["fileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","dueDates","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","customerSize","id","customerSize","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],["translate","sales.salesInvoices.Unpaid",3,"value"],["translate","sales.salesInvoices.PartiallyPaid",3,"value"],["translate","sales.salesInvoices.Paid",3,"value"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","id","translate","",2,"width","4%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","total","translate","",2,"width","5%"],["pSortableColumn","totalDiscount","translate","",2,"width","5%"],["pSortableColumn","tax","translate","",2,"width","4%"],["pSortableColumn","net","translate","",2,"width","4%"],["pSortableColumn","invoiceStatus","translate","",2,"width","6%"],["pSortableColumn","isSync","translate","",2,"width","5%"],["pSortableColumn","notes","translate","",2,"width","5%"],[2,"width","3%"],[1,"fs-5"],[3,"click"],[1,"ri-share-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],[1,"code-pointer","text-decoration-underline"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"code-pointer"],[1,"badge",3,"ngClass"],[1,"badge","fs-5","bg-success-subtle","text-success","badge-border"],["class","badge bg-danger","translate","sales.salesInvoices.Unpaid",4,"ngIf"],["class","badge bg-warning","translate","sales.salesInvoices.PartiallyPaid",4,"ngIf"],["class","badge bg-success","translate","sales.salesInvoices.Paid",4,"ngIf"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],[1,"d-inline-block"],["class","d-inline-block",4,"hasPermission"],["translate","sales.salesInvoices.Unpaid",1,"badge","bg-danger"],["translate","sales.salesInvoices.PartiallyPaid",1,"badge","bg-warning"],["translate","sales.salesInvoices.Paid",1,"badge","bg-success"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"ri-image-fill","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.attachments"],[4,"hasPermission"],[3,"click",4,"hasPermission"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.isSync"],["translate","orderManagement.order.printPill"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","cost","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","employeeName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","3","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-2"],["accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"my-3","row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],[3,"deleteConfirm","dismiss"],[1,"modal-body","p-4"],["class","col-12 col-md-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-3"],["width","80","height","100",3,"error","src","preview"],[3,"dismiss","clientId"]],template:function(n,i){if(1&n){const r=e.RV6();e.nrm(0,"app-breadcrumbs",9),e.nI1(1,"translate"),e.j41(2,"div",10)(3,"div",11)(4,"div",12),e.nrm(5,"ngx-ui-loader",13),e.j41(6,"base-filter",14),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())}),e.qex(7,15),e.j41(8,"div",16)(9,"div",17)(10,"input",18),e.nI1(11,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.id,l)||(i.pagination.id=l),e.Njj(l)}),e.k0s(),e.nrm(12,"i",19),e.k0s()(),e.j41(13,"div",16)(14,"div",17)(15,"input",20),e.nI1(16,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(17,"i",19),e.k0s()(),e.j41(18,"div",16)(19,"div",17)(20,"ng-select",21),e.nI1(21,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(22,"div",16)(23,"input",22),e.nI1(24,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(25,"div",16)(26,"input",23),e.nI1(27,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.dueDates,l)||(i.searchForm.dueDates=l),e.Njj(l)}),e.k0s()(),e.j41(28,"div",16)(29,"div",17)(30,"ng-select",24),e.nI1(31,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(32,"div",16)(33,"div",17)(34,"ng-select",25),e.nI1(35,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(36,"div",16)(37,"select",26),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.status,l)||(i.pagination.status=l),e.Njj(l)}),e.nrm(38,"option",27)(39,"option",28)(40,"option",29),e.k0s()(),e.bVm(),e.k0s(),e.j41(41,"div",30),e.nrm(42,"ngx-ui-loader",31),e.j41(43,"div",32)(44,"p-table",33,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(46,Er,39,0,"ng-template",34)(47,Xr,44,29,"ng-template",35),e.k0s()(),e.DNE(48,Yr,2,0,"div",36)(49,zr,6,8,"div",37),e.k0s()()()(),e.DNE(50,Kr,41,15,"ng-template",null,1,e.C5r)(52,es,1,0,"ng-template",null,2,e.C5r)(54,is,7,1,"ng-template",null,3,e.C5r)(56,ns,1,1,"ng-template",null,4,e.C5r)}2&n&&(e.FS9("title",e.bMT(1,45,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(5),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(61,Mr))("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,47,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(16,49,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(21,51,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(24,53,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(27,55,"sales.salesInvoices.dueDates")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dueDates),e.R7$(4),e.FS9("placeholder",e.bMT(31,57,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(35,59,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(3),e.R50("ngModel",i.pagination.status),e.R7$(),e.Y8G("value",0),e.R7$(),e.Y8G("value",2),e.R7$(),e.Y8G("value",3),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderSearchShap)("loaderId",i.searchLoader),e.R7$(2),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,Ee.m,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,X.m,W.p,Ue._,m.vh,b.D9],encapsulation:2})}}return a})();var $e=u(56131);let rs=(()=>{class a extends $e.E{constructor(t,n,i){super(t,n,i)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(ze.Q),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();u(67376);var ot=u(61351);const ss=()=>["clientCollection.register"],os=()=>["clientCollection.edit"],ls=()=>["clientCollection.delete"];function ds(a,s){1&a&&(e.j41(0,"tr",34)(1,"th",35),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",36),e.nrm(4,"i",37),e.EFF(5," sales.clientCollection.serial "),e.k0s(),e.j41(6,"th",38),e.nrm(7,"i",37),e.EFF(8," sales.clientCollection.clientName "),e.k0s(),e.j41(9,"th",39),e.nrm(10,"i",37),e.EFF(11," sales.clientCollection.paymentTypeName "),e.k0s(),e.j41(12,"th",40),e.nrm(13,"i",37),e.EFF(14," orderManagement.order.creation "),e.k0s(),e.j41(15,"th",41),e.nrm(16,"i",37),e.EFF(17," general.table.creator "),e.k0s(),e.j41(18,"th",42),e.nrm(19,"i",37),e.EFF(20," sales.clientCollection.costCollection "),e.k0s(),e.j41(21,"th",43),e.nrm(22,"i",37),e.EFF(23," sales.clientCollection.depositNumber "),e.k0s(),e.j41(24,"th",44),e.nrm(25,"i",37),e.EFF(26," sales.clientCollection.notes "),e.k0s(),e.nrm(27,"th",45),e.k0s())}function cs(a,s){if(1&a&&(e.nrm(0,"i",54),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",55),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",56),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function ms(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(33);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",58),e.k0s()}}function ps(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(35);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",60),e.k0s()}}function us(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",46)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",47),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(37);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(6,"a",48),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.DNE(22,cs,10,9,"ng-template",null,4,e.C5r),e.nrm(24,"i",49),e.j41(25,"button",50),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onPrint(i.id))}),e.nrm(26,"i",51),e.k0s(),e.DNE(27,ms,2,0,"button",52)(28,ps,2,0,"button",53),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(23);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.serial),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.JRh(t.paymentTypeName),e.R7$(2),e.SpI(" ",e.i5U(12,12,t.creationTime,"HH:mm:ss yyyy-MM-dd ")," "),e.R7$(3),e.JRh(t.creatorName),e.R7$(2),e.JRh(t.cost),e.R7$(2),e.JRh(t.depositNumber),e.R7$(2),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(3),e.Y8G("hasPermission",e.lJ4(15,os)),e.R7$(),e.Y8G("hasPermission",e.lJ4(16,ls))}}function gs(a,s){1&a&&(e.j41(0,"div",61),e.EFF(1," general.table.noData"),e.k0s())}function hs(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",62)(1,"div",63),e.nrm(2,"ngb-pagination-info",64),e.j41(3,"table-length",65),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",66)(5,"ngb-pagination",67),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function _s(a,s){1&a&&(e.j41(0,"span",106),e.EFF(1,"general.action.register "),e.k0s())}function fs(a,s){1&a&&(e.j41(0,"span",106),e.EFF(1,"general.action.edit "),e.k0s())}function bs(a,s){if(1&a){const t=e.RV6();e.j41(0,"i",107),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.removeMainImage())}),e.k0s()}}function vs(a,s){1&a&&(e.j41(0,"div",108),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function xs(a,s){1&a&&(e.j41(0,"div",108),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ys(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",68)(1,"div",69)(2,"h4",70),e.DNE(3,_s,2,0,"span",71)(4,fs,2,0,"span",71),e.j41(5,"span",72),e.EFF(6),e.k0s()(),e.j41(7,"button",73),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",74),e.nrm(9,"ngx-ui-loader",27),e.j41(10,"form",75,5),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",76)(13,"div",77)(14,"div",78)(15,"div",79)(16,"label",80),e.bIt("click",function(){e.eBV(t);const i=e.sdS(21);return e.Njj(i.click())}),e.j41(17,"div",81)(18,"div",82),e.nrm(19,"i",83),e.k0s()()(),e.j41(20,"input",84,6),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileChangedMain(i))}),e.k0s()(),e.j41(22,"div",85)(23,"div",86),e.DNE(24,bs,1,0,"i",87),e.j41(25,"div",88),e.nrm(26,"img",89),e.k0s()()()()()(),e.j41(27,"div",76)(28,"label",90),e.EFF(29,"sales.clientCollection.clientName"),e.k0s(),e.j41(30,"ng-select",91),e.bIt("scrollToEnd",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientId,i)||(r.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(31,"div",76)(32,"label",92),e.EFF(33,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(34,"ng-select",93,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.paymentTypeId,i)||(r.form.paymentTypeId=i),e.Njj(i)}),e.k0s(),e.DNE(36,vs,2,0,"div",94),e.k0s(),e.j41(37,"div",95)(38,"label",96),e.EFF(39,"sales.clientCollection.costCollection"),e.k0s(),e.j41(40,"input",97,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(42,xs,2,0,"div",98),e.k0s(),e.j41(43,"div",95)(44,"label",99),e.EFF(45,"sales.clientCollection.depositNumber"),e.k0s(),e.j41(46,"input",100,9),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.depositNumber,i)||(r.form.depositNumber=i),e.Njj(i)}),e.k0s()(),e.j41(48,"div",95)(49,"label",101),e.EFF(50,"sales.clientCollection.notes"),e.k0s(),e.j41(51,"textarea",102,10),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(53,"div",77)(54,"button",103),e.nrm(55,"i",104)(56,"span",105),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(35),i=e.sdS(41),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(15),e.Y8G("ngIf",r.image.path),e.R7$(2),e.Y8G("src",r.image.isApi?r.serverPath+r.image.path:r.image.path,e.B4B),e.R7$(4),e.Y8G("virtualScroll",!0)("items",r.clients)("typeahead",r.searchClient)("loading",r.loading)("multiple",!1),e.R50("ngModel",r.form.clientId),e.R7$(4),e.Y8G("items",r.paymentMethods)("multiple",!1),e.R50("ngModel",r.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.cost),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.depositNumber),e.R7$(5),e.R50("ngModel",r.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Cs(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",109),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function Ss(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",110),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let Is=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.clientService=x,this.paymentTypesService=v,this._formDataService=C,this.employeeService=I,this.title="sales.clientCollection.title",this.titleOperation="sales.clientCollection.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new L.B,this.paymentMethods=[],this.image={},this.serverPath=q.c.mediaUrl,this.clientGroups=[],this.regions=[],this.sales=[],this.priceList=[],this.cities=[],this.sumResult={total:0},this.salesPersons=[],this.nameSerach="salescollection",this.setDates=(y,j,F)=>{if(y?.from||y?.to){const N=y.to||y.from;this.pagination[j]=this.datePipe.transform(y.from||y.to,"yyyy-MM-ddT00:00:00"),this.pagination[F]=this.datePipe.transform(N,"yyyy-MM-ddT23:59:59.999")}else this.pagination[j]=null,this.pagination[F]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,Pe.B)(300),(0,Ve.F)(),(0,le.n)(t=>this.loadClient(t))).subscribe(),this.getPaymentTypes(),this.GetSalesPersons(),this.GetAgentLookUps()}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetAgentLookUps(){this.clientService.CustomerCompanyLookUps().subscribe(t=>{this.regions=t.data.regions,this.cities=t.data.cities,this.clientGroups=t.data.clientGroups,this.sales=t.data.employees,this.priceList=t.data.priceList},t=>{console.log(t)})}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:t=>{this.paymentMethods=t.data}})}onSearch(){this.ngxLoader.startLoader(f.a7);let t={...this.searchForm};this.pagination.depositNumber&&(this.pagination.depositNumber=this.pagination.depositNumber.toString()),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Ie.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,le.n)(n=>(this.clients=n.data,this.loading=!1,[])))}mapForm(t){let n={...t};return this._formDataService.formatFormData(n)}validAttachment(){return!!(2!==this.form.paymentTypeId&&3!==this.form.paymentTypeId||this.form.image||this.form.path)||(this.ngxLoader.stopLoader(this.operationLoader),this.alertService.error("sales.clientCollection.mustEnterReceipt"),!1)}mapRegisterForm(t){let n={...t};return n.id=0,this._formDataService.formatFormData(n)}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){}OnSubmit(){this.form.cost<=0?this.alertService.error("sales.clientCollection.costLargeZero"):(this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity())}EditModel(t,n,i="md"){this.isEditForm=!0,this.image={},this.form={},this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(r=>{r.success?(this.clientParam.clientId=r.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(o=>{this.clients=o.data}),this.image.path=r.data.path,this.image.isApi=!0,this.form=r.data):this.alertService.error("general.message."+r.message),this.modalService.open(n,{centered:!0,size:i})},r=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({Client_Name:n.clientName,Date:this.datePipe.transform(n.creationTime,"yyyy-MM-dd HH:mm"),User:n.creatorName,Payment_Name:n.paymentTypeName,Cost:n.cost,DepositNumber:n.depositNumber,Notes:n.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}registerEntity(){if(!this.validAttachment())return;let n=this.mapRegisterForm(this.form);this.baseService.register(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(i=>(0,Q.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){if(!this.validAttachment())return;let n=this.mapForm(this.form);this.baseService.editPut(this.form.id,n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}onFileChangedMain(t){if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let i=0;i<n;i++){let r=new FileReader;this.form.image=t.target.files.item(i),r.onload=o=>{this.image={isApi:!1,path:o.target.result}},r.readAsDataURL(t.target.files[i]),console.log(this.image)}}}removeMainImage(){this.form.image="",this.image={isApi:!1,path:""}}onPrint(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.print(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}getTotal(t){this.sumResult.total=t.reduce((n,i)=>n+i.cost,0)}loadentities(){localStorage.setItem(this.nameSerach,JSON.stringify(this.pagination)),this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.getTotal(this.entities),this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm={}}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(ot.F),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(ve.X),e.rXU(rt.z),e.rXU(we.Q),e.rXU(se.O))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-clientCollection"]],features:[e.Vt3],decls:38,vars:39,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["ClientInfo",""],["tooltipContent",""],["formEntity","ngForm"],["FileInputMain",""],["paymentTypeId","ngModel"],["cost","ngModel"],["depositNumber","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-md-2","mb-2"],["type","number","id","depositNumber","name","depositNumber",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","serial","translate","",2,"width","4%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientId","translate","",2,"width","15%"],["pSortableColumn","paymentTypeName","translate","",2,"width","8%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","creatorName","translate","",2,"width","9%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","depositNumber","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-printer-cloud-fill","align-bottom","mx-1"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],[1,"text-center"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex"],[1,"avatar-lg","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                        border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img2","alt","",1,"avatar-md","h-auto",3,"src"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["clearable","false","bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["clearable","false","name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","number","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","depositNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","depositNumber","type","text","id","depositNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],[3,"dismiss","clientId"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"base-filter",14),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())})("addNew",function(){e.eBV(r);const l=e.sdS(33);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(4,15),e.j41(5,"div",16)(6,"div",17)(7,"input",18),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.name,l)||(i.pagination.name=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",19),e.k0s()(),e.j41(10,"div",16)(11,"input",20),e.nI1(12,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(13,"div",21)(14,"ng-select",22),e.nI1(15,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.paymentTypeId,l)||(i.pagination.paymentTypeId=l),e.Njj(l)}),e.k0s()(),e.j41(16,"div",16)(17,"div",17)(18,"ng-select",23),e.nI1(19,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(20,"div",24)(21,"input",25),e.nI1(22,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.depositNumber,l)||(i.pagination.depositNumber=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(23,"div",26),e.nrm(24,"ngx-ui-loader",27),e.j41(25,"div",28)(26,"p-table",29,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(28,ds,28,0,"ng-template",30)(29,us,29,17,"ng-template",31),e.k0s()(),e.DNE(30,gs,2,0,"div",32)(31,hs,6,8,"div",33),e.k0s()()()(),e.DNE(32,ys,57,23,"ng-template",null,1,e.C5r)(34,Cs,1,0,"ng-template",null,2,e.C5r)(36,Ss,1,1,"ng-template",null,3,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(38,ss))("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,28,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,30,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(15,32,"sales.salesInvoices.paymentTypeName")),e.Y8G("items",i.paymentMethods)("multiple",!1),e.R50("ngModel",i.pagination.paymentTypeId),e.R7$(4),e.FS9("placeholder",e.bMT(19,34,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(22,36,"sales.clientCollection.depositNumber")),e.R50("ngModel",i.pagination.depositNumber),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderSearchShap)("loaderId",i.searchLoader),e.R7$(2),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,_.md,X.m,W.p,m.vh,b.D9],encapsulation:2})}}return a})();const ks=()=>["requestPersonSales.register"],Ts=()=>["requestPersonSales.changeStatus"],xt=()=>["requestPersonSales.edit"];function js(a,s){1&a&&(e.j41(0,"tr",47)(1,"th",48),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",49),e.nrm(4,"i",50),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",51),e.nrm(7,"i",50),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",52),e.EFF(10," sales.salesOrder.salsePerson "),e.k0s(),e.j41(11,"th",53),e.nrm(12,"i",50),e.EFF(13," sales.clientCollection.cost "),e.k0s(),e.j41(14,"th",54),e.nrm(15,"i",50),e.EFF(16," sales.requestPersonSales.requestPersonStatus "),e.k0s(),e.j41(17,"th",55),e.nrm(18,"i",50),e.EFF(19," sales.clientCollection.notes "),e.k0s(),e.nrm(20,"th",56),e.k0s())}function ws(a,s){if(1&a&&(e.nrm(0,"i",64),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",65),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",66),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ms(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",67),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(83);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",68),e.k0s()}}function Rs(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(79);return e.Njj(r.EditModel(i.id,o))}),e.nrm(1,"i",72),e.k0s()}}function Fs(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",73),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.Send(i.id))}),e.nrm(2,"i",74),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function Os(a,s){1&a&&(e.qex(0),e.DNE(1,Rs,2,0,"button",69)(2,Fs,3,3,"button",70),e.bVm()),2&a&&(e.R7$(),e.Y8G("hasPermission",e.lJ4(2,xt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(3,xt)))}function Vs(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",57)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",58),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(85);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(4,"a",59),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"date"),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span"),e.nrm(15,"span",60),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.DNE(19,ws,10,9,"ng-template",null,5,e.C5r),e.nrm(21,"i",61),e.DNE(22,Ms,2,0,"button",62)(23,Os,3,4,"ng-container",63),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(20),r=e.XpG();e.R7$(2),e.JRh(n+1),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(8,13,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(t.creatorName),e.R7$(2),e.JRh(t.cost),e.R7$(2),e.ZvI("badge ",r.getStatus(t.requestPersonStatus),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.requestPersonStatusName),e.R7$(2),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(16,Ts)),e.R7$(),e.Y8G("ngIf",50==t.requestPersonStatus)}}function Es(a,s){1&a&&(e.j41(0,"div",75),e.EFF(1," general.table.noData"),e.k0s())}function Ds(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ngb-pagination-info",78),e.j41(3,"table-length",79),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",80)(5,"ngb-pagination",81),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ns(a,s){1&a&&(e.j41(0,"span",104),e.EFF(1,"general.action.register "),e.k0s())}function Ls(a,s){1&a&&(e.j41(0,"span",104),e.EFF(1,"general.action.edit "),e.k0s())}function Ps(a,s){1&a&&(e.j41(0,"div",105),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Gs(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"h4",84),e.DNE(3,Ns,2,0,"span",85)(4,Ls,2,0,"span",85),e.j41(5,"span",86),e.EFF(6),e.k0s()(),e.j41(7,"button",87),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",88),e.nrm(9,"ngx-ui-loader",89),e.j41(10,"form",90,6),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",91)(13,"label",92),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",93),e.bIt("scrollToEnd",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientId,i)||(r.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(16,"div",94)(17,"label",95),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",96,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(21,Ps,2,0,"div",97),e.k0s(),e.j41(22,"div",94)(23,"label",98),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",99,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(27,"div",100)(28,"button",101),e.nrm(29,"i",102)(30,"span",103),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(20),i=e.XpG();e.R7$(3),e.Y8G("ngIf",!i.isEditForm),e.R7$(),e.Y8G("ngIf",i.isEditForm),e.R7$(2),e.JRh(i.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",i.clients)("typeahead",i.searchClient)("loading",i.loading)("multiple",!1),e.R50("ngModel",i.form.clientId),e.R7$(4),e.R50("ngModel",i.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function $s(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",106),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function Bs(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",91)(1,"label",111),e.EFF(2,"sales.clientCollection.cost"),e.k0s(),e.j41(3,"input",112),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.cost)}}function As(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"h4",84)(3,"span",86),e.EFF(4),e.k0s()(),e.j41(5,"button",87),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",88),e.nrm(7,"ngx-ui-loader",89),e.j41(8,"form",90,6),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnStatusSubmit())}),e.j41(10,"div",28)(11,"div",91)(12,"label",107),e.EFF(13,"sales.requestPersonSales.requestPersonStatus"),e.k0s(),e.j41(14,"ng-select",108),e.nI1(15,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.requestPersonStatus,i)||(r.form.requestPersonStatus=i),e.Njj(i)}),e.k0s()(),e.DNE(16,Bs,4,1,"div",109),e.k0s(),e.j41(17,"div",100)(18,"button",110),e.nrm(19,"i",102)(20,"span",103),e.k0s()()()()()}if(2&a){const t=e.sdS(9),n=e.XpG();e.R7$(4),e.JRh(n.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,10,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",n.status)("multiple",!1),e.R50("ngModel",n.form.requestPersonStatus),e.R7$(2),e.Y8G("ngIf",30==n.form.requestPersonStatus),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Xs(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",113),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let Ys=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.clientService=x,this.employeeService=v,this.title="sales.requestPersonSales.title",this.titleOperation="sales.requestPersonSales.titleOperation",this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new L.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.salesPersons=[],this.nameSerach="requestLimit",this.setDates=(C,I,y)=>{if(C?.from||C?.to){const F=C.to||C.from;this.pagination[I]=this.datePipe.transform(C.from||C.to,"yyyy-MM-ddT00:00:00"),this.pagination[y]=this.datePipe.transform(F,"yyyy-MM-ddT23:59:59.999")}else this.pagination[I]=null,this.pagination[y]=null},this.configRoute(),this.GetSalesPersons()}ngOnInitMore(){this.GetRequestCount(),this.searchClient.pipe((0,Pe.B)(300),(0,Ve.F)(),(0,le.n)(t=>this.loadClient(t))).subscribe(),this.GetRequestLookups()}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetRequestCount(){this.baseService.GetRequestCount().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.requestStatus=t.data})}GetRequestLookups(){this.baseService.GetRequestLookups().pipe((0,p.Q)(this.notifier)).subscribe(t=>{let n=t.data.status;n.forEach(i=>{i.name=this.getTranslationText("sales.salesOrder."+i.name)}),this.status=n})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Ie.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,le.n)(n=>(this.clients=n.data,this.loading=!1,[])),(0,p.Q)(this.notifier))}mapForm(t){return{...t}}mapRegisterForm(t){let n={...t};return n.id=0,n}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){}EditModel(t,n,i="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(r=>{r.success?(this.clientParam.clientId=r.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).pipe((0,p.Q)(this.notifier)).subscribe(o=>{this.clients=o.data}),this.form=r.data):this.alertService.error("general.message."+r.message),this.modalService.open(n,{centered:!0,size:i})},r=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,nameEn:n.nameEn,isActive:this.getTranslationText("general.table.active"),notes:n.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getStatus(t){return 10==t||20==t?"bg-warning-subtle text-warning":30==t?"bg-success-subtle text-success":40==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}OnStatusSubmit(){let t={requestPersonStatus:this.form.requestPersonStatus,id:this.operationId,cost:this.form.cost?this.form.cost:0};this.ngxLoader.start(f.ZW),this.baseService.UpdateLimit(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW))).subscribe(n=>{n.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities(),this.GetRequestCount()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}onStatusSelect(t){this.pagination.requestPersonStatus=0==t?null:t,this.loadentities()}Send(t){this.baseService.Send(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(nt.u),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(ve.X),e.rXU(se.O))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-requestPersonSales"]],features:[e.Vt3],decls:86,vars:44,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["operationStatus",""],["ClientInfo",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row","justify-content-around"],[1,"col-12","col-md-3","cursor-pointer"],[1,"card","card-animate",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","sales.salesOrder.all",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col-12","col-md-2","cursor-pointer"],["translate","sales.salesOrder.UnderReview",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],["translate","sales.salesOrder.Accept",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","sales.salesOrder.Reject",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2","mb-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","cost","translate","",2,"width","10%"],["pSortableColumn","requestPersonStatus","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[3,"translate"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-warning edit-list mx-2 ",3,"click",4,"hasPermission"],[4,"ngIf"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-exchange-line","align-bottom","mx-1"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],["for","status","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","id","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["for","cost","translate","",1,"required","fw-bold","form-label"],["type","numbers","id","cost","name","cost",1,"form-control",3,"ngModelChange","ngModel"],[3,"dismiss","clientId"]],template:function(n,i){if(1&n){const r=e.RV6();e.nrm(0,"app-breadcrumbs",9),e.nI1(1,"translate"),e.j41(2,"div",10)(3,"div",11)(4,"div",12),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(0))}),e.j41(5,"div",13)(6,"div",14)(7,"div"),e.nrm(8,"p",15),e.j41(9,"h2",16),e.nrm(10,"span",17),e.k0s()(),e.j41(11,"div")(12,"div",18)(13,"span",19),e.nrm(14,"i",20),e.k0s()()()()()()(),e.j41(15,"div",21)(16,"div",12),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(20))}),e.j41(17,"div",13)(18,"div",14)(19,"div"),e.nrm(20,"p",22),e.j41(21,"h2",16),e.nrm(22,"span",17),e.k0s()(),e.j41(23,"div")(24,"div",18)(25,"span",23),e.nrm(26,"i",20),e.k0s()()()()()()(),e.j41(27,"div",21)(28,"div",12),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(30))}),e.j41(29,"div",13)(30,"div",14)(31,"div"),e.nrm(32,"p",24),e.j41(33,"h2",16),e.nrm(34,"span",17),e.k0s()(),e.j41(35,"div")(36,"div",18)(37,"span",25),e.nrm(38,"i",20),e.k0s()()()()()()(),e.j41(39,"div",21)(40,"div",12),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(40))}),e.j41(41,"div",13)(42,"div",14)(43,"div"),e.nrm(44,"p",26),e.j41(45,"h2",16),e.nrm(46,"span",17),e.k0s()(),e.j41(47,"div")(48,"div",18)(49,"span",27),e.nrm(50,"i",20),e.k0s()()()()()()()(),e.j41(51,"div",28)(52,"div",29)(53,"div",30)(54,"base-filter",31),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())})("addNew",function(){e.eBV(r);const l=e.sdS(79);return e.Njj(i.openModalTitle(l,"md"))}),e.qex(55,32),e.j41(56,"div",33)(57,"div",34)(58,"input",35),e.nI1(59,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.name,l)||(i.pagination.name=l),e.Njj(l)}),e.k0s(),e.nrm(60,"i",36),e.k0s()(),e.j41(61,"div",37)(62,"input",38),e.nI1(63,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(64,"div",39)(65,"ng-select",40),e.nI1(66,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()(),e.j41(67,"div",39)(68,"ng-select",40),e.nI1(69,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.requestPersonStatus,l)||(i.pagination.requestPersonStatus=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(70,"div",13)(71,"div",41)(72,"p-table",42,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(74,js,21,0,"ng-template",43)(75,Vs,24,17,"ng-template",44),e.k0s()(),e.DNE(76,Es,2,0,"div",45)(77,Ds,6,8,"div",46),e.k0s()()()(),e.DNE(78,Gs,31,16,"ng-template",null,1,e.C5r)(80,$s,1,0,"ng-template",null,2,e.C5r)(82,As,21,12,"ng-template",null,3,e.C5r)(84,Xs,1,1,"ng-template",null,4,e.C5r)}2&n&&(e.FS9("title",e.bMT(1,33,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(10),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.all)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.underReview)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.accept)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.reject)("options",i.option),e.R7$(8),e.Y8G("addPermission",e.lJ4(43,ks))("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(59,35,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(63,37,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(66,39,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(69,41,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",i.status)("multiple",!1),e.R50("ngModel",i.pagination.requestPersonStatus),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ce.G,Ee.m,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,_.md,X.m,W.p,ke.m,m.vh,b.D9],encapsulation:2})}}return a})();u(83229);let lt=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"PriceList/")}UpdatePriceListItemUnit(t){return this.http.get(this.baseUrl+"UpdatePriceListItemUnit/"+t)}GetPriceListWithUnits(t){return this.http.get(this.baseUrl+"GetPriceListWithUnits/"+t)}EditPriceListItem(t){return this.http.post(this.baseUrl+"EditPriceListItem/",t)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var qe=u(84205);const Us=()=>["priceList.register"],qs=()=>["priceList.edit"],Hs=()=>["priceList.delete"];function Qs(a,s){1&a&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," sales.priceList.name "),e.k0s(),e.j41(9,"th",33),e.nrm(10,"i",31),e.EFF(11," sales.priceList.clientGroupName "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," general.table.isActive "),e.k0s(),e.j41(15,"th",35),e.nrm(16,"i",31),e.EFF(17," sales.clientCollection.notes "),e.k0s(),e.nrm(18,"th",36),e.k0s())}function Ws(a,s){1&a&&e.nrm(0,"span",44)}function Js(a,s){1&a&&e.nrm(0,"span",45)}function Zs(a,s){if(1&a&&(e.nrm(0,"i",46),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",47),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",48),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ks(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",49),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.goList(i.id))}),e.nrm(1,"i",50),e.k0s()}}function eo(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(24);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",52),e.k0s()}}function to(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",38),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goList(i.id))}),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Ws,1,0,"span",39)(11,Js,1,0,"span",40),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.DNE(15,Zs,10,9,"ng-template",null,3,e.C5r),e.nrm(17,"i",41),e.DNE(18,Ks,2,0,"button",42)(19,eo,2,0,"button",43),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(16);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.clientGroupName),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(2),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,qs)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Hs))}}function io(a,s){1&a&&(e.j41(0,"div",53),e.EFF(1," general.table.noData"),e.k0s())}function no(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",54)(1,"div",55),e.nrm(2,"ngb-pagination-info",56),e.j41(3,"table-length",57),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",58)(5,"ngb-pagination",59),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ao(a,s){1&a&&(e.j41(0,"span",91),e.EFF(1,"general.action.register "),e.k0s())}function ro(a,s){1&a&&(e.j41(0,"span",91),e.EFF(1,"general.action.edit "),e.k0s())}function so(a,s){1&a&&(e.j41(0,"div",92),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function oo(a,s){1&a&&(e.j41(0,"div",92),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function lo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",60)(1,"div",61)(2,"h4",62),e.DNE(3,ao,2,0,"span",63)(4,ro,2,0,"span",63),e.j41(5,"span",64),e.EFF(6),e.k0s()(),e.j41(7,"button",65),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",66),e.nrm(9,"ngx-ui-loader",67),e.j41(10,"form",68,4),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",10)(13,"div",69)(14,"label",70),e.EFF(15,"sales.priceList.name"),e.k0s(),e.j41(16,"input",71,5),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.name,i)||(r.form.name=i),e.Njj(i)}),e.k0s(),e.DNE(18,so,2,0,"div",72),e.k0s(),e.j41(19,"div",73)(20,"label",74),e.EFF(21,"sales.priceList.clientGroupName"),e.k0s(),e.j41(22,"ng-select",75,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientGroupId,i)||(r.form.clientGroupId=i),e.Njj(i)}),e.k0s(),e.DNE(24,oo,2,0,"div",76),e.k0s(),e.j41(25,"div",77)(26,"label",74),e.EFF(27,"sales.priceList.discountType"),e.k0s(),e.j41(28,"ng-select",78,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.discountType,i)||(r.form.discountType=i),e.Njj(i)}),e.k0s()(),e.j41(30,"div",77)(31,"label",79),e.EFF(32,"sales.priceList.discount"),e.k0s(),e.j41(33,"input",80,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.discount,i)||(r.form.discount=i),e.Njj(i)}),e.k0s()(),e.j41(35,"div",73)(36,"label",81),e.EFF(37,"sales.clientCollection.clientName"),e.k0s(),e.j41(38,"ng-select",82),e.bIt("scrollToEnd",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientId,i)||(r.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(39,"div",77)(40,"label",83),e.EFF(41,"stores.storesUnits.isActive"),e.k0s(),e.j41(42,"p-inputSwitch",84),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isActive,i)||(r.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(43,"div",73)(44,"label",85),e.EFF(45,"sales.clientCollection.notes"),e.k0s(),e.j41(46,"textarea",86,9),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(48,"div",87)(49,"button",88),e.nrm(50,"i",89)(51,"span",90),e.k0s()()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(17),i=e.sdS(23),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.name),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.Y8G("items",r.clientGroups)("multiple",!1),e.R50("ngModel",r.form.clientGroupId),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.Y8G("items",r.discountTypes),e.R50("ngModel",r.form.discountType),e.R7$(5),e.R50("ngModel",r.form.discount),e.R7$(5),e.Y8G("virtualScroll",!0)("items",r.clients)("typeahead",r.searchClient)("loading",r.loading)("multiple",!1),e.R50("ngModel",r.form.clientId),e.R7$(4),e.R50("ngModel",r.form.isActive),e.R7$(4),e.R50("ngModel",r.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function co(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",93),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let mo=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.clientService=x,this.clientGroupsService=v,this.offerOrderService=C,this.router=I,this.title="sales.priceList.title",this.titleOperation="sales.priceList.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new L.B,this.clientGroups=[],this.discountTypes=[],this.setDates=(y,j,F)=>{if(y?.from||y?.to){const N=y.to||y.from;this.pagination[j]=this.datePipe.transform(y.from||y.to,"yyyy-MM-ddT00:00:00"),this.pagination[F]=this.datePipe.transform(N,"yyyy-MM-ddT23:59:59.999")}else this.pagination[j]=null,this.pagination[F]=null},this.configRoute(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(y=>{y.name=this.getTranslationText("sales.salesOrder."+y.name)})}ngOnInitMore(){this.searchClient.pipe((0,Pe.B)(300),(0,Ve.F)(),(0,le.n)(t=>this.loadClient(t))).subscribe(),this.getClientGroups()}getClientGroups(){this.clientGroupsService.getDropDown().subscribe({next:t=>{this.clientGroups=t.data}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Ie.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,le.n)(n=>(this.clients=n.data,this.loading=!1,[])))}mapForm(t){let n={...t};return n.clientId>0&&(n.clientGroupId=null),n}mapRegisterForm(t){let n={...t};return n.clientId>0&&(n.clientGroupId=null),n.id=0,n}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){}EditModel(t,n,i="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(r=>{r.success?(this.clientParam.clientId=r.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(o=>{this.clients=o.data}),this.form=r.data):this.alertService.error("general.message."+r.message),this.modalService.open(n,{centered:!0,size:i})},r=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,nameEn:n.nameEn,isActive:this.getTranslationText("general.table.active"),notes:n.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}goList(t){this.router.navigateByUrl("/sales/PriceListItems/"+t)}goRegister(){this.router.navigateByUrl("/sales/PriceListItems")}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(lt),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(ve.X),e.rXU(qe.t),e.rXU(re.A),e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-priceList"]],features:[e.Vt3],decls:25,vars:20,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["clientGroupId","ngModel"],["discountType","ngModel"],["discount","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","code","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","paymentTypeName","translate","",2,"width","10%"],["pSortableColumn","clientGroupId","translate","",2,"width","12%"],["pSortableColumn","isActive","translate","",2,"width","6%"],["pSortableColumn","notes","translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],[3,"click"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"col-12"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","my-1"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","id","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"col-12","col-md-6"],["clearable","false","clearOnBackspace","false","name","discountType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","discount","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","number","id","discount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","nameAr","translate","",1,"fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"base-filter",13),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(i.goRegister())}),e.qex(4,14),e.j41(5,"div",15)(6,"div",16)(7,"input",17),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.name,l)||(i.pagination.name=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",18),e.k0s()(),e.j41(10,"div",19)(11,"input",20),e.nI1(12,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",21)(14,"div",22)(15,"p-table",23,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(17,Qs,19,0,"ng-template",24)(18,to,20,12,"ng-template",25),e.k0s()(),e.DNE(19,io,2,0,"div",26)(20,no,6,8,"div",27),e.k0s()()()(),e.DNE(21,lo,52,24,"ng-template",null,1,e.C5r)(23,co,1,0,"ng-template",null,2,e.C5r)}2&n&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(19,Us))("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,15,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,17,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,be.HW,R.Cv,$.vr,_.md,X.m,W.p,m.vh,b.D9],encapsulation:2})}}return a})(),po=(()=>{class a extends $e.E{constructor(t,n,i){super(t,n,i)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(ot.F),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Be=u(86865),he=u(62984);const uo=(a,s)=>({"max-height":a,"overflow-y":s}),go=()=>["assignTruckOrder.changeStatus"],ho=()=>["assignTruckOrder.print"],_o=()=>["assignTruckOrder.finish"];function fo(a,s){1&a&&(e.j41(0,"span",63),e.nrm(1,"i",64),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&a&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.noMap")," "))}function bo(a,s){if(1&a&&(e.j41(0,"a",65),e.nrm(1,"i",64),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("href",n.mapUrl(t.lng,t.lat),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(3,2,"orderManagement.order.viewMap")," ")}}function vo(a,s){if(1&a&&(e.qex(0),e.j41(1,"div",66)(2,"div",67)(3,"div",25)(4,"span",68),e.EFF(5),e.k0s(),e.j41(6,"span",69),e.EFF(7),e.k0s()(),e.j41(8,"div")(9,"span",70),e.EFF(10),e.k0s(),e.j41(11,"span",63),e.EFF(12),e.k0s()()()(),e.bVm()),2&a){const t=s.$implicit,n=s.index;e.R7$(5),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(3),e.JRh(t.unitName),e.R7$(2),e.JRh(t.quantity)}}function xo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",71)(1,"div",72)(2,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(28);return e.Njj(r.openChangeStatusModal(i,o))}),e.nrm(3,"i",74),e.j41(4,"span",75),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"span",76),e.EFF(8,"orderManagement.order.changeTeamStatus"),e.k0s()()()()}2&a&&(e.R7$(5),e.JRh(e.bMT(6,1,"orderManagement.order.changeTeamStatus")))}function yo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",77)(1,"div",72)(2,"button",78),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.PrintOrderReceived(i.offerOrderMasterId))}),e.nrm(3,"i",79),e.j41(4,"span",75),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"span",76),e.EFF(8,"general.action.print"),e.k0s()()()()}2&a&&(e.R7$(5),e.JRh(e.bMT(6,1,"general.action.print")))}function Co(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",81)(1,"button",82),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(30);return e.Njj(r.openFinishedModal(i.id,o,"md"))}),e.nrm(2,"i",83),e.j41(3,"span",75),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"span",76),e.EFF(7,"orderManagement.order.finishOrder"),e.k0s()()()}2&a&&(e.R7$(4),e.JRh(e.bMT(5,1,"orderManagement.order.finishOrder")))}function So(a,s){1&a&&(e.qex(0),e.DNE(1,Co,8,3,"div",80),e.bVm()),2&a&&(e.R7$(),e.Y8G("hasPermission",e.lJ4(1,_o)))}function Io(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"bdi")(4,"span")(5,"span"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",24)(9,"div",25),e.nrm(10,"i",26),e.j41(11,"div")(12,"h4",27),e.EFF(13),e.k0s(),e.j41(14,"small",28),e.EFF(15),e.k0s()()()(),e.j41(16,"div",29)(17,"div",17)(18,"div",30)(19,"div",31),e.nrm(20,"i",32),e.j41(21,"strong"),e.EFF(22,"\u0627\u0644\u0634\u0627\u062d\u0646\u0629:"),e.k0s(),e.EFF(23),e.k0s(),e.j41(24,"div"),e.nrm(25,"i",33),e.j41(26,"strong"),e.EFF(27,"\u0627\u0644\u0633\u0627\u0626\u0642:"),e.k0s(),e.EFF(28),e.k0s()(),e.j41(29,"div",30)(30,"div",31),e.nrm(31,"i",34),e.j41(32,"strong"),e.EFF(33,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"),e.k0s(),e.EFF(34),e.nI1(35,"date"),e.k0s(),e.j41(36,"div"),e.nrm(37,"i",35),e.j41(38,"strong"),e.EFF(39,"\u0631\u0642\u0645 \u0627\u0644\u0634\u0627\u062d\u0646\u0629:"),e.k0s(),e.EFF(40),e.k0s()()()(),e.j41(41,"div",36)(42,"span",37),e.nrm(43,"i",38),e.EFF(44),e.k0s(),e.j41(45,"span",39),e.nrm(46,"i",40),e.EFF(47),e.k0s()(),e.j41(48,"div",41)(49,"div",42),e.nrm(50,"i",43),e.j41(51,"span",44),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.copytext(i.mobile))}),e.EFF(52),e.nrm(53,"i",45),e.k0s()(),e.j41(54,"div"),e.DNE(55,fo,4,3,"span",46)(56,bo,4,4,"a",47),e.k0s()(),e.j41(57,"div",48)(58,"div",49)(59,"h2",50)(60,"button",51),e.nrm(61,"i",52),e.EFF(62),e.nI1(63,"translate"),e.j41(64,"span",53),e.EFF(65),e.k0s()()(),e.j41(66,"div",54)(67,"div",55)(68,"div",56),e.DNE(69,vo,13,4,"ng-container",57),e.k0s()()()()(),e.j41(70,"div",58),e.DNE(71,xo,9,3,"div",59),e.nrm(72,"div",60),e.DNE(73,yo,9,3,"div",61)(74,So,2,2,"ng-container",62),e.k0s()()()()}if(2&a){const t=s.$implicit;e.R7$(4),e.ZvI("ribbon ",t.trunckStatusName," round-shape"),e.R7$(2),e.JRh(e.bMT(7,31,"sales.salesOrder."+t.trunckStatusName)),e.R7$(7),e.JRh(t.clientName||"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"),e.R7$(2),e.JRh(t.clientCode||""),e.R7$(8),e.SpI(" ",t.shippingTruckName," "),e.R7$(5),e.SpI(" ",t.driverName," "),e.R7$(6),e.SpI(" ",e.i5U(35,33,t.deliveryDate,"yyyy-MM-dd HH:mm")," "),e.R7$(6),e.SpI(" ",t.shippingTruckNumber," "),e.R7$(4),e.SpI(" #SO#",t.offerOrderMasterId," "),e.R7$(3),e.SpI(" #SHO#",t.id," "),e.R7$(5),e.SpI(" ",t.mobile," "),e.R7$(3),e.Y8G("ngIf",!t.lng),e.R7$(),e.Y8G("ngIf",t.lng),e.R7$(),e.Mz_("id","accordionItems-",t.id,""),e.R7$(2),e.Mz_("id","heading-",t.id,""),e.R7$(),e.BMQ("data-bs-target","#collapse-"+t.id)("aria-controls","collapse-"+t.id),e.R7$(2),e.SpI(" ",e.bMT(63,36,"orderManagement.order.items")," "),e.R7$(3),e.JRh(t.details.length),e.R7$(),e.Y8G("id","collapse-"+t.id),e.BMQ("aria-labelledby","heading-"+t.id)("data-bs-parent","#accordionItems-"+t.id),e.R7$(),e.Y8G("ngStyle",e.l_i(38,uo,t.details.length>5?"250px":"none",t.details.length>5?"auto":"hidden")),e.R7$(2),e.Y8G("ngForOf",t.details),e.R7$(2),e.Y8G("hasPermission",e.lJ4(41,go)),e.R7$(2),e.Y8G("hasPermission",e.lJ4(42,ho)),e.R7$(),e.Y8G("ngIf",50==t.trunckStatus)}}function ko(a,s){1&a&&(e.j41(0,"div",84),e.EFF(1," general.table.noData "),e.k0s())}function To(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",85)(1,"div",86),e.nrm(2,"ngb-pagination-info",87),e.j41(3,"table-length",88),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",89)(5,"ngb-pagination",90),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function jo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",91)(1,"div",92)(2,"h4",93),e.nrm(3,"span",94),e.k0s(),e.j41(4,"button",95),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(5,"div",96),e.nrm(6,"ngx-ui-loader",97),e.j41(7,"form",98,2),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeStatus())}),e.j41(9,"div",17)(10,"div",99)(11,"label",100),e.EFF(12,"sales.salesOrder.trunckStatus"),e.k0s(),e.j41(13,"ng-select",101),e.nI1(14,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.trunckStatus,i)||(r.form.trunckStatus=i),e.Njj(i)}),e.k0s()()(),e.j41(15,"div",102)(16,"button",103),e.nrm(17,"i",104)(18,"span",105),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.changeTeamStatus")),e.Y8G("items",n.statusList)("multiple",!1),e.R50("ngModel",n.form.trunckStatus),e.R7$(3),e.Y8G("disabled",!t.valid)}}function wo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",118)(1,"i",119),e.bIt("click",function(){const i=e.eBV(t),r=i.$implicit,o=i.index,l=e.XpG(2);return e.Njj(l.removeImage(r.id,o))}),e.k0s(),e.j41(2,"div",120),e.nrm(3,"img",121),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("src",0==t.id?t.path:n.serverPath+t.path,e.B4B)}}function Mo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",92)(1,"h4",93),e.nrm(2,"span",106),e.k0s(),e.j41(3,"button",95),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(4,"div",96)(5,"form",null,2),e.nrm(7,"ngx-ui-loader",97),e.j41(8,"div",107)(9,"div",108)(10,"div",109)(11,"div",110)(12,"button",111),e.bIt("click",function(){e.eBV(t);const i=e.sdS(17);return e.Njj(i.click())}),e.EFF(13," orderManagement.order.assignedOrders.select "),e.k0s(),e.j41(14,"div",112),e.DNE(15,wo,4,1,"div",113),e.k0s()(),e.j41(16,"input",114,3),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileChanged(i))}),e.k0s()(),e.j41(18,"div",115)(19,"button",116),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.finishOrder())}),e.k0s(),e.j41(20,"button",117),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()()}if(2&a){const t=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.Y8G("ngForOf",t.images)}}let Ro=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,h,i,o,l,c),this.baseService=i,this.salesInvoicesService=r,this.authDaamService=g,this.excelService=x,this._formDataService=v,this.title="sales.assignTruckOrder.title",this.titleOperation="sales.assignTruckOrder.title",this.config={infinite:!0,slidesToShow:5,slidesToScroll:1,autoplay:!1,arrows:!1},this.trunks=[],this.isFlagTime=!0,this.searchForm={},this.statusList=[],this.pagination={pageNumber:1,pageSize:30},this.images=[],this.serverPath=q.c.mediaUrl,this.form={orderId:0,attachmens:[]},this.setDates=(C,I,y)=>{if(C?.from||C?.to){const F=C.to||C.from;this.pagination[I]=this.datePipe.transform(C.from||C.to,"yyyy-MM-ddT00:00:00"),this.pagination[y]=this.datePipe.transform(F,"yyyy-MM-ddT23:59:59.999")}else this.pagination[I]=null,this.pagination[y]=null}}loadentities(){this.ngxLoader.startLoader(f.a7),this.baseService.GetOrderAssignTrunk(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}ngOnInitMore(){this.loadentities(),this.checkStatus()}checkStatus(){let t=this.baseService.getTrunckStatus();t.forEach(n=>{n.name=this.getTranslationText("sales.salesOrder."+n.name)}),this.statusList=t}mapExcel(){let t=[];return this.entities.forEach(n=>{t.push({"Order Code":n.orderCode,"Created Date":n.createdDate,"City Name":n.cityName,"District Name":n.districtName?n.districtName:"--","Agent Name":n.agentName,Mobile:n.mobile,"Channel Name":n.channelName,"Assigned To":n.teamNames,Times:n.workTimes,"Visit Date":n.visitDate,Services:n.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openChangeStatusModal(t,n,i="md"){this.form={},this.form.trunckStatus=t.trunckStatus,this.form.id=t.id,this.modalService.open(n,{centered:!0,size:i})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.changeStatus({trunckStatus:this.form.trunckStatus,id:this.form.id}).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}mapUrl(t,n){return null===t||null==n?"":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}SubmitFinishOrder(){this.ngxLoader.startLoader(this.operationLoader),this.salesInvoicesService.finishOrder(this.form.id).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}PrintOrderReceived(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.PrintOrderReceived(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}onFileChanged(t){if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let i=0;i<n;i++){let r=new FileReader;this.form.attachmens.push({attachImage:t.target.files.item(i),type:"file"}),r.onload=o=>{this.images.push({id:0,path:o.target.result,completePath:o.target.result})},r.readAsDataURL(t.target.files[i])}}}removeImage(t,n){this.form.attachmens.splice(n,1),this.images.splice(n,1)}openFinishedModal(t,n,i="md"){this.form={},this.form.orderId=t,this.images=[],this.form.attachmens=[],this.modalService.open(n,{centered:!0,size:i})}finishOrder(){if(this.form.attachmens.length<=0)return void this.alertService.error("sales.assignTruckOrder.mustInsertFile");const t=new FormData;t.append("OrderId",this.form.orderId.toString()),this.form.attachmens.forEach(n=>{t.append("Attachmens",n.attachImage)}),this.ngxLoader.startLoader(f.Fq),this.salesInvoicesService.finishOrder(t).subscribe(n=>{this.ngxLoader.stopLoader(f.Fq),this.loadentities(),this.modalService.dismissAll()},n=>{console.log(n),this.ngxLoader.stopLoader(f.Fq)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(Be.B),e.rXU(ze.Q),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(K.V),e.rXU(we.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["assign-truck-order"]],features:[e.Vt3],decls:31,vars:26,consts:[["changeStatusModal",""],["finishOrderModal",""],["formEntity","ngForm"],["FileInput",""],[1,"card"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"card-body","p-0"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","tel","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"row"],["class","col-12 col-md-4 my-2",4,"ngFor","ngForOf"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row text-center px-1 py-1 overflow-hidden",4,"ngIf"],[1,"col-12","col-md-4","my-2"],[1,"card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow","card-item"],[1,"card-body","p-3","d-flex","flex-column"],[1,"client-header","bg-light","p-3","rounded","mb-3"],[1,"d-flex","align-items-center"],[1,"ri-user-3-fill","text-primary","fs-4","me-3"],[1,"mb-0","text-primary"],[1,"text-muted"],[1,"order-info","mb-3","p-3","bg-light","rounded"],[1,"col-6"],[1,"mb-2"],[1,"ri-truck-line","text-muted","me-2"],[1,"ri-user-line","text-muted","me-2"],[1,"ri-calendar-2-fill","text-muted","me-2"],[1,"ri-numbers-line","text-muted","me-2"],[1,"ids-section","d-flex","justify-content-between","mb-3"],[1,"badge","bg-secondary"],[1,"ri-shopping-cart-line","me-1"],[1,"badge","bg-dark"],[1,"ri-file-list-line","me-1"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"phone-number"],[1,"ri-phone-fill","text-info","me-2"],[1,"cursor-pointer","text-primary","fw-medium",3,"click"],[1,"ri-clipboard-line","ms-1"],["class","badge bg-danger-subtle text-danger",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success",3,"href",4,"ngIf"],[1,"accordion","accordion-flush",3,"id"],[1,"accordion-item","border-0"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","bg-light","p-2"],[1,"ri-list-check-2","me-2"],[1,"badge","bg-primary","ms-2"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body","p-0",3,"ngStyle"],[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[1,"row","mt-3","g-2","align-items-center"],["class","col-12 col-md-auto order-1",4,"hasPermission"],[1,"d-none","d-md-block","col"],["class","col-12 col-md-auto order-2",4,"hasPermission"],[4,"ngIf"],[1,"badge","bg-danger-subtle","text-danger"],[1,"ri-map-pin-line","me-1"],["target","_blank",1,"badge","bg-success-subtle","text-success",3,"href"],[1,"list-group-item","border-0","py-2","px-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"badge","bg-secondary","me-2"],[1,"text-truncate","text-wrap","text-break"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"col-12","col-md-auto","order-1"],[1,"d-flex","d-md-block","justify-content-center"],[1,"btn","btn-sm","btn-success","w-100","py-2",3,"click"],[1,"ri-swap-line","me-1"],[1,"d-none","d-sm-inline"],["translate","",1,"d-inline","d-sm-none"],[1,"col-12","col-md-auto","order-2"],[1,"btn","btn-sm","btn-info","w-100","py-2",3,"click"],[1,"ri-printer-fill","me-1"],["class","col-12 col-md-4 order-3 mt-2 mt-md-0 mx-md-auto",4,"hasPermission"],[1,"col-12","col-md-4","order-3","mt-2","mt-md-0","mx-md-auto"],[1,"btn","btn-sm","btn-primary","w-100","py-2",3,"click"],[1,"ri-checkbox-circle-fill","me-1"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","text-center","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.changeTeamStatus",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","trunckStatus","translate","",1,"fw-bold","form-label"],["name","trunckStatus","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","orderManagement.order.finishOrder",1,"fw-bold","fs-4"],[1,"modal-content"],[1,"modal-body","p-1"],[1,"col-12","col-lg-12","d-flex"],[1,"w-75"],["translate","",1,"btn","btn-warning","px-5",3,"click"],[1,"my-3","d-flex"],["class","avatar-lg mx-2 position-relative",4,"ngFor","ngForOf"],["multiple","","value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","gap-2","justify-content-center","my-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"avatar-lg","mx-2","position-relative"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-md","h-auto",3,"src"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",4),e.nrm(1,"ngx-ui-loader",5),e.j41(2,"div",6)(3,"base-filter",7),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())}),e.qex(4,8),e.j41(5,"div",9)(6,"div",10)(7,"input",11),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.orderCode,l)||(i.pagination.orderCode=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"input",13),e.nI1(13,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.agentName,l)||(i.pagination.agentName=l),e.Njj(l)}),e.k0s(),e.nrm(14,"i",12),e.k0s()(),e.j41(15,"div",9)(16,"div",10)(17,"input",14),e.nI1(18,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.mobile,l)||(i.pagination.mobile=l),e.Njj(l)}),e.k0s(),e.nrm(19,"i",12),e.k0s()(),e.j41(20,"div",15)(21,"input",16),e.nI1(22,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s()()(),e.j41(23,"div",17),e.DNE(24,Io,75,43,"div",18),e.k0s(),e.DNE(25,ko,2,0,"div",19)(26,To,6,8,"div",20)(27,jo,19,10,"ng-template",null,0,e.C5r)(29,Mo,21,4,"ng-template",null,1,e.C5r)}2&n&&(e.R7$(),e.Y8G("loaderId","searchLoader"),e.R7$(2),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,18,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,20,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,22,"orderManagement.order.mobile")),e.R50("ngModel",i.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(22,24,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.Y8G("ngForOf",i.entities),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.Sq,m.bT,m.B3,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,_.s5,z.kL,ie.b,J.p,Z.g,b.Mm,R.Cv,$.vr,X.m,W.p,m.vh,b.D9],encapsulation:2})}}return a})();var yt=u(54384);const Fo=()=>["priceList.updatePrice"];function Oo(a,s){1&a&&(e.j41(0,"div",36),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Vo(a,s){1&a&&(e.j41(0,"div",36),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Eo(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.addAllItems())}),e.nrm(1,"i",32)(2,"span",39),e.k0s()}if(2&a){e.XpG(2);const t=e.sdS(7);e.Y8G("disabled",!t.valid)}}function Do(a,s){if(1&a&&(e.qex(0),e.DNE(1,Eo,3,1,"button",37),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.listId)}}function No(a,s){1&a&&(e.j41(0,"tr",50)(1,"th",51),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",52),e.EFF(4," sales.priceList.itemName "),e.k0s(),e.j41(5,"th",52),e.EFF(6," sales.priceList.unitName "),e.k0s(),e.j41(7,"th",53),e.EFF(8," sales.priceList.itemPrice "),e.k0s(),e.j41(9,"th",53),e.EFF(10," sales.priceList.listPrice "),e.k0s()())}function Lo(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",54)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"input",55),e.nI1(11,"translate"),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(2);return e.DH7(o.form[r].price,i)||(o.form[r].price=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.XpG(2);e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.itemPrice),e.R7$(2),e.FS9("placeholder",e.bMT(11,6,"sales.priceList.price")),e.R50("ngModel",i.form[n].price)}}function Po(a,s){1&a&&(e.j41(0,"div",56),e.EFF(1," general.table.noData "),e.k0s())}function Go(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",47)(1,"a",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.Save())}),e.nrm(2,"i",49),e.j41(3,"span"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()}2&a&&(e.R7$(4),e.JRh(e.bMT(5,1,"general.action.save")))}function $o(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"div",40)(5,"p-table",41,6),e.DNE(7,No,11,0,"ng-template",42)(8,Lo,12,8,"ng-template",43),e.k0s()(),e.DNE(9,Po,2,0,"div",44),e.j41(10,"div",45),e.DNE(11,Go,6,3,"div",46),e.j41(12,"div",47)(13,"a",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.back())}),e.nrm(14,"i",49),e.j41(15,"span"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.Y8G("loaderId",t.searchLoader),e.R7$(2),e.Y8G("value",t.form)("rows",null==t.form?null:t.form.length),e.R7$(4),e.Y8G("ngIf",(null==t.form?null:t.form.length)<=0),e.R7$(2),e.Y8G("ngIf",(null==t.form?null:t.form.length)>0),e.R7$(5),e.JRh(e.bMT(17,6,"general.action.back"))}}let Ct=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,o,i,r,l),this.baseService=o,this.service=h,this.clientGroupsService=g,this.offerOrderService=x,this.router=v,this.title="sales.priceList.priceListItems",this.submitted=!1,this.pagination={pageNumber:1,pageSize:1e3},this.form=[],this.formMaster={},this.listId=0,this.clientGroups=[],this.discountTypes=[]}ngOnInitMore(){this.listId=this.routerActive.snapshot.paramMap.get("id"),this.listId&&this.GetById(),this.loadentities(),this.getClientGroups(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}GetById(){this.baseService.getById(this.listId).pipe((0,p.Q)(this.notifier)).subscribe(t=>{t.success?(this.isEditForm=!0,this.formMaster=t.data):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error()})}getClientGroups(){this.clientGroupsService.getDropDown().subscribe({next:t=>{this.clientGroups=t.data}})}addAllItems(){this.ngxLoader.startLoader(f.a7),this.baseService.UpdatePriceListItemUnit(this.listId).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.LoadSuccess(),this.loadentities(),this.ngxLoader.stopLoader(f.a7)},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)})}Save(){let t=[];this.form.forEach(n=>{t.push({id:n.id,UnitId:n.unitId,itemId:n.itemId,priceListMasterId:n.priceListMasterId,price:n.price})}),this.ngxLoader.startLoader(this.searchLoader),this.baseService.EditPriceListItem(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.searchLoader)),(0,H.W)(n=>(0,Q.$)(n))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}loadentities(){this.baseService.GetPriceListWithUnits(this.listId).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.form=t.data,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}back(){this.router.navigate(["/sales/Prices-List/"])}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}submitFunished(){this.alertService.success(),this.ngxLoader.stop(f.a7),this.ngxLoader.stop(f.ZW),this.btnDisabled=!0}registerEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapRegisterForm(this.formMaster);this.baseService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(n=>(0,Q.$)(n))).subscribe(n=>{n.success?(this.goList(n.data),this.submitFunished()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}editEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapForm(this.formMaster);this.baseService.edit(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}goList(t){this.router.navigateByUrl("/sales/PriceListItems/"+t)}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(D.u),e.rXU(m.vh),e.rXU(lt),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(yt.m),e.rXU(qe.t),e.rXU(re.A),e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-priceList-operation"]],features:[e.Vt3],decls:46,vars:20,consts:[["formEntity","ngForm"],["namess","ngModel"],["clientGroupId","ngModel"],["discountType","ngModel"],["discount","ngModel"],["notes","ngModel"],["tableMaster",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"card","grid"],[1,"card-body"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","id","name","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","col-md-2"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","id","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["clearable","false","clearOnBackspace","false","name","discountType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"col-12","col-md-1"],["for","discount","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","discount","type","number","id","discount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2","my-1"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[4,"hasPermission"],["class","row",4,"ngIf"],["translate","",1,"text-danger","text-center"],["type","submit","class","btn btn-success btn-label waves-effect waves-light rounded-pill mx-2",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill","mx-2",3,"click","disabled"],["translate","sales.priceList.UpdateItems"],[1,"table-responsive"],["dataKey","id",3,"value","rows"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],[1,"row","justify-content-center","py-2"],["class","text-center text-danger text-bold fs-6  col-2",4,"ngIf"],[1,"text-center","text-danger","text-bold","fs-6","col-2"],[1,"btn","btn-dark",3,"click"],[1,"ri-check-double-fill","align-bottom"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","30%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","number",1,"form-control","text-center",3,"ngModelChange","placeholder","ngModel"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],["href","javascript:void(0);",1,"btn","btn-success",3,"click"]],template:function(n,i){if(1&n){const r=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9)(4,"div",10),e.nrm(5,"ngx-ui-loader",11),e.j41(6,"form",12,0),e.bIt("submit",function(){return e.eBV(r),e.Njj(i.OnSubmit())}),e.j41(8,"div",8)(9,"div",13)(10,"label",14),e.EFF(11,"sales.priceList.name"),e.k0s(),e.j41(12,"input",15,1),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.name,l)||(i.formMaster.name=l),e.Njj(l)}),e.k0s(),e.DNE(14,Oo,2,0,"div",16),e.k0s(),e.j41(15,"div",17)(16,"label",18),e.EFF(17,"sales.priceList.clientGroupName"),e.k0s(),e.j41(18,"ng-select",19,2),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.clientGroupId,l)||(i.formMaster.clientGroupId=l),e.Njj(l)}),e.k0s(),e.DNE(20,Vo,2,0,"div",20),e.k0s(),e.j41(21,"div",17)(22,"label",18),e.EFF(23,"sales.priceList.discountType"),e.k0s(),e.j41(24,"ng-select",21,3),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.discountType,l)||(i.formMaster.discountType=l),e.Njj(l)}),e.k0s()(),e.j41(26,"div",22)(27,"label",23),e.EFF(28,"sales.priceList.discount"),e.k0s(),e.j41(29,"input",24,4),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.discount,l)||(i.formMaster.discount=l),e.Njj(l)}),e.k0s()(),e.j41(31,"div",22)(32,"label",25),e.EFF(33,"stores.storesUnits.isActive"),e.k0s(),e.j41(34,"p-inputSwitch",26),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.isActive,l)||(i.formMaster.isActive=l),e.Njj(l)}),e.k0s()(),e.j41(35,"div",27)(36,"label",28),e.EFF(37,"sales.clientCollection.notes"),e.k0s(),e.j41(38,"textarea",29,5),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.notes,l)||(i.formMaster.notes=l),e.Njj(l)}),e.k0s()(),e.j41(40,"div",30)(41,"button",31),e.nrm(42,"i",32)(43,"span",33),e.k0s(),e.DNE(44,Do,2,1,"ng-container",34),e.k0s()()()()()(),e.DNE(45,$o,18,8,"div",35)}if(2&n){const r=e.sdS(7),o=e.sdS(13),l=e.sdS(19);e.FS9("title",e.bMT(1,17,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(5),e.Y8G("loaderId",i.operationLoader),e.R7$(7),e.R50("ngModel",i.formMaster.name),e.R7$(2),e.Y8G("ngIf",o.invalid&&o.touched),e.R7$(4),e.Y8G("items",i.clientGroups)("multiple",!1),e.R50("ngModel",i.formMaster.clientGroupId),e.R7$(2),e.Y8G("ngIf",l.invalid&&l.touched),e.R7$(4),e.Y8G("items",i.discountTypes),e.R50("ngModel",i.formMaster.discountType),e.R7$(5),e.R50("ngModel",i.formMaster.discount),e.R7$(5),e.R50("ngModel",i.formMaster.isActive),e.R7$(4),e.R50("ngModel",i.formMaster.notes),e.R7$(3),e.Y8G("disabled",!r.valid),e.R7$(3),e.Y8G("hasPermission",e.lJ4(19,Fo)),e.R7$(),e.Y8G("ngIf",i.listId)}},dependencies:[m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,Ee.m,b.Mm,E.XI,te.Ei,be.HW,R.Cv,$.vr,X.m,W.p,b.D9],encapsulation:2})}}return a})(),Bo=(()=>{class a extends $e.E{constructor(t,n,i){super(t,n,i)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(nt.u),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Ao=(()=>{class a extends $e.E{constructor(t,n,i){super(t,n,i)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(lt),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var He=u(70053),Qe=u(69433),Xo=u(91020);let We=(()=>{class a{constructor(t,n,i,r){this.cancelReasonService=t,this.orderService=n,this.ngxLoader=i,this.alertService=r,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.notifier=new L.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}onCancelOrder(){let t={cancelReasonId:this.form.cancelReasonCode,id:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOfferOrder(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(this.operationLoader),n.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Xo.e),e.rXU(re.A),e.rXU(R.eD),e.rXU(D.u))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["cancel-sales-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(r),e.Njj(i.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(i.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.form.cancelReasonCode,l)||(i.form.cancelReasonCode=l),e.Njj(l)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&n){const r=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",i.cancelReasons)("multiple",!1),e.R50("ngModel",i.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!r.valid)}},dependencies:[d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,b.Mm,R.Cv,$.vr,b.D9],encapsulation:2})}}return a})();var St=u(57415);const De=a=>[a];function Yo(a,s){if(1&a&&(e.j41(0,"span"),e.nrm(1,"span",62),e.k0s()),2&a){const t=e.XpG(2);e.ZvI(" badge ",t.getStatus(t.form),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.form.offerOrderStatusName)}}function zo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",15)(1,"label",22),e.EFF(2,"sales.salesOrder.clientDeliveryDate"),e.k0s(),e.j41(3,"input",63),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.clientVisitDate,i)||(r.form.clientVisitDate=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","Y-m-d H:i")}}function Uo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",15),e.EFF(1),e.nrm(2,"label",64),e.j41(3,"ng-select",65),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.salsePersonId,i)||(r.form.salsePersonId=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.form.offerOrderStatus," "),e.R7$(2),e.Y8G("disabled",t.isDraft)("items",t.employees),e.R50("ngModel",t.form.salsePersonId)}}function qo(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",21)(1,"label",66),e.EFF(2,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(3,"textarea",67,1),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.changeQuantityMessage,i)||(r.form.changeQuantityMessage=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("disabled",t.isDraft),e.R50("ngModel",t.form.changeQuantityMessage)}}function Ho(a,s){1&a&&e.nrm(0,"th",68)}function Qo(a,s){1&a&&e.nrm(0,"th",69)}function Wo(a,s){1&a&&e.nrm(0,"th",70)}function Jo(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"input",77),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.clientQuantity,i)||(r.clientQuantity=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(),n=t.$implicit,i=t.$index;e.R7$(),e.Y8G("name","clientQuantity"+e.eq3(2,De,i)),e.R50("ngModel",n.clientQuantity)}}function Zo(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"ng-select",72),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG().$index,o=e.XpG(2);return e.Njj(o.discountSelect(i,r,2))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.discountType,i)||(r.discountType=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(),n=t.$implicit,i=t.$index,r=e.XpG(2);e.R7$(),e.Y8G("name","discountType"+e.eq3(3,De,i))("items",r.discountTypes),e.R50("ngModel",n.discountType)}}function Ko(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"input",78),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG().$index,o=e.XpG(2);return e.Njj(o.discountSelect(i,r))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.discount,i)||(r.discount=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(),n=t.$implicit,i=t.$index;e.R7$(),e.Y8G("name","discount"+e.eq3(2,De,i)),e.R50("ngModel",n.discount)}}function el(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"ng-select",71),e.bIt("change",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.itemSelected(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.itemId,i)||(r.itemId=i),e.Njj(i)}),e.k0s()(),e.j41(3,"td")(4,"ng-select",72),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()(),e.DNE(5,Jo,2,4,"td",73),e.j41(6,"td")(7,"input",74),e.bIt("ngModelChange",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.quantitySelect(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.DNE(10,Zo,2,5,"td",73)(11,Ko,2,4,"td",73),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td")(15,"span",75),e.bIt("click",function(){const i=e.eBV(t).$index,r=e.XpG(2);return e.Njj(r.deleteRow(i))}),e.nrm(16,"i",76),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index,i=e.XpG(2);e.R7$(2),e.Y8G("name","itemId"+e.eq3(13,De,n))("items",i.items),e.R50("ngModel",t.itemId),e.R7$(2),e.Y8G("name","unitId"+e.eq3(15,De,n))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(),e.Y8G("ngIf",!(0==i.form.offerOrderStatus||5==i.form.offerOrderStatus)),e.R7$(2),e.Y8G("name","quantity"+e.eq3(17,De,n)),e.R50("ngModel",t.quantity),e.R7$(2),e.SpI(" ",t.price," "),e.R7$(),e.Y8G("ngIf",!i.isChangeQuantity&&!i.isDraft),e.R7$(),e.Y8G("ngIf",!i.isChangeQuantity&&!i.isDraft),e.R7$(2),e.SpI("",t.net," ")}}function tl(a,s){if(1&a){const t=e.RV6();e.j41(0,"td",51)(1,"div",79)(2,"ng-select",80),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscountType,i)||(r.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(3,"input",81),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscount,i)||(r.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",t.isChangeQuantity)("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.Y8G("disabled",t.isChangeQuantity),e.R50("ngModel",t.form.totalAddDiscount)}}function il(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"h4",5)(3,"span",6),e.EFF(4),e.k0s(),e.j41(5,"span",7),e.EFF(6),e.k0s(),e.DNE(7,Yo,2,4,"span",8),e.k0s(),e.j41(8,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismissFn())}),e.k0s()(),e.j41(9,"div",10),e.nrm(10,"ngx-ui-loader",11),e.j41(11,"form",12,0),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.orderFinished())}),e.j41(13,"div",13),e.DNE(14,zo,4,5,"div",14),e.j41(15,"div",15)(16,"label",16),e.EFF(17,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(18,"input",17),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.acutalVisitDate,i)||(r.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(19,"div",15),e.nrm(20,"label",18),e.j41(21,"ng-select",19),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientLocationId,i)||(r.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.DNE(22,Uo,4,4,"div",14)(23,qo,5,2,"div",20),e.j41(24,"div",21)(25,"label",22),e.EFF(26,"sales.salesOrder.terms"),e.k0s(),e.j41(27,"textarea",23),e.nI1(28,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.terms,i)||(r.form.terms=i),e.Njj(i)}),e.k0s()()(),e.j41(29,"div",24)(30,"div",25)(31,"div",26)(32,"div",27),e.nrm(33,"h5",28),e.k0s()(),e.j41(34,"div",29)(35,"div",30)(36,"table",31)(37,"thead",32)(38,"tr"),e.nrm(39,"th",33)(40,"th",34),e.DNE(41,Ho,1,0,"th",35),e.nrm(42,"th",36)(43,"th",37),e.DNE(44,Qo,1,0,"th",38)(45,Wo,1,0,"th",39),e.nrm(46,"th",40)(47,"th",41),e.k0s()(),e.j41(48,"tbody",42),e.Z7z(49,el,17,19,"tr",null,e.Vm6),e.j41(51,"tr",43)(52,"td",44)(53,"span",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addRow())}),e.nrm(54,"i",46)(55,"span",47),e.k0s()(),e.j41(56,"td",48)(57,"table",49)(58,"tbody")(59,"tr"),e.nrm(60,"td",50),e.j41(61,"td",51),e.EFF(62),e.k0s()(),e.j41(63,"tr"),e.nrm(64,"td",52),e.DNE(65,tl,4,5,"td",53),e.k0s(),e.j41(66,"tr",54),e.nrm(67,"td",55),e.j41(68,"td",51),e.EFF(69),e.k0s()(),e.j41(70,"tr",56),e.nrm(71,"th",57),e.j41(72,"th",51),e.EFF(73),e.k0s()()()()()()()()()()()(),e.j41(74,"div",58)(75,"button",59),e.nrm(76,"i",60)(77,"span",61),e.k0s()()()()()}if(2&a){const t=e.sdS(12),n=e.XpG();e.R7$(4),e.SpI("#SO#",n.form.id," "),e.R7$(2),e.SpI("",n.form.clientName," "),e.R7$(),e.Y8G("ngIf",n.form.offerOrderStatus>=0),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("ngIf",!(0==n.form.offerOrderStatus||5==n.form.offerOrderStatus)),e.R7$(4),e.R50("ngModel",n.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","Y-m-d H:i"),e.R7$(3),e.Y8G("items",n.locations),e.R50("ngModel",n.form.clientLocationId),e.R7$(),e.Y8G("ngIf",!(0==n.form.offerOrderStatus||5==n.form.offerOrderStatus)),e.R7$(),e.Y8G("ngIf",5==n.form.offerOrderStatus),e.R7$(4),e.Y8G("placeholder",e.bMT(28,28,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",n.form.terms),e.R7$(14),e.Y8G("ngIf",!(0==n.form.offerOrderStatus||5==n.form.offerOrderStatus)),e.R7$(3),e.Y8G("ngIf",!n.isChangeQuantity&&!n.isDraft),e.R7$(),e.Y8G("ngIf",!n.isChangeQuantity&&!n.isDraft),e.R7$(4),e.Dyx(n.form.details),e.R7$(3),e.BMQ("colspan",0==n.form.offerOrderStatus||5==n.form.offerOrderStatus?3:4),e.R7$(4),e.BMQ("colspan",0==n.form.offerOrderStatus||5==n.form.offerOrderStatus?1:2),e.R7$(6),e.JRh(n.form.total),e.R7$(3),e.Y8G("ngIf",!(0==n.form.offerOrderStatus||5==n.form.offerOrderStatus)),e.R7$(4),e.JRh(n.form.tax),e.R7$(4),e.JRh(n.form.totalNet),e.R7$(2),e.Y8G("disabled",!t.valid)}}function nl(a,s){1&a&&e.nrm(0,"span",83)}function al(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"h4",5)(3,"p",82),e.nrm(4,"span",83),e.k0s()(),e.j41(5,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismissFn())}),e.k0s()(),e.j41(6,"p",82),e.DNE(7,nl,1,0,"span",84),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(7),e.Y8G("ngForOf",t.repeat22)}}let Je=(()=>{class a{constructor(t,n,i,r,o,l,c,h,g){this.translateService=t,this.offerOrderService=n,this.salesRequestService=i,this.itemsService=r,this.clientService=o,this.employeeService=l,this.alertService=c,this.datePipe=h,this.ngxLoader=g,this.orderSelected=0,this.isDraft=!1,this.isChangeQuantity=!1,this.isShipping=!1,this.isRequest=!1,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.form={},this.truncks=[],this.locations=[],this.discountTypes=[],this.items=[],this.employees=[],this.isHiden=!0,this.notifier=new L.B,this.repeat22=Array.from({length:19}),this.dismiss=new e.bkB}ngOnInit(){this.GetPersones(),this.getItemsServices(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)}),this.getOrder()}getItemsServices(){this.itemsService.getItemDropDown().subscribe(t=>{this.items=t.data})}getLocations(t){this.clientService.GetClientLocations(t).subscribe(n=>{this.locations=n.data})}GetPersones(){this.employeeService.GetAllByType(9).subscribe(t=>{this.employees=t.data})}getTranslationText(t){let n="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{n=i}),n}getOrder(){this.isRequest?this.getSalesRequestOrder():this.offerOrderService.GetOrderDetail(this.orderSelected).subscribe(t=>{this.isHiden=!1,this.form=t.data,this.getLocations(this.form.clientId),this.getTotal()},t=>{this.alertService.error(t)})}getSalesRequestOrder(){this.salesRequestService.GetOrderDetail(this.orderSelected).subscribe(t=>{this.isHiden=!1,this.form=t.data,this.getLocations(this.form.clientId),this.getTotal()},t=>{this.alertService.error(t)})}update(){}getTotal(){let t=0,n=0,i=0;this.form.details.forEach(r=>{r.discount<0&&(r.discoun=0);let o=r.quantity*r.price,l=0;1===r.discountType?l=r.discount:2===r.discountType&&(l=o*r.discount/100),n+=+l;let c=o-l;r.net=c.toFixed(2),t+=+c}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax,this.form.total=this.form.total.toFixed(2),this.form.totalAddDiscount=this.form.totalAddDiscount.toFixed(2),this.form.tax=this.form.tax.toFixed(2),this.form.totalNet=this.form.totalNet.toFixed(2)}quantitySelect(t,n){t&&(t<=0&&(t=1),this.form.details[n].quantity=parseInt(t),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity,this.discountSelect(this.form.details[n].discount,n),this.getTotal())}discountSelect(t,n,i=1){if(t){(t=parseInt(t))<=0&&(this.form.details[n].discount=0),1==i&&(this.form.details[n].discount=t);let r=0;1==this.form.details[n].discountType?r=this.form.details[n].discount:(r=this.form.details[n].price*this.form.details[n].quantity*this.form.details[n].discount/100,r=+r.toFixed(2)),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity-r,this.form.details[n].net=this.form.details[n].net.toFixed(2),this.getTotal()}}dismissFn(){this.dismiss.emit(!0)}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}addRow(){this.form.details.push({itemId:0,unitId:null,units:[],clientQuantity:1,quantity:1,priceUnit:null,discount:0,discountType:1,net:0})}itemSelected(t,n){t&&(this.form.details[n].unitId=t.units.length>0?t.units[0].id:null,this.form.details[n].units=t.units,this.form.details[n].price=t.price,this.quantitySelect(this.form.details[n].quantity,n),this.getTotal())}deleteRow(t){this.form.details.length<=1||(this.form.details.splice(t,1),this.getTotal())}orderFinished(){this.ngxLoader.startLoader("operationLoader"),this.isRequest?this.editSalesRequest():this.editSalesOrder()}editSalesRequest(){let t={id:this.form.id,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),acutalVisitDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:this.form.offerOrderStatus,notes:this.form.notes,terms:this.form.terms,changeQuantityMessage:this.form.changeQuantityMessage,salsePersonId:this.form.salsePersonId,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,salesRequestDetails:this.form.details.map(n=>({discount:n.discount,discountType:n.discountType,itemId:n.itemId,clientQuantity:n.clientQuantity,approvedQuantity:n.quantity,id:n.id,price:n.price,unitId:n.unitId,salesRequestMasterId:this.form.id}))};this.salesRequestService.edit(t.id,t).subscribe(n=>{n.success?(this.ngxLoader.stopLoader("operationLoader"),this.alertService.success()):(this.alertService.error(),this.ngxLoader.stopLoader("operationLoader"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("operationLoader")})}editSalesOrder(){let t={id:this.form.id,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),acutalVisitDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:this.form.offerOrderStatus,notes:this.form.notes,terms:this.form.terms,changeQuantityMessage:this.form.changeQuantityMessage,salsePersonId:this.form.salsePersonId,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.details.map(n=>({discount:n.discount,discountType:n.discountType,itemId:n.itemId,clientQuantity:n.clientQuantity,approvedQuantity:n.quantity,id:n.id,price:n.price,unitId:n.unitId,offerOrderMasterId:this.form.id}))};this.offerOrderService.edit(t.id,t).subscribe(n=>{n.success?(this.ngxLoader.stopLoader("operationLoader"),this.alertService.success()):(this.alertService.error(),this.ngxLoader.stopLoader("operationLoader"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("operationLoader")})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(b.c$),e.rXU(re.A),e.rXU(St.Z),e.rXU(_t.N),e.rXU(ve.X),e.rXU(se.O),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["sales-edit-order"]],inputs:{orderSelected:"orderSelected",isDraft:"isDraft",isChangeQuantity:"isChangeQuantity",isShipping:"isShipping",isRequest:"isRequest"},outputs:{dismiss:"dismiss"},decls:2,vars:2,consts:[["formEntity","ngForm"],["notes","ngModel"],["class","modal-content border-0  ",4,"ngIf"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-dark-subtle"],[1,"card-title","mb-0"],[1,"badge","bg-primary-subtle","text-primary","fs-4"],[1,"badge","bg-danger-subtle","text-danger","fs-4","mx-2"],[3,"class",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"row"],["class","col-12 col-md-3",4,"ngIf"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","Y-m-d H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["for","name","translate","",1,"fw-bold","form-label"],["rows","1","name","terms","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","12%"],["style","width:10%","translate","sales.salesRequests.clientQuantity",4,"ngIf"],["translate","sales.salesRequests.quantity",2,"width","12%"],["translate","sales.salesRequests.priceUnit",2,"width","12%"],["style","width:12%","translate","sales.salesRequests.discountType",4,"ngIf"],["style","width:12%","translate","sales.salesRequests.discount",4,"ngIf"],["translate","sales.salesRequests.net",2,"width","12%"],[2,"width","5%"],[1,"body-orderEdit"],[1,"border-top","border-top-dashed"],[2,"vertical-align","top"],[1,"cursor-pointer","p-2","mb-0","badge","bg-success-subtle","text-success",3,"click"],[1,"ri-add-fill"],["translate","sales.salesRequests.addItem"],[1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],["class","text-end m-0 p-0",4,"ngIf"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[3,"translate"],["name","clientVisitDate","type","text","mwlFlatpickr","","altFormat","Y-m-d H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","sales.salesOrder.salsePerson",1,"fw-bold","form-label"],["name","salsePersonId","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],["for","changeQuantityMessage","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","disabled","ngModel"],["translate","sales.salesRequests.clientQuantity",2,"width","10%"],["translate","sales.salesRequests.discountType",2,"width","12%"],["translate","sales.salesRequests.discount",2,"width","12%"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"change","ngModelChange","name","items","ngModel"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],[4,"ngIf"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"cursor-pointer","mb-0","p-2","badge","bg-danger-subtle","text-danger",3,"click"],[1,"ri-delete-bin-2-fill"],["type","text","id","clientQuantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],["InputTirmFilter","","type","text","id","discount",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"input-group","mx-4","my-1",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","disabled","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","20%",3,"change","ngModelChange","disabled","ngModel"],[1,"card-text","placeholder-glow"],[1,"placeholder","col-12"],["class","placeholder col-12",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&e.DNE(0,il,78,30,"div",2)(1,al,8,1,"div",2),2&n&&(e.Y8G("ngIf",!i.isHiden),e.R7$(),e.Y8G("ngIf",i.isHiden))},dependencies:[m.Sq,m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,z.kL,b.Mm,R.Cv,$.vr,X.m,b.D9],encapsulation:2})}}return a})();const rl=()=>["salesOrder.viewOrderCount"],sl=()=>["salesOrder.register"],ol=()=>["salesOrderStore.assignTrunk"],ll=()=>["salesOrder.edit"],dl=()=>["salesOrder.cancel"],It=a=>[a];function cl(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.onSelectStatus(-1))}),e.j41(1,"div",41)(2,"div",51)(3,"div",43)(4,"div",52),e.nrm(5,"i",45),e.k0s()(),e.j41(6,"div",46)(7,"h5",47),e.EFF(8),e.k0s(),e.nrm(9,"p",53),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.AVh("bg-primary-subtle",null==t.pagination.status),e.R7$(6),e.JRh(t.count.all)}}function ml(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.onSelectStatus(30))}),e.j41(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",54),e.nrm(5,"i",45),e.k0s()(),e.j41(6,"div",46)(7,"h5",47),e.EFF(8),e.k0s(),e.nrm(9,"p",55),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",1==t.showStore),e.R7$(7),e.JRh(t.count.repareOrder)}}function pl(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.onSelectStatus(50))}),e.j41(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",56),e.nrm(5,"i",45),e.k0s()(),e.j41(6,"div",46)(7,"h5",47),e.EFF(8),e.k0s(),e.nrm(9,"p",57),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",50==t.pagination.status),e.R7$(7),e.JRh(t.count.assign)}}function ul(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.DNE(1,cl,10,3,"div",39)(2,ml,10,3,"div",39)(3,pl,10,3,"div",39),e.j41(4,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(60))}),e.j41(5,"div",41)(6,"div",42)(7,"div",43)(8,"div",44),e.nrm(9,"i",45),e.k0s()(),e.j41(10,"div",46)(11,"h5",47),e.EFF(12),e.k0s(),e.nrm(13,"p",48),e.k0s()()()(),e.j41(14,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(40))}),e.j41(15,"div",41)(16,"div",42)(17,"div",43)(18,"div",49),e.nrm(19,"i",45),e.k0s()(),e.j41(20,"div",46)(21,"h5",47),e.EFF(22),e.k0s(),e.nrm(23,"p",50),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",12!=t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType),e.R7$(2),e.AVh("bg-primary-subtle",60==t.pagination.status),e.R7$(7),e.JRh(t.count.finished),e.R7$(3),e.AVh("bg-primary-subtle",40==t.pagination.status),e.R7$(7),e.JRh(t.count.cancel)}}function gl(a,s){1&a&&(e.j41(0,"th",67),e.EFF(1," sales.salesOrder.trunck "),e.k0s())}function hl(a,s){1&a&&(e.j41(0,"th",76),e.EFF(1," sales.salesOrder.cancelReasonName "),e.k0s())}function _l(a,s){if(1&a&&(e.j41(0,"tr",58),e.nrm(1,"th",59),e.j41(2,"th",60),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",61),e.nrm(5,"i",62),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",63),e.nrm(8,"i",62),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",64),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",65),e.nrm(13,"i",62),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",66),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",67),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",68),e.nrm(20,"i",62),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",69),e.nrm(23,"i",62),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(25,"th",70),e.nrm(26,"i",62),e.EFF(27," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(28,"th",71),e.EFF(29," orderManagement.order.totalTax "),e.k0s(),e.j41(30,"th",72),e.nrm(31,"i",62),e.EFF(32," sales.salesOrder.netPrice "),e.k0s(),e.DNE(33,gl,2,0,"th",73)(34,hl,2,0,"th",74),e.nrm(35,"th",75),e.k0s()),2&a){const t=e.XpG();e.R7$(33),e.Y8G("ngIf",50==t.pagination.status),e.R7$(),e.Y8G("ngIf",40==t.pagination.status||5==t.pagination.status)}}function fl(a,s){1&a&&e.nrm(0,"span",94)}function bl(a,s){if(1&a&&(e.j41(0,"a",95),e.nrm(1,"i",96),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("href",n.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function vl(a,s){if(1&a&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.driverName)}}function xl(a,s){if(1&a&&(e.j41(0,"td")(1,"span",97),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.cancelReasonName," ")}}function yl(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",99),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(69);return e.Njj(r.openShippingModal(i.id,o,"lg"))}),e.nrm(2,"i",100),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.shipping"))}function Cl(a,s){if(1&a&&(e.qex(0),e.DNE(1,yl,3,3,"button",98),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus)}}function Sl(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",79),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(57);return e.Njj(r.openModal(i.id,o,"xl"))}),e.j41(1,"span",101),e.nrm(2,"i",102)(3,"span",103),e.k0s()()}}function Il(a,s){if(1&a&&(e.qex(0),e.DNE(1,Sl,4,0,"li",93),e.bVm()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.pagination.status)}}function kl(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",79),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,r=e.XpG(),o=e.sdS(67);return e.Njj(r.openModal(i.id,o))}),e.j41(1,"span",101),e.nrm(2,"i",104)(3,"span",105),e.k0s()()}}function Tl(a,s){if(1&a&&(e.qex(0),e.DNE(1,kl,4,0,"li",93),e.bVm()),2&a){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",60!=t.offerOrderStatus)}}function jl(a,s){1&a&&(e.qex(0),e.DNE(1,Tl,2,1,"ng-container",87),e.bVm()),2&a&&(e.R7$(),e.Y8G("hasPermission",e.lJ4(1,dl)))}function wl(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",79),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(53);return e.Njj(r.openModal(i.id,o))}),e.j41(1,"span",101),e.nrm(2,"i",104)(3,"span",106),e.k0s()()}}function Ml(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",77)(1,"td"),e.nrm(2,"button",78),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",79),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.PrintSalesOrder(i.id))}),e.j41(6,"bdi",80),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",81),e.k0s()(),e.j41(14,"td",79),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(61);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(15,"a",82),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.DNE(18,fl,1,0,"span",83)(19,bl,2,1,"a",84),e.k0s(),e.j41(20,"td")(21,"div"),e.EFF(22),e.k0s(),e.j41(23,"div",85),e.EFF(24),e.k0s()(),e.j41(25,"td"),e.EFF(26),e.nI1(27,"date"),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td"),e.EFF(33),e.k0s(),e.j41(34,"td"),e.EFF(35),e.k0s(),e.DNE(36,vl,5,2,"td",86)(37,xl,3,1,"td",86),e.j41(38,"td"),e.DNE(39,Cl,2,1,"ng-container",87),e.j41(40,"span",88)(41,"div",89)(42,"button",90),e.nrm(43,"i",91),e.k0s(),e.j41(44,"ul",92),e.DNE(45,Il,2,1,"ng-container",87)(46,jl,2,2,"ng-container",86)(47,wl,4,0,"li",93),e.k0s()()()()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=s.expanded,r=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(n+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,25,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",r.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.storeName),e.R7$(2),e.SpI(" ",e.i5U(27,28,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.totalTax),e.R7$(2),e.JRh(t.netPrice),e.R7$(),e.Y8G("ngIf",50==r.pagination.status),e.R7$(),e.Y8G("ngIf",40==r.pagination.status),e.R7$(2),e.Y8G("hasPermission",e.lJ4(31,ol)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(32,ll)),e.R7$(),e.Y8G("ngIf",40!=t.offerOrderStatus),e.R7$(),e.Y8G("ngIf",0==t.offerOrderStatus)}}function Rl(a,s){1&a&&e.nrm(0,"span",119)}function Fl(a,s){1&a&&e.nrm(0,"span",120)}function Ol(a,s){if(1&a&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,Rl,1,0,"span",117)(14,Fl,1,0,"span",118),e.k0s()(),e.bVm()),2&a){const t=s.$implicit,n=s.index;e.R7$(),e.AVh("bg-danger-subtle",t.isFree),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(t.price),e.R7$(2),e.Y8G("ngIf",t.isFree),e.R7$(),e.Y8G("ngIf",!t.isFree)}}function Vl(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",107)(2,"div")(3,"table",108)(4,"thead")(5,"tr",109)(6,"th",110),e.EFF(7,"#"),e.k0s(),e.nrm(8,"th",111)(9,"th",112)(10,"th",113)(11,"th",114)(12,"th",115),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,Ol,15,9,"ng-container",116),e.k0s()()()()()),2&a){const t=s.$implicit;e.R7$(14),e.Y8G("ngForOf",t.offerOrderDetails)}}function El(a,s){1&a&&(e.j41(0,"div",121),e.EFF(1," general.table.noData "),e.k0s())}function Dl(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",122)(1,"div",123),e.nrm(2,"ngb-pagination-info",124),e.j41(3,"table-length",125),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",126)(5,"ngb-pagination",127),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Nl(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",128),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function Ll(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",129),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function Pl(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",130),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function Gl(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",130),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function $l(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",131),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function Bl(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",132,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",133),e.j41(3,"div",134)(4,"div",135)(5,"button",136),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",137)(7,"div",138),e.nrm(8,"lord-icon",139),e.j41(9,"div",140),e.nrm(10,"h3",141)(11,"p",142),e.k0s()(),e.j41(12,"div",143),e.nrm(13,"button",144),e.j41(14,"button",145),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Al(a,s){1&a&&(e.j41(0,"div",152),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Xl(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",132,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",133),e.j41(3,"div",134)(4,"div",135)(5,"button",136),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",137)(7,"div",146)(8,"label",147),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",148,11),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.changeQuantityMessage,i)||(r.form.changeQuantityMessage=i),e.Njj(i)}),e.k0s(),e.DNE(12,Al,2,0,"div",149),e.k0s(),e.j41(13,"div",143),e.nrm(14,"button",150),e.j41(15,"button",151),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),n=e.sdS(11),i=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.deleteLoader),e.R7$(8),e.R50("ngModel",i.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Yl(a,s){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",153),e.bIt("success",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.reload())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function zl(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",182),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(5,"td")(6,"input",183),e.bIt("ngModelChange",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.quantitySelect(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,It,n))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,It,n)),e.R50("ngModel",t.quantity)}}function Ul(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",184),e.nrm(1,"td",185),e.j41(2,"td",186)(3,"table",187)(4,"tbody")(5,"tr"),e.nrm(6,"td",188),e.j41(7,"td",189),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",190),e.j41(12,"td",189)(13,"div",191)(14,"ng-select",192),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscountType,i)||(r.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(15,"input",193),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscount,i)||(r.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"tr",194),e.nrm(17,"td",195),e.j41(18,"td",189),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",196),e.nrm(22,"th",197),e.j41(23,"th",189),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function ql(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",154)(1,"div",155)(2,"h4",156),e.nrm(3,"span",157),e.k0s(),e.j41(4,"button",158),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",137),e.nrm(6,"ngx-ui-loader",133),e.j41(7,"form",159,10),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateTruck())}),e.j41(9,"div",13)(10,"div",160)(11,"label",161),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",162),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.dateChangeModal(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.acutalVisitDate,i)||(r.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(14,"div",160),e.nrm(15,"label",163),e.j41(16,"ng-select",164),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientLocationId,i)||(r.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",165)(18,"label",161),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",166),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.shippingTruckId,i)||(r.form.shippingTruckId=i),e.Njj(i)}),e.k0s()()(),e.j41(21,"div",167)(22,"div",41)(23,"div",168)(24,"div",169),e.nrm(25,"h5",170),e.k0s()(),e.j41(26,"div",30)(27,"div",171)(28,"table",172)(29,"thead",173)(30,"tr"),e.nrm(31,"th",174)(32,"th",175)(33,"th",176),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,zl,7,10,"tr",null,e.Vm6),e.DNE(37,Ul,26,15,"tr",177),e.k0s()()()()()(),e.j41(38,"div",178)(39,"button",179),e.nrm(40,"i",180)(41,"span",181),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",n.locations),e.R50("ngModel",n.form.clientLocationId),e.R7$(4),e.Y8G("items",n.truncks),e.R50("ngModel",n.form.shippingTruckId),e.R7$(15),e.Dyx(n.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}let kt=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y,j,F){super(t,n,c,i,r,o,l),this.baseService=i,this.authDaamService=h,this.teamService=g,this.employeeService=x,this.regionService=v,this.cityService=C,this.excelService=I,this.router=y,this.storesService=j,this.orderReceivedService=F,this.title="sales.salesOrder.title",this.titleOperation="sales.salesOrder.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.showStore=!1,this.statusList=[{id:0,name:"Draft"},{id:5,name:"ChangeQuantity"},{id:20,name:"UnderReview"},{id:30,name:"StoreDeliveryOrder"},{id:32,name:"RepareOrder"},{id:40,name:"Cancel"},{id:50,name:"Assign"},{id:60,name:"Finished"},{id:100,name:"Return"}],this.user=JSON.parse(localStorage.getItem("user")),this.stores=[],this.setting=[],this.nameSerach="salesOrder",this.setDates=(O,N,U)=>{if(O?.from||O?.to){const fe=O.to||O.from;this.pagination[N]=this.datePipe.transform(O.from||O.to,"yyyy-MM-ddT00:00:00"),this.pagination[U]=this.datePipe.transform(fe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[N]=null,this.pagination[U]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetOfferOrderCount(),this.configStatus(),this.GetStores()}configStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(t=>{this.count=t.data})}GetStores(){this.storesService.getDropDown().subscribe(t=>{this.stores=t.data},t=>{console.log(t)})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.GetAllDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{n?this.alertService.success():this.alertService.error("general.message."+n)},n=>{this.alertService.error()})}mapRegisterForm(t){let n={...t};return n.employeeCode=0,n}onSearch(){-1===this.pagination.status?(this.pagination.status=null,this.pagination.statusList=[],this.showStore=!1):30===this.pagination.status?(this.pagination.status=null,this.showStore=!0,this.pagination.statusList=[30,32]):(this.pagination.statusList=[],this.showStore=!1);let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(n=>{t.push({Code:n.id,CreatorName:n.creatorName,creationTime:n.creationTime,clientName:n.clientName,Status:this.getTranslationText("sales.salesOrder."+n.offerOrderStatusValue),salse_Person:n.salsePersonName,"Delivery.Date":n.acutalVisitDate,"T.Quantity":n.totalQuantity," T.Discount":n.totalDiscount,Tax:n.totalTax,Net:n.netPrice,Reason:n.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,n,i="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(n,{centered:!0,size:i})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.pagination.status=t,this.onSearch()}openStatusModal(t,n,i,r="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:i},this.modalService.open(n,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(f.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{n.success?(this.modalService.dismissAll(),this.reload(),this.alertService.success()):this.alertService.error("general.message."+n.message)}})}cancelOrder(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const n=new Date(t);return n.getDate().toString().padStart(2,"0")+"-"+(n.getMonth()+1).toString().padStart(2,"0")+"-"+n.getFullYear()+" "+n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0")}openShippingModal(t,n,i="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(o=>{o.success?(this.form=o.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=o.data.truncks,this.locations=o.data.locations,this.modalService.open(n,{centered:!0,size:i})):this.alertService.error("general.message."+o.message)},o=>{this.alertService.error("general.message."+o)})}getTotal(){let t=0,n=0,i=0;this.form.details.forEach(r=>{r.discount<0&&(r.discoun=0);let o=r.quantity*r.price,l=0;1===r.discountType?l=r.discount:2===r.discountType&&(l=o*r.discount/100),n=+l;let c=o-l;r.net=c,t=+c}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(n=>({id:0,itemId:n.itemId,itemName:n.itemName,quantity:n.quantity,unitId:n.unitId,price:n.price,discount:n.discount,discountType:n.discountType,clientQuantity:n.clientQuantity,approvedQuantity:n.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.reload():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[n,i,r,o,l]=t.split(/[-\s:]/);return`${r}-${i}-${n}T${o}:${l}:00`}}dateChangeModal(t){t=new Date(t);let n={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(n).subscribe(i=>{i.success?this.truncks=i.data.truncks:this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}quantitySelect(t,n){t&&(t<=0&&(t=1),this.form.details[n].quantity=parseInt(t),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity,this.discountSelect(this.form.details[n].discount,n),this.getTotal())}discountSelect(t,n,i=1){if(t){(t=parseInt(t))<=0&&(this.form.details[n].discount=0),1==i&&(this.form.details[n].discount=t);let r=0;1==this.form.details[n].discountType?r=this.form.details[n].discount:(r=this.form.details[n].price*this.form.details[n].quantity*this.form.details[n].discount/100,r=+r.toFixed(2)),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity-r,this.form.details[n].net=this.form.details[n].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}PrintSalesOrder(t){this.ngxLoader.startLoader("allLoader"),this.baseService.PrintSalesOrder(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}mapUrl(t,n){return null===t||null==n?"":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(re.A),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(He.n),e.rXU(se.O),e.rXU(Ge.S),e.rXU(xe.h),e.rXU(K.V),e.rXU(w.Ix),e.rXU(Qe.a),e.rXU(Be.B))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-order"]],features:[e.Vt3],decls:70,vars:65,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],["class","row justify-content-center",4,"hasPermission"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","storeId","bindValue","id","bindLabel","nameAR",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,"row","justify-content-center"],["class","col-sm-12 col-custom-5  cursor-pointer ",3,"click",4,"ngIf"],[1,"col-sm-12","col-custom-5","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrder.completeOrder",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.cancelOrder",1,"mb-0","text-muted"],[1,"card-body","bg-primary-subtle","d-flex","gap-1","align-items-center"],[1,"avatar-title","border","border-opacity-25","rounded-2","fs-17"],["translate","general.table.all",1,"mb-0","text-muted"],[1,"avatar-title","bg-info","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.storeRepeare",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-info","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.orderShipping",1,"mb-0","text-muted"],[1,""],[2,"width",".2%"],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","3%"],["translate","",2,"width","12%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["style","width:12%","translate","",4,"ngIf"],["style","width:10%","translate","",4,"ngIf"],["translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[3,"translate"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"badge","bg-primary"],[4,"ngIf"],[4,"hasPermission"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"ngIf"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-danger-subtle","text-danger"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["translate","general.action.delete"],["colspan","17"],["dataKey","id"],[1,"bg-light"],[2,"width","3%"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.price",2,"width","5%"],["translate","sales.salesOrder.isFree",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","sales.salesOrder.free",4,"ngIf"],["translate","sales.salesOrder.noFree",4,"ngIf"],["translate","sales.salesOrder.free"],["translate","sales.salesOrder.noFree"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.DNE(0,ul,24,9,"div",12),e.j41(1,"div",13)(2,"div",14)(3,"div",15),e.nrm(4,"ngx-ui-loader",16),e.j41(5,"base-filter",17),e.bIt("addNew",function(){return e.eBV(r),e.Njj(i.goNew())})("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())}),e.qex(6,18),e.j41(7,"div",19)(8,"div",20)(9,"input",21),e.nI1(10,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.id,l)||(i.pagination.id=l),e.Njj(l)}),e.k0s(),e.nrm(11,"i",22),e.k0s()(),e.j41(12,"div",19)(13,"input",23),e.nI1(14,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(15,"div",19)(16,"div",20)(17,"input",24),e.nI1(18,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(19,"i",22),e.k0s()(),e.j41(20,"div",19)(21,"div",20)(22,"ng-select",25),e.nI1(23,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(24,"div",19)(25,"input",23),e.nI1(26,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.dates,l)||(i.searchForm.dates=l),e.Njj(l)}),e.k0s()(),e.j41(27,"div",19)(28,"div",20)(29,"ng-select",26),e.nI1(30,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(31,"div",19)(32,"div",20)(33,"ng-select",27),e.nI1(34,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(35,"div",19)(36,"div",20)(37,"ng-select",28),e.nI1(38,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.status,l)||(i.pagination.status=l),e.Njj(l)}),e.k0s()()(),e.j41(39,"div",19)(40,"div",20)(41,"ng-select",29),e.nI1(42,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.storeId,l)||(i.pagination.storeId=l),e.Njj(l)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(43,"div",30)(44,"div",31)(45,"p-table",32,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(47,_l,36,2,"ng-template",33)(48,Ml,48,33,"ng-template",34)(49,Vl,15,1,"ng-template",35),e.k0s()(),e.DNE(50,El,2,0,"div",36)(51,Dl,6,8,"div",37),e.k0s()()()(),e.DNE(52,Nl,1,0,"ng-template",null,1,e.C5r)(54,Ll,1,1,"ng-template",null,2,e.C5r)(56,Pl,1,3,"ng-template",null,3,e.C5r)(58,Gl,1,3,"ng-template",null,4,e.C5r)(60,$l,1,1,"ng-template",null,5,e.C5r)(62,Bl,15,3,"ng-template",null,6,e.C5r)(64,Xl,16,6,"ng-template",null,7,e.C5r)(66,Yl,1,1,"ng-template",null,8,e.C5r)(68,ql,42,15,"ng-template",null,9,e.C5r)}2&n&&(e.Y8G("hasPermission",e.lJ4(63,rl)),e.R7$(4),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(64,sl))("showAdd",!0)("showExport",!0)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,45,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(14,47,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(18,49,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(23,51,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(26,53,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(30,55,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(34,57,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(38,59,"orderManagement.order.status")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.pagination.status),e.R7$(4),e.FS9("placeholder",e.bMT(42,61,"sales.salesOrder.storeName")),e.Y8G("items",i.stores)("multiple",!1),e.R50("ngModel",i.pagination.storeId),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,E.FP,R.Cv,$.vr,X.m,W.p,ke.m,We,Je,m.vh,b.D9],encapsulation:2})}}return a})();const Hl=()=>["salesOrder.register"],Ql=()=>["salesOrderStore.assignTrunk"],Wl=()=>["salesOrderStore.prepare"],Tt=a=>[a];function Jl(a,s){1&a&&(e.j41(0,"th",67),e.EFF(1," sales.salesOrder.trunck "),e.k0s())}function Zl(a,s){1&a&&(e.j41(0,"th",62),e.EFF(1," sales.salesOrder.trunckStatus "),e.k0s())}function Kl(a,s){if(1&a&&(e.j41(0,"tr",53),e.nrm(1,"th",54),e.j41(2,"th",55),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",56),e.nrm(5,"i",57),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",58),e.nrm(8,"i",57),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",59),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",60),e.nrm(13,"i",57),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",61),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",62),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",63),e.nrm(20,"i",57),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",64),e.nrm(23,"i",57),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.DNE(25,Jl,2,0,"th",65)(26,Zl,2,0,"th",66),e.nrm(27,"th",62),e.k0s()),2&a){const t=e.XpG();e.R7$(25),e.Y8G("ngIf",t.showInfo),e.R7$(),e.Y8G("ngIf",t.showInfo)}}function ed(a,s){1&a&&e.nrm(0,"span",78)}function td(a,s){if(1&a&&(e.j41(0,"a",79),e.nrm(1,"i",80),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("href",n.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function id(a,s){if(1&a&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div",81),e.EFF(4),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.driverName)}}function nd(a,s){if(1&a&&(e.j41(0,"td")(1,"div")(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()()),2&a){const t=e.XpG().$implicit;e.R7$(),e.ZvI("badge badge-success   ",t.trunckStatusName," round-shape"),e.R7$(2),e.JRh(e.bMT(4,4,"sales.salesOrder."+t.trunckStatusName))}}function ad(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",83),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(107);return e.Njj(r.openShippingModal(i.id,o,"lg"))}),e.nrm(2,"i",84),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrderStore.trunkAssign"))}function rd(a,s){if(1&a&&(e.qex(0),e.DNE(1,ad,3,3,"button",82),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",32==t.offerOrderStatus)}}function sd(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",86),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(101);return e.Njj(r.openStatusModal(i.id,o,32,"md"))}),e.nrm(2,"i",87),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrderStore.ready"))}function od(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",83),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.PrintStoreReport(i.id))}),e.nrm(2,"i",88),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.print"))}function ld(a,s){if(1&a&&(e.qex(0),e.DNE(1,sd,3,3,"button",85)(2,od,3,3,"button",82),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus),e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus)}}function dd(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",68)(1,"td"),e.nrm(2,"button",69),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",70),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",71),e.k0s()(),e.j41(14,"td",72),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(99);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(15,"a",73),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.DNE(18,ed,1,0,"span",74)(19,td,2,1,"a",75),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.DNE(27,id,5,2,"td",76)(28,nd,5,6,"td",76),e.j41(29,"td"),e.DNE(30,rd,2,1,"ng-container",77)(31,ld,3,2,"ng-container",77),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=s.expanded,r=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(n+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,19,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",r.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(24,22,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(),e.Y8G("ngIf",r.showInfo),e.R7$(),e.Y8G("ngIf",r.showInfo),e.R7$(2),e.Y8G("hasPermission",e.lJ4(25,Ql)),e.R7$(),e.Y8G("hasPermission",e.lJ4(26,Wl))}}function cd(a,s){if(1&a&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s()(),e.bVm()),2&a){const t=s.$implicit,n=s.index;e.R7$(3),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity)}}function md(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",89)(2,"div")(3,"table",90)(4,"thead")(5,"tr",91)(6,"th",92),e.EFF(7,"# "),e.k0s(),e.nrm(8,"th",93)(9,"th",94)(10,"th",95),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,cd,10,4,"ng-container",96),e.k0s()()()()()),2&a){const t=s.$implicit;e.R7$(12),e.Y8G("ngForOf",t.offerOrderDetails)}}function pd(a,s){1&a&&(e.j41(0,"div",97),e.EFF(1," general.table.noData "),e.k0s())}function ud(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",98)(1,"div",99),e.nrm(2,"ngb-pagination-info",100),e.j41(3,"table-length",101),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",102)(5,"ngb-pagination",103),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function gd(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",104),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function hd(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",105),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function _d(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",106),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function fd(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",106),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function bd(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",107),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function vd(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",108,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",109),e.j41(3,"div",110)(4,"div",111)(5,"button",112),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",113)(7,"div",114),e.nrm(8,"lord-icon",115),e.j41(9,"div",116),e.nrm(10,"h3",117)(11,"p",118),e.k0s()(),e.j41(12,"div",119),e.nrm(13,"button",120),e.j41(14,"button",121),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function xd(a,s){1&a&&(e.j41(0,"div",128),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function yd(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",108,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",109),e.j41(3,"div",110)(4,"div",111)(5,"button",112),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",113)(7,"div",122)(8,"label",123),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",124,11),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.changeQuantityMessage,i)||(r.form.changeQuantityMessage=i),e.Njj(i)}),e.k0s(),e.DNE(12,xd,2,0,"div",125),e.k0s(),e.j41(13,"div",119),e.nrm(14,"button",126),e.j41(15,"button",127),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),n=e.sdS(11),i=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.deleteLoader),e.R7$(8),e.R50("ngModel",i.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Cd(a,s){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",129),e.bIt("success",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.reload())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function Sd(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",158),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(5,"td")(6,"input",159),e.bIt("ngModelChange",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.quantitySelect(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,Tt,n))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,Tt,n)),e.R50("ngModel",t.quantity)}}function Id(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",160),e.nrm(1,"td",161),e.j41(2,"td",162)(3,"table",163)(4,"tbody")(5,"tr"),e.nrm(6,"td",164),e.j41(7,"td",165),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",166),e.j41(12,"td",165)(13,"div",167)(14,"ng-select",168),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscountType,i)||(r.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(15,"input",169),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscount,i)||(r.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"tr",170),e.nrm(17,"td",171),e.j41(18,"td",165),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",172),e.nrm(22,"th",173),e.j41(23,"th",165),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function kd(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",130)(1,"div",131)(2,"h4",132),e.nrm(3,"span",133),e.k0s(),e.j41(4,"button",134),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",113),e.nrm(6,"ngx-ui-loader",109),e.j41(7,"form",135,10),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateTruck())}),e.j41(9,"div",28)(10,"div",136)(11,"label",137),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",138),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.dateChangeModal(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.acutalVisitDate,i)||(r.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(14,"div",136),e.nrm(15,"label",139),e.j41(16,"ng-select",140),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientLocationId,i)||(r.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",141)(18,"label",137),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",142),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.shippingTruckId,i)||(r.form.shippingTruckId=i),e.Njj(i)}),e.k0s()()(),e.j41(21,"div",143)(22,"div",14)(23,"div",144)(24,"div",145),e.nrm(25,"h5",146),e.k0s()(),e.j41(26,"div",45)(27,"div",147)(28,"table",148)(29,"thead",149)(30,"tr"),e.nrm(31,"th",150)(32,"th",151)(33,"th",152),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,Sd,7,10,"tr",null,e.Vm6),e.DNE(37,Id,26,15,"tr",153),e.k0s()()()()()(),e.j41(38,"div",154)(39,"button",155),e.nrm(40,"i",156)(41,"span",157),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",n.locations),e.R50("ngModel",n.form.clientLocationId),e.R7$(4),e.Y8G("items",n.truncks),e.R50("ngModel",n.form.shippingTruckId),e.R7$(15),e.Dyx(n.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}let Td=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y,j,F){super(t,n,c,i,r,o,l),this.baseService=i,this.authDaamService=h,this.teamService=g,this.employeeService=x,this.regionService=v,this.cityService=C,this.storesService=I,this.excelService=y,this.router=j,this.orderReceivedService=F,this.title="sales.salesOrderStore.title",this.titleOperation="sales.salesOrderStore.titleOperation",this.nameSerach="salesOrderStore",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.pagination={pageNumber:1,pageSize:10,status:30},this.showInfo=!1,this.stores=[],this.statusList=[],this.setDates=(O,N,U)=>{if(O?.from||O?.to){const fe=O.to||O.from;this.pagination[N]=this.datePipe.transform(O.from||O.to,"yyyy-MM-ddT00:00:00"),this.pagination[U]=this.datePipe.transform(fe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[N]=null,this.pagination[U]=null},this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetStores(),this.GetOfferOrderCount(),this.checkStatus()}onCheckSearch(){this.showInfo=!0}checkStatus(){let t=this.orderReceivedService.getTrunckStatus();t.forEach(n=>{n.name=this.getTranslationText("sales.salesOrder."+n.name)}),this.statusList=t}GetOfferOrderCount(){this.baseService.GetOfferOrderStoreCount().subscribe(t=>{this.count=t.data})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetStores(){this.storesService.getDropDown().subscribe(t=>{this.stores=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{n?this.alertService.success():this.alertService.error("general.message."+n)},n=>{this.alertService.error()})}mapRegisterForm(t){let n={...t};return n.employeeCode=0,n}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(n=>{t.push({Code:n.id,CreatorName:n.creatorName,creationTime:n.creationTime,clientName:n.clientName,Status:this.getTranslationText("sales.salesOrder."+n.offerOrderStatusValue),salse_Person:n.salsePersonName,"Delivery.Date":n.acutalVisitDate,"T.Quantity":n.totalQuantity," T.Discount":n.totalDiscount,Tax:n.totalTax,Net:n.netPrice,Reason:n.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,n,i="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(n,{centered:!0,size:i})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.showInfo=!1,-1==t?this.pagination.status=null:0==t?(this.pagination.statusList=[30,40,32,50,60,100],this.pagination.status=null,this.showInfo=!0):(this.pagination.statusList=[],this.pagination.status=t),this.onSearch()}openStatusModal(t,n,i,r="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:i},this.modalService.open(n,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(f.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const n=new Date(t);return n.getDate().toString().padStart(2,"0")+"-"+(n.getMonth()+1).toString().padStart(2,"0")+"-"+n.getFullYear()+" "+n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0")}openShippingModal(t,n,i="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(o=>{o.success?(this.form=o.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=o.data.truncks,this.locations=o.data.locations,this.modalService.open(n,{centered:!0,size:i})):this.alertService.error("general.message."+o.message)},o=>{this.alertService.error("general.message."+o)})}getTotal(){let t=0,n=0,i=0;this.form.details.forEach(r=>{r.discount<0&&(r.discoun=0);let o=r.quantity*r.price,l=0;1===r.discountType?l=r.discount:2===r.discountType&&(l=o*r.discount/100),n=+l;let c=o-l;r.net=c,t=+c}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(n=>({id:0,itemId:n.itemId,itemName:n.itemName,quantity:n.quantity,unitId:n.unitId,price:n.price,isFree:n.isFree,originalPrice:n.originalPrice,discount:n.discount,discountType:n.discountType,clientQuantity:n.clientQuantity,approvedQuantity:n.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.reload():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[n,i,r,o,l]=t.split(/[-\s:]/);return`${r}-${i}-${n}T${o}:${l}:00`}}dateChangeModal(t){t=new Date(t);let n={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(n).subscribe(i=>{i.success?this.truncks=i.data.truncks:this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}quantitySelect(t,n){t&&(t<=0&&(t=1),this.form.details[n].quantity=parseInt(t),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity,this.discountSelect(this.form.details[n].discount,n),this.getTotal())}discountSelect(t,n,i=1){if(t){(t=parseInt(t))<=0&&(this.form.details[n].discount=0),1==i&&(this.form.details[n].discount=t);let r=0;1==this.form.details[n].discountType?r=this.form.details[n].discount:(r=this.form.details[n].price*this.form.details[n].quantity*this.form.details[n].discount/100,r=+r.toFixed(2)),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity-r,this.form.details[n].net=this.form.details[n].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}mapUrl(t,n){return null===t||null==n?"":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}loadentities(){localStorage.setItem(this.nameSerach,JSON.stringify(this.pagination)),this.baseService.GetOrderStore(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}PrintStoreReport(t){this.ngxLoader.startLoader("allLoader"),this.baseService.PrintStoreReport(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error()})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(re.A),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(He.n),e.rXU(se.O),e.rXU(Ge.S),e.rXU(xe.h),e.rXU(Qe.a),e.rXU(K.V),e.rXU(w.Ix),e.rXU(Be.B))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-order-store"]],features:[e.Vt3],decls:108,vars:74,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-3","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","bg-warning","border","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrderStore.deliveries",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.ready",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.return",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-primary","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.history",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","storeId","bindValue","id","bindLabel","nameAR",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","trunckStatus","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","15%"],["translate","",2,"width","3%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["style","width:12%","translate","",4,"ngIf"],["style","width:8%","translate","",4,"ngIf"],["translate","",2,"width","12%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[3,"translate"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"ngIf"],[4,"hasPermission"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-primary","mx-2"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],[1,"ri-printer-fill","align-bottom"],["colspan","17"],["dataKey","id"],[1,"bg-light"],[2,"width","8%"],["translate","sales.salesOrder.itemName",2,"width","20%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",12)(1,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(30))}),e.j41(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e.nrm(6,"i",18),e.k0s()(),e.j41(7,"div",19)(8,"h5",20),e.EFF(9),e.k0s(),e.nrm(10,"p",21),e.k0s()()()(),e.j41(11,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(32))}),e.j41(12,"div",14)(13,"div",15)(14,"div",16)(15,"div",22),e.nrm(16,"i",18),e.k0s()(),e.j41(17,"div",19)(18,"h5",20),e.EFF(19),e.k0s(),e.nrm(20,"p",23),e.k0s()()()(),e.j41(21,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(100))}),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"div",24),e.nrm(26,"i",18),e.k0s()(),e.j41(27,"div",19)(28,"h5",20),e.EFF(29),e.k0s(),e.nrm(30,"p",25),e.k0s()()()(),e.j41(31,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(0))}),e.j41(32,"div",14)(33,"div",15)(34,"div",16)(35,"div",26),e.nrm(36,"i",18),e.k0s()(),e.j41(37,"div",19),e.nrm(38,"p",27),e.k0s()()()()(),e.j41(39,"div",28)(40,"div",29)(41,"div",30),e.nrm(42,"ngx-ui-loader",31),e.j41(43,"base-filter",32),e.bIt("addNew",function(){return e.eBV(r),e.Njj(i.goNew())})("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())}),e.qex(44,33),e.j41(45,"div",34)(46,"div",35)(47,"input",36),e.nI1(48,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.id,l)||(i.pagination.id=l),e.Njj(l)}),e.k0s(),e.nrm(49,"i",37),e.k0s()(),e.j41(50,"div",34)(51,"input",38),e.nI1(52,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(53,"div",34)(54,"div",35)(55,"input",39),e.nI1(56,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(57,"i",37),e.k0s()(),e.j41(58,"div",34)(59,"div",35)(60,"ng-select",40),e.nI1(61,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(62,"div",34)(63,"input",38),e.nI1(64,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.dates,l)||(i.searchForm.dates=l),e.Njj(l)}),e.k0s()(),e.j41(65,"div",34)(66,"div",35)(67,"ng-select",41),e.nI1(68,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(69,"div",34)(70,"div",35)(71,"ng-select",42),e.nI1(72,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(73,"div",34)(74,"div",35)(75,"ng-select",43),e.nI1(76,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.storeId,l)||(i.pagination.storeId=l),e.Njj(l)}),e.k0s()()(),e.j41(77,"div",34)(78,"div",35)(79,"ng-select",44),e.nI1(80,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.trunckStatus,l)||(i.pagination.trunckStatus=l),e.Njj(l)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(81,"div",45)(82,"div",46)(83,"p-table",47,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(85,Kl,28,2,"ng-template",48)(86,dd,32,27,"ng-template",49)(87,md,13,1,"ng-template",50),e.k0s()(),e.DNE(88,pd,2,0,"div",51)(89,ud,6,8,"div",52),e.k0s()()()(),e.DNE(90,gd,1,0,"ng-template",null,1,e.C5r)(92,hd,1,1,"ng-template",null,2,e.C5r)(94,_d,1,3,"ng-template",null,3,e.C5r)(96,fd,1,3,"ng-template",null,4,e.C5r)(98,bd,1,1,"ng-template",null,5,e.C5r)(100,vd,15,3,"ng-template",null,6,e.C5r)(102,yd,16,6,"ng-template",null,7,e.C5r)(104,Cd,1,1,"ng-template",null,8,e.C5r)(106,kd,42,15,"ng-template",null,9,e.C5r)}2&n&&(e.R7$(2),e.AVh("bg-primary-subtle",30==i.pagination.status),e.R7$(7),e.JRh(i.count.storeDeliveryOrder),e.R7$(3),e.AVh("bg-primary-subtle",32==i.pagination.status),e.R7$(7),e.JRh(i.count.repareOrder),e.R7$(3),e.AVh("bg-primary-subtle",100==i.pagination.status),e.R7$(7),e.JRh(i.count.return),e.R7$(3),e.AVh("bg-primary-subtle",0==i.pagination.status),e.R7$(10),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(73,Hl))("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(48,55,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(52,57,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(56,59,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(61,61,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(64,63,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(68,65,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(72,67,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(76,69,"sales.salesOrder.storeName")),e.Y8G("items",i.stores)("multiple",!1),e.R50("ngModel",i.pagination.storeId),e.R7$(4),e.FS9("placeholder",e.bMT(80,71,"sales.salesOrder.trunckStatus")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.pagination.trunckStatus),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,E.FP,R.Cv,$.vr,X.m,W.p,ke.m,We,Je,m.vh,b.D9]})}}return a})(),dt=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"RepresentativeVisitPlan/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}CalculateVisits(t){return this.http.post(this.baseUrl+"CalculateVisits",t)}GetPLanStatusCount(){return this.http.get(this.baseUrl+"GetPLanStatusCount")}CopyPlan(t){return this.http.post(this.baseUrl+"CopyPlan",t)}changeStatus(t){return this.http.post(this.baseUrl+"changeStatus",t)}distributeVisit(t,n){const{dateFrom:i,dateTo:r,dateExcept:o,totalVisitDaily:l}=n,c=[];if(!i||!r||l<=0)return t;const h=new Date(i),g=new Date(r),x=(o??[]).map(j=>new Date(j).toDateString()),v=[];let C=new Date(h);for(;C<=g;)x.includes(C.toDateString())||v.push(new Date(C).toISOString().split("T")[0]),C.setDate(C.getDate()+1);if(0===v.length)return t;let I=0,y=0;for(let j=0;j<t.length;j++){y>=l&&(I++,y=0),I>=v.length&&(I=0);const F={...t[j]};F.date=new Date(v[I]),F.sort=j+1,c.push(F),y++}return c}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const jd=()=>["visitPlan.register"],wd=a=>({width:a}),Md=()=>["visitPlan.copyPlan"],Rd=()=>["visitPlan.changeStatus"],Fd=()=>["visitPlan.edit"],Od=()=>["visitPlan.delete"];function Vd(a,s){1&a&&(e.j41(0,"tr",44)(1,"th",45),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",46),e.nrm(4,"i",47),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",48),e.nrm(7,"i",47),e.EFF(8," sales.visitPlan.name "),e.k0s(),e.j41(9,"th",49),e.nrm(10,"i",47),e.EFF(11," sales.visitPlan.salesPersonName "),e.k0s(),e.j41(12,"th",50),e.nrm(13,"i",47),e.EFF(14," sales.visitPlan.dateFrom "),e.k0s(),e.j41(15,"th",51),e.nrm(16,"i",47),e.EFF(17," sales.visitPlan.dateTo "),e.k0s(),e.j41(18,"th",52),e.nrm(19,"i",47),e.EFF(20," sales.visitPlan.statusName "),e.k0s(),e.j41(21,"th",53),e.EFF(22," sales.visitPlan.visitCount "),e.k0s(),e.j41(23,"th",53),e.EFF(24," sales.visitPlan.statusPlan "),e.k0s(),e.nrm(25,"th",54),e.k0s())}function Ed(a,s){if(1&a&&(e.nrm(0,"i",69),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",70),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",71),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Dd(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(69);return e.Njj(r.openModalCopyModel(i,o))}),e.j41(1,"span",72),e.nrm(2,"i",73)(3,"span",74),e.k0s()()}}function Nd(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(71);return e.Njj(r.openChangeStatusModal(i,o))}),e.j41(1,"span",72),e.nrm(2,"i",75)(3,"span",76),e.k0s()()}}function Ld(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.goEdit(i.id))}),e.j41(1,"span",72),e.nrm(2,"i",77)(3,"span",78),e.k0s()()}}function Pd(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(67);return e.Njj(r.openModal(i.id,o))}),e.j41(1,"a",79),e.nrm(2,"i",80)(3,"span",81),e.k0s()()}}function Gd(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",55)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",56),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(i.id))}),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"td"),e.nrm(16,"span",57),e.k0s(),e.j41(17,"td")(18,"span",58),e.EFF(19),e.k0s()(),e.j41(20,"td")(21,"div",59)(22,"div",60)(23,"div",61),e.EFF(24),e.k0s()()()(),e.j41(25,"td"),e.DNE(26,Ed,10,9,"ng-template",null,4,e.C5r),e.j41(28,"span",62)(29,"div",63),e.nrm(30,"i",64),e.j41(31,"button",65),e.nrm(32,"i",66),e.k0s(),e.j41(33,"ul",67),e.DNE(34,Dd,4,0,"li",68)(35,Nd,4,0,"li",68)(36,Ld,4,0,"li",68)(37,Pd,4,0,"li",68),e.k0s()()()()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(27),r=e.XpG();e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.salesPersonName),e.R7$(2),e.JRh(e.i5U(11,31,t.dateFrom,"yyyy-MM-dd")),e.R7$(3),e.JRh(e.i5U(14,34,t.dateTo,"yyyy-MM-dd")),e.R7$(3),e.ZvI("badge ",r.getStatus(t.status),""),e.Mz_("translate","sales.visitPlan.",t.statusName,""),e.R7$(3),e.JRh(t.visitsCount),e.R7$(3),e.AVh("bg-warning",0==t.visitsCompleteCount)("bg-info",t.visitsCompleteCount<t.visitsCount)("bg-success",t.visitsCompleteCount==t.visitsCount),e.Y8G("ngStyle",e.eq3(37,wd,r.getPrecentage(t.visitsCompleteCount,t.visitsCount)+"%")),e.R7$(),e.AVh("bg-warning",0==t.visitsCompleteCount)("bg-info",t.visitsCompleteCount<t.visitsCount)("bg-success",t.visitsCompleteCount==t.visitsCount),e.R7$(),e.SpI(" ",r.getPrecentage(t.visitsCompleteCount,t.visitsCount),"% "),e.R7$(6),e.Y8G("ngbTooltip",i),e.R7$(4),e.Y8G("hasPermission",e.lJ4(39,Md)),e.R7$(),e.Y8G("hasPermission",e.lJ4(40,Rd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(41,Fd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(42,Od))}}function $d(a,s){1&a&&(e.j41(0,"div",82),e.EFF(1," general.table.noData"),e.k0s())}function Bd(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",83)(1,"div",84),e.nrm(2,"ngb-pagination-info",85),e.j41(3,"table-length",86),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",87)(5,"ngb-pagination",88),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ad(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",89),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function Xd(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",90)(1,"div",91)(2,"h4",92),e.nrm(3,"span",74),e.k0s(),e.j41(4,"button",93),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",94),e.nrm(6,"ngx-ui-loader",95),e.j41(7,"form",96,5),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmitCopyPlan())}),e.j41(9,"div",97)(10,"label",98),e.EFF(11,"sales.visitPlan.name"),e.k0s(),e.j41(12,"input",99,6),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.name,i)||(r.form.name=i),e.Njj(i)}),e.k0s()(),e.j41(14,"div",97)(15,"label",98),e.EFF(16,"sales.visitPlan.dateFrom"),e.k0s(),e.j41(17,"div",100)(18,"input",101,7),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.dateFrom,i)||(r.form.dateFrom=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.controlDateFormat("dateFrom"))}),e.k0s()()(),e.j41(20,"div",97)(21,"label",98),e.EFF(22,"sales.visitPlan.dateTo"),e.k0s(),e.j41(23,"div",100)(24,"input",102,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.dateTo,i)||(r.form.dateTo=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.controlDateFormat("dateTo"))}),e.k0s()()(),e.j41(26,"div",103)(27,"button",104),e.nrm(28,"i",105)(29,"span",106),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(6),e.R50("ngModel",n.form.name),e.R7$(6),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.form.dateFrom),e.R7$(6),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.form.dateTo),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Yd(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",90)(1,"div",91)(2,"h4",92),e.nrm(3,"span",107),e.k0s(),e.j41(4,"button",93),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(5,"div",94),e.nrm(6,"ngx-ui-loader",95),e.j41(7,"form",108,5),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeStatus())}),e.j41(9,"div",25)(10,"div",109),e.nrm(11,"label",110),e.j41(12,"ng-select",111),e.nI1(13,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.status,i)||(r.form.status=i),e.Njj(i)}),e.k0s()()(),e.j41(14,"div",103)(15,"button",112),e.nrm(16,"i",105)(17,"span",106),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(6),e.FS9("placeholder",e.bMT(13,8,"sales.visitPlan.statusName")),e.Y8G("items",n.statusList)("multiple",!1),e.R50("ngModel",n.form.status),e.R7$(3),e.Y8G("disabled",!t.valid)}}let zd=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I){super(t,n,c,i,r,o,l),this.baseService=i,this.excelService=g,this.clientGroupsService=x,this.offerOrderService=v,this.router=C,this.employeeService=I,this.title="sales.visitPlan.title",this.titleOperation="sales.visitPlan.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:""},this.clients=[],this.loading=!1,this.salesPersons=[],this.count={},this.statusList=[{id:10,name:"Draft"},{id:20,name:"Approved"},{id:30,name:"Cancelled"}],this.nameSerach="visitPlan",this.setDates=(y,j,F)=>{if(y?.from||y?.to){const N=y.to||y.from;this.pagination[j]=this.datePipe.transform(y.from||y.to,"yyyy-MM-ddT00:00:00"),this.pagination[F]=this.datePipe.transform(N,"yyyy-MM-ddT23:59:59.999")}else this.pagination[j]=null,this.pagination[F]=null},this.configRoute(),this.GetSalesPersons(),this.GetPLanStatusCount(),this.configStatus()}configStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("sales.visitPlan."+t.name)})}GetSalesPersons(){this.employeeService.GetAllByType(9).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetPLanStatusCount(){this.baseService.GetPLanStatusCount().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.count=t.data},t=>{console.log(t)})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({Name:n.name,Sales_Man:n.salesPersonName,Datefrom:this.datePipe.transform(n.dateFrom,"yyyy-MM-ddd"),Dateto:this.datePipe.transform(n.dateTo,"yyyy-MM-ddd"),notes:n.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}goEdit(t){this.router.navigateByUrl("/sales/visit-plan-edit/"+t,{state:{id:t}})}goRegister(){this.router.navigateByUrl("/sales/visit-plans/register")}DeleteConfirmSoft(){this.ngxLoader.startLoader(f.Fq),this.baseService.delete(this.selectedRow[0].id).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe(t=>{t.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+t)},()=>{this.alertService.error()})}getPrecentage(t,n){return 0==t||0==n?0:Math.floor(t/n*100)}getStatus(t){return 10==t?"bg-warning":20==t?"bg-success":"bg-danger"}onSelectStatus(t){this.pagination.status=-1==t?null:t,this.onSearch()}controlDateFormat(t){"dateFrom"===t?this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT00:00:00"):"dateTo"===t&&(this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT23:59:59.999"))}OnSubmitCopyPlan(){this.ngxLoader.startLoader(f.ZW);let t={...this.form};t.dateFrom=this.datePipe.transform(this.form.dateFrom,"yyyy-MM-ddT00:00:00.000"),t.dateTo=this.datePipe.transform(this.form.dateTo,"yyyy-MM-ddT00:00:00.000"),this.baseService.CopyPlan(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW))).subscribe(n=>{n.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error(n.message)},()=>{this.alertService.error()})}openModalCopyModel(t,n,i="md"){this.isEditForm=!1,this.form={},this.form.name=t.name,this.form.dateFrom=t.dateFrom,this.form.dateTo=t.dateTo,this.form.id=t.id,this.modalService.open(n,{centered:!0,size:i})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.changeStatus({status:this.form.status,id:this.form.id}).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{this.loadentities(),this.GetPLanStatusCount(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}openChangeStatusModal(t,n,i="md"){this.form={},this.form.status=t.status,this.form.id=t.id,this.modalService.open(n,{centered:!0,size:i})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(dt),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(qe.t),e.rXU(re.A),e.rXU(w.Ix),e.rXU(se.O))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-visit-plan"]],features:[e.Vt3],decls:72,vars:38,consts:[["tableMaster",""],["deleteModal",""],["CopyPlan",""],["changeStatusModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["dateFrom","ngModel"],["dateTo","ngModel"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-3","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","bg-primary","border","border-opacity-25","rounded-2","fs-17"],[1,"ri-map-pin-5-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.visitPlan.allPlan",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-warning","border-opacity-25","rounded-2","fs-17"],["translate","sales.visitPlan.Draft",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.visitPlan.Approved",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.visitPlan.Cancelled",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-4 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","code","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","name","translate","",2,"width","15%"],["pSortableColumn","salesPersonId","translate","",2,"width","10%"],["pSortableColumn","dateFrom","translate","",2,"width","10%"],["pSortableColumn","dateTo","translate","",2,"width","10%"],["pSortableColumn","statusName","translate","",2,"width","6%"],["translate","",2,"width","5%"],["translate","",2,"width","4%"],[1,"fs-5"],[3,"click"],[3,"translate"],[1,"badge","bg-success","mx-1"],[1,"progress","animated-progess","custom-progress","progress-label"],["role","progressbar","aria-valuenow","30","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"label"],[1,"d-inline"],[1,"dropdown-custom"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1","d-inline",3,"ngbTooltip"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content"],[3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"dropdown-item"],[1,"ri-file-copy-2-fill","align-bottom","me-2","text-muted"],["translate","sales.visitPlan.copyPlan"],[1,"ri-exchange-box-fill","align-bottom","me-2","text-muted"],["translate","sales.visitPlan.changeStatus"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","",1,"text-center","text-danger","text-bold","fs-4","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-2"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"input-group"],["type","text","mwlFlatpickr","","name","dateFrom","id","dateFrom","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","ngModel"],["type","text","mwlFlatpickr","","name","dateTo","id","dateTo","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","sales.visitPlan.changeStatus",1,"fw-bold","fs-4"],[3,"ngSubmit"],[1,"mb-3"],["for","status","translate","sales.visitPlan.statusName",1,"fw-bold","form-label"],["name","status","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","submit",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",9)(1,"div",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(-1))}),e.j41(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14),e.nrm(6,"i",15),e.k0s()(),e.j41(7,"div",16)(8,"h5",17),e.EFF(9),e.k0s(),e.nrm(10,"p",18),e.k0s()()()(),e.j41(11,"div",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(10))}),e.j41(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",19),e.nrm(16,"i",15),e.k0s()(),e.j41(17,"div",16)(18,"h5",17),e.EFF(19),e.k0s(),e.nrm(20,"p",20),e.k0s()()()(),e.j41(21,"div",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(20))}),e.j41(22,"div",11)(23,"div",12)(24,"div",13)(25,"div",21),e.nrm(26,"i",15),e.k0s()(),e.j41(27,"div",16)(28,"h5",17),e.EFF(29),e.k0s(),e.nrm(30,"p",22),e.k0s()()()(),e.j41(31,"div",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(40))}),e.j41(32,"div",11)(33,"div",12)(34,"div",13)(35,"div",23),e.nrm(36,"i",15),e.k0s()(),e.j41(37,"div",16)(38,"h5",17),e.EFF(39),e.k0s(),e.nrm(40,"p",24),e.k0s()()()()(),e.j41(41,"div",25)(42,"div",26)(43,"div",27)(44,"base-filter",28),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(i.goRegister())}),e.qex(45,29),e.j41(46,"div",30)(47,"div",31)(48,"input",32),e.nI1(49,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.name,l)||(i.pagination.name=l),e.Njj(l)}),e.k0s(),e.nrm(50,"i",33),e.k0s()(),e.j41(51,"div",34)(52,"div",31)(53,"ng-select",35),e.nI1(54,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(55,"div",34)(56,"input",36),e.nI1(57,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(58,"div",37)(59,"div",38)(60,"p-table",39,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(62,Vd,26,0,"ng-template",40)(63,Gd,38,43,"ng-template",41),e.k0s()(),e.DNE(64,$d,2,0,"div",42)(65,Bd,6,8,"div",43),e.k0s()()()(),e.DNE(66,Ad,1,0,"ng-template",null,1,e.C5r)(68,Xd,30,11,"ng-template",null,2,e.C5r)(70,Yd,18,10,"ng-template",null,3,e.C5r)}2&n&&(e.R7$(2),e.AVh("bg-primary-subtle",null==i.pagination.status),e.R7$(7),e.JRh(i.count.all),e.R7$(3),e.AVh("bg-primary-subtle",10==i.pagination.status),e.R7$(7),e.JRh(i.count.draft),e.R7$(3),e.AVh("bg-primary-subtle",20==i.pagination.status),e.R7$(7),e.JRh(i.count.approved),e.R7$(3),e.AVh("bg-primary-subtle",40==i.pagination.status),e.R7$(7),e.JRh(i.count.cancelled),e.R7$(5),e.Y8G("addPermission",e.lJ4(37,jd))("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(49,31,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(5),e.FS9("placeholder",e.bMT(54,33,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(57,35,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,m.B3,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,_.md,X.m,W.p,m.vh,b.D9]})}}return a})();var Ae=u(81391),oe=u(36860),Ce=u(32365),V=u(14085),P=u(86600);const qd=["mat-icon-button",""],Hd=["*"],Qd=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Wd=(0,P.Zc)((0,P.Ob)((0,P.GG)(class{constructor(a){this._elementRef=a}})));let Jd=(()=>{class a extends Wd{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,V.he)(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,V.he)(t),this._updateRippleDisabled()}constructor(t,n,i,r){super(t),this._platform=n,this._ngZone=i,this._animationMode=r,this._focusMonitor=(0,e.WQX)(Ce.FN),this._rippleLoader=(0,e.WQX)(P.Ej),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const o=t.nativeElement.classList;for(const l of Qd)this._hasHostAttributes(l.selector)&&l.mdcClasses.forEach(c=>{o.add(c)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",n){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...t){return t.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){e.QTQ()}}static{this.\u0275dir=e.FsC({type:a,features:[e.Vt3]})}}return a})(),ec=(()=>{class a extends Jd{constructor(t,n,i,r){super(t,n,i,r),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(oe.OD),e.rXU(e.SKi),e.rXU(e.bc$,8))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(n,i){2&n&&(e.BMQ("disabled",i.disabled||null),e.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[e.Vt3],attrs:qd,ngContentSelectors:Hd,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){1&n&&(e.NAR(),e.nrm(0,"span",0),e.SdG(1),e.nrm(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return a})(),tc=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[P.yE,P.pZ,P.yE]})}}return a})();var Se=u(65478),Ze=u(5964),ic=u(39974),nc=u(54360),Te=u(28203);class ct{attach(s){return this._attachedHost=s,s.attach(this)}detach(){let s=this._attachedHost;null!=s&&(this._attachedHost=null,s.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(s){this._attachedHost=s}}class jt extends ct{constructor(s,t,n,i,r){super(),this.component=s,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i,this.projectableNodes=r}}class wt extends ct{constructor(s,t,n,i){super(),this.templateRef=s,this.viewContainerRef=t,this.context=n,this.injector=i}get origin(){return this.templateRef.elementRef}attach(s,t=this.context){return this.context=t,super.attach(s)}detach(){return this.context=void 0,super.detach()}}class rc extends ct{constructor(s){super(),this.element=s instanceof e.aKT?s.nativeElement:s}}class sc{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(s){return s instanceof jt?(this._attachedPortal=s,this.attachComponentPortal(s)):s instanceof wt?(this._attachedPortal=s,this.attachTemplatePortal(s)):this.attachDomPortal&&s instanceof rc?(this._attachedPortal=s,this.attachDomPortal(s)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(s){this._disposeFn=s}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class oc extends sc{constructor(s,t,n,i,r){super(),this.outletElement=s,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=o=>{const l=o.element,c=this._document.createComment("dom-portal");l.parentNode.insertBefore(c,l),this.outletElement.appendChild(l),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(l,c)})},this._document=r}attachComponentPortal(s){const n=(s.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(s.component);let i;return s.viewContainerRef?(i=s.viewContainerRef.createComponent(n,s.viewContainerRef.length,s.injector||s.viewContainerRef.injector,s.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=n.create(s.injector||this._defaultInjector||e.zZn.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=s,i}attachTemplatePortal(s){let t=s.viewContainerRef,n=t.createEmbeddedView(s.templateRef,s.context,{injector:s.injector});return n.rootNodes.forEach(i=>this.outletElement.appendChild(i)),n.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(n);-1!==i&&t.remove(i)}),this._attachedPortal=s,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(s){return s.hostView.rootNodes[0]}}let lc=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({})}}return a})();var Me=u(18359),Xe=u(57786),ne=u(67336);const Mt=(0,oe.CZ)();class dc{constructor(s,t){this._viewportRuler=s,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const s=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=s.style.left||"",this._previousHTMLStyles.top=s.style.top||"",s.style.left=(0,V.a1)(-this._previousScrollPosition.left),s.style.top=(0,V.a1)(-this._previousScrollPosition.top),s.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const s=this._document.documentElement,n=s.style,i=this._document.body.style,r=n.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,s.classList.remove("cdk-global-scrollblock"),Mt&&(n.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Mt&&(n.scrollBehavior=r,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class cc{constructor(s,t,n,i){this._scrollDispatcher=s,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(s){this._overlayRef=s}enable(){if(this._scrollSubscription)return;const s=this._scrollDispatcher.scrolled(0).pipe((0,Ze.p)(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=s.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=s.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Rt{enable(){}disable(){}attach(){}}function mt(a,s){return s.some(t=>a.bottom<t.top||a.top>t.bottom||a.right<t.left||a.left>t.right)}function Ft(a,s){return s.some(t=>a.top<t.top||a.bottom>t.bottom||a.left<t.left||a.right>t.right)}class mc{constructor(s,t,n,i){this._scrollDispatcher=s,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(s){this._overlayRef=s}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:i}=this._viewportRuler.getViewportSize();mt(t,[{width:n,height:i,bottom:i,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let pc=(()=>{class a{constructor(t,n,i,r){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this.noop=()=>new Rt,this.close=o=>new cc(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new dc(this._viewportRuler,this._document),this.reposition=o=>new mc(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(Se.R),e.KVO(Se.Xj),e.KVO(e.SKi),e.KVO(m.qQ))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();class Ot{constructor(s){if(this.scrollStrategy=new Rt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,s){const t=Object.keys(s);for(const n of t)void 0!==s[n]&&(this[n]=s[n])}}}class uc{constructor(s,t){this.connectionPair=s,this.scrollableViewProperties=t}}let Vt=(()=>{class a{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(m.qQ))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),gc=(()=>{class a extends Vt{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=i=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const l=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(i)):l.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(m.qQ),e.KVO(e.SKi,8))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),hc=(()=>{class a extends Vt{constructor(t,n,i){super(t),this._platform=n,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=(0,oe.Fb)(r)},this._clickListener=r=>{const o=(0,oe.Fb)(r),l="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let h=c.length-1;h>-1;h--){const g=c[h];if(g._outsidePointerEvents.observers.length<1||!g.hasAttached())continue;if(Et(g.overlayElement,o)||Et(g.overlayElement,l))break;const x=g._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(r)):x.next(r)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(m.qQ),e.KVO(oe.OD),e.KVO(e.SKi,8))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function Et(a,s){const t=typeof ShadowRoot<"u"&&ShadowRoot;let n=s;for(;n;){if(n===a)return!0;n=t&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}let Dt=(()=>{class a{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||(0,oe.v8)()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<i.length;r++)i[r].remove()}const n=this._document.createElement("div");n.classList.add(t),(0,oe.v8)()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(m.qQ),e.KVO(oe.OD))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();class _c{constructor(s,t,n,i,r,o,l,c,h,g=!1,x){this._portalOutlet=s,this._host=t,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=o,this._document=l,this._location=c,this._outsideClickDispatcher=h,this._animationsDisabled=g,this._injector=x,this._backdropElement=null,this._backdropClick=new L.B,this._attachments=new L.B,this._detachments=new L.B,this._locationChanges=Me.yU.EMPTY,this._backdropClickHandler=v=>this._backdropClick.next(v),this._backdropTransitionendHandler=v=>{this._disposeBackdrop(v.target)},this._keydownEvents=new L.B,this._outsidePointerEvents=new L.B,this._renders=new L.B,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=(0,e.O8t)(()=>(0,e.Tzd)(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(s){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(s);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=(0,e.mal)(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const s=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),s}dispose(){const s=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,s&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(s){s!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=s,this.hasAttached()&&(s.attach(this),this.updatePosition()))}updateSize(s){this._config={...this._config,...s},this._updateElementSize()}setDirection(s){this._config={...this._config,direction:s},this._updateElementDirection()}addPanelClass(s){this._pane&&this._toggleClasses(this._pane,s,!0)}removePanelClass(s){this._pane&&this._toggleClasses(this._pane,s,!1)}getDirection(){const s=this._config.direction;return s?"string"==typeof s?s:s.value:"ltr"}updateScrollStrategy(s){s!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=s,this.hasAttached()&&(s.attach(this),s.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const s=this._pane.style;s.width=(0,V.a1)(this._config.width),s.height=(0,V.a1)(this._config.height),s.minWidth=(0,V.a1)(this._config.minWidth),s.minHeight=(0,V.a1)(this._config.minHeight),s.maxWidth=(0,V.a1)(this._config.maxWidth),s.maxHeight=(0,V.a1)(this._config.maxHeight)}_togglePointerEvents(s){this._pane.style.pointerEvents=s?"":"none"}_attachBackdrop(){const s="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(s)})}):this._backdropElement.classList.add(s)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const s=this._backdropElement;if(s){if(this._animationsDisabled)return void this._disposeBackdrop(s);s.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{s.addEventListener("transitionend",this._backdropTransitionendHandler)}),s.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(s)},500))}}_toggleClasses(s,t,n){const i=(0,V.FG)(t||[]).filter(r=>!!r);i.length&&(n?s.classList.add(...i):s.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const s=this._renders.pipe((0,p.Q)((0,Xe.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),s.unsubscribe())})})}_disposeScrollStrategy(){const s=this._scrollStrategy;s&&(s.disable(),s.detach&&s.detach())}_disposeBackdrop(s){s&&(s.removeEventListener("click",this._backdropClickHandler),s.removeEventListener("transitionend",this._backdropTransitionendHandler),s.remove(),this._backdropElement===s&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Nt="cdk-overlay-connected-position-bounding-box",fc=/([A-Za-z%]+)$/;class bc{get positions(){return this._preferredPositions}constructor(s,t,n,i,r){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new L.B,this._resizeSubscription=Me.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(s)}attach(s){this._validatePositions(),s.hostElement.classList.add(Nt),this._overlayRef=s,this._boundingBox=s.hostElement,this._pane=s.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const s=this._originRect,t=this._overlayRect,n=this._viewportRect,i=this._containerRect,r=[];let o;for(let l of this._preferredPositions){let c=this._getOriginPoint(s,i,l),h=this._getOverlayPoint(c,t,l),g=this._getOverlayFit(h,t,n,l);if(g.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,c);this._canFitWithFlexibleDimensions(g,h,n)?r.push({position:l,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,l)}):(!o||o.overlayFit.visibleArea<g.visibleArea)&&(o={overlayFit:g,overlayPoint:h,originPoint:c,position:l,overlayRect:t})}if(r.length){let l=null,c=-1;for(const h of r){const g=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);g>c&&(c=g,l=h)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Re(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Nt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const s=this._lastPosition;if(s){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,s);this._applyPosition(s,t)}else this.apply()}withScrollableContainers(s){return this._scrollables=s,this}withPositions(s){return this._preferredPositions=s,-1===s.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(s){return this._viewportMargin=s,this}withFlexibleDimensions(s=!0){return this._hasFlexibleDimensions=s,this}withGrowAfterOpen(s=!0){return this._growAfterOpen=s,this}withPush(s=!0){return this._canPush=s,this}withLockedPosition(s=!0){return this._positionLocked=s,this}setOrigin(s){return this._origin=s,this}withDefaultOffsetX(s){return this._offsetX=s,this}withDefaultOffsetY(s){return this._offsetY=s,this}withTransformOriginOn(s){return this._transformOriginSelector=s,this}_getOriginPoint(s,t,n){let i,r;if("center"==n.originX)i=s.left+s.width/2;else{const o=this._isRtl()?s.right:s.left,l=this._isRtl()?s.left:s.right;i="start"==n.originX?o:l}return t.left<0&&(i-=t.left),r="center"==n.originY?s.top+s.height/2:"top"==n.originY?s.top:s.bottom,t.top<0&&(r-=t.top),{x:i,y:r}}_getOverlayPoint(s,t,n){let i,r;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:s.x+i,y:s.y+r}}_getOverlayFit(s,t,n,i){const r=Pt(t);let{x:o,y:l}=s,c=this._getOffset(i,"x"),h=this._getOffset(i,"y");c&&(o+=c),h&&(l+=h);let v=0-l,C=l+r.height-n.height,I=this._subtractOverflows(r.width,0-o,o+r.width-n.width),y=this._subtractOverflows(r.height,v,C),j=I*y;return{visibleArea:j,isCompletelyWithinViewport:r.width*r.height===j,fitsInViewportVertically:y===r.height,fitsInViewportHorizontally:I==r.width}}_canFitWithFlexibleDimensions(s,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,r=n.right-t.x,o=Lt(this._overlayRef.getConfig().minHeight),l=Lt(this._overlayRef.getConfig().minWidth);return(s.fitsInViewportVertically||null!=o&&o<=i)&&(s.fitsInViewportHorizontally||null!=l&&l<=r)}return!1}_pushOverlayOnScreen(s,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:s.x+this._previousPushAmount.x,y:s.y+this._previousPushAmount.y};const i=Pt(t),r=this._viewportRect,o=Math.max(s.x+i.width-r.width,0),l=Math.max(s.y+i.height-r.height,0),c=Math.max(r.top-n.top-s.y,0),h=Math.max(r.left-n.left-s.x,0);let g=0,x=0;return g=i.width<=r.width?h||-o:s.x<this._viewportMargin?r.left-n.left-s.x:0,x=i.height<=r.height?c||-l:s.y<this._viewportMargin?r.top-n.top-s.y:0,this._previousPushAmount={x:g,y:x},{x:s.x+g,y:s.y+x}}_applyPosition(s,t){if(this._setTransformOrigin(s),this._setOverlayElementStyles(t,s),this._setBoundingBoxStyles(t,s),s.panelClass&&this._addPanelClasses(s.panelClass),this._positionChanges.observers.length){const n=this._getScrollVisibility();if(s!==this._lastPosition||!this._lastScrollVisibility||!function vc(a,s){return a===s||a.isOriginClipped===s.isOriginClipped&&a.isOriginOutsideView===s.isOriginOutsideView&&a.isOverlayClipped===s.isOverlayClipped&&a.isOverlayOutsideView===s.isOverlayOutsideView}(this._lastScrollVisibility,n)){const i=new uc(s,n);this._positionChanges.next(i)}this._lastScrollVisibility=n}this._lastPosition=s,this._isInitialRender=!1}_setTransformOrigin(s){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=s.overlayY;n="center"===s.overlayX?"center":this._isRtl()?"start"===s.overlayX?"right":"left":"start"===s.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(s,t){const n=this._viewportRect,i=this._isRtl();let r,o,l,g,x,v;if("top"===t.overlayY)o=s.y,r=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)l=n.height-s.y+2*this._viewportMargin,r=n.height-l+this._viewportMargin;else{const C=Math.min(n.bottom-s.y+n.top,s.y),I=this._lastBoundingBoxSize.height;r=2*C,o=s.y-C,r>I&&!this._isInitialRender&&!this._growAfterOpen&&(o=s.y-I/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)v=n.width-s.x+2*this._viewportMargin,g=s.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=s.x,g=n.right-s.x;else{const C=Math.min(n.right-s.x+n.left,s.x),I=this._lastBoundingBoxSize.width;g=2*C,x=s.x-C,g>I&&!this._isInitialRender&&!this._growAfterOpen&&(x=s.x-I/2)}return{top:o,left:x,bottom:l,right:v,width:g,height:r}}_setBoundingBoxStyles(s,t){const n=this._calculateBoundingBoxRect(s,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=(0,V.a1)(n.height),i.top=(0,V.a1)(n.top),i.bottom=(0,V.a1)(n.bottom),i.width=(0,V.a1)(n.width),i.left=(0,V.a1)(n.left),i.right=(0,V.a1)(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(i.maxHeight=(0,V.a1)(r)),o&&(i.maxWidth=(0,V.a1)(o))}this._lastBoundingBoxSize=n,Re(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Re(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Re(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(s,t){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const g=this._viewportRuler.getViewportScrollPosition();Re(n,this._getExactOverlayY(t,s,g)),Re(n,this._getExactOverlayX(t,s,g))}else n.position="static";let l="",c=this._getOffset(t,"x"),h=this._getOffset(t,"y");c&&(l+=`translateX(${c}px) `),h&&(l+=`translateY(${h}px)`),n.transform=l.trim(),o.maxHeight&&(i?n.maxHeight=(0,V.a1)(o.maxHeight):r&&(n.maxHeight="")),o.maxWidth&&(i?n.maxWidth=(0,V.a1)(o.maxWidth):r&&(n.maxWidth="")),Re(this._pane.style,n)}_getExactOverlayY(s,t,n){let i={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,s);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"bottom"===s.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=(0,V.a1)(r.y),i}_getExactOverlayX(s,t,n){let o,i={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,s);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),o=this._isRtl()?"end"===s.overlayX?"left":"right":"end"===s.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":i.left=(0,V.a1)(r.x),i}_getScrollVisibility(){const s=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ft(s,n),isOriginOutsideView:mt(s,n),isOverlayClipped:Ft(t,n),isOverlayOutsideView:mt(t,n)}}_subtractOverflows(s,...t){return t.reduce((n,i)=>n-Math.max(i,0),s)}_getNarrowedViewportRect(){const s=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+s-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:s-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(s,t){return"x"===t?null==s.offsetX?this._offsetX:s.offsetX:null==s.offsetY?this._offsetY:s.offsetY}_validatePositions(){}_addPanelClasses(s){this._pane&&(0,V.FG)(s).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(s=>{this._pane.classList.remove(s)}),this._appliedPanelClasses=[])}_getOriginRect(){const s=this._origin;if(s instanceof e.aKT)return s.nativeElement.getBoundingClientRect();if(s instanceof Element)return s.getBoundingClientRect();const t=s.width||0,n=s.height||0;return{top:s.y,bottom:s.y+n,left:s.x,right:s.x+t,height:n,width:t}}}function Re(a,s){for(let t in s)s.hasOwnProperty(t)&&(a[t]=s[t]);return a}function Lt(a){if("number"!=typeof a&&null!=a){const[s,t]=a.split(fc);return t&&"px"!==t?null:parseFloat(s)}return a||null}function Pt(a){return{top:Math.floor(a.top),right:Math.floor(a.right),bottom:Math.floor(a.bottom),left:Math.floor(a.left),width:Math.floor(a.width),height:Math.floor(a.height)}}const Gt="cdk-global-overlay-wrapper";class xc{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(s){const t=s.getConfig();this._overlayRef=s,this._width&&!t.width&&s.updateSize({width:this._width}),this._height&&!t.height&&s.updateSize({height:this._height}),s.hostElement.classList.add(Gt),this._isDisposed=!1}top(s=""){return this._bottomOffset="",this._topOffset=s,this._alignItems="flex-start",this}left(s=""){return this._xOffset=s,this._xPosition="left",this}bottom(s=""){return this._topOffset="",this._bottomOffset=s,this._alignItems="flex-end",this}right(s=""){return this._xOffset=s,this._xPosition="right",this}start(s=""){return this._xOffset=s,this._xPosition="start",this}end(s=""){return this._xOffset=s,this._xPosition="end",this}width(s=""){return this._overlayRef?this._overlayRef.updateSize({width:s}):this._width=s,this}height(s=""){return this._overlayRef?this._overlayRef.updateSize({height:s}):this._height=s,this}centerHorizontally(s=""){return this.left(s),this._xPosition="center",this}centerVertically(s=""){return this.top(s),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const s=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:o,maxHeight:l}=n,c=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),h=!("100%"!==r&&"100vh"!==r||l&&"100%"!==l&&"100vh"!==l),g=this._xPosition,x=this._xOffset,v="rtl"===this._overlayRef.getConfig().direction;let C="",I="",y="";c?y="flex-start":"center"===g?(y="center",v?I=x:C=x):v?"left"===g||"end"===g?(y="flex-end",C=x):("right"===g||"start"===g)&&(y="flex-start",I=x):"left"===g||"start"===g?(y="flex-start",C=x):("right"===g||"end"===g)&&(y="flex-end",I=x),s.position=this._cssPosition,s.marginLeft=c?"0":C,s.marginTop=h?"0":this._topOffset,s.marginBottom=this._bottomOffset,s.marginRight=c?"0":I,t.justifyContent=y,t.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const s=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(Gt),n.justifyContent=n.alignItems=s.marginTop=s.marginBottom=s.marginLeft=s.marginRight=s.position="",this._overlayRef=null,this._isDisposed=!0}}let yc=(()=>{class a{constructor(t,n,i,r){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r}global(){return new xc}flexibleConnectedTo(t){return new bc(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(Se.Xj),e.KVO(m.qQ),e.KVO(oe.OD),e.KVO(Dt))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Cc=0,Fe=(()=>{class a{constructor(t,n,i,r,o,l,c,h,g,x,v,C){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=i,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=l,this._ngZone=c,this._document=h,this._directionality=g,this._location=x,this._outsideClickDispatcher=v,this._animationsModuleType=C}create(t){const n=this._createHostElement(),i=this._createPaneElement(n),r=this._createPortalOutlet(i),o=new Ot(t);return o.direction=o.direction||this._directionality.value,new _c(r,n,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(e.uvJ))}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Cc++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(e.o8S)),new oc(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(pc),e.KVO(Dt),e.KVO(e.OM3),e.KVO(yc),e.KVO(gc),e.KVO(e.zZn),e.KVO(e.SKi),e.KVO(m.qQ),e.KVO(Te.dS),e.KVO(m.aZ),e.KVO(hc),e.KVO(e.bc$,8))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Sc=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],$t=new e.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const a=(0,e.WQX)(Fe);return()=>a.scrollStrategies.reposition()}});let Ke=(()=>{class a{constructor(t){this.elementRef=t}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT))}}static{this.\u0275dir=e.FsC({type:a,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return a})(),Bt=(()=>{class a{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(t){this._disposeOnNavigation=t}constructor(t,n,i,r,o){this._overlay=t,this._dir=o,this._backdropSubscription=Me.yU.EMPTY,this._attachSubscription=Me.yU.EMPTY,this._detachSubscription=Me.yU.EMPTY,this._positionSubscription=Me.yU.EMPTY,this._disposeOnNavigation=!1,this._ngZone=(0,e.WQX)(e.SKi),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new e.bkB,this.positionChange=new e.bkB,this.attach=new e.bkB,this.detach=new e.bkB,this.overlayKeydown=new e.bkB,this.overlayOutsideClick=new e.bkB,this._templatePortal=new wt(n,i),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Sc);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===ne._f&&!this.disableClose&&!(0,ne.rp)(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{const i=this._getOriginElement(),r=(0,oe.Fb)(n);(!i||i!==r&&!i.contains(r))&&this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Ot({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(t),t}_getOrigin(){return this.origin instanceof Ke?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Ke?this.origin.elementRef.nativeElement:this.origin instanceof e.aKT?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function ac(a,s=!1){return(0,ic.N)((t,n)=>{let i=0;t.subscribe((0,nc._)(n,r=>{const o=a(r,i++);(o||s)&&n.next(r),!o&&n.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this._ngZone.run(()=>this.positionChange.emit(t)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Fe),e.rXU(e.C4Q),e.rXU(e.c1b),e.rXU($t),e.rXU(Te.dS,8))}}static{this.\u0275dir=e.FsC({type:a,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",e.L39],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",e.L39],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",e.L39],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",e.L39],push:[2,"cdkConnectedOverlayPush","push",e.L39],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",e.L39]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[e.GFd,e.OA$]})}}return a})();const kc={provide:$t,deps:[Fe],useFactory:function Ic(a){return()=>a.scrollStrategies.reposition()}};let At=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[Fe,kc],imports:[Te.jI,lc,Se.E9,Se.E9]})}}return a})();var Tc=u(71985),jc=u(44668);class wc{constructor(s){this._box=s,this._destroyed=new L.B,this._resizeSubject=new L.B,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(s){return this._elementObservables.has(s)||this._elementObservables.set(s,new Tc.c(t=>{const n=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(s,{box:this._box}),()=>{this._resizeObserver?.unobserve(s),n.unsubscribe(),this._elementObservables.delete(s)}}).pipe((0,Ze.p)(t=>t.some(n=>n.target===s)),(0,jc.t)({bufferSize:1,refCount:!0}),(0,p.Q)(this._destroyed))),this._elementObservables.get(s)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Mc=(()=>{class a{constructor(){this._observers=new Map,this._ngZone=(0,e.WQX)(e.SKi)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,n){const i=n?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new wc(i)),this._observers.get(i).observe(t)}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var G=u(49969),Rc=u(72318);const Fc=["notch"],Oc=["matFormFieldNotchedOutline",""],Vc=["*"],Ec=["textField"],Dc=["iconPrefixContainer"],Nc=["textPrefixContainer"],Lc=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Pc=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Gc(a,s){1&a&&e.nrm(0,"span",21)}function $c(a,s){if(1&a&&(e.j41(0,"label",19),e.SdG(1,1),e.DNE(2,Gc,1,0,"span",20),e.k0s()),2&a){const t=e.XpG(2);e.Y8G("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),e.BMQ("for",t._control.id),e.R7$(2),e.Y8G("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Bc(a,s){if(1&a&&e.DNE(0,$c,3,5,"label",18),2&a){const t=e.XpG();e.Y8G("ngIf",t._hasFloatingLabel())}}function Ac(a,s){1&a&&e.nrm(0,"div",22)}function Xc(a,s){}function Yc(a,s){if(1&a&&e.DNE(0,Xc,0,0,"ng-template",24),2&a){e.XpG(2);const t=e.sdS(1);e.Y8G("ngTemplateOutlet",t)}}function zc(a,s){if(1&a&&(e.j41(0,"div",23),e.DNE(1,Yc,1,1,"ng-template",11),e.k0s()),2&a){const t=e.XpG();e.Y8G("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),e.R7$(),e.Y8G("ngIf",!t._forceDisplayInfixLabel())}}function Uc(a,s){1&a&&(e.j41(0,"div",25,2),e.SdG(2,2),e.k0s())}function qc(a,s){1&a&&(e.j41(0,"div",26,3),e.SdG(2,3),e.k0s())}function Hc(a,s){}function Qc(a,s){if(1&a&&e.DNE(0,Hc,0,0,"ng-template",24),2&a){e.XpG();const t=e.sdS(1);e.Y8G("ngTemplateOutlet",t)}}function Wc(a,s){1&a&&(e.j41(0,"div",27),e.SdG(1,4),e.k0s())}function Jc(a,s){1&a&&(e.j41(0,"div",28),e.SdG(1,5),e.k0s())}function Zc(a,s){1&a&&e.nrm(0,"div",29)}function Kc(a,s){if(1&a&&(e.j41(0,"div",30),e.SdG(1,6),e.k0s()),2&a){const t=e.XpG();e.Y8G("@transitionMessages",t._subscriptAnimationState)}}function em(a,s){if(1&a&&(e.j41(0,"mat-hint",34),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.Y8G("id",t._hintLabelId),e.R7$(),e.JRh(t.hintLabel)}}function tm(a,s){if(1&a&&(e.j41(0,"div",31),e.DNE(1,em,2,2,"mat-hint",32),e.SdG(2,7),e.nrm(3,"div",33),e.SdG(4,8),e.k0s()),2&a){const t=e.XpG();e.Y8G("@transitionMessages",t._subscriptAnimationState),e.R7$(),e.Y8G("ngIf",t.hintLabel)}}let Xt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275dir=e.FsC({type:a,selectors:[["mat-label"]]})}}return a})();const im=new e.nKC("MatError");let nm=0,Yt=(()=>{class a{constructor(){this.align="start",this.id="mat-mdc-hint-"+nm++}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275dir=e.FsC({type:a,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,i){2&n&&(e.Mr5("id",i.id),e.BMQ("align",null),e.AVh("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}})}}return a})();const am=new e.nKC("MatPrefix"),rm=new e.nKC("MatSuffix"),zt=new e.nKC("FloatingLabelParent");let Ut=(()=>{class a{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,e.WQX)(Mc),this._ngZone=(0,e.WQX)(e.SKi),this._parent=(0,e.WQX)(zt),this._resizeSubscription=new Me.yU}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function sm(a){if(null!==a.offsetParent)return a.scrollWidth;const t=a.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const n=t.scrollWidth;return t.remove(),n}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT))}}static{this.\u0275dir=e.FsC({type:a,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,i){2&n&&e.AVh("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}}return a})();const qt="mdc-line-ripple--active",et="mdc-line-ripple--deactivating";let Ht=(()=>{class a{constructor(t,n){this._elementRef=t,this._handleTransitionEnd=i=>{const r=this._elementRef.nativeElement.classList,o=r.contains(et);"opacity"===i.propertyName&&o&&r.remove(qt,et)},n.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(et),t.add(qt)}deactivate(){this._elementRef.nativeElement.classList.add(et)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.SKi))}}static{this.\u0275dir=e.FsC({type:a,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}}return a})(),Qt=(()=>{class a{constructor(t,n){this._elementRef=t,this._ngZone=n,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.SKi))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,i){if(1&n&&e.GBs(Fc,5),2&n){let r;e.mGM(r=e.lsd())&&(i._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,i){2&n&&e.AVh("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Oc,ngContentSelectors:Vc,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(n,i){1&n&&(e.NAR(),e.nrm(0,"div",1),e.j41(1,"div",2,0),e.SdG(3),e.k0s(),e.nrm(4,"div",3))},encapsulation:2,changeDetection:0})}}return a})();const om={transitionMessages:(0,G.hZ)("transitionMessages",[(0,G.wk)("enter",(0,G.iF)({opacity:1,transform:"translateY(0%)"})),(0,G.kY)("void => enter",[(0,G.iF)({opacity:0,transform:"translateY(-5px)"}),(0,G.i0)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Wt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275dir=e.FsC({type:a})}}return a})();const Jt=new e.nKC("MatFormField"),lm=new e.nKC("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Zt=0,mm=(()=>{class a{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=(0,V.he)(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const n=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,n,i,r,o,l,c,h){this._elementRef=t,this._changeDetectorRef=n,this._ngZone=i,this._dir=r,this._platform=o,this._defaults=l,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Zt++,this._hintLabelId="mat-mdc-hint-"+Zt++,this._subscriptAnimationState="",this._destroyed=new L.B,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,l&&(l.appearance&&(this.appearance=l.appearance),this._hideRequiredMarker=!!l?.hideRequiredMarker,l.color&&(this.color=l.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe((0,p.Q)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Xe.h)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,p.Q)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,p.Q)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(r=>"start"===r.align):null,i=this._hintChildren?this._hintChildren.find(r=>"end"===r.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const n=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,r=n?.getBoundingClientRect().width??0,o=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${r+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(Te.dS),e.rXU(oe.OD),e.rXU(lm,8),e.rXU(e.bc$,8),e.rXU(m.qQ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["mat-form-field"]],contentQueries:function(n,i,r){if(1&n&&(e.wni(r,Xt,5),e.wni(r,Xt,7),e.wni(r,Wt,5),e.wni(r,am,5),e.wni(r,rm,5),e.wni(r,im,5),e.wni(r,Yt,5)),2&n){let o;e.mGM(o=e.lsd())&&(i._labelChildNonStatic=o.first),e.mGM(o=e.lsd())&&(i._labelChildStatic=o.first),e.mGM(o=e.lsd())&&(i._formFieldControl=o.first),e.mGM(o=e.lsd())&&(i._prefixChildren=o),e.mGM(o=e.lsd())&&(i._suffixChildren=o),e.mGM(o=e.lsd())&&(i._errorChildren=o),e.mGM(o=e.lsd())&&(i._hintChildren=o)}},viewQuery:function(n,i){if(1&n&&(e.GBs(Ec,5),e.GBs(Dc,5),e.GBs(Nc,5),e.GBs(Ut,5),e.GBs(Qt,5),e.GBs(Ht,5)),2&n){let r;e.mGM(r=e.lsd())&&(i._textField=r.first),e.mGM(r=e.lsd())&&(i._iconPrefixContainer=r.first),e.mGM(r=e.lsd())&&(i._textPrefixContainer=r.first),e.mGM(r=e.lsd())&&(i._floatingLabel=r.first),e.mGM(r=e.lsd())&&(i._notchedOutline=r.first),e.mGM(r=e.lsd())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,i){2&n&&e.AVh("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[e.Jv_([{provide:Jt,useExisting:a},{provide:zt,useExisting:a}])],ngContentSelectors:Pc,decls:18,vars:23,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(n,i){if(1&n){const r=e.RV6();e.NAR(Lc),e.DNE(0,Bc,1,1,"ng-template",null,0,e.C5r),e.j41(2,"div",4,1),e.bIt("click",function(l){return e.eBV(r),e.Njj(i._control.onContainerClick(l))}),e.DNE(4,Ac,1,0,"div",5),e.j41(5,"div",6),e.DNE(6,zc,2,2,"div",7)(7,Uc,3,0,"div",8)(8,qc,3,0,"div",9),e.j41(9,"div",10),e.DNE(10,Qc,1,1,"ng-template",11),e.SdG(11),e.k0s(),e.DNE(12,Wc,2,0,"div",12)(13,Jc,2,0,"div",13),e.k0s(),e.DNE(14,Zc,1,0,"div",14),e.k0s(),e.j41(15,"div",15),e.DNE(16,Kc,2,1,"div",16)(17,tm,5,2,"div",17),e.k0s()}2&n&&(e.R7$(2),e.AVh("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),e.R7$(2),e.Y8G("ngIf",!i._hasOutline()&&!i._control.disabled),e.R7$(2),e.Y8G("ngIf",i._hasOutline()),e.R7$(),e.Y8G("ngIf",i._hasIconPrefix),e.R7$(),e.Y8G("ngIf",i._hasTextPrefix),e.R7$(2),e.Y8G("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),e.R7$(2),e.Y8G("ngIf",i._hasTextSuffix),e.R7$(),e.Y8G("ngIf",i._hasIconSuffix),e.R7$(),e.Y8G("ngIf",!i._hasOutline()),e.R7$(),e.AVh("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),e.Y8G("ngSwitch",i._getDisplayedMessages()),e.R7$(),e.Y8G("ngSwitchCase","error"),e.R7$(),e.Y8G("ngSwitchCase","hint"))},dependencies:[m.bT,m.T3,m.ux,m.e1,Yt,Ut,Qt,Ht],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[om.transitionMessages]},changeDetection:0})}}return a})(),pm=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[P.yE,m.MD,Rc.w5,P.yE]})}}return a})();var um=u(45024),gm=u(59030),ti=u(99172),pt=u(96697),ii=u(96354);const hm=["trigger"],_m=["panel"],fm=[[["mat-select-trigger"]],"*"],bm=["mat-select-trigger","*"];function vm(a,s){if(1&a&&(e.j41(0,"span",11),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.placeholder)}}function xm(a,s){if(1&a&&(e.j41(0,"span",15),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.JRh(t.triggerValue)}}function ym(a,s){1&a&&e.SdG(0,0,["*ngSwitchCase","true"])}function Cm(a,s){if(1&a&&(e.j41(0,"span",12),e.DNE(1,xm,2,1,"span",13)(2,ym,1,0,"ng-content",14),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngSwitch",!!t.customTrigger),e.R7$(2),e.Y8G("ngSwitchCase",!0)}}function Sm(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16,1),e.bIt("@transformPanel.done",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r._handleKeydown(i))}),e.SdG(2,1),e.k0s()}if(2&a){const t=e.XpG();e.ZvI("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),e.Y8G("ngClass",t.panelClass)("@transformPanel","showing"),e.BMQ("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const Im={transformPanelWrap:(0,G.hZ)("transformPanelWrap",[(0,G.kY)("* => void",(0,G.P)("@transformPanel",[(0,G.MA)()],{optional:!0}))]),transformPanel:(0,G.hZ)("transformPanel",[(0,G.wk)("void",(0,G.iF)({opacity:0,transform:"scale(1, 0.8)"})),(0,G.kY)("void => showing",(0,G.i0)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,G.iF)({opacity:1,transform:"scale(1, 1)"}))),(0,G.kY)("* => void",(0,G.i0)("100ms linear",(0,G.iF)({opacity:0})))])};let ni=0;const ai=new e.nKC("mat-select-scroll-strategy"),Tm=new e.nKC("MAT_SELECT_CONFIG"),jm={provide:ai,deps:[Fe],useFactory:function km(a){return()=>a.scrollStrategies.reposition()}},wm=new e.nKC("MatSelectTrigger");class Mm{constructor(s,t){this.source=s,this.value=t}}const Rm=(0,P.GG)((0,P.BF)((0,P.Ob)((0,P.J8)(class{constructor(a,s,t,n,i){this._elementRef=a,this._defaultErrorStateMatcher=s,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i,this.stateChanges=new L.B}}))));let Fm=(()=>{class a extends Rm{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(d.k0.required)??!1}set required(t){this._required=(0,V.he)(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,V.he)(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=(0,V.he)(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=(0,V.OE)(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y){super(o,r,c,h,x),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=i,this._dir=l,this._parentFormField=g,this._liveAnnouncer=I,this._defaultOptions=y,this._panelOpen=!1,this._compareWith=(j,F)=>j===F,this._uid="mat-select-"+ni++,this._triggerAriaLabelledBy=null,this._destroy=new L.B,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+ni++,this._panelDoneAnimatingStream=new L.B,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,gm.v)(()=>{const j=this.options;return j?j.changes.pipe((0,ti.Z)(j),(0,le.n)(()=>(0,Xe.h)(...j.map(F=>F.onSelectionChange)))):this._ngZone.onStable.pipe((0,pt.s)(1),(0,le.n)(()=>this.optionSelectionChanges))}),this.openedChange=new e.bkB,this._openedStream=this.openedChange.pipe((0,Ze.p)(j=>j),(0,ii.T)(()=>{})),this._closedStream=this.openedChange.pipe((0,Ze.p)(j=>!j),(0,ii.T)(()=>{})),this.selectionChange=new e.bkB,this.valueChange=new e.bkB,this._trackedModal=null,this.ngControl&&(this.ngControl.valueAccessor=this),null!=y?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=y.typeaheadDebounceInterval),this._scrollStrategyFactory=C,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(v)||0,this.id=this.id}ngOnInit(){this._selectionModel=new um.CB(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Ve.F)(),(0,p.Q)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,p.Q)(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe((0,ti.Z)(null),(0,p.Q)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}_applyModalPanelOwnership(){const t=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const n=`${this.id}-panel`;this._trackedModal&&(0,Ce.Ae)(this._trackedModal,"aria-owns",n),(0,Ce.px)(t,"aria-owns",n),this._trackedModal=t}_clearFromModal(){this._trackedModal&&((0,Ce.Ae)(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,i=n===ne.n6||n===ne.i7||n===ne.UQ||n===ne.LE,r=n===ne.Fm||n===ne.t6,o=this._keyManager;if(!o.isTyping()&&r&&!(0,ne.rp)(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const l=this.selected;o.onKeydown(t);const c=this.selected;c&&l!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,i=t.keyCode,r=i===ne.n6||i===ne.i7,o=n.isTyping();if(r&&t.altKey)t.preventDefault(),this.close();else if(o||i!==ne.Fm&&i!==ne.t6||!n.activeItem||(0,ne.rp)(t))if(!o&&this._multiple&&i===ne.A&&t.ctrlKey){t.preventDefault();const l=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(l?c.select():c.deselect())})}else{const l=n.activeItemIndex;n.onKeydown(t),this._multiple&&r&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==l&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,pt.s)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_skipPredicate(t){return t.disabled}_initKeyManager(){this._keyManager=new Ce.Au(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,Xe.h)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,p.Q)(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Xe.h)(...this.options.map(n=>n._stateChanges)).pipe((0,p.Q)(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,n){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,i)=>this.sortComparator?this.sortComparator(n,i,t):t.indexOf(n)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let t=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){t=n;break}this._keyManager.setActiveItem(t)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Se.Xj),e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(P.es),e.rXU(e.aKT),e.rXU(Te.dS,8),e.rXU(d.cV,8),e.rXU(d.j4,8),e.rXU(Jt,8),e.rXU(d.vO,10),e.kS0("tabindex"),e.rXU(ai),e.rXU(Ce.Ai),e.rXU(Tm,8))}}static{this.\u0275dir=e.FsC({type:a,viewQuery:function(n,i){if(1&n&&(e.GBs(hm,5),e.GBs(_m,5),e.GBs(Bt,5)),2&n){let r;e.mGM(r=e.lsd())&&(i.trigger=r.first),e.mGM(r=e.lsd())&&(i.panel=r.first),e.mGM(r=e.lsd())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[e.Vt3,e.OA$]})}}return a})(),Om=(()=>{class a extends Fm{constructor(){super(...arguments),this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._skipPredicate=t=>!this.panelOpen&&t.disabled}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,p.Q)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}open(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(t){const n=this.options.toArray()[t];if(n){const i=this.panel.nativeElement,r=(0,P.jb)(t,this.options,this.optionGroups),o=n._getHostElement();i.scrollTop=0===t&&1===r?0:(0,P.TL)(o.offsetTop,o.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new Mm(this,t)}_getOverlayWidth(t){return"auto"===this.panelWidth?(t instanceof Ke?t.elementRef:t||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=(0,V.he)(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(a)))(i||a)}})()}static{this.\u0275cmp=e.VBU({type:a,selectors:[["mat-select"]],contentQueries:function(n,i,r){if(1&n&&(e.wni(r,wm,5),e.wni(r,P.wT,5),e.wni(r,P.QC,5)),2&n){let o;e.mGM(o=e.lsd())&&(i.customTrigger=o.first),e.mGM(o=e.lsd())&&(i.options=o),e.mGM(o=e.lsd())&&(i.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox","ngSkipHydration","",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,i){1&n&&e.bIt("keydown",function(o){return i._handleKeydown(o)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&n&&(e.BMQ("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),e.AVh("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",panelWidth:"panelWidth",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[e.Jv_([{provide:Wt,useExisting:a},{provide:P.is,useExisting:a}]),e.Vt3],ngContentSelectors:bm,decls:11,vars:10,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,i){if(1&n){const r=e.RV6();e.NAR(fm),e.j41(0,"div",2,0),e.bIt("click",function(){return e.eBV(r),e.Njj(i.toggle())}),e.j41(3,"div",3),e.DNE(4,vm,2,1,"span",4)(5,Cm,3,2,"span",5),e.k0s(),e.j41(6,"div",6)(7,"div",7),e.qSk(),e.j41(8,"svg",8),e.nrm(9,"path",9),e.k0s()()()(),e.DNE(10,Sm,3,9,"ng-template",10),e.bIt("backdropClick",function(){return e.eBV(r),e.Njj(i.close())})("attach",function(){return e.eBV(r),e.Njj(i._onAttached())})("detach",function(){return e.eBV(r),e.Njj(i.close())})}if(2&n){const r=e.sdS(1);e.R7$(3),e.Y8G("ngSwitch",i.empty),e.BMQ("id",i._valueId),e.R7$(),e.Y8G("ngSwitchCase",!0),e.R7$(),e.Y8G("ngSwitchCase",!1),e.R7$(5),e.Y8G("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[m.YU,m.ux,m.e1,m.fG,Bt,Ke],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Im.transformPanel]},changeDetection:0})}}return a})(),Vm=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[jm],imports:[m.MD,At,P.Sy,P.yE,Se.Gj,pm,P.Sy,P.yE]})}}return a})();const Em=["tooltip"],ri=new e.nKC("mat-tooltip-scroll-strategy"),Lm={provide:ri,deps:[Fe],useFactory:function Nm(a){return()=>a.scrollStrategies.reposition({scrollThrottle:20})}},Gm=new e.nKC("mat-tooltip-default-options",{providedIn:"root",factory:function Pm(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),si="tooltip-panel",oi=(0,oe.BQ)({passive:!0});let zm=(()=>{class a{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=(0,V.he)(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,V.he)(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=(0,V.OE)(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=(0,V.OE)(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,n,i,r,o,l,c,h,g,x,v,C){this._overlay=t,this._elementRef=n,this._scrollDispatcher=i,this._viewContainerRef=r,this._ngZone=o,this._platform=l,this._ariaDescriber=c,this._focusMonitor=h,this._dir=x,this._defaultOptions=v,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new L.B,this._scrollStrategy=g,this._document=C,v&&(this._showDelay=v.showDelay,this._hideDelay=v.hideDelay,v.position&&(this.position=v.position),v.positionAtOrigin&&(this.positionAtOrigin=v.positionAtOrigin),v.touchGestures&&(this.touchGestures=v.touchGestures)),x.change.pipe((0,p.Q)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,p.Q)(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,i])=>{t.removeEventListener(n,i,oi)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const i=this._createOverlay(n);this._detach(),this._portal=this._portal||new jt(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=i.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe((0,p.Q)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&r._origin instanceof e.aKT)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return i.positionChanges.pipe((0,p.Q)(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${si}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,p.Q)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,p.Q)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,p.Q)(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&r.keyCode===ne._f&&!(0,ne.rp)(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,i=this._getOrigin(),r=this._getOverlayPosition();n.withPositions([this._addOffset({...i.main,...r.main}),this._addOffset({...i.fallback,...r.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let i;"above"==n||"below"==n?i={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?i={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(i={originX:"end",originY:"center"});const{x:r,y:o}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:r,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let i;"above"==n?i={overlayX:"center",overlayY:"bottom"}:"below"==n?i={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?i={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(i={overlayX:"start",overlayY:"center"});const{x:r,y:o}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:r,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,pt.s)(1),(0,p.Q)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:i,originY:r}=t;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===n&&"top"===r?"above":"below",o!==this._currentPosition){const l=this._overlayRef;if(l){const c=`${this._cssClassPrefix}-${si}-`;l.removePanelClass(c+this._currentPosition),l.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(n=t),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const n=t.targetTouches?.[0],i=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,i),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{const i=n.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,i])=>{this._elementRef.nativeElement.addEventListener(n,i,oi)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),i=this._elementRef.nativeElement;n!==i&&!i.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,i=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===t||!n.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}static{this.\u0275fac=function(n){e.QTQ()}}static{this.\u0275dir=e.FsC({type:a,inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]}})}}return a})(),Um=(()=>{class a extends zm{constructor(t,n,i,r,o,l,c,h,g,x,v,C){super(t,n,i,r,o,l,c,h,g,x,v,C),this._tooltipComponent=Hm,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const i=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=i?-8:8:"end"===t.originX&&(t.offsetX=i?8:-8),t}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Fe),e.rXU(e.aKT),e.rXU(Se.R),e.rXU(e.c1b),e.rXU(e.SKi),e.rXU(oe.OD),e.rXU(Ce.vr),e.rXU(Ce.FN),e.rXU(ri),e.rXU(Te.dS,8),e.rXU(Gm,8),e.rXU(m.qQ))}}static{this.\u0275dir=e.FsC({type:a,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,i){2&n&&e.AVh("mat-mdc-tooltip-disabled",i.disabled)},exportAs:["matTooltip"],features:[e.Vt3]})}}return a})(),qm=(()=>{class a{constructor(t,n){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new L.B,this._animationsDisabled="NoopAnimations"===n}show(t){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,i=this._showAnimation,r=this._hideAnimation;if(n.classList.remove(t?r:i),n.classList.add(t?i:r),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.gRc),e.rXU(e.bc$,8))}}static{this.\u0275dir=e.FsC({type:a})}}return a})(),Hm=(()=>{class a extends qm{constructor(t,n,i){super(t,i),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.gRc),e.rXU(e.aKT),e.rXU(e.bc$,8))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["mat-tooltip-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(Em,7),2&n){let r;e.mGM(r=e.lsd())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(n,i){1&n&&e.bIt("mouseleave",function(o){return i._handleMouseLeave(o)}),2&n&&e.xc7("zoom",i.isVisible()?1:null)},features:[e.Vt3],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1,0),e.bIt("animationend",function(l){return e.eBV(r),e.Njj(i._handleAnimationEnd(l))}),e.j41(2,"div",2),e.EFF(3),e.k0s()()}2&n&&(e.AVh("mdc-tooltip--multiline",i._isMultiline),e.Y8G("ngClass",i.tooltipClass),e.R7$(3),e.JRh(i.message))},dependencies:[m.YU],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip{--mdc-plain-tooltip-container-shape:4px;--mdc-plain-tooltip-supporting-text-line-height:16px}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return a})(),Qm=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[Lm],imports:[Ce.Pd,m.MD,At,P.yE,P.yE,Se.Gj]})}}return a})();function Wm(a,s){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Jm(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-form-field",16)(1,"mat-select",17),e.bIt("selectionChange",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r._changePageSize(i.value))}),e.DNE(2,Wm,2,2,"mat-option",18),e.k0s()()}if(2&a){const t=e.XpG(2);e.Y8G("appearance",t._formFieldAppearance)("color",t.color),e.R7$(),e.Y8G("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),e.R7$(),e.Y8G("ngForOf",t._displayedPageSizeOptions)}}function Zm(a,s){if(1&a&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.JRh(t.pageSize)}}function Km(a,s){if(1&a&&(e.j41(0,"div",12)(1,"div",13),e.EFF(2),e.k0s(),e.DNE(3,Jm,3,8,"mat-form-field",14)(4,Zm,2,1,"div",15),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.FS9("id",t._pageSizeLabelId),e.R7$(),e.SpI(" ",t._intl.itemsPerPageLabel," "),e.R7$(),e.Y8G("ngIf",t._displayedPageSizeOptions.length>1),e.R7$(),e.Y8G("ngIf",t._displayedPageSizeOptions.length<=1)}}function ep(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.firstPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",22),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),e.BMQ("aria-label",t._intl.firstPageLabel)}}function tp(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.lastPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",24),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),e.BMQ("aria-label",t._intl.lastPageLabel)}}let tt=(()=>{class a{constructor(){this.changes=new L.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,n,i)=>{if(0==i||0==n)return`0 of ${i}`;const r=t*n;return`${r+1} \u2013 ${r<(i=Math.max(i,0))?Math.min(r+n,i):r+n} of ${i}`}}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const np={provide:tt,deps:[[new e.Xx1,new e.kdw,tt]],useFactory:function ip(a){return a||new tt}},rp=new e.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS"),sp=(0,P.Ob)((0,P.mG)(class{}));let op=(()=>{class a extends sp{get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max((0,V.OE)(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=(0,V.OE)(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max((0,V.OE)(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(n=>(0,V.OE)(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=(0,V.he)(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=(0,V.he)(t)}constructor(t,n,i){if(super(),this._intl=t,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new e.bkB,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:r,pageSizeOptions:o,hidePageSize:l,showFirstLastButtons:c}=i;null!=r&&(this._pageSize=r),null!=o&&(this._pageSizeOptions=o),null!=l&&(this._hidePageSize=l),null!=c&&(this._showFirstLastButtons=c)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,n)=>t-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(n){e.QTQ()}}static{this.\u0275dir=e.FsC({type:a,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[e.Vt3]})}}return a})(),lp=0,li=(()=>{class a extends op{constructor(t,n,i){super(t,n,i),this._pageSizeLabelId="mat-paginator-page-size-label-"+lp++,this._formFieldAppearance=i?.formFieldAppearance||"outline"}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(tt),e.rXU(e.gRc),e.rXU(rp,8))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[e.Vt3],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Km,5,4,"div",2),e.j41(3,"div",3)(4,"div",4),e.EFF(5),e.k0s(),e.DNE(6,ep,3,5,"button",5),e.j41(7,"button",6),e.bIt("click",function(){return i.previousPage()}),e.qSk(),e.j41(8,"svg",7),e.nrm(9,"path",8),e.k0s()(),e.joV(),e.j41(10,"button",9),e.bIt("click",function(){return i.nextPage()}),e.qSk(),e.j41(11,"svg",7),e.nrm(12,"path",10),e.k0s()(),e.DNE(13,tp,3,5,"button",11),e.k0s()()()),2&n&&(e.R7$(2),e.Y8G("ngIf",!i.hidePageSize),e.R7$(3),e.SpI(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),e.R7$(),e.Y8G("ngIf",i.showFirstLastButtons),e.R7$(),e.Y8G("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),e.BMQ("aria-label",i._intl.previousPageLabel),e.R7$(3),e.Y8G("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),e.BMQ("aria-label",i._intl.nextPageLabel),e.R7$(3),e.Y8G("ngIf",i.showFirstLastButtons))},dependencies:[m.Sq,m.bT,ec,mm,Om,P.wT,Um],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return a})(),dp=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[np],imports:[m.MD,tc,Vm,Qm]})}}return a})();var cp=u(94152),di=u(90612),_e=u(9159),Ne=u(50969);function mp(a,s){if(1&a){const t=e.RV6();e.j41(0,"map-marker",13,1),e.bIt("mapClick",function(){e.eBV(t);const i=e.sdS(1),r=e.XpG();return e.Njj(r.openInfoWindow(i))}),e.k0s()}if(2&a){const t=s.$implicit,n=e.XpG();e.Y8G("position",t)("options",n.markerOptions)}}let pp=(()=>{class a{constructor(t,n){this.http=t,this.modal=n,this.position={lat:25,lng:45},this.visits=[],this.markerOptions={mapTypeControl:!1,draggable:!1,icon:{url:"assets/images/custom/pinner.svg",scaledSize:new google.maps.Size(40,40)}},this.markerPositions=[],this.options={mapTypeId:"hybrid",zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!0},this.paths=[],this.lineOptions={strokeColor:"#2196f3",strokeOpacity:1,strokeWeight:3}}ngOnInit(){this.GePoints()}mappingElementData(t){return t.map(i=>(i.lat=parseFloat(i.lat),i.lng=parseFloat(i.lng),{...i}))}onMapClick(t){this.long=t?.latLng?.toJSON().lng,this.lat=t?.latLng?.toJSON().lat,this.position=t?.latLng?.toJSON(),this.markerOptions=t?.latLng?.toJSON(),console.log(this.markerPositions)}determineGovernorate(t,n){console.log(t),console.log(n),this.http.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${n}&key=${q.c.keyGoogle}`).subscribe(o=>{o&&o.results&&o.results.length>0?(this.governorate=this.extractGovernorate(o.results[0].address_components),console.log("Governorate:",this.governorate)):console.error("No address found for coordinates:",t,n)},o=>{console.error("Error fetching address:",o)})}extractGovernorate(t){for(const n of t)for(const i of n.types)if("administrative_area_level_1"===i)return n.long_name;return"Unknown"}GePoints(){let t=[];this.visits.forEach(n=>{n.lat&&t.push({lat:Number.parseFloat(n.lat),lng:Number.parseFloat(n.lng),clientName:n.clientName})}),this.markerPositions=[...t]}openInfoWindow(t){this.infoWindow.open(t);let r,n=t.getPosition()?.toJSON().lng,i=t.getPosition()?.toJSON().lat;this.determineGovernorate(i,n),r=this.getIndexByLat(i),this.visitObject={name:this.markerPositions[r].clientName,id:this.markerPositions[r].id,lat:this.markerPositions[r].lat,lng:this.markerPositions[r].lng}}closeInfoWindow(){this.infoWindow.close()}getIndexByLat(t){let n=-1;return this.markerPositions.forEach((i,r)=>{i.lat==t&&(n=r)}),n}editGovernorateData(){const t=this.modal.open(null,{centered:!0,size:"md",modalDialogClass:"rounded-modal"});t.componentInstance.governorateObject=this.visitObject,t.result.then(()=>{},()=>{this.GePoints()})}showGovernorateParties(){this.modal.open(null,{centered:!0,size:"md",modalDialogClass:"fixed-left-modal"}).componentInstance.governorateObject=this.visitObject}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(ue.Qq),e.rXU(_.Bq))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["visit-map"]],viewQuery:function(n,i){if(1&n&&e.GBs(Ne.D1,5),2&n){let r;e.mGM(r=e.lsd())&&(i.infoWindow=r.first)}},inputs:{visits:"visits",paths:"paths"},decls:16,vars:7,consts:[["infoWindow",""],["marker","mapMarker"],["height","700px","width","100%",3,"center","zoom","options"],[3,"position","options","mapClick",4,"ngFor","ngForOf"],[3,"path","options"],[1,"info-window"],[1,"info-header"],[1,"close-btn",3,"click"],[1,"icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","0.5","y","0.5","width","23","height","23","rx","3.5","stroke","#E7EAEE"],["d","M16 8L8 16","stroke","#64748B","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M8 8L16 16","stroke","#64748B","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"mapClick","position","options"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"google-map",2),e.DNE(1,mp,2,2,"map-marker",3),e.nrm(2,"map-polyline",4),e.j41(3,"map-info-window",null,0)(5,"div",5)(6,"div",6)(7,"h3"),e.EFF(8),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return e.eBV(r),e.Njj(i.closeInfoWindow())}),e.j41(10,"span",8),e.qSk(),e.j41(11,"svg",9),e.nrm(12,"rect",10)(13,"path",11)(14,"path",12),e.k0s()()()()()()(),e.joV(),e.nrm(15,"app-search-member")}if(2&n){let r;e.Y8G("center",i.position)("zoom",6)("options",i.options),e.R7$(),e.Y8G("ngForOf",i.markerPositions),e.R7$(),e.Y8G("path",i.paths)("options",i.lineOptions),e.R7$(6),e.SpI("",null!==(r=null==i.visitObject?null:i.visitObject.name)&&void 0!==r?r:""," ")}},dependencies:[m.Sq,Ne.u6,Ne.D1,Ne.fU,Ne.ZC]})}}return a})();const up=["dataTable"],gp=()=>[5,10,20],ci=(a,s)=>({"text-success":a,"text-danger":s}),hp=()=>["admin"],_p=()=>[10,20,50];function fp(a,s){1&a&&(e.j41(0,"div",130),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function bp(a,s){1&a&&(e.j41(0,"div",130),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function vp(a,s){1&a&&(e.j41(0,"div",130),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function xp(a,s){1&a&&(e.j41(0,"div",131),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function yp(a,s){if(1&a&&(e.j41(0,"span",132),e.EFF(1),e.k0s()),2&a){const t=s.items,n=e.XpG();e.R7$(),e.JRh(n.getLabels(t))}}function Cp(a,s){1&a&&e.nrm(0,"th",157)}function Sp(a,s){if(1&a&&(e.j41(0,"td")(1,"div",158)(2,"div",159)(3,"div",160),e.EFF(4,": :"),e.k0s()(),e.j41(5,"div",161)(6,"div",162)(7,"label",163),e.EFF(8),e.k0s()()()()()),2&a){const t=s.$implicit;e.R7$(8),e.SpI("# ",t.sort,"")}}function Ip(a,s){1&a&&e.nrm(0,"th",164)}function kp(a,s){if(1&a&&(e.j41(0,"td")(1,"div",158)(2,"div",165),e.nrm(3,"i",166),e.j41(4,"span",73),e.EFF(5),e.k0s()()()()),2&a){const t=s.$implicit;e.R7$(3),e.Y8G("ngClass",e.l_i(2,ci,t.lat,!t.lat)),e.R7$(2),e.JRh(t.clientName)}}function Tp(a,s){1&a&&e.nrm(0,"th",167)}function jp(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"input",168),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.DH7(o.formMaster.visits[o.getVisitIndexById(r.clientId)].date,i)||(o.formMaster.visits[o.getVisitIndexById(r.clientId)].date=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Mz_("name","date",n.getVisitIndexById(t.clientId),""),e.R50("ngModel",n.formMaster.visits[n.getVisitIndexById(t.clientId)].date),e.Y8G("altInput",!0)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y")}}function wp(a,s){1&a&&e.nrm(0,"th",169)}function Mp(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"ng-select",170),e.nI1(2,"translate"),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getCount())}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.DH7(o.formMaster.visits[o.getVisitIndexById(r.clientId)].visitTypeId,i)||(o.formMaster.visits[o.getVisitIndexById(r.clientId)].visitTypeId=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.AVh("is-invalid",!n.formMaster.visits[n.getVisitIndexById(t.clientId)].visitTypeId),e.Mz_("name","visitTypeId",n.getVisitIndexById(t.clientId),""),e.FS9("placeholder",e.bMT(2,7,"sales.visitPlan.selectVisitType")),e.Y8G("items",n.visitTypes),e.R50("ngModel",n.formMaster.visits[n.getVisitIndexById(t.clientId)].visitTypeId)}}function Rp(a,s){1&a&&e.nrm(0,"th",171)}function Fp(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"ng-select",172),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.DH7(o.formMaster.visits[o.getVisitIndexById(r.clientId)].visitObjectivePlans,i)||(o.formMaster.visits[o.getVisitIndexById(r.clientId)].visitObjectivePlans=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Mz_("name","visitObjectivePlans",n.getVisitIndexById(t.clientId),""),e.Y8G("items",n.visitObjectives),e.R50("ngModel",n.formMaster.visits[n.getVisitIndexById(t.clientId)].visitObjectivePlans)}}function Op(a,s){1&a&&e.nrm(0,"th",173)}function Vp(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"ng-select",174),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.DH7(o.formMaster.visits[o.getVisitIndexById(r.clientId)].status,i)||(o.formMaster.visits[o.getVisitIndexById(r.clientId)].status=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Mz_("name","status",n.getVisitIndexById(t.clientId),""),e.Y8G("items",n.status),e.R50("ngModel",n.formMaster.visits[n.getVisitIndexById(t.clientId)].status)}}function Ep(a,s){1&a&&e.nrm(0,"th",175)}function Dp(a,s){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"textarea",176),e.nI1(2,"translate"),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.DH7(o.formMaster.visits[o.getVisitIndexById(r.clientId)].note,i)||(o.formMaster.visits[o.getVisitIndexById(r.clientId)].note=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Mz_("name","note",n.getVisitIndexById(t.clientId),""),e.Mz_("id","note",n.getVisitIndexById(t.clientId),""),e.FS9("placeholder",e.bMT(2,6,"sales.visitPlan.note")),e.R50("ngModel",n.formMaster.visits[n.getVisitIndexById(t.clientId)].note)}}function Np(a,s){1&a&&e.nrm(0,"th",177)}function Lp(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",181),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(2);return e.Njj(r.onDelete(r.getVisitIndexById(i.clientId)))}),e.nrm(2,"i",182),e.k0s()}2&a&&e.Y8G("title",e.bMT(1,1,"general.action.delete"))}function Pp(a,s){if(1&a&&(e.j41(0,"div",179),e.DNE(1,Lp,3,3,"button",180),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.Y8G("ngIf",10==n.formMaster.visits[n.getVisitIndexById(t.clientId)].status)}}function Gp(a,s){1&a&&(e.j41(0,"td"),e.DNE(1,Pp,2,1,"div",178),e.k0s()),2&a&&(e.R7$(),e.Y8G("hasRole",e.lJ4(1,hp)))}function $p(a,s){1&a&&e.nrm(0,"tr",183)}function Bp(a,s){if(1&a&&e.nrm(0,"tr",184),2&a){const t=e.XpG(2);e.Mz_("id","row-",t.deleteId,"")}}function Ap(a,s){1&a&&e.nrm(0,"div")}function Xp(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",133)(1,"div",134)(2,"table",135,6),e.bIt("cdkDropListDropped",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.visitsTable(i))}),e.qex(4,136),e.DNE(5,Cp,1,0,"th",137)(6,Sp,9,1,"td",138),e.bVm(),e.qex(7,139),e.DNE(8,Ip,1,0,"th",140)(9,kp,6,5,"td",138),e.bVm(),e.qex(10,141),e.DNE(11,Tp,1,0,"th",142)(12,jp,2,7,"td",138),e.bVm(),e.qex(13,143),e.DNE(14,wp,1,0,"th",144)(15,Mp,3,9,"td",138),e.bVm(),e.qex(16,145),e.DNE(17,Rp,1,0,"th",146)(18,Fp,2,4,"td",138),e.bVm(),e.qex(19,147),e.DNE(20,Op,1,0,"th",148)(21,Vp,2,4,"td",138),e.bVm(),e.qex(22,149),e.DNE(23,Ep,1,0,"th",150)(24,Dp,3,8,"td",138),e.bVm(),e.qex(25,151),e.DNE(26,Np,1,0,"th",152)(27,Gp,2,2,"td",138),e.bVm(),e.DNE(28,$p,1,0,"tr",153)(29,Bp,1,2,"tr",154)(30,Ap,1,0,"div",155),e.k0s(),e.j41(31,"mat-paginator",156),e.bIt("page",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onPageChange(i))}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("dataSource",t.dataSource),e.R7$(26),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(2),e.Y8G("pageSizeOptions",e.lJ4(6,gp))("length",t.collectionSize)("pageSize",t.pageSize)}}function Yp(a,s){if(1&a&&(e.j41(0,"div",185),e.nrm(1,"visit-map",186),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("paths",t.paths)("visits",t.formMaster.visits)}}function zp(a,s){1&a&&(e.j41(0,"tr")(1,"th",192),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",193),e.EFF(4," sales.visitPlan.customerName "),e.k0s(),e.j41(5,"th",194),e.EFF(6," sales.visitPlan.date "),e.k0s(),e.j41(7,"th",195),e.EFF(8," sales.visitPlan.visitType "),e.k0s(),e.j41(9,"th",193),e.EFF(10," sales.visitPlan.visitObjectives "),e.k0s(),e.j41(11,"th",196),e.EFF(12," sales.visitPlan.status "),e.k0s(),e.j41(13,"th",197),e.EFF(14," sales.visitPlan.note "),e.k0s(),e.nrm(15,"th",198),e.k0s())}function Up(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",181),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG().rowIndex,r=e.XpG(3);return e.Njj(r.onDelete(i))}),e.nrm(2,"i",182),e.k0s()}2&a&&e.Y8G("title",e.bMT(1,1,"general.action.delete"))}function qp(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td",199),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"div",165),e.nrm(5,"i",166),e.j41(6,"span",73),e.EFF(7),e.k0s()()(),e.j41(8,"td")(9,"input",168),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(3);return e.DH7(o.formMaster.visits[r].date,i)||(o.formMaster.visits[r].date=i),e.Njj(i)}),e.k0s()(),e.j41(10,"td")(11,"ng-select",200),e.nI1(12,"translate"),e.bIt("change",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.getCount())}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(3);return e.DH7(o.formMaster.visits[r].visitTypeId,i)||(o.formMaster.visits[r].visitTypeId=i),e.Njj(i)}),e.k0s()(),e.j41(13,"td")(14,"ng-select",201),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(3);return e.DH7(o.formMaster.visits[r].visitObjectivePlans,i)||(o.formMaster.visits[r].visitObjectivePlans=i),e.Njj(i)}),e.k0s()(),e.j41(15,"td")(16,"ng-select",202),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(3);return e.DH7(o.formMaster.visits[r].status,i)||(o.formMaster.visits[r].status=i),e.Njj(i)}),e.k0s()(),e.j41(17,"td")(18,"textarea",203),e.nI1(19,"translate"),e.mxI("ngModelChange",function(i){const r=e.eBV(t).rowIndex,o=e.XpG(3);return e.DH7(o.formMaster.visits[r].note,i)||(o.formMaster.visits[r].note=i),e.Njj(i)}),e.k0s()(),e.j41(20,"td",199),e.DNE(21,Up,3,3,"button",180),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.XpG(3);e.AVh("table-warning",!t.visitTypeId||!(null!=t.visitObjectivePlans&&t.visitObjectivePlans.length)),e.R7$(2),e.SpI(" ",n+1," "),e.R7$(3),e.Y8G("ngClass",e.l_i(38,ci,t.lat,!t.lat)),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.Mz_("name","date",n,""),e.R50("ngModel",i.formMaster.visits[n].date),e.Y8G("altInput",!0)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y"),e.R7$(2),e.AVh("is-invalid",!i.formMaster.visits[n].visitTypeId),e.Mz_("name","visitTypeId",n,""),e.FS9("placeholder",e.bMT(12,34,"sales.visitPlan.selectVisitType")),e.Y8G("items",i.visitTypes),e.R50("ngModel",i.formMaster.visits[n].visitTypeId),e.R7$(3),e.Mz_("name","visitObjectivePlans",n,""),e.Y8G("items",i.visitObjectives),e.R50("ngModel",i.formMaster.visits[n].visitObjectivePlans),e.R7$(2),e.Mz_("name","status",n,""),e.Y8G("items",i.status),e.R50("ngModel",i.formMaster.visits[n].status),e.R7$(2),e.Mz_("name","note",n,""),e.Mz_("id","note",n,""),e.FS9("placeholder",e.bMT(19,36,"sales.visitPlan.note")),e.R50("ngModel",i.formMaster.visits[n].note),e.R7$(3),e.Y8G("ngIf",10==i.formMaster.visits[n].status)}}function Hp(a,s){1&a&&(e.j41(0,"tr")(1,"td",204)(2,"div",69),e.nrm(3,"i",205)(4,"span",206),e.k0s()()())}function Qp(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",133)(1,"div",187)(2,"p-table",188,7),e.mxI("firstChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.firstIndex,i)||(r.firstIndex=i),e.Njj(i)}),e.DNE(4,zp,16,0,"ng-template",189)(5,qp,22,41,"ng-template",190)(6,Hp,5,0,"ng-template",191),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("paginator",!0)("rows",t.rows)("rowsPerPageOptions",e.lJ4(7,_p)),e.R50("first",t.firstIndex),e.Y8G("value",t.formMaster.visits)("scrollable",!0)("totalRecords",t.formMaster.visits.length)}}function Wp(a,s){if(1&a&&(e.j41(0,"div",185),e.nrm(1,"visit-map",186),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("paths",t.paths)("visits",t.formMaster.visits)}}function Jp(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",13)(1,"div",113)(2,"h6",114)(3,"span",115),e.EFF(4),e.k0s(),e.nrm(5,"span",116),e.k0s(),e.j41(6,"div",117)(7,"span",118),e.EFF(8),e.nrm(9,"span",119),e.k0s(),e.j41(10,"span",120),e.EFF(11),e.nrm(12,"span",121),e.k0s(),e.j41(13,"span",122),e.EFF(14),e.nrm(15,"span",123),e.k0s(),e.j41(16,"span",124),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showMap=!i.showMap)}),e.nrm(17,"i",125)(18,"span",126),e.k0s()()(),e.DNE(19,Qp,7,8,"div",127)(20,Wp,2,2,"div",128),e.k0s()}if(2&a){const t=e.XpG();e.R7$(4),e.JRh((null==t.formMaster||null==t.formMaster.visits?null:t.formMaster.visits.length)||0),e.R7$(4),e.SpI("",(null==t.countModel?null:t.countModel.periodicVisits)||0," "),e.R7$(3),e.SpI("",(null==t.countModel?null:t.countModel.marketingVisits)||0," "),e.R7$(3),e.SpI("",(null==t.countModel?null:t.countModel.other)||0," "),e.R7$(5),e.Y8G("ngIf",!t.showMap),e.R7$(),e.Y8G("ngIf",t.showMap)}}let mi=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(t,n,c,o,i,r,l),this.baseService=o,this.service=h,this.clientGroupsService=g,this.clientService=x,this.router=v,this.editPaln="sales.visitPlan.editPlan",this.addPlan="sales.visitPlan.addPlan",this.titleOperation="sales.visitPlan.titleOperation",this.submitted=!1,this.displayedColumns=["sort","clientName","date","visitTypeId","visitObjectivePlans","status","note","action"],this.pagination={pageNumber:1,pageSize:1e3},this.pageSize=10,this.pageIndex=0,this.collectionSize=0,this.form=[],this.formMaster={id:0,visits:[],name:"",salesPersonId:null,dateFrom:"",dateTo:"",dateExcept:[]},this.listId=0,this.clientGroups=[],this.salesMan=[],this.cities=[],this.regions=[],this.clients=[],this.visitTypes=[],this.visitObjectives=[],this.formClient={totalVisitDaily:null,visitTypeId:null,visitObjectiveId:[],clientGroupId:null,regionId:null,cityId:null,clientId:[]},this.status=[],this.firstIndex=0,this.rows=6,this.countModel={periodicVisits:0,marketingVisits:0,other:0},this.showClientSelection=!1,this.clientsLoading=!1,this.showMap=!1,this.paths=[]}ngOnInitMore(){this.formMaster.visits=[],this.listId=this.routerActive.snapshot.paramMap.get("id"),this.GetLookups(),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.sales"},{label:"sales.visitPlan.title",active:!0,url:"sales/visit-plans"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}]}onPageChange(t){this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.updateDataSource()}updateDataSource(){const t=this.pageIndex*this.pageSize;this.dataSource=this.formMaster.visits.slice(t,t+this.pageSize)}ngAfterViewInitMore(){this.dataSource.paginator=this.paginator}getVisitIndexById(t){return this.formMaster.visits.findIndex(n=>n.clientId===t)}GetLookups(){this.baseService.GetLookups().pipe((0,p.Q)(this.notifier)).subscribe({next:t=>{this.salesMan=t.data.salesMan,this.clientGroups=t.data.clientGroups,this.regions=t.data.regions,this.cities=t.data.cities,this.visitTypes=t.data.visitTypes,this.visitObjectives=t.data.visitObjectives;let n=t.data.status;n.forEach(i=>{i.name=this.getTranslationText("sales.visitPlan."+i.name)}),this.status=n}})}GetClientDropDown(){this.formMaster.salesPersonId?(this.clientsLoading=!0,this.clientService.GetClientDropDown({salesPersonId:this.formMaster.salesPersonId,regionId:this.formClient.regionId,cityId:this.formClient.cityId,clientGroupId:this.formClient.clientGroupId}).pipe((0,p.Q)(this.notifier)).subscribe({next:n=>{this.clients=n.data,this.clientsLoading=!1},error:()=>{this.clientsLoading=!1}})):this.alertService.error("mustSelectSalesMan")}onSalesPersonChange(){this.formClient.clientId=[],this.clients=[],this.formMaster.visits=[],this.getCount(),this.visitsTable(),this.formMaster.salesPersonId&&this.GetClientDropDown()}toggleClientSelection(){this.showClientSelection=!this.showClientSelection}clearFilters(){this.formClient={totalVisitDaily:null,visitTypeId:null,visitObjectiveId:[],clientGroupId:null,regionId:null,cityId:null,clientId:[]},this.clients=[],this.formMaster.salesPersonId&&this.GetClientDropDown()}clearAllVisits(){confirm(this.getTranslationText("sales.visitPlan.confirmClearAll"))&&(this.formMaster.visits=[],this.getCount(),this.visitsTable())}sortVisitsByDate(){this.formMaster.visits.sort((t,n)=>new Date(t.date).getTime()-new Date(n.date).getTime()),this.visitsTable(),this.alertService.success(this.getTranslationText("sales.visitPlan.visitsSorted"))}sortVisitsByLocation(){const t=this.formMaster.visits.filter(l=>l.lat&&l.lng).map(l=>({...l,lat:+l.lat,lng:+l.lng})),n=this.formMaster.visits.filter(l=>!l.lat||!l.lng),i=[];let r=t.shift();if(!r)return void(this.formMaster.visits=[...n]);for(i.push(r);t.length>0;){let l=0,c=this.getDistance(r.lat,r.lng,t[0].lat,t[0].lng);for(let h=1;h<t.length;h++){const g=this.getDistance(r.lat,r.lng,t[h].lat,t[h].lng);g<c&&(l=h,c=g)}r=t.splice(l,1)[0],i.push(r)}let o=[...i,...n];o.forEach((l,c)=>{l.sort=c+1}),this.calcVisit(o),this.visitsTable(),this.alertService.success(this.getTranslationText("sales.visitPlan.visitsSorted"))}validateAllVisits(){let t=0;this.formMaster.visits.forEach(n=>{(!n.visitTypeId||!n.visitObjectivePlans?.length)&&t++}),t>0?this.alertService.error(this.getTranslationText(`sales.visitPlan.foundInvalidVisits: ${t}`)):this.alertService.success(this.getTranslationText("sales.visitPlan.allVisitsValid")),this.visitsTable()}back(){this.router.navigate(["/sales/visit-plans"])}mapForm(t){let n=structuredClone(t);return n.dateFrom=this.datePipe.transform(n.dateFrom,"yyyy-MM-ddT00:00:00.000"),n.dateTo=this.datePipe.transform(n.dateTo,"yyyy-MM-ddT00:00:00.000"),n.visits.forEach(i=>{i.date=this.datePipe.transform(i.date,"yyyy-MM-ddTHH:mm"),i.visitObjectivePlans=i.visitObjectivePlans.map(r=>({representativeVisitPlanDetailId:i.id,visitObjectiveId:r}))}),n}mapRegisterForm(t){let n=structuredClone(t);return n.totalVisitDaily=this.formMaster.totalVisitDaily,n.dateFrom=this.datePipe.transform(n.dateFrom,"yyyy-MM-ddT00:00:00.000"),n.dateTo=this.datePipe.transform(n.dateTo,"yyyy-MM-ddT00:00:00.000"),n.visits.forEach(i=>{i.date=this.datePipe.transform(i.date,"yyyy-MM-ddTHH:mm"),i.visitObjectivePlans=i.visitObjectivePlans.map(r=>({representativeVisitPlanDetailId:0,visitObjectiveId:r}))}),n}OnSubmit(){this.validForm()&&(this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity())}validForm(){const t=this.formMaster.visits;return t&&0!==t.length?t.some(i=>0===i.visitTypeId||!i.visitObjectivePlans?.length)?(this.alertService.error(this.getTranslationText("sales.visitPlan.eatchServiceMustHaveTypeAndOneObjectiveAtLeast")),!1):(this.visitsTable(),!0):(this.alertService.error(this.getTranslationText("sales.visitPlan.mustSelectVisit")),!1)}submitFunished(){this.alertService.success(),this.ngxLoader.stop(f.a7),this.ngxLoader.stop(f.ZW),this.btnDisabled=!0}registerEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapRegisterForm(this.formMaster);this.baseService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(n=>(0,Q.$)(n))).subscribe(n=>{n.success?(this.back(),this.submitFunished()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}editEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapForm({...this.formMaster});this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}goList(){this.router.navigateByUrl("/sales/visit-plans/")}controlDateFormat(t){"dateFrom"===t?this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT00:00:00"):"dateTo"===t&&(this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT23:59:59.999"))}getLabels(t){return t?t.length<=1?t.map(n=>n.name).join("  ,   "):t.slice(0,1).map(n=>n.name).join(", ")+` +${t.length-1} +`:""}addSelected(){if(this.formClient.clientId){let t=this.formMaster.visits??[];this.formClient.clientId.forEach(n=>{t.push({id:0,clientId:n.id,clientName:n.name,date:this.formMaster.dateFrom,visitTypeId:this.formClient.visitTypeId,visitObjectivePlans:this.formClient.visitObjectiveId,representativeVisitPlanMasterId:this.formMaster.id,note:"",status:10,sort:t.length+1})}),this.visitsTable(),this.calcVisit(t)}}calcVisit(t){if(this.formMaster.totalVisitDaily<=0)return void this.alertService.error("sales.visitPlan.selectTotalVisitDaily");if(!this.formMaster.dateFrom||!this.formMaster.dateTo)return void this.alertService.error("sales.visitPlan.selectTotalDateFromTo");let n={dateFrom:this.formMaster.dateFrom?this.formatDate(new Date(this.formMaster.dateFrom)):null,dateTo:this.formMaster.dateTo?this.formatDate(new Date(this.formMaster.dateTo)):null,dateExcept:this.formMaster.dateExcept,totalVisitDaily:this.formMaster.totalVisitDaily},i=this.baseService.distributeVisit(t,n);this.formMaster.visits=[...i],this.getCount(),this.visitsTable(),this.configPath()}addALLSelected(){this.formClient.clientId=this.clients,this.addSelected()}onDelete(t){confirm(this.getTranslationText("sales.visitPlan.confirmDelete"))&&(this.formMaster.visits.splice(t,1),this.getCount(),this.visitsTable())}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{if(t.data?.success){this.isEditForm=!0;let n=t.data.data;n.visits.forEach(i=>{i.date=new Date(i.date)}),this.formMaster=n,this.visitsTable(),this.collectionSize=this.formMaster.visits.length,this.updateDataSource(),console.log(this.formMaster,"cscscsdc"),this.getCount(),this.configPath(),this.GetClientDropDown()}},()=>{this.alertService.error()})}getCount(){this.formMaster.visits&&this.formMaster.visits.length>0?(this.countModel.periodicVisits=this.formMaster.visits.filter(t=>1===t.visitTypeId).length,this.countModel.marketingVisits=this.formMaster.visits.filter(t=>2===t.visitTypeId).length,this.countModel.other=this.formMaster.visits.filter(t=>3===t.visitTypeId).length):this.countModel={periodicVisits:0,marketingVisits:0,other:0},this.visitsTable()}formatDate(t){const n=t?.getFullYear();return`${n}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}visitsTable(t){t&&((0,Ae.HD)(this.dataSource,t.previousIndex,t.currentIndex),(0,Ae.HD)(this.formMaster.visits,t.previousIndex,t.currentIndex)),this.resetVisitsSort(),t&&this.table.renderRows()}resetVisitsSort(){this.formMaster.visits.forEach((t,n)=>{t.sort=n+1}),this.updateDataSource(),console.log(this.dataSource),console.log(this.formMaster.visits)}getDistance(t,n,i,r){const o=v=>v*Math.PI/180,c=o(i-t),h=o(r-n),g=Math.sin(c/2)**2+Math.cos(o(t))*Math.cos(o(i))*Math.sin(h/2)**2;return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))*6371}configPath(){this.paths=this.formMaster.visits.map(t=>({lat:t.lat,lng:t.lng})),this.visitsTable()}updateVisits(){this.dataSource.data=[...this.formMaster.visits]}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(D.u),e.rXU(m.vh),e.rXU(dt),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(yt.m),e.rXU(qe.t),e.rXU(ve.X),e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-visit-plan-operation"]],viewQuery:function(n,i){if(1&n&&(e.GBs(up,5),e.GBs(li,5)),2&n){let r;e.mGM(r=e.lsd())&&(i.table=r.first),e.mGM(r=e.lsd())&&(i.paginator=r.first)}},features:[e.Vt3],decls:196,vars:73,consts:[["formEntity","ngForm"],["name","ngModel"],["dateFrom","ngModel"],["dateTo","ngModel"],["salesPersonId","ngModel"],["totalVisitDaily","ngModel"],["dataTable",""],["tableMaster",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"col-12","col-lg-3"],[1,"card","mb-3"],[1,"card-header","bg-gradient-info","text-white"],[1,"mb-0","p-2"],[1,"ri-road-map-line","me-2"],["translate","sales.visitPlan.planData"],[1,"card-body"],[1,"row","g-3","mb-4"],[1,"col-12","col-md-12"],["for","name","translate","",1,"required","text-muted","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center",3,"hidden"],[1,"row","my-1","px-0"],[1,"col-12","col-md-6"],["for","dateFrom","translate","",1,"text-muted","form-label","required"],[1,"input-group"],["type","text","mwlFlatpickr","","name","dateFrom","id","dateFrom","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","dateTo","translate","",1,"text-muted","form-label","required"],["type","text","mwlFlatpickr","","name","dateTo","id","dateTo","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","disabled","minDate","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12"],["for","dateTo","translate","",1,"text-muted","form-label","w-100"],["name","dateExcept","selectionMode","multiple",3,"ngModelChange","minDate","maxDate","disabled","ngModel","readonlyInput"],["translate","",1,"required","text-muted","form-label","w-100"],["clearable","false","clearOnBackspace","false","name","salesPersonId","bindValue","id","bindLabel","name","required","",3,"change","ngModelChange","items","ngModel"],["translate","",1,"text-muted","form-label","w-100"],["clearable","true","clearOnBackspace","true","name","visitTypeId","bindValue","id","bindLabel","name",3,"ngModelChange","items","ngModel"],["for","totalVisitDaily","translate","",1,"required","text-muted","form-label"],["InputTirmFilter","","name","totalVisitDaily","type","number","min","1","max","10","id","totalVisitDaily","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small","translate","",4,"ngIf"],["clearable","true","clearOnBackspace","true","name","visitObjectiveId","bindValue","id","markFirst","true","multiple","true","closeOnSelect","false","bindLabel","name",3,"ngModelChange","items","ngModel"],["clearable","true","clearOnBackspace","true","name","clientGroupId","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["clearable","true","clearOnBackspace","true","name","regionId","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["clearable","true","clearOnBackspace","true","name","cityId","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],[1,"row","my-1"],["clearable","true","clearOnBackspace","true","name","clientId","markFirst","true","multiple","true","closeOnSelect","false","bindLabel","name",3,"ngModelChange","items","ngModel","loading"],["ng-multi-label-tmp",""],[1,"form-text"],[1,"ri-information-line","me-1"],["translate","sales.visitPlan.clientSelectionHint"],["role","group",1,"btn-group","w-100"],[1,"btn","btn-info","flex-fill",3,"click","disabled"],[1,"ri-add-circle-line","me-1"],["translate","sales.visitPlan.addCustomer"],[1,"btn","btn-primary","flex-fill","mx-1",3,"click","disabled"],[1,"ri-group-line","me-1"],["translate","sales.visitPlan.addAll"],[1,"btn","btn-outline-danger","flex-fill",3,"click","disabled"],[1,"ri-delete-bin-line","me-1"],["translate","sales.visitPlan.clearAll"],[1,"card-header","bg-gradient-primary","text-white"],[1,"mb-2"],[1,"ri-file-list-line","me-2"],["translate","sales.visitPlan.planSummary"],[1,"row","g-2"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["translate","sales.visitPlan.name",1,"text-muted","small"],[1,"text-muted"],[1,"col-6"],[1,"d-flex","justify-content-between","align-items-center"],["translate","sales.visitPlan.dateFrom",1,"text-muted","small"],[1,"fw-medium"],["translate","sales.visitPlan.dateTo",1,"text-muted","small"],[1,"card"],[1,"card-header","bg-gradient-secondary","text-white"],[1,"ri-tools-line","me-2"],["translate","sales.visitPlan.quickActions"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-info","btn-sm",3,"click","disabled"],[1,"ri-sort-asc","me-1"],["translate","sales.visitPlan.sortByDate"],[1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],[1,"ri-checkbox-circle-line","me-1"],["translate","sales.visitPlan.validateAll"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["translate","sales.visitPlan.sortByMap"],[1,"my-2"],[1,"btn","btn-success",3,"click","disabled"],[1,"ri-save-line","me-1"],["translate","general.action.save"],[1,"btn","btn-outline-secondary",3,"click"],[1,"ri-arrow-left-line","me-1"],["translate","general.action.cancel"],[1,"col-12","col-lg-9"],[1,"position-sticky",2,"top","50px"],[1,"ri-bar-chart-line","me-2"],["translate","sales.visitPlan.visitStatistics"],[1,"row","g-3"],[1,"col-3"],[1,"text-center","p-3","bg-primary","bg-opacity-10","rounded"],[1,"fs-4","text-muted","text-primary"],["translate","sales.visitPlan.totalVisits",1,"small","text-muted"],[1,"text-center","p-3","bg-success","bg-opacity-10","rounded"],[1,"fs-4","text-muted","text-success"],["translate","sales.visitPlan.periodicVisits",1,"small","text-muted"],[1,"text-center","p-3","bg-info","bg-opacity-10","rounded"],[1,"fs-4","text-muted","text-info"],["translate","sales.visitPlan.marketingVisits",1,"small","text-muted"],[1,"text-center","p-3","bg-warning","bg-opacity-10","rounded"],[1,"fs-4","text-muted","text-warning"],["translate","sales.visitPlan.otherVisits",1,"small","text-muted"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","rounded-pill","bg-success","me-2"],["translate","sales.visitPlan.visitData"],[1,"d-flex","gap-2","p-2"],[1,"badge","bg-primary"],["translate","sales.visitPlan.periodicVisits"],[1,"badge","bg-info"],["translate","sales.visitPlan.marketingVisits"],[1,"badge","bg-warning"],["translate","sales.visitPlan.other"],[1,"badge","bg-danger","fs-6","cursor-pointer",3,"click"],[1,"ri-pin-distance-line"],["translate","sales.visitPlan.displayMap"],["class","card-body p-0",4,"ngIf"],["class","map",4,"ngIf"],["class","card mb-3",4,"ngIf"],["translate","",1,"text-danger","text-center"],["translate","",1,"text-danger","small"],[1,"badge","bg-secondary","me-1"],[1,"card-body","p-0"],[1,"table-responsive","mat-elevation-z8"],["mat-table","","fxFlex","","cdkDropList","",1,"table","align-middle","position-relative","table-nowrap",2,"border-color","#e9ebec",3,"cdkDropListDropped","dataSource"],["matColumnDef","sort"],["mat-header-cell","","translate","#",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","clientName"],["mat-header-cell","","translate","sales.visitPlan.customerName",4,"matHeaderCellDef"],["matColumnDef","date"],["mat-header-cell","","translate","sales.visitPlan.date",4,"matHeaderCellDef"],["matColumnDef","visitTypeId"],["mat-header-cell","","translate","sales.visitPlan.visitType",4,"matHeaderCellDef"],["matColumnDef","visitObjectivePlans"],["mat-header-cell","","translate","sales.visitPlan.visitObjectives",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","translate","sales.visitPlan.status",4,"matHeaderCellDef"],["matColumnDef","note"],["mat-header-cell","","translate","sales.visitPlan.note",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","cdkDrag","",3,"id",4,"matRowDef","matRowDefColumns"],[4,"cdkDragPlaceholder"],["showFirstLastButtons","",3,"page","pageSizeOptions","length","pageSize"],["mat-header-cell","","translate","#"],[1,"d-flex","align-items-start"],[1,"flex-shrink-0","me-3"],[1,"task-handle","px-1","bg-light","rounded"],[1,"flex-grow-1"],[1,"form-check"],[1,"form-check-label"],["mat-header-cell","","translate","sales.visitPlan.customerName"],[1,"d-flex","align-items-center"],[1,"ri-map-pin-user-fill","me-2",3,"ngClass"],["mat-header-cell","","translate","sales.visitPlan.date"],["type","text","mwlFlatpickr","","altFormat","d-m-Y","required","",1,"form-control","form-control-sm","flatpickr-input",3,"ngModelChange","ngModel","name","altInput","enableTime","convertModelValue","dateFormat"],["mat-header-cell","","translate","sales.visitPlan.visitType"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",3,"change","ngModelChange","name","items","ngModel","placeholder"],["mat-header-cell","","translate","sales.visitPlan.visitObjectives"],["clearable","true","clearOnBackspace","true","bindValue","id","markFirst","true","multiple","true","closeOnSelect","false","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["mat-header-cell","","translate","sales.visitPlan.status"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",3,"ngModelChange","name","items","ngModel"],["mat-header-cell","","translate","sales.visitPlan.note"],["rows","1","width","100%","InputTirmFilter","",1,"form-control","form-control-sm",3,"ngModelChange","name","ngModel","id","placeholder"],["mat-header-cell",""],["class","hstack gap-2",4,"hasRole"],[1,"hstack","gap-2"],["class","btn btn-sm btn-outline-danger",3,"title","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click","title"],[1,"ri-delete-bin-line"],["mat-header-row",""],["mat-row","","cdkDrag","",3,"id"],[1,"map"],[3,"paths","visits"],[1,"table-responsive"],["dataKey","id","styleClass","p-datatable-sm","scrollHeight","400px",3,"firstChange","paginator","rows","rowsPerPageOptions","first","value","scrollable","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["translate","",2,"width","50px"],["translate","",2,"width","250px"],["translate","",2,"width","180px"],["translate","",2,"width","150px"],["translate","",2,"width","120px"],["translate","",2,"width","200px"],[2,"width","2%"],[1,"text-center"],["dropdownPosition","auto","clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",3,"change","ngModelChange","name","items","ngModel","placeholder"],["dropdownPosition","top","clearable","true","clearOnBackspace","true","name","clientId","bindValue","id","markFirst","true","multiple","true","closeOnSelect","false","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["dropdownPosition","auto","clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",3,"ngModelChange","name","items","ngModel"],["rows","2","width","100%","InputTirmFilter","",1,"form-control","form-control-sm",3,"ngModelChange","name","ngModel","id","placeholder"],["colspan","9",1,"text-center","py-4"],[1,"ri-inbox-line","fs-1","d-block","mb-2"],["translate","sales.visitPlan.noVisitsMessage"]],template:function(n,i){if(1&n){const r=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10),e.nrm(4,"ngx-ui-loader",11),e.j41(5,"div",9)(6,"div",12)(7,"div",13)(8,"div",14)(9,"h6",15),e.nrm(10,"i",16)(11,"span",17),e.k0s()(),e.j41(12,"div",18)(13,"div",9)(14,"form",null,0)(16,"div",19)(17,"div",20)(18,"label",21),e.EFF(19,"sales.visitPlan.name"),e.k0s(),e.j41(20,"input",22,1),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.name,l)||(i.formMaster.name=l),e.Njj(l)}),e.k0s(),e.j41(22,"div",23),e.EFF(23," general.message.filedIdRequired "),e.k0s()(),e.j41(24,"div",24)(25,"div",25)(26,"label",26),e.EFF(27,"sales.visitPlan.dateFrom"),e.k0s(),e.j41(28,"div",27)(29,"input",28,2),e.nI1(31,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.dateFrom,l)||(i.formMaster.dateFrom=l),e.Njj(l)}),e.bIt("ngModelChange",function(){return e.eBV(r),e.Njj(i.controlDateFormat("dateFrom"))}),e.k0s()(),e.DNE(32,fp,2,0,"div",29),e.k0s(),e.j41(33,"div",25)(34,"label",30),e.EFF(35,"sales.visitPlan.dateTo"),e.k0s(),e.j41(36,"div",27)(37,"input",31,3),e.nI1(39,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.dateTo,l)||(i.formMaster.dateTo=l),e.Njj(l)}),e.bIt("ngModelChange",function(){return e.eBV(r),e.Njj(i.controlDateFormat("dateTo"))}),e.k0s()(),e.DNE(40,bp,2,0,"div",29),e.k0s(),e.j41(41,"div",32)(42,"label",33),e.EFF(43,"sales.visitPlan.dateExcept"),e.k0s(),e.j41(44,"p-calendar",34),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.dateExcept,l)||(i.formMaster.dateExcept=l),e.Njj(l)}),e.k0s()()(),e.j41(45,"div",20)(46,"label",35),e.EFF(47,"sales.visitPlan.salesPersonName"),e.k0s(),e.j41(48,"ng-select",36,4),e.bIt("change",function(){return e.eBV(r),e.Njj(i.onSalesPersonChange())}),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.salesPersonId,l)||(i.formMaster.salesPersonId=l),e.Njj(l)}),e.k0s(),e.DNE(50,vp,2,0,"div",29),e.k0s(),e.j41(51,"div",25)(52,"label",37),e.EFF(53,"sales.visitPlan.visitType"),e.k0s(),e.j41(54,"ng-select",38),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.visitTypeId,l)||(i.formClient.visitTypeId=l),e.Njj(l)}),e.k0s()(),e.j41(55,"div",25)(56,"label",39),e.EFF(57,"sales.visitPlan.totalVisitDaily"),e.k0s(),e.j41(58,"input",40,5),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formMaster.totalVisitDaily,l)||(i.formMaster.totalVisitDaily=l),e.Njj(l)}),e.k0s(),e.DNE(60,xp,2,0,"div",41),e.k0s(),e.j41(61,"div",32)(62,"label",37),e.EFF(63,"sales.visitPlan.visitObjectives"),e.k0s(),e.j41(64,"ng-select",42),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.visitObjectiveId,l)||(i.formClient.visitObjectiveId=l),e.Njj(l)}),e.k0s()(),e.j41(65,"div",32)(66,"label",37),e.EFF(67,"sales.visitPlan.clientGroup"),e.k0s(),e.j41(68,"ng-select",43),e.bIt("change",function(){return e.eBV(r),e.Njj(i.GetClientDropDown())}),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.clientGroupId,l)||(i.formClient.clientGroupId=l),e.Njj(l)}),e.k0s()(),e.j41(69,"div",32)(70,"label",37),e.EFF(71,"sales.visitPlan.regionName"),e.k0s(),e.j41(72,"ng-select",44),e.bIt("change",function(){return e.eBV(r),e.Njj(i.GetClientDropDown())}),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.regionId,l)||(i.formClient.regionId=l),e.Njj(l)}),e.k0s()(),e.j41(73,"div",32)(74,"label",37),e.EFF(75,"sales.visitPlan.cityName"),e.k0s(),e.j41(76,"ng-select",45),e.bIt("change",function(){return e.eBV(r),e.Njj(i.GetClientDropDown())}),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.cityId,l)||(i.formClient.cityId=l),e.Njj(l)}),e.k0s()(),e.j41(77,"div",46)(78,"div",32)(79,"label",37),e.EFF(80,"sales.visitPlan.customerName"),e.k0s(),e.j41(81,"ng-select",47),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.formClient.clientId,l)||(i.formClient.clientId=l),e.Njj(l)}),e.DNE(82,yp,2,1,"ng-template",48),e.k0s(),e.j41(83,"div",49),e.nrm(84,"i",50)(85,"span",51),e.k0s()()(),e.j41(86,"div",9)(87,"div",32)(88,"div",52)(89,"button",53),e.bIt("click",function(){return e.eBV(r),e.Njj(i.addSelected())}),e.nrm(90,"i",54)(91,"span",55),e.k0s(),e.j41(92,"button",56),e.bIt("click",function(){return e.eBV(r),e.Njj(i.addALLSelected())}),e.nrm(93,"i",57)(94,"span",58),e.k0s(),e.j41(95,"button",59),e.bIt("click",function(){return e.eBV(r),e.Njj(i.clearAllVisits())}),e.nrm(96,"i",60)(97,"span",61),e.k0s()()()()()()()()(),e.j41(98,"div",13)(99,"div",62)(100,"h6",63),e.nrm(101,"i",64)(102,"span",65),e.k0s()(),e.j41(103,"div",18)(104,"div",66)(105,"div",32)(106,"div",67),e.nrm(107,"span",68),e.j41(108,"span",69),e.EFF(109),e.k0s()()(),e.j41(110,"div",70)(111,"div",71),e.nrm(112,"span",72),e.j41(113,"span",73),e.EFF(114),e.nI1(115,"date"),e.k0s()()(),e.j41(116,"div",70)(117,"div",71),e.nrm(118,"span",74),e.j41(119,"span",73),e.EFF(120),e.nI1(121,"date"),e.k0s()()()()()(),e.j41(122,"div",75)(123,"div",76)(124,"h6",63),e.nrm(125,"i",77)(126,"span",78),e.k0s()(),e.j41(127,"div",18)(128,"div",79)(129,"button",80),e.bIt("click",function(){return e.eBV(r),e.Njj(i.sortVisitsByDate())}),e.nrm(130,"i",81)(131,"span",82),e.k0s(),e.j41(132,"button",83),e.bIt("click",function(){return e.eBV(r),e.Njj(i.validateAllVisits())}),e.nrm(133,"i",84)(134,"span",85),e.k0s(),e.j41(135,"button",86),e.bIt("click",function(){return e.eBV(r),e.Njj(i.sortVisitsByLocation())}),e.nrm(136,"i",84)(137,"span",87),e.k0s(),e.nrm(138,"hr",88),e.j41(139,"button",89),e.bIt("click",function(){return e.eBV(r),e.Njj(i.OnSubmit())}),e.nrm(140,"i",90)(141,"span",91),e.k0s(),e.j41(142,"button",92),e.bIt("click",function(){return e.eBV(r),e.Njj(i.back())}),e.nrm(143,"i",93)(144,"span",94),e.k0s()()()()(),e.j41(145,"div",95)(146,"div",96)(147,"div",13)(148,"div",14)(149,"h6",15),e.nrm(150,"i",97)(151,"span",98),e.k0s()(),e.j41(152,"div",18)(153,"div",99)(154,"div",100)(155,"div",101)(156,"div",102),e.EFF(157),e.k0s(),e.nrm(158,"div",103),e.k0s()(),e.j41(159,"div",100)(160,"div",104)(161,"div",105),e.EFF(162),e.k0s(),e.nrm(163,"div",106),e.k0s()(),e.j41(164,"div",100)(165,"div",107)(166,"div",108),e.EFF(167),e.k0s(),e.nrm(168,"div",109),e.k0s()(),e.j41(169,"div",100)(170,"div",110)(171,"div",111),e.EFF(172),e.k0s(),e.nrm(173,"div",112),e.k0s()()()()(),e.j41(174,"div",13)(175,"div",113)(176,"h6",114)(177,"span",115),e.EFF(178),e.k0s(),e.nrm(179,"span",116),e.k0s(),e.j41(180,"div",117)(181,"span",118),e.EFF(182),e.nrm(183,"span",119),e.k0s(),e.j41(184,"span",120),e.EFF(185),e.nrm(186,"span",121),e.k0s(),e.j41(187,"span",122),e.EFF(188),e.nrm(189,"span",123),e.k0s(),e.j41(190,"span",124),e.bIt("click",function(){return e.eBV(r),e.Njj(i.showMap=!i.showMap)}),e.nrm(191,"i",125)(192,"span",126),e.k0s()()(),e.DNE(193,Xp,32,7,"div",127)(194,Yp,2,2,"div",128),e.k0s(),e.DNE(195,Jp,21,6,"div",129),e.k0s()()()()()}if(2&n){const r=e.sdS(15),o=e.sdS(21),l=e.sdS(30),c=e.sdS(38),h=e.sdS(49),g=e.sdS(59);e.FS9("title",0==i.isEditForm?i.addPlan:e.bMT(1,61,i.editPaln)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(4),e.Y8G("loaderId",i.operationLoader),e.R7$(16),e.R50("ngModel",i.formMaster.name),e.R7$(2),e.Y8G("hidden",!(o.invalid&&o.touched)),e.R7$(7),e.FS9("placeholder",e.bMT(31,63,"hr.target.dateFrom")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.formMaster.dateFrom),e.R7$(3),e.Y8G("ngIf",l.invalid&&l.touched),e.R7$(5),e.FS9("placeholder",e.bMT(39,65,"hr.target.dateTo")),e.Y8G("disabled",!i.formMaster.dateFrom)("minDate",i.formMaster.dateTo)("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.formMaster.dateTo),e.R7$(3),e.Y8G("ngIf",c.invalid&&c.touched),e.R7$(4),e.Y8G("minDate",i.formMaster.dateFrom)("maxDate",i.formMaster.dateTo)("disabled",!i.formMaster.dateTo),e.R50("ngModel",i.formMaster.dateExcept),e.Y8G("readonlyInput",!0),e.R7$(4),e.Y8G("items",i.salesMan),e.R50("ngModel",i.formMaster.salesPersonId),e.R7$(2),e.Y8G("ngIf",h.invalid&&h.touched),e.R7$(4),e.Y8G("items",i.visitTypes),e.R50("ngModel",i.formClient.visitTypeId),e.R7$(4),e.R50("ngModel",i.formMaster.totalVisitDaily),e.R7$(2),e.Y8G("ngIf",g.invalid&&g.touched),e.R7$(4),e.Y8G("items",i.visitObjectives),e.R50("ngModel",i.formClient.visitObjectiveId),e.R7$(4),e.Y8G("items",i.clientGroups),e.R50("ngModel",i.formClient.clientGroupId),e.R7$(4),e.Y8G("items",i.regions),e.R50("ngModel",i.formClient.regionId),e.R7$(4),e.Y8G("items",i.cities),e.R50("ngModel",i.formClient.cityId),e.R7$(5),e.Y8G("items",i.clients),e.R50("ngModel",i.formClient.clientId),e.Y8G("loading",i.clientsLoading),e.R7$(8),e.Y8G("disabled",!((null==i.formClient||null==i.formClient.clientId?null:i.formClient.clientId.length)>0)),e.R7$(3),e.Y8G("disabled",!(i.clients.length>0)),e.R7$(3),e.Y8G("disabled",0===i.formMaster.visits.length),e.R7$(14),e.JRh(i.formMaster.name||"N/A"),e.R7$(5),e.JRh(e.i5U(115,67,i.formMaster.dateFrom,"dd/MM/yyyy")),e.R7$(6),e.JRh(e.i5U(121,70,i.formMaster.dateTo,"dd/MM/yyyy")),e.R7$(9),e.Y8G("disabled",0===i.formMaster.visits.length),e.R7$(3),e.Y8G("disabled",0===i.formMaster.visits.length),e.R7$(3),e.Y8G("disabled",0===i.formMaster.visits.length),e.R7$(4),e.Y8G("disabled",!(null!=r&&r.valid)||0===i.formMaster.visits.length),e.R7$(18),e.SpI(" ",(null==i.formMaster||null==i.formMaster.visits?null:i.formMaster.visits.length)||0," "),e.R7$(5),e.SpI(" ",(null==i.countModel?null:i.countModel.periodicVisits)||0," "),e.R7$(5),e.SpI(" ",(null==i.countModel?null:i.countModel.marketingVisits)||0," "),e.R7$(5),e.SpI(" ",(null==i.countModel?null:i.countModel.other)||0," "),e.R7$(6),e.SpI(" ",(null==i.formMaster||null==i.formMaster.visits?null:i.formMaster.visits.length)||0," "),e.R7$(4),e.SpI(" ",(null==i.countModel?null:i.countModel.periodicVisits)||0," "),e.R7$(3),e.SpI(" ",(null==i.countModel?null:i.countModel.marketingVisits)||0," "),e.R7$(3),e.SpI(" ",(null==i.countModel?null:i.countModel.other)||0," "),e.R7$(5),e.Y8G("ngIf",!i.showMap),e.R7$(),e.Y8G("ngIf",i.showMap),e.R7$(),e.Y8G("ngIf",!1)}},dependencies:[m.YU,m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.VZ,d.zX,d.vS,d.cV,z.kL,Ee.m,b.Mm,E.XI,te.Ei,R.Cv,$.vr,$.EY,cp.y,X.m,di.Vv,_e.Zl,_e.tL,_e.ji,_e.cC,_e.YV,_e.iL,_e.KS,_e.YZ,_e.NB,li,Ae.O7,Ae.EM,Ae.T1,pp,m.vh,b.D9]})}}return a})(),Zp=(()=>{class a{constructor(t,n,i,r){this.router=t,this.route=n,this.representativeVisitPlanService=i,this.alertService=r}resolve(t,n){const r=this.router.getCurrentNavigation()?.extras?.state?.id;return""===r?(this.alertService.error(),this.router.navigateByUrl("/sales/visit-plans"),(0,Ie.of)(null)):this.representativeVisitPlanService.getById(r)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(w.nX),e.KVO(dt),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Oe=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"RepresentativeVisitPlanDetail/")}GetVisitCount(){return this.http.get(this.baseUrl+"GetVisitCount")}GetVisitView(t){return this.http.get(this.baseUrl+"GetVisitView/"+t)}sendComment(t){return this.http.post(this.baseUrl+"AddVisitComment",t)}cancelVisit(t){return this.http.put(this.baseUrl+"CancelVisit",t)}setNegativeVisit(t){return this.http.put(this.baseUrl+`SetNegativeVisit/${t}`,{})}setPositiveVisit(t){return this.http.put(this.baseUrl+`SetPositiveVisit/${t}`,{})}changeVisitStatus(t){return this.http.put(this.baseUrl+"UpdateVisitStatus",t)}rescheduleVisit(t){return this.http.put(this.baseUrl+"ReschadualVisit",t)}getVisitActions(t){return this.http.get(this.baseUrl+"GetVisitAction/"+t)}addVisitFile(t){return this.http.post(this.baseUrl+"AddVisitFile",t)}visitReport(t){return this.http.get(this.baseUrl+"visitReport/"+t)}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Kp=["carousel"],eu=["*"];function tu(a,s){if(1&a&&(e.j41(0,"option",10),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",s.index),e.R7$(),e.SpI(" ",t," ")}}function iu(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",11),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.toggleSelect(i))}),e.j41(1,"div",12),e.EFF(2),e.k0s(),e.j41(3,"div",13),e.EFF(4),e.k0s(),e.j41(5,"div",14),e.EFF(6),e.k0s()()}if(2&a){const t=s.$implicit;e.AVh("selected",t.selected),e.Y8G("id","day-"+t.date),e.BMQ("data-date",t.date),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.number),e.R7$(2),e.JRh(t.date)}}let nu=(()=>{class a{constructor(t){this.translateService=t,this.notifier=new L.B,this.lang="",this.daysSelected=new e.bkB,this.selectedMonth=(new Date).getMonth(),this.months=[],this.days=[]}translateConfig(){this.translateService.onLangChange.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.lang=t.lang})}getTranslationText(t){let n="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{n=i}),n}ngOnInit(){this.months=this.getMonthNames(),this.generateDays(this.selectedMonth)}getMonthNames(){const t=[];for(let n=0;n<12;n++){const i=new Date(2023,n,1);t.push(i.toLocaleString("en-US",{month:"long"}))}return this.translateMonth(t)}translateMonth(t){let n=[];return t.forEach(i=>{this.translateService.get("general.table."+i.toLowerCase()).subscribe(r=>{n.push(r)})}),n}onMonthChange(t){const n=parseInt(t.target.value,10);this.generateDays(n)}generateDays(t){const n=new Date,i=n.getFullYear(),r=new Date(i,t+1,0).getDate();this.days=[];for(let l=1;l<=r;l++){const c=new Date(i,t,l),h=c.getFullYear()===n.getFullYear()&&c.getMonth()===n.getMonth()&&c.getDate()===n.getDate();this.days.push({name:c.toLocaleDateString("en-US",{weekday:"short"}),number:l,date:`${i}-${(t+1).toString().padStart(2,"0")}-${l.toString().padStart(2,"0")}`,selected:h})}const o=this.days.filter(l=>l.selected).map(l=>l.date+"T00:00:00");this.daysSelected.emit(o),setTimeout(()=>{const l=this.days.find(c=>c.selected)?.date;l&&document.getElementById("day-"+l)?.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},100)}toggleSelect(t){t.selected?(t.selected=!1,this.daysSelected.emit([])):(this.days.forEach(n=>n.selected=!1),t.selected=!0,this.daysSelected.emit([t.date+"T00:00:00"]))}scrollCarousel(t,n){t.scrollBy({left:150*n,behavior:"smooth"})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(b.c$))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["day-cards"]],viewQuery:function(n,i){if(1&n&&e.GBs(Kp,5),2&n){let r;e.mGM(r=e.lsd())&&(i.carouselRef=r.first)}},outputs:{daysSelected:"daysSelected"},ngContentSelectors:eu,decls:13,vars:3,consts:[["carousel",""],[1,"row","px-3"],[1,"col-12","col-md-2"],[1,"month-dropdown",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"carousel-container"],[1,"carousel-button","left",3,"click"],[1,"carousel"],["class","day",3,"selected","id","click",4,"ngFor","ngForOf"],[1,"carousel-button","right",3,"click"],[3,"value"],[1,"day",3,"click","id"],[1,"day-name"],[1,"day-number"],[1,"day-date"]],template:function(n,i){if(1&n){const r=e.RV6();e.NAR(),e.j41(0,"div",1)(1,"div",2)(2,"select",3),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.selectedMonth,l)||(i.selectedMonth=l),e.Njj(l)}),e.bIt("change",function(l){return e.eBV(r),e.Njj(i.onMonthChange(l))}),e.DNE(3,tu,2,2,"option",4),e.k0s()(),e.SdG(4,0,["#control",""]),e.k0s(),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){return e.eBV(r),e.Njj(i.scrollCarousel(i.carouselRef.nativeElement,-1))}),e.EFF(7,"\u276e"),e.k0s(),e.j41(8,"div",7,0),e.DNE(10,iu,7,7,"div",8),e.k0s(),e.j41(11,"button",9),e.bIt("click",function(){return e.eBV(r),e.Njj(i.scrollCarousel(i.carouselRef.nativeElement,1))}),e.EFF(12,"\u276f"),e.k0s()()}2&n&&(e.R7$(2),e.R50("ngModel",i.selectedMonth),e.R7$(),e.Y8G("ngForOf",i.months),e.R7$(7),e.Y8G("ngForOf",i.days))},dependencies:[m.Sq,d.xH,d.y7,d.wz,d.BC,d.vS],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto&family=Rubik+Mono+One&display=swap";[_nghost-%COMP%]{display:block;padding:20px;background:#f4f7fa;font-family:Roboto,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:20px}.month-dropdown[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:1rem}select[_ngcontent-%COMP%]{padding:10px 15px;font-size:1rem;border-radius:6px;border:1px solid #ccc}.carousel-container[_ngcontent-%COMP%]{position:relative;max-width:100%;overflow:hidden;margin-bottom:.5rem}.carousel[_ngcontent-%COMP%]{display:flex;gap:15px;overflow-x:auto;scroll-behavior:smooth;padding:20px 60px}.day[_ngcontent-%COMP%]{flex:0 0 auto;width:108px;height:80px;background:var(--vz-primary);color:#fff;border-radius:12px;box-shadow:0 4px 12px #00000040;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;cursor:pointer;transition:all .3s ease;font-family:Roboto,sans-serif}.day[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 20px #0000004d}.day.selected[_ngcontent-%COMP%]{background-color:var(--vz-success)}.day-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:5px}.day-number[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1}.day-date[_ngcontent-%COMP%]{font-size:.9rem;margin-top:5px;opacity:.9}.carousel-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:28px;background:#fffc;color:#34495e;border:none;width:45px;height:45px;cursor:pointer;z-index:2;border-radius:50%;box-shadow:0 4px 10px #0003;display:flex;align-items:center;justify-content:center;transition:all .3s ease;backdrop-filter:blur(4px)}.carousel-button[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff;transform:translateY(-50%) scale(1.1)}.carousel-button.left[_ngcontent-%COMP%]{left:10px}.carousel-button.right[_ngcontent-%COMP%]{right:10px}@media (max-width: 768px){.carousel[_ngcontent-%COMP%]{padding:10px 40px;gap:10px}.day[_ngcontent-%COMP%]{width:120px;height:110px}.day-number[_ngcontent-%COMP%]{font-size:2rem}.carousel-button[_ngcontent-%COMP%]{font-size:22px;width:40px;height:40px}}@media (max-width: 480px){.carousel[_ngcontent-%COMP%]{padding:10px 30px}.day[_ngcontent-%COMP%]{width:100px;height:100px}.day-number[_ngcontent-%COMP%]{font-size:1.8rem}.day-name[_ngcontent-%COMP%], .day-date[_ngcontent-%COMP%]{font-size:.8rem}}']})}}return a})();const au=()=>["salesOrder.viewOrderCount"],Le=a=>({active:a}),it=()=>["visits.detail"];function ru(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",28)(1,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(null))}),e.j41(2,"div",30)(3,"div",31)(4,"div",32)(5,"div",33),e.nrm(6,"i",34),e.k0s()(),e.j41(7,"div",35)(8,"h5",36),e.EFF(9),e.k0s(),e.nrm(10,"p",37),e.k0s()()()(),e.j41(11,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(10))}),e.j41(12,"div",30)(13,"div",38)(14,"div",32)(15,"div",39),e.nrm(16,"i",34),e.k0s()(),e.j41(17,"div",35)(18,"h5",36),e.EFF(19),e.k0s(),e.nrm(20,"p",40),e.k0s()()()(),e.j41(21,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(20))}),e.j41(22,"div",30)(23,"div",38)(24,"div",32)(25,"div",41),e.nrm(26,"i",34),e.k0s()(),e.j41(27,"div",35)(28,"h5",36),e.EFF(29),e.k0s(),e.nrm(30,"p",42),e.k0s()()()(),e.j41(31,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(30))}),e.j41(32,"div",30)(33,"div",38)(34,"div",32)(35,"div",43),e.nrm(36,"i",34),e.k0s()(),e.j41(37,"div",35)(38,"h5",36),e.EFF(39),e.k0s(),e.nrm(40,"p",44),e.k0s()()()(),e.j41(41,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(40))}),e.j41(42,"div",30)(43,"div",38)(44,"div",32)(45,"div",45),e.nrm(46,"i",34),e.k0s()(),e.j41(47,"div",35)(48,"h5",36),e.EFF(49),e.k0s(),e.nrm(50,"p",46),e.k0s()()()(),e.j41(51,"div",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(100))}),e.j41(52,"div",30)(53,"div",38)(54,"div",32)(55,"div",47),e.nrm(56,"i",34),e.k0s()(),e.j41(57,"div",35)(58,"h5",36),e.EFF(59),e.k0s(),e.nrm(60,"p",48),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.AVh("bg-primary-subtle",null==t.pagination.status),e.R7$(6),e.JRh(t.count.all),e.R7$(3),e.AVh("bg-primary-subtle",10==t.pagination.status),e.R7$(7),e.JRh(t.count.schedule),e.R7$(3),e.AVh("bg-primary-subtle",20==t.pagination.status),e.R7$(7),e.JRh(t.count.start),e.R7$(3),e.AVh("bg-primary-subtle",30==t.pagination.status),e.R7$(7),e.JRh(t.count.complete),e.R7$(3),e.AVh("bg-primary-subtle",40==t.pagination.status),e.R7$(7),e.JRh(t.count.cancel),e.R7$(3),e.AVh("bg-primary-subtle",100==t.pagination.status),e.R7$(7),e.JRh(t.count.delay)}}function su(a,s){1&a&&(e.j41(0,"button",68),e.nrm(1,"i",69),e.k0s())}function ou(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",49),e.nrm(2,"div",50),e.j41(3,"div"),e.DNE(4,su,2,0,"button",51),e.k0s(),e.j41(5,"div")(6,"div",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showCart=!i.showCart)}),e.nrm(7,"i",53),e.k0s()()(),e.j41(8,"div",54)(9,"div",55)(10,"div",56)(11,"button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(null))}),e.k0s(),e.j41(12,"button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(10))}),e.k0s(),e.j41(13,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(20))}),e.k0s(),e.j41(14,"button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(30))}),e.k0s(),e.j41(15,"button",61),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(40))}),e.k0s(),e.j41(16,"button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onStatus(100))}),e.k0s()(),e.j41(17,"div",63)(18,"input",64),e.nI1(19,"translate"),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onInput(i))}),e.k0s(),e.nrm(20,"i",65),e.j41(21,"button",66),e.nrm(22,"i",67),e.k0s()()()(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",!1),e.R7$(7),e.Y8G("ngClass",e.eq3(10,Le,null==t.pagination.status)),e.R7$(),e.Y8G("ngClass",e.eq3(12,Le,10==t.pagination.status)),e.R7$(),e.Y8G("ngClass",e.eq3(14,Le,20==t.pagination.status)),e.R7$(),e.Y8G("ngClass",e.eq3(16,Le,30==t.pagination.status)),e.R7$(),e.Y8G("ngClass",e.eq3(18,Le,40==t.pagination.status)),e.R7$(),e.Y8G("ngClass",e.eq3(20,Le,100==t.pagination.status)),e.R7$(2),e.FS9("placeholder",e.bMT(19,8,"general.table.search"))}}function lu(a,s){1&a&&(e.j41(0,"span",93),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.positive")," "))}function du(a,s){1&a&&(e.j41(0,"span",94),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.negative")," "))}function cu(a,s){if(1&a&&(e.qex(0),e.DNE(1,lu,3,5,"span",91)(2,du,3,5,"span",92),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",10===t.type),e.R7$(),e.Y8G("ngIf",20===t.type)}}function mu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.goToDetails(i.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"sales.visits.details")," "))}function pu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",96),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.goToHistory(i.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"sales.visits.history")," "))}function uu(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",71)(1,"div",72)(2,"div",73),e.DNE(3,cu,3,2,"ng-container",2),e.j41(4,"span"),e.nrm(5,"span",74),e.k0s(),e.j41(6,"div",75)(7,"div",76)(8,"div",77)(9,"div")(10,"h6",78),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(2),o=e.sdS(48);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.EFF(11),e.k0s(),e.j41(12,"small",79),e.EFF(13),e.k0s(),e.j41(14,"small",79),e.EFF(15),e.k0s()()(),e.j41(16,"div",80)(17,"div"),e.nrm(18,"i",81),e.EFF(19),e.k0s()()(),e.j41(20,"div",76)(21,"div",80)(22,"div"),e.nrm(23,"i",82),e.EFF(24),e.k0s(),e.j41(25,"div"),e.nrm(26,"i",83),e.EFF(27),e.k0s(),e.j41(28,"div"),e.nrm(29,"i",84),e.EFF(30),e.k0s()(),e.j41(31,"div",85),e.nrm(32,"i",86),e.EFF(33),e.nI1(34,"date"),e.nrm(35,"span",87),e.k0s()(),e.j41(36,"div",88),e.DNE(37,mu,3,3,"button",89)(38,pu,3,3,"button",90),e.k0s()()()()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",30==t.status),e.R7$(),e.ZvI("ribbon ",n.getRibbonStatus(t.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",t.statusValue,""),e.R7$(6),e.JRh(t.clientName),e.R7$(2),e.SpI(" #V# ",t.id,""),e.R7$(2),e.SpI(" #VP# ",t.representativeVisitPlanMasterId,""),e.R7$(4),e.JRh(t.clientCity),e.R7$(5),e.JRh(t.visitTypenameAr),e.R7$(3),e.JRh(t.clientPhone),e.R7$(3),e.JRh(t.salePerson),e.R7$(3),e.SpI(" ",e.i5U(34,19,t.date,"yyyy-MM-dd HH:mm")," "),e.R7$(2),e.ZvI("rounded-circle badge ",n.getBgStatus(t.status)," d-inline-block ms-2"),e.R7$(2),e.Y8G("hasPermission",e.lJ4(22,it)),e.R7$(),e.Y8G("hasPermission",e.lJ4(23,it))}}function gu(a,s){if(1&a&&(e.j41(0,"div",70),e.Z7z(1,uu,39,24,"div",71,e.Vm6),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Dyx(t.entities)}}function hu(a,s){1&a&&(e.j41(0,"span",93),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.positive")," "))}function _u(a,s){1&a&&(e.j41(0,"span",94),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.negative")," "))}function fu(a,s){if(1&a&&(e.qex(0),e.DNE(1,hu,3,5,"span",91)(2,_u,3,5,"span",92),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",10===t.type),e.R7$(),e.Y8G("ngIf",20===t.type)}}function bu(a,s){if(1&a&&(e.j41(0,"i",110)(1,"span"),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.clientCity)}}function vu(a,s){if(1&a&&(e.j41(0,"a",111),e.EFF(1),e.nrm(2,"i",112),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("href",n.mapUrl(null==t?null:t.clientLng,null==t?null:t.clientLat),e.B4B),e.R7$(),e.SpI(" ",t.clientCity," ")}}function xu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.goToDetails(i.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"sales.visits.details")," "))}function yu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",96),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.goToHistory(i.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"sales.visits.history")," "))}function Cu(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",98)(1,"div",99)(2,"div",100),e.DNE(3,fu,3,2,"ng-container",2),e.j41(4,"span"),e.nrm(5,"span",74),e.k0s(),e.j41(6,"div",101)(7,"div")(8,"h5",102),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(2),o=e.sdS(48);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.EFF(9),e.k0s(),e.j41(10,"small",79),e.EFF(11),e.k0s(),e.j41(12,"small",79),e.EFF(13),e.k0s()()(),e.j41(14,"div",103)(15,"div"),e.DNE(16,bu,3,1,"i",104)(17,vu,3,2,"a",105),e.k0s(),e.j41(18,"div"),e.nrm(19,"i",106),e.j41(20,"span"),e.EFF(21),e.k0s()(),e.j41(22,"div"),e.nrm(23,"i",107),e.j41(24,"span"),e.EFF(25),e.k0s()(),e.j41(26,"div"),e.nrm(27,"i",84),e.EFF(28),e.k0s()(),e.j41(29,"div",108),e.EFF(30),e.nI1(31,"date"),e.nrm(32,"i",86)(33,"span",87),e.k0s(),e.j41(34,"div",109),e.DNE(35,xu,3,3,"button",89)(36,yu,3,3,"button",90),e.k0s()()()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",30==t.status),e.R7$(),e.ZvI("ribbon ",n.getRibbonStatus(t.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",t.statusValue,""),e.R7$(4),e.SpI(" ",t.clientName," "),e.R7$(2),e.SpI(" #V# ",t.id,""),e.R7$(2),e.SpI(" #VP# ",t.representativeVisitPlanMasterId,""),e.R7$(3),e.Y8G("ngIf",!(null!=t&&t.clientLng)),e.R7$(),e.Y8G("ngIf",null==t?null:t.clientLng),e.R7$(4),e.JRh(t.visitTypenameAr),e.R7$(4),e.JRh(t.clientPhone),e.R7$(3),e.JRh(t.salePerson),e.R7$(2),e.SpI(" ",e.i5U(31,20,t.date,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("rounded-circle ",n.getBgStatus(t.status)," d-inline-block ms-2"),e.R7$(2),e.Y8G("hasPermission",e.lJ4(23,it)),e.R7$(),e.Y8G("hasPermission",e.lJ4(24,it))}}function Su(a,s){if(1&a&&(e.j41(0,"div",97),e.Z7z(1,Cu,37,25,"div",98,e.Vm6),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Dyx(t.entities)}}function Iu(a,s){1&a&&(e.j41(0,"div",113),e.EFF(1," general.table.noData "),e.k0s())}function ku(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",114)(1,"div",115),e.nrm(2,"ngb-pagination-info",116),e.j41(3,"table-length",117),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",118)(5,"ngb-pagination",119),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Tu(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",120),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let ju=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(n,i,h,r,o,l,c),this.router=t,this.baseService=r,this.authDaamService=g,this.excelService=x,this._formDataService=v,this.title="sales.visit.title",this.titleOperation="sales.visit.title",this.showCart=!0,this.trunks=[],this.isFlagTime=!0,this.searchForm={},this.statusList=[],this.pagination={pageNumber:1,pageSize:20,status:10},this.images=[],this.serverPath=q.c.mediaUrl,this.form={orderId:0,attachmens:[]},this.visits=[],this.count={},this.salesPersons=[],this.regions=[],this.cities=[],this.visitTypes=[],this.visitObjectives=[],this.nameSerach="visit",this.setDates=(C,I,y)=>{if(C?.from||C?.to){const F=C.to||C.from;this.pagination[I]=this.datePipe.transform(C.from||C.to,"yyyy-MM-ddT00:00:00"),this.pagination[y]=this.datePipe.transform(F,"yyyy-MM-ddT23:59:59.999")}else this.pagination[I]=null,this.pagination[y]=null},this.GetLookUps()}GetLookUps(){this.baseService.GetLookups().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.salesPersons=t.data.salesMan,this.cities=t.data.cities,this.regions=t.data.regions,this.statusList=t.data.status,this.visitTypes=t.data.visitTypes,this.visitObjectives=t.data.visitObjectives},t=>{console.log(t)})}GetVisitCount(){this.baseService.GetVisitCount().subscribe(t=>{this.count=t.data})}startVisit(){}ngOnInitMore(){this.GetVisitCount(),this.routerActive.queryParams.subscribe(t=>{this.pagination.status=+t.status||10}),this.loadentities()}goToAnotherPage(){this.router.navigate(["/sales/startVisits"])}goToDetails(t){this.router.navigate(["/sales/visits/detail"],{state:{id:t}})}goToHistory(t){this.router.navigate(["/sales/visit-view"],{state:{id:t}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openChangeStatusModal(t,n,i="md"){this.form={},this.form.trunckStatus=t.trunckStatus,this.form.id=t.id,this.modalService.open(n,{centered:!0,size:i})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}onFileChanged(t){if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let i=0;i<n;i++){let r=new FileReader;this.form.attachmens.push({attachImage:t.target.files.item(i),type:"file"}),r.onload=o=>{this.images.push({id:0,path:o.target.result,completePath:o.target.result})},r.readAsDataURL(t.target.files[i])}}}removeImage(t,n){this.form.attachmens.splice(n,1),this.images.splice(n,1)}openFinishedModal(t,n,i="md"){this.form={},this.form.orderId=t,this.images=[],this.form.attachmens=[],this.modalService.open(n,{centered:!0,size:i})}getBgStatus(t){return 10==t?"bg-warning":20==t?"bg-info":30==t?"bg-success":40==t?"bg-danger":"bg-warning"}getRibbonStatus(t){return 10==t?"ribbon-warning":20==t?"ribbon-info":30==t?"ribbon-success":40==t?"ribbon-danger":"ribbon-warning"}onStatus(t){this.pagination.status=t,this.onSearch()}onInput(t){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.pagination.filterValue=t.target.value,this.onSearch()},200)}mapUrl(t,n){return null===t||null==n?"#":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}daysSelected(t){this.pagination.daysSelected=t,this.loadentities()}onSelectStatus(t){}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix),e.rXU(w.nX),e.rXU(b.c$),e.rXU(Oe),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(K.V),e.rXU(we.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-visits"]],features:[e.Vt3],decls:49,vars:47,consts:[["ClientInfo",""],["class","row justify-content-center",4,"hasPermission"],[4,"ngIf"],[1,"row","p-0"],[1,"p-0",3,"daysSelected"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-12","col-md-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],["id","candidate-list",1,"row","gy-4","mb-2"],[1,"col-md-12"],["class","row gy-4 ",4,"ngIf"],["class","row gy-4  sm:px-1 md:px-5 ",4,"ngIf"],["class","px-5 text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","px-5 row text-center   pt-3 overflow-hidden",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-12","col-md-2","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","bg-primary-subtle","d-flex","gap-1","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","border","border-opacity-25","rounded-2","fs-17"],[1,"ri-roadster-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.visits.totalVisits",1,"mb-0","text-muted"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-title","bg-warning","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.visits.scheduled",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-info","border-opacity-25","rounded-2","fs-17"],["translate","sales.visits.Start",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.visits.Complete",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.visits.Cancel",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-warning","border-opacity-25","rounded-2","fs-17"],["translate","sales.visits.Delay",1,"mb-0","text-muted"],[1,"d-flex","justify-content-between","align-items-center","m-0"],[1,"w-25","rounded-3"],["class","btn btn-primary","translate","sales.visits.newVisit",4,"ngIf"],[1,"bg-light","cursor-pointer",3,"click"],[1,"ri-layout-row-line","fs-2"],[1,"row","mb-4"],[1,"col-md","d-flex","justify-content-between","align-items-center","flex-wrap","gap-2"],[1,"rounded-5","d-flex","gap-3","p-1",2,"background-color","rgb(211, 211, 211)","overflow-y","auto"],["translate","sales.visits.allVisits",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],["translate","sales.visits.Schedule",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],["translate","sales.visits.Start",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],["translate","sales.visits.Complete",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],["translate","sales.visits.Cancel",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],["translate","sales.visits.Delay",1,"btn","btn-outline-primary","rounded-4",3,"click","ngClass"],[1,"d-flex","align-items-center","position-relative"],["type","text",1,"form-control","form-control-sm","border","p-2","ps-5","pe-5","rounded-5",3,"change","placeholder"],[1,"ri-search-line","position-absolute",2,"left","12px","top","50%","transform","translateY(-50%)"],["translate","sales.visits.filter",1,"btn","btn-light","px-4","py-1","ms-2","rounded-2"],[1,"ri-filter-2-line"],["translate","sales.visits.newVisit",1,"btn","btn-primary"],[1,"ri-user-add-line"],[1,"row","gy-4"],[1,"col-12","px-5"],[1,"card","shadow-sm","rounded-4","border-0","px-3","card","shadow-sm","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[1,"card-body","py-3"],[3,"translate"],[1,"row","align-items-center"],[1,"col-md-5"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap"],[1,"mb-1","fw-bold","text-truncate",3,"click"],[1,"text-muted","d-block"],[1,"mt-2","text-muted","small"],[1,"ri-map-pin-2-line","me-1","text-warning"],[1,"ri-user-3-line","me-1","text-info"],[1,"ri-phone-line","me-1","text-success"],[1,"ri-folder-user-fill","me-1","text-danger"],[1,"mt-2","small","text-muted","d-flex","align-items-center"],[1,"ri-calendar-line","me-1"],[2,"width","10px","height","10px"],[1,"col-md-2"],["class","btn btn-outline-primary btn-sm px-3",3,"click",4,"hasPermission"],["class","btn mx-1 btn-success btn-sm px-3",3,"click",4,"hasPermission"],["class","bg-success ribbon round-shape",3,"top",4,"ngIf"],["class","bg-danger ribbon round-shape",3,"top",4,"ngIf"],[1,"bg-success","ribbon","round-shape"],[1,"bg-danger","ribbon","round-shape"],[1,"btn","btn-outline-primary","btn-sm","px-3",3,"click"],[1,"btn","mx-1","btn-success","btn-sm","px-3",3,"click"],[1,"row","gy-4","sm:px-1","md:px-5"],[1,"col-xxl-3","col-lg-6"],[1,"card","shadow-sm","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-start"],[1,"mb-0","fw-bold","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover","cursor-pointer",3,"click"],[1,"mt-3","text-muted","small"],["class","ri-map-pin-2-line me-1 text-primary",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1",3,"href",4,"ngIf"],[1,"ri-alarm-warning-line","me-1","text-primary"],[1,"ri-phone-line","me-1","text-primary"],[1,"mt-3","small","text-muted"],[1,"d-flex","justify-content-center","align-items-center","gap-2","mt-4"],[1,"ri-map-pin-2-line","me-1","text-primary"],["target","_blank",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["translate","",1,"px-5","text-center","text-danger","text-bold","fs-6","p-3"],[1,"px-5","row","text-center","pt-3","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"dismiss","clientId"]],template:function(n,i){if(1&n){const r=e.RV6();e.DNE(0,ru,61,18,"div",1)(1,ou,23,22,"ng-container",2),e.j41(2,"div",3)(3,"day-cards",4),e.bIt("daysSelected",function(l){return e.eBV(r),e.Njj(i.daysSelected(l))}),e.qex(4,5),e.j41(5,"div",6)(6,"div",7)(7,"input",8),e.nI1(8,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(9,"i",9),e.k0s()(),e.j41(10,"div",6)(11,"div",7)(12,"ng-select",10),e.nI1(13,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(14,"div",6)(15,"div",7)(16,"ng-select",11),e.nI1(17,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(18,"div",12)(19,"div",7)(20,"ng-select",13),e.nI1(21,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(22,"div",6)(23,"div",7)(24,"ng-select",14),e.nI1(25,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.type,l)||(i.pagination.type=l),e.Njj(l)}),e.k0s()()(),e.j41(26,"div",6)(27,"div",7)(28,"ng-select",14),e.nI1(29,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.visitTypeId,l)||(i.pagination.visitTypeId=l),e.Njj(l)}),e.k0s()()(),e.j41(30,"div",6)(31,"div",7)(32,"ng-select",14),e.nI1(33,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.visitObjectiveId,l)||(i.pagination.visitObjectiveId=l),e.Njj(l)}),e.k0s()()(),e.j41(34,"div",15)(35,"button",16),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSearch())}),e.nrm(36,"i",17)(37,"span",18),e.k0s(),e.j41(38,"button",19),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onReset())}),e.nrm(39,"i",20)(40,"span",21),e.k0s()(),e.bVm(),e.k0s()(),e.j41(41,"div",22)(42,"div",23),e.DNE(43,gu,3,0,"div",24)(44,Su,3,0,"div",25)(45,Iu,2,0,"div",26)(46,ku,6,8,"div",27),e.k0s()(),e.DNE(47,Tu,1,1,"ng-template",null,0,e.C5r)}2&n&&(e.Y8G("hasPermission",e.lJ4(46,au)),e.R7$(),e.Y8G("ngIf",!1),e.R7$(6),e.FS9("placeholder",e.bMT(8,32,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(13,34,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(17,36,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(21,38,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(4),e.FS9("placeholder",e.bMT(25,40,"orderManagement.order.status")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.pagination.type),e.R7$(4),e.FS9("placeholder",e.bMT(29,42,"sales.visitPlan.visitType")),e.Y8G("items",i.visitTypes)("multiple",!1),e.R50("ngModel",i.pagination.visitTypeId),e.R7$(4),e.FS9("placeholder",e.bMT(33,44,"sales.visitPlan.visitObjectives")),e.Y8G("items",i.visitObjectives)("multiple",!1),e.R50("ngModel",i.pagination.visitObjectiveId),e.R7$(11),e.Y8G("ngIf",!i.showCart),e.R7$(),e.Y8G("ngIf",i.showCart),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.bT,d.me,d.BC,d.vS,_.s5,J.p,Z.g,ge.x,nu,b.Mm,$.vr,X.m,W.p,m.vh,b.D9]})}}return a})();var je=u(10467),wu=u(56009);let Mu=(()=>{class a extends ye.d{constructor(t){super(t,q.c.apiUrl+"VisitCategory/")}GetBySevice(t){return this.http.get(this.baseUrl+"GetBySevice/"+t)}GetSeviceCategory(){return this.http.get(this.baseUrl+"GetSeviceCategory/")}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var pi=u(60963);const Ru=["video"],Fu=["canvas"],Ou=(a,s)=>({"btn-outline-success":a,"btn-outline-danger":s});function Vu(a,s){if(1&a&&e.nrm(0,"video",31,3),2&a){const t=e.XpG(3);e.Y8G("height",t.HEIGHT)}}function Eu(a,s){if(1&a&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&a){const t=s.$implicit,n=e.XpG(3);e.Y8G("value",t.deviceId),e.R7$(),e.SpI(" ",t.label||"Camera "+n.camIndex(t)," ")}}function Du(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",24),e.DNE(1,Vu,2,1,"video",25),e.k0s(),e.j41(2,"div",26),e.nrm(3,"label",27),e.j41(4,"select",28),e.bIt("change",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onCameraChange(i))}),e.nrm(5,"option",29),e.DNE(6,Eu,2,2,"option",30),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.showCamera),e.R7$(5),e.Y8G("ngForOf",t.cameras)}}function Nu(a,s){if(1&a&&(e.j41(0,"div",24),e.nrm(1,"img",33),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.path,e.B4B)("height",t.HEIGHT)}}function Lu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveImage())}),e.k0s()}}function Pu(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.capture())}),e.k0s()}}function Gu(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"h4",9),e.nrm(3,"span",10),e.k0s(),e.j41(4,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s()(),e.j41(5,"div",12),e.nrm(6,"canvas",13,1),e.j41(8,"ul",14,2)(10,"li",15),e.DNE(11,Du,7,2,"ng-template",16),e.k0s(),e.j41(12,"li",15),e.DNE(13,Nu,2,2,"ng-template",16),e.k0s()(),e.j41(14,"div",17),e.nrm(15,"div",18),e.k0s()(),e.j41(16,"div",19),e.DNE(17,Lu,1,0,"button",20)(18,Pu,1,0,"button",21),e.j41(19,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OpenCamera())}),e.k0s(),e.j41(20,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s()()()}if(2&a){const t=e.sdS(9),n=e.XpG();e.R7$(6),e.Y8G("width",n.WIDTH)("height",n.HEIGHT),e.R7$(2),e.Y8G("activeId",n.activeTab),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(2),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavOutlet",t),e.R7$(2),e.Y8G("ngIf",n.isCaptured),e.R7$(),e.Y8G("ngIf",n.openCamera)}}let $u=(()=>{class a{constructor(t){this.modalService=t,this.onSave=new e.bkB,this.path="",this.HEIGHT=300,this.activeTab=2,this.WIDTH=400,this.captures=[],this.isCaptured=!1,this.showCamera=!0,this.openCamera=!1,this.serverPath=q.c.mediaUrl,this.cameras=[],this.currentStream=null,this.loading=!1}ngOnInit(){var t=this;return(0,je.A)(function*(){yield t.listCameras()})()}listCameras(){var t=this;return(0,je.A)(function*(){try{const n=yield navigator.mediaDevices.enumerateDevices();t.cameras=n.filter(i=>"videoinput"===i.kind),t.cameras.length||(t.error="No cameras found.")}catch(n){console.error(n),t.error=n}})()}camIndex(t){return this.cameras.indexOf(t)+1}startCamera(t){var n=this;return(0,je.A)(function*(){n.loading=!0;try{n.currentStream&&(n.currentStream.getTracks().forEach(r=>r.stop()),n.video.nativeElement.srcObject=null,yield new Promise(r=>setTimeout(r,300)));const i=yield navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}},audio:!1});n.currentStream=i,n.video.nativeElement.srcObject=i,yield n.video.nativeElement.play(),n.error=null}catch(i){console.error(i),n.error=i}n.loading=!1})()}onCameraChange(t){this.startCamera(t.target.value)}OpenCamera(){var t=this;return(0,je.A)(function*(){t.showCamera=!0,t.openCamera=!0,t.activeTab=1,yield t.setupDevices()})()}setupDevices(){var t=this;return(0,je.A)(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const n=yield navigator.mediaDevices.enumerateDevices();if(t.cameras=n.filter(r=>"videoinput"===r.kind),!t.cameras.length)return void(t.error="No video input devices found.");const i=t.cameras.find(r=>r.label.toLowerCase().includes("front"));if(i)yield t.startCamera(i.deviceId);else try{const r=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});t.currentStream=r,t.video.nativeElement.srcObject=r,yield t.video.nativeElement.play(),t.error=null}catch(r){console.error(r),t.error=r}}catch(n){console.error(n),t.error=n}})()}capture(){this.showCamera=!1,this.isCaptured=!0,this.activeTab=2,this.drawImageToCanvas(this.video.nativeElement);const t=this.canvas.nativeElement.toDataURL("image/png");this.visitImage=this.dataURLtoFile(t,"snapshot.png"),this.path=URL.createObjectURL(this.visitImage),this.closeCamera()}drawImageToCanvas(t){const n=this.canvas.nativeElement.getContext("2d");n&&n.drawImage(t,0,0,this.WIDTH,this.HEIGHT)}close(){this.closeCamera(),this.modalService.dismissAll()}closeCamera(){const t=this.video?.nativeElement?.srcObject;t&&(t.getTracks().forEach(n=>n.stop()),this.video.nativeElement.srcObject=null)}dataURLtoFile(t,n){const i=t.split(","),r=i[0].match(/:(.*?);/)?.[1]||"",o=atob(i[1]);let l=o.length;const c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);return new File([c],n,{type:r})}saveImage(){this.onSave.emit({file:this.visitImage,path:this.path}),this.closeCamera(),this.modalService.dismissAll()}openCameraModel(t,n="md"){this.closeCamera(),this.showCamera=!1,this.openCamera=!1,this.isCaptured=!1,this.activeTab=2,this.modalService.open(t,{centered:!0,size:n})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(_.Bq))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["take-photo"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Ru,5),e.GBs(Fu,5)),2&n){let r;e.mGM(r=e.lsd())&&(i.video=r.first),e.mGM(r=e.lsd())&&(i.canvas=r.first)}},inputs:{path:"path"},outputs:{onSave:"onSave"},decls:5,vars:4,consts:[["takePhoto",""],["canvas",""],["nav","ngbNav"],["video",""],["translate","sales.startVisits.uploadPhoto",1,"btn","btn-sm",3,"click","ngClass"],[1,"me-1"],[1,"ri-camera-line"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.startVisits.takeImage"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[2,"display","none",3,"width","height"],["ngbNav","",1,"nav","nav-tabs","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"d-flex","justify-content-center","p-1"],["type","button","class","btn btn-success","translate","general.action.save",3,"click",4,"ngIf"],["type","button","class","btn btn-warning mx-1","translate","general.action.take",3,"click",4,"ngIf"],["type","button","translate","general.action.openCamera",1,"btn","btn-primary","mx-1",3,"click"],["type","button","translate","general.action.close",1,"btn","btn-danger",3,"click"],[1,"video-container"],["id","video","autoplay","",3,"height",4,"ngIf"],[1,"camera-select","mt-3","w-100"],["translate","sales.startVisits.listCarmera"],[1,"form-select","w-100",3,"change"],["disabled","","translate","sales.startVisits.selectCamera"],[3,"value",4,"ngFor","ngForOf"],["id","video","autoplay","",3,"height"],[3,"value"],[1,"img-thumbnail",3,"src","height"],["type","button","translate","general.action.save",1,"btn","btn-success",3,"click"],["type","button","translate","general.action.take",1,"btn","btn-warning","mx-1",3,"click"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){e.eBV(r);const l=e.sdS(4);return e.Njj(i.openCameraModel(l,"md"))}),e.j41(1,"span",5),e.nrm(2,"i",6),e.k0s()(),e.DNE(3,Gu,21,8,"ng-template",null,0,e.C5r)}2&n&&e.Y8G("ngClass",e.l_i(1,Ou,""!=i.path,""==i.path))},dependencies:[m.YU,m.Sq,m.bT,_.Um,_.X9,_.sy,_.Gx,_.m_,d.xH,d.y7,b.Mm]})}}return a})();const Bu=["video"],Au=["canvas"],Xu=a=>({border:a}),Yu=(a,s)=>({"bg-primary text-white":a,"bg-light text-dark":s}),zu=(a,s)=>({"btn-primary":a,"btn-outline-primary":s}),Uu=(a,s)=>({"btn-success":a,"btn-outline-success":s}),qu=(a,s)=>({"btn-info":a,"btn-outline-info":s});function Hu(a,s){if(1&a&&(e.j41(0,"div",29)(1,"span",30),e.EFF(2),e.k0s(),e.j41(3,"div",31),e.EFF(4),e.nI1(5,"translate"),e.k0s()()),2&a){const t=s.$implicit,n=e.XpG();e.R7$(),e.Y8G("ngClass",e.l_i(5,Yu,n.currentStep===t.id,n.currentStep!==t.id)),e.R7$(),e.SpI(" ",t.index," "),e.R7$(2),e.SpI(" ",e.bMT(5,3,"sales.startVisits."+(null==t?null:t.name))," ")}}function Qu(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",44),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function Wu(a,s){if(1&a&&(e.j41(0,"div")(1,"div",32)(2,"div",17)(3,"span"),e.nrm(4,"span",33),e.k0s(),e.j41(5,"div",34)(6,"div")(7,"bdi")(8,"small",35),e.EFF(9),e.k0s()()()(),e.j41(10,"div",36)(11,"div")(12,"i",37)(13,"span"),e.EFF(14),e.k0s()()(),e.j41(15,"div"),e.nrm(16,"i",38),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.j41(19,"div"),e.nrm(20,"i",39),e.j41(21,"span"),e.EFF(22),e.k0s()()(),e.j41(23,"div",40),e.EFF(24),e.nI1(25,"date"),e.nrm(26,"i",41)(27,"span",42),e.k0s(),e.DNE(28,Qu,3,1,"ng-container",43),e.k0s()()()),2&a){const t=e.XpG();e.R7$(3),e.ZvI("ribbon ",t.getRibbonStatus(null==t.visit?null:t.visit.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==t.visit?null:t.visit.statusValue,""),e.R7$(5),e.SpI("#VISIT# ",null==t.visit?null:t.visit.id," "),e.R7$(5),e.JRh(null==t.visit?null:t.visit.cityName),e.R7$(4),e.JRh(null==t.visit?null:t.visit.visitTypeNameAr),e.R7$(4),e.JRh(null==t.visit?null:t.visit.clientPhone),e.R7$(2),e.SpI(" ",e.i5U(25,14,null==t.visit?null:t.visit.date,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("rounded-circle ",t.getBgStatus(null==t.visit?null:t.visit.status)," d-inline-block ms-2"),e.R7$(),e.Y8G("ngForOf",null==t.visit?null:t.visit.visitObjectivePlans)}}function Ju(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",61)(2,"div",62)(3,"div")(4,"p",63),e.EFF(5),e.k0s()(),e.j41(6,"take-photo",64),e.bIt("onSave",function(i){const r=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.onTakePhoto(i,r))}),e.k0s()()(),e.bVm()}if(2&a){const t=s.$implicit;e.R7$(5),e.SpI(" ",t.categoryName," "),e.R7$(),e.Y8G("path",t.path)}}function Zu(a,s){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"div",45)(2,"div",46)(3,"div",47)(4,"div",48),e.nrm(5,"h4",49)(6,"p",50),e.k0s(),e.j41(7,"div",51)(8,"div",52)(9,"ng-select",53),e.nI1(10,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.category,i)||(r.form.category=i),e.Njj(i)}),e.k0s()()(),e.j41(11,"div",54)(12,"button",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addCategory())}),e.nrm(13,"i",56)(14,"span",57),e.k0s()(),e.j41(15,"div",54)(16,"button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveServiceCategory())}),e.nrm(17,"i",59)(18,"span",60),e.k0s()()(),e.DNE(19,Ju,7,2,"ng-container",43),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(9),e.FS9("placeholder",e.bMT(10,5,"sales.startVisits.selectCategory")),e.Y8G("items",t.categories)("multiple",!1),e.R50("ngModel",t.form.category),e.R7$(10),e.Y8G("ngForOf",t.visitCategories)}}function Ku(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",70),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.goRequest())}),e.nrm(1,"span",71),e.j41(2,"span",72),e.EFF(3),e.k0s()()}if(2&a){const t=e.XpG(3);e.Y8G("ngClass",e.l_i(2,zu,(null==t.actions?null:t.actions.ordersCount)>0,(null==t.actions?null:t.actions.ordersCount)<=0)),e.R7$(3),e.SpI(" ",null==t.actions?null:t.actions.ordersCount," ")}}function eg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",70),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3),r=e.sdS(24);return e.Njj(i.openModalTitle(r,"md"))}),e.nrm(1,"span",73),e.j41(2,"span",72),e.EFF(3),e.k0s()()}if(2&a){const t=e.XpG(3);e.Y8G("ngClass",e.l_i(2,Uu,(null==t.actions?null:t.actions.collectionCount)>0,(null==t.actions?null:t.actions.collectionCount)<=0)),e.R7$(3),e.SpI(" ",null==t.actions?null:t.actions.collectionCount," ")}}function tg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",70),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.goNewClient())}),e.nrm(1,"span",74),e.j41(2,"span",72),e.EFF(3),e.k0s()()}if(2&a){const t=e.XpG(3);e.Y8G("ngClass",e.l_i(2,qu,(null==t.actions?null:t.actions.newCustomerCount)>0,(null==t.actions?null:t.actions.newCustomerCount)<=0)),e.R7$(3),e.SpI(" ",null==t.actions?null:t.actions.newCustomerCount," ")}}function ig(a,s){if(1&a&&(e.qex(0),e.DNE(1,Ku,4,5,"button",68)(2,eg,4,5,"button",69)(3,tg,4,5,"button",69),e.bVm()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",1==t),e.R7$(),e.Y8G("ngIf",2==t),e.R7$(),e.Y8G("ngIf",7==t)}}function ng(a,s){if(1&a&&(e.j41(0,"div")(1,"div",65),e.nrm(2,"h5",66),e.j41(3,"div",67),e.DNE(4,ig,4,3,"ng-container",43),e.k0s()()()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",null==t.visit?null:t.visit.objectivePlans)}}function ag(a,s){1&a&&(e.j41(0,"span",81),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.positive")," "))}function rg(a,s){1&a&&(e.j41(0,"span",82),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.negative")," "))}function sg(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",83),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function og(a,s){if(1&a&&(e.j41(0,"div",85)(1,"div"),e.nrm(2,"p",86),e.j41(3,"div",87),e.EFF(4),e.k0s()()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh(null==t.actions?null:t.actions.ordersCount)}}function lg(a,s){if(1&a&&(e.j41(0,"div",85)(1,"div"),e.nrm(2,"p",88),e.j41(3,"div",87),e.EFF(4),e.k0s()()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh(null==t.actions?null:t.actions.collectionCount)}}function dg(a,s){if(1&a&&(e.j41(0,"div",85)(1,"div"),e.nrm(2,"p",89),e.j41(3,"div",87),e.EFF(4),e.k0s()()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh(null==t.actions?null:t.actions.newCustomerCount)}}function cg(a,s){if(1&a&&(e.qex(0),e.DNE(1,og,5,1,"div",84)(2,lg,5,1,"div",84)(3,dg,5,1,"div",84),e.bVm()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",1==t),e.R7$(),e.Y8G("ngIf",2==t),e.R7$(),e.Y8G("ngIf",7==t)}}function mg(a,s){if(1&a&&(e.j41(0,"div")(1,"div",32)(2,"div",17),e.DNE(3,ag,3,5,"span",75)(4,rg,3,5,"span",76),e.j41(5,"span"),e.nrm(6,"span",33),e.k0s(),e.j41(7,"div",34)(8,"div")(9,"h5",35),e.EFF(10),e.k0s()()(),e.j41(11,"div",77)(12,"div"),e.nrm(13,"i",37),e.j41(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"div"),e.nrm(17,"i",38),e.j41(18,"span"),e.EFF(19),e.k0s()(),e.j41(20,"div"),e.nrm(21,"i",39),e.j41(22,"span"),e.EFF(23),e.k0s()(),e.j41(24,"div"),e.nrm(25,"i",78),e.j41(26,"span"),e.EFF(27),e.k0s()()(),e.j41(28,"div",77),e.EFF(29),e.nI1(30,"date"),e.nrm(31,"i",41)(32,"span",42),e.k0s(),e.DNE(33,sg,3,1,"ng-container",43),e.j41(34,"div",79)(35,"div",80),e.DNE(36,cg,4,3,"ng-container",43),e.k0s()()()()()),2&a){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",10===t.visit.type),e.R7$(),e.Y8G("ngIf",20===t.visit.type),e.R7$(),e.ZvI("ribbon ",t.getRibbonStatus(null==t.visit?null:t.visit.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==t.visit?null:t.visit.statusValue,""),e.R7$(4),e.SpI("#VISIT# ",null==t.visit?null:t.visit.id," "),e.R7$(5),e.JRh(null==t.visit?null:t.visit.cityName),e.R7$(4),e.SpI("",null==t.visit?null:t.visit.visitTypeNameAr," "),e.R7$(4),e.JRh(null==t.visit?null:t.visit.clientPhone),e.R7$(4),e.JRh(null==t.visit?null:t.visit.clientName),e.R7$(2),e.SpI(" ",e.i5U(30,18,null==t.visit?null:t.visit.date,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("rounded-circle ",t.getBgStatus(null==t.visit?null:t.visit.status)," d-inline-block ms-2"),e.R7$(),e.Y8G("ngForOf",null==t.visit?null:t.visit.visitObjectivePlans),e.R7$(3),e.Y8G("ngForOf",null==t.visit?null:t.visit.objectivePlans)}}function pg(a,s){1&a&&(e.j41(0,"div")(1,"div",90)(2,"div",91)(3,"div",92),e.nrm(4,"lord-icon",93),e.k0s(),e.nrm(5,"h5",94)(6,"h3",95)(7,"a",96),e.k0s()()())}function ug(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",99),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.goToPreviousStep())}),e.nrm(1,"i",100),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("disabled",1===t.currentStep),e.R7$(),e.Y8G("ngClass","en"==t.lang?"ri-arrow-left-line":"ri-arrow-right-line")}}function gg(a,s){if(1&a&&(e.j41(0,"div",97),e.DNE(1,ug,2,2,"button",98),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentStep!==(2==t.threeShot?t.steps.length+1:t.steps.length))}}function hg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",101),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToNextStep())}),e.nrm(1,"i",102),e.k0s()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngClass","en"==t.lang?"ri-arrow-right-line":"ri-arrow-left-line")}}function _g(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",104),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2),r=e.sdS(28);return e.Njj(i.openModalTitle(r,"md"))}),e.k0s()}}function fg(a,s){if(1&a&&(e.qex(0),e.DNE(1,_g,1,0,"button",103),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentStep==(2==t.threeShot?5:4))}}function bg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",107),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2),r=e.sdS(28);return e.Njj(i.openModalTitle(r,"md"))}),e.k0s()}}function vg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",108),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2),r=e.sdS(22);return e.Njj(i.openModalTitle(r,"lg"))}),e.k0s()}}function xg(a,s){if(1&a&&(e.j41(0,"div"),e.DNE(1,bg,1,0,"button",105)(2,vg,1,0,"button",106),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentStep!==(2==t.threeShot?t.steps.length+1:t.steps.length)),e.R7$(),e.Y8G("ngIf",t.currentStep!==(2==t.threeShot?t.steps.length+1:t.steps.length))}}function yg(a,s){1&a&&(e.j41(0,"div",124),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Cg(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",109)(1,"div",110),e.nrm(2,"h4",111),e.j41(3,"button",112),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",113),e.nrm(5,"ngx-ui-loader",114),e.j41(6,"form",115,4),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelVisit())}),e.j41(8,"div",61),e.nrm(9,"label",116),e.j41(10,"ng-select",117,5),e.nI1(12,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cancelReasonId,i)||(r.form.cancelReasonId=i),e.Njj(i)}),e.k0s(),e.DNE(13,yg,2,0,"div",118),e.k0s(),e.j41(14,"div",61),e.nrm(15,"label",119),e.j41(16,"textarea",120),e.nI1(17,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.note,i)||(r.form.note=i),e.Njj(i)}),e.EFF(18,"                    "),e.k0s()(),e.j41(19,"div",121),e.nrm(20,"button",122),e.j41(21,"button",123),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cancel"))}),e.k0s()()()()()}if(2&a){const t=e.sdS(7),n=e.sdS(11),i=e.XpG();e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(5),e.FS9("placeholder",e.bMT(12,11,"sales.mangevisits.reasonForCancellation")),e.Y8G("clearable",!1)("items",i.cancelReasons),e.R50("ngModel",i.form.cancelReasonId),e.R7$(3),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(3),e.FS9("placeholder",e.bMT(17,13,"sales.mangevisits.additionalNotes")),e.R50("ngModel",i.form.note),e.R7$(4),e.Y8G("disabled",!t.valid)}}function Sg(a,s){if(1&a){const t=e.RV6();e.j41(0,"i",155),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.removeMainImage())}),e.k0s()}}function Ig(a,s){1&a&&(e.j41(0,"div",156),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function kg(a,s){1&a&&(e.j41(0,"div",156),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Tg(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",109)(1,"div",125)(2,"h4",126)(3,"span",127),e.EFF(4,"general.action.register "),e.k0s(),e.nrm(5,"span",73),e.k0s(),e.j41(6,"button",128),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(7,"div",113),e.nrm(8,"ngx-ui-loader",114),e.j41(9,"form",129,6),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmitCollection())}),e.j41(11,"div",61)(12,"div",29)(13,"div",130)(14,"div",131)(15,"label",132),e.bIt("click",function(){e.eBV(t);const i=e.sdS(20);return e.Njj(i.click())}),e.j41(16,"div",133)(17,"div",134),e.nrm(18,"i",135),e.k0s()()(),e.j41(19,"input",136,7),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileChangedMain(i))}),e.k0s()(),e.j41(21,"div",137)(22,"div",138),e.DNE(23,Sg,1,0,"i",139),e.j41(24,"div",140),e.nrm(25,"img",141),e.k0s()()()()()(),e.j41(26,"div",61)(27,"label",142),e.EFF(28,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(29,"ng-select",143,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.paymentTypeId,i)||(r.form.paymentTypeId=i),e.Njj(i)}),e.k0s(),e.DNE(31,Ig,2,0,"div",144),e.k0s(),e.j41(32,"div",145)(33,"label",146),e.EFF(34,"sales.clientCollection.costCollection"),e.k0s(),e.j41(35,"input",147,9),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(37,kg,2,0,"div",148),e.k0s(),e.j41(38,"div",145)(39,"label",149),e.EFF(40,"sales.clientCollection.depositNumber"),e.k0s(),e.j41(41,"input",150,10),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.depositNumber,i)||(r.form.depositNumber=i),e.Njj(i)}),e.k0s()(),e.j41(43,"div",145)(44,"label",151),e.EFF(45,"sales.clientCollection.notes"),e.k0s(),e.j41(46,"textarea",152,11),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(48,"div",29)(49,"button",153),e.nrm(50,"i",154)(51,"span",60),e.k0s()()()()()}if(2&a){const t=e.sdS(10),n=e.sdS(30),i=e.sdS(36),r=e.XpG();e.R7$(8),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(15),e.Y8G("ngIf",r.image.path),e.R7$(2),e.Y8G("src",r.image.isApi?r.serverPath+r.image.path:r.image.path,e.B4B),e.R7$(4),e.Y8G("items",r.paymentMethods)("multiple",!1),e.R50("ngModel",r.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.cost),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.depositNumber),e.R7$(5),e.R50("ngModel",r.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function jg(a,s){if(1&a&&e.nrm(0,"video",171,14),2&a){const t=e.XpG(3);e.Y8G("height",t.HEIGHT)}}function wg(a,s){if(1&a&&(e.j41(0,"div",169),e.DNE(1,jg,2,1,"video",170),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.showCamera)}}function Mg(a,s){if(1&a&&(e.j41(0,"div",169),e.nrm(1,"img",172),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.visitUrl,e.B4B)("height",t.HEIGHT)}}function Rg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",173),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveImage())}),e.k0s()}}function Fg(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",174),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.capture())}),e.k0s()}}function Og(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",109)(1,"div",125)(2,"h4",126),e.nrm(3,"span",157),e.k0s(),e.j41(4,"button",128),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",113),e.nrm(6,"ngx-ui-loader",114)(7,"canvas",158,12),e.j41(9,"ul",159,13)(11,"li",160),e.DNE(12,wg,2,1,"ng-template",161),e.k0s(),e.j41(13,"li",160),e.DNE(14,Mg,2,2,"ng-template",161),e.k0s()(),e.j41(15,"div",162),e.nrm(16,"div",163),e.k0s()(),e.j41(17,"div",164),e.DNE(18,Rg,1,0,"button",165)(19,Fg,1,0,"button",166),e.j41(20,"button",167),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OpenCamera())}),e.k0s(),e.j41(21,"button",168),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s()()()}if(2&a){const t=e.sdS(10),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(),e.Y8G("width",n.WIDTH)("height",n.HEIGHT),e.R7$(2),e.Y8G("activeId",n.activeTab),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(2),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavOutlet",t),e.R7$(2),e.Y8G("ngIf",n.isCaptured),e.R7$(),e.Y8G("ngIf",n.openCamera)}}function Vg(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",115,6),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.endVisit())}),e.nrm(2,"ngx-ui-loader",114),e.j41(3,"div",175)(4,"div",176)(5,"button",177),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",113)(7,"div",178),e.nrm(8,"lord-icon",179),e.j41(9,"div",180),e.nrm(10,"h3",181)(11,"p",182),e.k0s()(),e.j41(12,"div",183),e.nrm(13,"button",184),e.j41(14,"button",185),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.operationLoader)}}let Eg=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y,j,F){super(n,i,g,r,l,c,h),this.router=t,this.baseService=r,this.cancelReasonsService=o,this.authDaamService=x,this.paymentTypesService=v,this.clientCollectionService=C,this.serviceCategoryService=I,this.visitCategoryService=y,this.paramsEncryptionService=j,this._formDataService=F,this.currentStep=1,this.totalSteps=5,this.visit={},this.cancelReasons=[],this.visitPlan=3,this.steps=[{id:1,name:"visitInfo",index:1},{id:3,name:"Actions",index:2},{id:4,name:"visitSummary",index:3},{id:5,name:"Completed",index:4}],this.actions={order:0,request:0,collection:0,newCustomerCount:0},this.paymentMethods=[],this.image={},this.serverPath=q.c.mediaUrl,this.HEIGHT=300,this.WIDTH=400,this.captures=[],this.isCaptured=!1,this.showCamera=!0,this.openCamera=!1,this.activeTab=2,this.categories=[],this.visitCategories=[],this.threeShot=2,this.defaultIndex=[1,2,3,4],this.routeDataConfig(),null!=localStorage.getItem("visitId")&&(this.currentStep=3==this.threeShot?3:2)}fullStep(){this.threeShot=3,this.steps=[{id:1,name:"visitInfo",index:1},{id:2,name:"InProgress",index:2},{id:3,name:"Actions",index:3},{id:4,name:"visitSummary",index:4},{id:5,name:"Completed",index:5}]}ngAfterViewInitMore(){}ngAfterViewInit(){return(0,je.A)(function*(){sessionStorage.removeItem("visitId"),sessionStorage.removeItem("clientId")})()}OpenCamera(){var t=this;return(0,je.A)(function*(){t.showCamera=!0,t.openCamera=!0,t.activeTab=1,yield t.setupDevices()})()}setupDevices(){var t=this;return(0,je.A)(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const n=yield navigator.mediaDevices.getUserMedia({video:!0});n?(t.video.nativeElement.srcObject=n,t.video.nativeElement.play(),t.error=null):t.error="You have no output video device"}catch(n){t.error=n}})()}getLookups(){this.getCancelReasons(),this.getVisitActions(),this.getPaymentTypes(),this.getCategory(),this.GetBySevice()}getCategory(){this.visitCategoryService.GetSeviceCategory().subscribe(t=>{this.categories=t.data})}getDetails(){this.baseService.GetVisitView(this.visitId).subscribe(t=>{this.visit=t.data,30==this.visit.status&&(this.currentStep=this.steps.length),this.visit.path&&(this.visitUrl=this.serverPath+this.visit.path),3==this.visitPlan&&this.fullStep(),console.log(this.visit)},t=>{this.alertService.error()})}routeDataConfig(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.visit=t.data.data,this.visitId=this.visit.id,30==this.visit.status&&(this.currentStep=this.steps.length),this.visit.path&&(this.visitUrl=this.serverPath+this.visit.path),this.visit.isRaf&&this.fullStep(),this.getLookups()},t=>{this.alertService.error()})}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:t=>{this.paymentMethods=t.data}})}GetBySevice(){this.visitCategoryService.GetBySevice(this.visitId).subscribe({next:t=>{this.visitCategories??=[];let n=t.data;n.length>0&&n.forEach(i=>{i.path=this.serverPath+i.path}),this.visitCategories=n}})}getRibbonStatus(t){return 10==t?"ribbon-warning":20==t?"ribbon-info":30==t?"ribbon-success":40==t?"ribbon-danger":"ribbon-warning"}getBgStatus(t){return 10==t?"bg-warning":20==t?"bg-info":30==t?"bg-success":40==t?"bg-danger":"bg-warning"}goToPreviousStep(){this.currentStep>1&&(3==this.currentStep&&2==this.threeShot?this.currentStep=1:this.currentStep--)}goToNextStep(){if(!(this.currentStep>=this.totalSteps)){if(2==this.currentStep&&this.visit.isRaf&&this.visitCategories.length<=0)return void this.alertService.error("sales.startVisits.mustTakeCategoryImage");this.incrementNext()}}incrementNext(){1==this.currentStep&&2==this.threeShot?this.currentStep=3:this.currentStep+=1}getCancelReasons(){this.cancelReasonsService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{this.alertService.error()})}cancelVisit(){this.baseService.cancelVisit(this.form).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.getDetails(),this.alertService.success(),this.form={}):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}setNegativeVisit(){this.baseService.setNegativeVisit(this.visitId).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.getDetails(),this.alertService.success()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}setPositiveVisit(){this.baseService.setPositiveVisit(this.visitId).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.getDetails(),this.alertService.success()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}endVisit(){let t={id:this.visitId,status:30};this.ngxLoader.startLoader(f.ZW),this.baseService.changeVisitStatus(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(n=>(0,Q.$)(n))).subscribe({next:n=>{this.getDetails(),this.currentStep=this.steps.length,this.modalService.dismissAll(),this.router.navigate([`/sales/startVisits/${this.visit.id}`])},error:n=>{this.alertService.error()}})}goVisits(){this.router.navigateByUrl("/sales/visits")}getVisitActions(){this.baseService.getVisitActions(this.visitId).subscribe(t=>{this.actions=t.data},t=>{this.alertService.error()})}goRequest(){sessionStorage.setItem("visitId",this.visitId),sessionStorage.setItem("clientId",this.visit.clientId),this.router.navigateByUrl("/sales/new")}onFileChangedMain(t){if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let i=0;i<n;i++){let r=new FileReader;this.form.image=t.target.files.item(i),r.onload=o=>{this.image={isApi:!1,path:o.target.result}},r.readAsDataURL(t.target.files[i]),console.log(this.image)}}}removeMainImage(){this.form.image="",this.image={isApi:!1,path:""}}OnSubmitCollection(){this.form.cost<=0?this.alertService.error("sales.clientCollection.costLargeZero"):(this.ngxLoader.startLoader(this.operationLoader),this.registerCollection())}registerCollection(){if(!this.validAttachment())return;let n=this.mapRegisterForm(this.form);this.clientCollectionService.register(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(i=>(0,Q.$)(i))).subscribe(i=>{i.success?(this.getVisitActions(),this.submitFunished()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}validAttachment(){return!!(2!==this.form.paymentTypeId&&3!==this.form.paymentTypeId||this.form.image||this.form.path)||(this.ngxLoader.stopLoader(this.operationLoader),this.alertService.error("sales.clientCollection.mustEnterReceipt"),!1)}mapRegisterForm(t){let n={...t};return n.id=0,n.visitId=this.visitId,n.clientId=this.visit.clientId,this._formDataService.formatFormData(n)}capture(){this.showCamera=!1,this.isCaptured=!0,this.activeTab=2,this.drawImageToCanvas(this.video.nativeElement);const t=this.canvas.nativeElement.toDataURL("image/png");this.visitImage=this.dataURLtoFile(t,"snapshot.png"),this.visitUrl=URL.createObjectURL(this.visitImage),this.closeCamera()}drawImageToCanvas(t){const n=this.canvas.nativeElement.getContext("2d");n&&n.drawImage(t,0,0,this.WIDTH,this.HEIGHT)}close(){this.closeCamera(),this.modalService.dismissAll()}closeCamera(){const t=this.video?.nativeElement?.srcObject;t&&(t.getTracks().forEach(n=>n.stop()),this.video.nativeElement.srcObject=null)}dataURLtoFile(t,n){const i=t.split(","),r=i[0].match(/:(.*?);/)?.[1]||"",o=atob(i[1]);let l=o.length;const c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);return new File([c],n,{type:r})}saveImage(){let n=this._formDataService.formatFormData({visitId:this.visitId,file:this.visitImage});this.ngxLoader.startLoader(this.operationLoader),this.baseService.addVisitFile(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(i=>(0,Q.$)(i))).subscribe(i=>{i.success?(this.visitUrl=this.serverPath+i.data,this.visit.path=i.data,this.openCamera=!1,this.showCamera=!1,this.modalService.dismissAll()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}openCameraModel(t,n="md"){this.closeCamera(),this.isEditForm=!1,this.form={},this.showCamera=!1,this.openCamera=!1,this.isCaptured=!1,this.activeTab=2,this.modalService.open(t,{centered:!0,size:n})}addCategory(){this.visitCategories??=[];const t=this.form.category;!t?.id||!t?.name||this.visitCategories.some(i=>i.serviceCategoryId===t.id)||this.visitCategories.push({serviceCategoryId:t.id,categoryName:t.name,visitId:this.visitId,path:"",file:"",id:0})}onTakePhoto(t,n){this.visitCategories[n].path=t.path,this.visitCategories[n].file=t.file}saveServiceCategory(){if(this.visitCategories.filter(i=>i.id<=0&&!i.file).length>0)return void this.alertService.error("sales.startVisits.mustUploadFiles");const n=new FormData;this.visitCategories.forEach((i,r)=>{n.append(`visitCategories[${r}].serviceCategoryId`,i.serviceCategoryId),n.append(`visitCategories[${r}].visitId`,i.visitId),n.append(`visitCategories[${r}].id`,i.id),i.file&&n.append(`visitCategories[${r}].file`,i.file)}),this.ngxLoader.startLoader(this.operationLoader),this.visitCategoryService.register(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,H.W)(i=>(0,Q.$)(i))).subscribe(i=>{i.success?this.GetBySevice():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}goNewClient(){let t=this.paramsEncryptionService.encrypt(JSON.stringify(this.visitId),"visitId");this.router.navigateByUrl(`/approvals/request-new-customer?visitId=${t}`)}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix),e.rXU(w.nX),e.rXU(b.c$),e.rXU(Oe),e.rXU(at),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(rt.z),e.rXU(ot.F),e.rXU(wu.j),e.rXU(Mu),e.rXU(pi.h),e.rXU(we.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-StartVisits"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Bu,5),e.GBs(Au,5)),2&n){let r;e.mGM(r=e.lsd())&&(i.video=r.first),e.mGM(r=e.lsd())&&(i.canvas=r.first)}},features:[e.Vt3],decls:29,vars:13,consts:[["cancelOperation",""],["operationCollection",""],["operationImage",""],["FinishVisitModal",""],["cancelForm","ngForm"],["cancelReasonId","ngModel"],["formEntity","ngForm"],["FileInputMain",""],["paymentTypeId","ngModel"],["cost","ngModel"],["depositNumber","ngModel"],["notes","ngModel"],["canvas",""],["nav","ngbNav"],["video",""],[1,"d-flex","justify-content-center","mt-2","align-items-center"],[1,"container","col-md-10","col-lg-8","mt-5","card",3,"ngStyle"],[1,"card-body"],[1,"cursor-pointer",3,"click"],[1,"ri-arrow-right-circle-fill","fs-4"],["translate","sales.startVisits.customerVisit",1,"h4","my-4","text-start","me-1"],[1,"d-flex","justify-content-center","p-2","rounded","mb-4"],[1,"d-flex","justify-content-between","w-75"],["class","text-center",4,"ngFor","ngForOf"],[2,"min-height","35vh"],[4,"ngIf"],[1,"d-flex","justify-content-around","my-1"],["class","d-flex justify-content-around",4,"ngIf"],["class","btn btn-primary","translate","sales.startVisits.next",3,"click",4,"ngIf"],[1,"text-center"],[1,"badge","rounded-circle","border","p-3","fw-bolder",3,"ngClass"],[1,"text-dark","fw-bolder","mt-1"],[1,"card","shadow-sm","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[3,"translate"],[1,"d-flex","justify-content-between","align-items-start"],[1,"text-muted"],[1,"mt-3","text-muted","small"],[1,"ri-map-pin-2-line","me-1","text-primary"],[1,"ri-alarm-warning-line","me-1","text-primary"],[1,"ri-phone-line","me-1","text-primary"],[1,"mt-3","small","text-muted"],[1,"ri-calendar-line","me-1"],[2,"width","10px","height","10px"],[4,"ngFor","ngForOf"],[1,"badge","badge-pill","bg-primary","mx-1"],[1,"card","p-1","text-center","text-muted","mb-1"],[1,"card","p-1"],[1,"row","align-items-center","justify-content-center"],[1,"col-12","col-md-5"],["translate","sales.startVisits.shelfAudit",1,"fw-bold","fs-2"],["translate","sales.startVisits.category",1,"text-muted"],[1,"col-12","col-md-3"],[1,"search-box"],["name","categoryId","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-4","col-md-2","mt-1"],[1,"btn","btn-dark","flex-fill","mx-1",3,"click"],[1,"ri-add-circle-fill","me-1"],["translate","general.action.add"],[1,"btn","btn-success","flex-fill","mx-1",3,"click"],[1,"ri-check-double-fill","me-1"],["translate","general.action.save"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center","border","rounded","p-2","mb-2"],[1,"mb-0","fw-bold"],[3,"onSave","path"],[1,"mb-4","py-4","border-bottom"],["translate","sales.startVisits.visitActions",1,"card-title","fw-bold"],[1,"d-flex","flex-wrap","gap-2"],["type","button","class","btn btn-md   ",3,"ngClass","click",4,"ngIf"],["type","button","class","btn btn-md  ",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-md",3,"click","ngClass"],["translate","sales.visits.orderCount"],[1,"badge","bg-danger","ms-1"],["translate","sales.visits.collectionCount"],["translate","approvals.customerRequest.title"],["class","bg-success ribbon round-shape",3,"top",4,"ngIf"],["class","bg-danger ribbon round-shape",3,"top",4,"ngIf"],[1,"mt-2","text-muted"],[1,"ri-user-search-fill","me-1","text-primary"],[1,"pt-3","border-top","border-top-dashed","mt-4"],[1,"row","gy-3"],[1,"bg-success","ribbon","round-shape"],[1,"bg-danger","ribbon","round-shape"],[1,"mt-1","badge","badge-pill","bg-primary","py-2","px-3","mx-1"],["class","col-lg-3 col-sm-6",4,"ngIf"],[1,"col-lg-3","col-sm-6"],["translate","sales.visits.orderCount",1,"mb-2","text-uppercase","fw-medium"],[1,"badge","bg-danger","fs-12"],["translate","sales.visits.collectionCount",1,"mb-2","text-uppercase","fw-medium"],["translate","sales.startVisits.clientCount",1,"mb-2","text-uppercase","fw-medium"],[1,"container","d-flex","justify-content-center","align-items-center"],[1,"text-center","py-5"],[1,"mb-4"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","sales.startVisits.visitSaveSuccess"],[1,"fw-semibold"],["routerLink","/sales/visits","translate","sales.startVisits.backToVisits",1,"btn","btn-primary","mt-3","px-5","py-2","rounded-pill","shadow"],[1,"d-flex","justify-content-around"],["class","btn btn-primary me-2","translate","sales.startVisits.back",3,"disabled","click",4,"ngIf"],["translate","sales.startVisits.back",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"ms-2",3,"ngClass"],["translate","sales.startVisits.next",1,"btn","btn-primary",3,"click"],[1,"mx-2",3,"ngClass"],["class","btn btn-success   ","translate","sales.startVisits.endVisit",3,"click",4,"ngIf"],["translate","sales.startVisits.endVisit",1,"btn","btn-success",3,"click"],["class","btn btn-primary py-2 px-3 me-1","translate","sales.startVisits.endVisit",3,"click",4,"ngIf"],["class","btn btn-outline-danger","translate","sales.startVisits.cancelVisit",3,"click",4,"ngIf"],["translate","sales.startVisits.endVisit",1,"btn","btn-primary","py-2","px-3","me-1",3,"click"],["translate","sales.startVisits.cancelVisit",1,"btn","btn-outline-danger",3,"click"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-light"],["translate","sales.mangevisits.cancelVisit",1,"card-title","mb-0","fw-bold","fs-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],["translate","sales.mangevisits.reasonForCancellation",1,"form-label","required"],["name","cancelReasonId","bindLabel","name","bindValue","id","required","",3,"ngModelChange","clearable","items","placeholder","ngModel"],["class","text-danger","translate","",4,"ngIf"],["translate","sales.mangevisits.additionalNotes",1,"form-label"],["rows","3","name","note",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","justify-content-end","gap-2"],["type","submit","translate","sales.mangevisits.confirmCancellation",1,"btn","btn-success",3,"disabled"],["type","button","translate","general.action.close",1,"btn","btn-primary",3,"click"],["translate","",1,"text-danger"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex"],[1,"avatar-lg","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                          border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img2","alt","",1,"avatar-md","h-auto",3,"src"],["translate","",1,"required","fw-bold","form-label","w-100"],["clearable","false","name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","number","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","depositNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","depositNumber","type","text","id","depositNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],["translate","",1,"text-danger","text-center"],["translate","sales.startVisits.takeImage"],[2,"display","none",3,"width","height"],["ngbNav","",1,"nav","nav-tabs","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"d-flex","justify-content-center","p-1"],["type","button","class","btn btn-success","translate","general.action.save",3,"click",4,"ngIf"],["type","button","class","btn btn-warning mx-1","translate","general.action.take",3,"click",4,"ngIf"],["type","button","translate","general.action.openCamera",1,"btn","btn-primary","mx-1",3,"click"],["type","button","translate","general.action.close",1,"btn","btn-danger",3,"click"],[1,"video-container"],["id","video","autoplay","",3,"height",4,"ngIf"],["id","video","autoplay","",3,"height"],[1,"img-thumbnail",3,"src","height"],["type","button","translate","general.action.save",1,"btn","btn-success",3,"click"],["type","button","translate","general.action.take",1,"btn","btn-warning","mx-1",3,"click"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.finish",1,"btn","w-sm","btn-success","fs-6"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-6",3,"click"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goVisits())}),e.nrm(4,"i",19)(5,"span",20),e.k0s(),e.j41(6,"div",21)(7,"div",22),e.DNE(8,Hu,6,8,"div",23),e.k0s()(),e.j41(9,"div",24),e.DNE(10,Wu,29,17,"div",25)(11,Zu,20,7,"div",25)(12,ng,5,1,"div",25)(13,mg,37,21,"div",25)(14,pg,8,0,"div",25),e.k0s(),e.j41(15,"div",26),e.DNE(16,gg,2,1,"div",27),e.j41(17,"div"),e.DNE(18,hg,2,1,"button",28)(19,fg,2,1,"ng-container",25),e.k0s(),e.DNE(20,xg,3,2,"div",25),e.k0s()()()(),e.DNE(21,Cg,22,15,"ng-template",null,0,e.C5r)(23,Tg,52,14,"ng-template",null,1,e.C5r)(25,Og,22,11,"ng-template",null,2,e.C5r)(27,Vg,15,3,"ng-template",null,3,e.C5r)}2&n&&(e.R7$(),e.Y8G("ngStyle",e.eq3(11,Xu,10===i.visit.type?"2px solid #82c682":20===i.visit.type?"2px solid #F06548":"none")),e.R7$(7),e.Y8G("ngForOf",i.steps),e.R7$(2),e.Y8G("ngIf",1===i.currentStep),e.R7$(),e.Y8G("ngIf",2===i.currentStep&&3==i.threeShot),e.R7$(),e.Y8G("ngIf",3===i.currentStep),e.R7$(),e.Y8G("ngIf",4===i.currentStep),e.R7$(),e.Y8G("ngIf",5===i.currentStep),e.R7$(2),e.Y8G("ngIf",1!=i.currentStep),e.R7$(2),e.Y8G("ngIf",i.currentStep!==(2==i.threeShot?i.steps.length+1-1:i.steps.length-1)),e.R7$(),e.Y8G("ngIf",20===i.visit.status),e.R7$(),e.Y8G("ngIf",!1))},dependencies:[m.YU,m.Sq,m.bT,m.B3,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.Um,_.X9,_.sy,_.Gx,_.m_,w.Wk,$u,b.Mm,R.Cv,$.vr,_.md,X.m,m.vh,b.D9],styles:[".video-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:640px;margin:auto}video[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;border:1px solid #ccc}img.img-thumbnail[_ngcontent-%COMP%]{max-width:100%;height:auto;margin-top:1rem;border:1px solid #ccc;border-radius:8px}"]})}}return a})();var Dg=u(12813),Ng=u(90094);const Lg=()=>["CrmCompanyClient.register"],Pg=a=>({"bg-danger text-white":a});function Gg(a,s){1&a&&(e.j41(0,"tr",138)(1,"th",139),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",140),e.nrm(4,"i",141),e.EFF(5," client.client.odooId "),e.k0s(),e.j41(6,"th",142),e.nrm(7,"i",141),e.EFF(8," general.table.name "),e.k0s(),e.j41(9,"th",143),e.nrm(10,"i",141),e.EFF(11," client.client.cityName "),e.k0s(),e.j41(12,"th",144),e.EFF(13," client.client.priceListName "),e.k0s(),e.j41(14,"th",145),e.nrm(15,"i",141),e.EFF(16," client.client.clientGroupName "),e.k0s(),e.j41(17,"th",146),e.nrm(18,"i",141),e.EFF(19," client.client.CreditLimit "),e.k0s(),e.j41(20,"th",147),e.nrm(21,"i",141),e.EFF(22," client.client.vatNumber "),e.k0s(),e.j41(23,"th",148),e.nrm(24,"i",141),e.EFF(25," client.client.commercialRegistrationNumber "),e.k0s()())}function $g(a,s){if(1&a&&(e.nrm(0,"i",156),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",157),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,5,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," ")}}function Bg(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",149)(1,"td",150),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",151),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(2),o=e.sdS(276);return e.Njj(r.openModal(i.agentCode,o,"md"))}),e.nrm(6,"i",152),e.j41(7,"a",153),e.EFF(8),e.k0s(),e.DNE(9,$g,8,8,"ng-template",null,2,e.C5r),e.k0s(),e.j41(11,"td")(12,"a",154),e.EFF(13),e.k0s()(),e.j41(14,"td")(15,"span",155),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(10),r=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(17,Pg,!t.isComplete)),e.R7$(),e.JRh(n+1),e.R7$(2),e.JRh(t.odooId),e.R7$(2),e.Y8G("ngbTooltip",i),e.R7$(2),e.SpI(" ",t.agentName," "),e.R7$(4),e.AVh("text-success",t.lng)("text-danger",!t.lng),e.Y8G("href",r.mapUrl(t.lat,t.lng),e.B4B),e.R7$(),e.SpI(" ",t.cityName," "),e.R7$(3),e.Lme(" ",2==t.discountType?"%":""," ",t.discount,""),e.R7$(2),e.JRh(t.clientGroupName),e.R7$(2),e.JRh(t.creditLimit),e.R7$(2),e.JRh(t.vatNumber),e.R7$(2),e.JRh(t.commercialRegistrationNumber)}}function Ag(a,s){1&a&&(e.j41(0,"div",158),e.EFF(1," general.table.noData "),e.k0s())}function Xg(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",159)(1,"div",160),e.nrm(2,"ngb-pagination-info",161),e.j41(3,"table-length",162),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",163)(5,"ngb-pagination",164),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Yg(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",69)(1,"div",115)(2,"div",116)(3,"base-filter",117),e.bIt("reset",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onReset())})("search",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())})("exportXlsx",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onExportXlsx())}),e.qex(4,118),e.j41(5,"div",119)(6,"div",120)(7,"input",121),e.nI1(8,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.filterValue,i)||(r.pagination.filterValue=i),e.Njj(i)}),e.k0s(),e.nrm(9,"i",122),e.k0s()(),e.j41(10,"div",119)(11,"div",120)(12,"input",123),e.nI1(13,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.mobile,i)||(r.pagination.mobile=i),e.Njj(i)}),e.k0s()()(),e.j41(14,"div",119)(15,"div",120)(16,"ng-select",124),e.nI1(17,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.regionId,i)||(r.pagination.regionId=i),e.Njj(i)}),e.k0s()()(),e.j41(18,"div",119)(19,"div",120)(20,"ng-select",125),e.nI1(21,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.cityCode,i)||(r.pagination.cityCode=i),e.Njj(i)}),e.k0s()()(),e.j41(22,"div",119)(23,"div",120)(24,"ng-select",126),e.nI1(25,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.clientGroupId,i)||(r.pagination.clientGroupId=i),e.Njj(i)}),e.k0s()()(),e.j41(26,"div",119)(27,"div",120)(28,"input",127),e.nI1(29,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.creditLimit,i)||(r.pagination.creditLimit=i),e.Njj(i)}),e.k0s()()(),e.j41(30,"div",119)(31,"div",120)(32,"input",128),e.nI1(33,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.vatNumber,i)||(r.pagination.vatNumber=i),e.Njj(i)}),e.k0s()()(),e.j41(34,"div",119)(35,"div",120)(36,"input",129),e.nI1(37,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.commercialRegistrationNumber,i)||(r.pagination.commercialRegistrationNumber=i),e.Njj(i)}),e.k0s()()(),e.j41(38,"div",119)(39,"div",120)(40,"ng-select",130),e.nI1(41,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.active,i)||(r.pagination.active=i),e.Njj(i)}),e.k0s()()(),e.j41(42,"div",119)(43,"div",120)(44,"ng-select",130),e.nI1(45,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.clientCategory,i)||(r.pagination.clientCategory=i),e.Njj(i)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(46,"div",13),e.nrm(47,"ngx-ui-loader",131),e.j41(48,"div",132)(49,"p-table",133,1),e.bIt("onLazyLoad",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.tableChange(i))})("selectionChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onSelectionChange(i))}),e.DNE(51,Gg,26,0,"ng-template",134)(52,Bg,25,19,"ng-template",135),e.k0s()(),e.DNE(53,Ag,2,0,"div",136)(54,Xg,6,8,"div",137),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.Y8G("addPermission",e.lJ4(65,Lg))("showAdd",!1)("totalItems",t.pagination.totalItems)("title",t.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,45,"task.tasklist.subject")),e.R50("ngModel",t.pagination.filterValue),e.R7$(5),e.FS9("placeholder",e.bMT(13,47,"client.client.mobile")),e.R50("ngModel",t.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(17,49,"client.client.regionName")),e.Y8G("items",t.regions)("multiple",!1),e.R50("ngModel",t.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(21,51,"client.client.cityName")),e.Y8G("items",t.cities)("multiple",!1),e.R50("ngModel",t.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(25,53,"client.client.clientGroupName")),e.Y8G("items",t.clientGroups)("multiple",!1),e.R50("ngModel",t.pagination.clientGroupId),e.R7$(4),e.FS9("placeholder",e.bMT(29,55,"client.client.CreditLimit")),e.R50("ngModel",t.pagination.creditLimit),e.R7$(4),e.FS9("placeholder",e.bMT(33,57,"client.client.vatNumber")),e.R50("ngModel",t.pagination.vatNumber),e.R7$(4),e.FS9("placeholder",e.bMT(37,59,"client.client.commercialRegistrationNumber")),e.R50("ngModel",t.pagination.commercialRegistrationNumber),e.R7$(4),e.FS9("placeholder",e.bMT(41,61,"general.table.isActiveNew")),e.FS9("bindLabel","en"==t.lang?"name":"nameAr"),e.Y8G("items",t.activeListNew)("multiple",!1),e.R50("ngModel",t.pagination.active),e.R7$(4),e.FS9("placeholder",e.bMT(45,63,"general.table.isActive")),e.FS9("bindLabel","en"==t.lang?"name":"nameAr"),e.Y8G("items",t.activeClient)("multiple",!1),e.R50("ngModel",t.pagination.clientCategory),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderSearchShap)("loaderId",t.searchLoader),e.R7$(2),e.Y8G("value",t.entities)("rows",t.pagination.pageSize)("lazy",!0)("totalRecords",t.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",t.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",t.pagination.totalItems>0)}}function zg(a,s){if(1&a&&(e.j41(0,"div",165)(1,"div",166)(2,"h6",167),e.EFF(3),e.k0s(),e.j41(4,"small"),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"div",168)(8,"small",169),e.EFF(9),e.nI1(10,"date"),e.k0s()()()),2&a){const t=s.$implicit;e.R7$(3),e.JRh(t.name),e.R7$(2),e.Lme("",t.net," ",e.bMT(6,4,"general.table.currancy")," "),e.R7$(4),e.JRh(e.i5U(10,6,t.dueDate,"yyyy-MM-dd"))}}function Ug(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",170)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span",171),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goInvoice())}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI("+",t.totalCountInvoice-4,"")}}function qg(a,s){1&a&&(e.j41(0,"div",104),e.nrm(1,"h5",172),e.j41(2,"div",132)(3,"table",173)(4,"thead")(5,"tr"),e.nrm(6,"th",174)(7,"th",175)(8,"th",176)(9,"th",177)(10,"th"),e.k0s()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.nrm(14,"i",178),e.EFF(15," Al Faisal Trading Co. "),e.k0s(),e.j41(16,"td"),e.nrm(17,"span",179),e.k0s(),e.j41(18,"td"),e.nrm(19,"span",179),e.k0s(),e.j41(20,"td"),e.nrm(21,"i",180),e.EFF(22," Riyadh, Main Office"),e.k0s(),e.j41(23,"td"),e.nrm(24,"i",181),e.EFF(25," Today, 2:00 PM"),e.k0s(),e.j41(26,"td",182),e.nrm(27,"i",183),e.k0s()(),e.j41(28,"tr")(29,"td"),e.nrm(30,"i",178),e.EFF(31," Najm Electronics"),e.k0s(),e.j41(32,"td")(33,"span",184),e.EFF(34,"Collection"),e.k0s()(),e.j41(35,"td"),e.nrm(36,"i",180),e.EFF(37," Jeddah, Branch #2"),e.k0s(),e.j41(38,"td"),e.nrm(39,"i",181),e.EFF(40," Today, 4:30 PM"),e.k0s(),e.j41(41,"td"),e.nrm(42,"i",178),e.EFF(43," Najm Electronics "),e.k0s(),e.j41(44,"td"),e.nrm(45,"span",185),e.k0s(),e.j41(46,"td"),e.nrm(47,"i",180),e.EFF(48," Jeddah, Branch #2 "),e.k0s(),e.j41(49,"td"),e.nrm(50,"i",181),e.EFF(51," Today, 4:30 PM "),e.k0s(),e.j41(52,"td",182),e.nrm(53,"i",183),e.k0s()(),e.j41(54,"tr")(55,"td"),e.nrm(56,"i",178),e.EFF(57," Al Jazeera Supplies"),e.k0s(),e.j41(58,"td")(59,"span",186),e.EFF(60,"Follow-up"),e.k0s()(),e.j41(61,"td"),e.nrm(62,"i",180),e.EFF(63," Dammam, Warehouse"),e.k0s(),e.j41(64,"td"),e.nrm(65,"i",181),e.EFF(66," Tomorrow, 10:00 AM"),e.k0s(),e.j41(67,"td"),e.nrm(68,"i",178),e.EFF(69," Al Jazeera Supplies "),e.k0s(),e.j41(70,"td"),e.nrm(71,"span",187),e.k0s(),e.j41(72,"td"),e.nrm(73,"i",180),e.EFF(74," Dammam, Warehouse "),e.k0s(),e.j41(75,"td"),e.nrm(76,"i",181),e.EFF(77," Tomorrow, 10:00 AM "),e.k0s(),e.j41(78,"td",182),e.nrm(79,"i",183),e.k0s()()()()()())}function Hg(a,s){1&a&&(e.j41(0,"div",188)(1,"div",189)(2,"h5",190)(3,"span",191),e.EFF(4,"4"),e.k0s()(),e.nrm(5,"a",192),e.k0s(),e.j41(6,"div",193)(7,"div",194)(8,"span",195),e.nrm(9,"i",196),e.k0s(),e.j41(10,"div",19),e.nrm(11,"strong",197)(12,"span",198)(13,"br"),e.j41(14,"small",199),e.EFF(15,"2 hours ago"),e.k0s()(),e.nrm(16,"a",200),e.k0s()(),e.j41(17,"div",193)(18,"div",201)(19,"span",202),e.nrm(20,"i",203),e.k0s(),e.j41(21,"div",19),e.nrm(22,"strong",204)(23,"span",205)(24,"br")(25,"small",206),e.k0s(),e.j41(26,"a",207),e.EFF(27,"Mark as read"),e.k0s()()(),e.j41(28,"div",193)(29,"div",194)(30,"span",208),e.nrm(31,"i",209),e.k0s(),e.j41(32,"div",19),e.nrm(33,"strong",210),e.j41(34,"span",211),e.EFF(35,"Najm Electronics payment of 15,000 SAR is due tomorrow"),e.k0s(),e.nrm(36,"br"),e.j41(37,"small",212),e.EFF(38,"5 hours ago"),e.k0s()(),e.nrm(39,"a",200),e.k0s()(),e.j41(40,"div",213),e.nrm(41,"a",214),e.k0s()())}function Qg(a,s){1&a&&(e.j41(0,"div",188),e.nrm(1,"h5",215),e.j41(2,"div",193)(3,"div",194)(4,"span",216),e.nrm(5,"i",217),e.k0s(),e.j41(6,"div",19),e.nrm(7,"strong",218)(8,"span",219)(9,"br"),e.j41(10,"small",212),e.EFF(11,"Today, 11:30 AM"),e.k0s()()()(),e.j41(12,"div",193)(13,"div",194)(14,"span",220),e.nrm(15,"i",221),e.k0s(),e.j41(16,"div",19),e.nrm(17,"strong",222),e.j41(18,"span",211),e.EFF(19,"Order #5782 - 12,500 SAR"),e.k0s(),e.nrm(20,"br"),e.j41(21,"small",212),e.EFF(22,"Today, 10:15 AM"),e.k0s()()()(),e.j41(23,"div",193)(24,"div",194)(25,"span",216),e.nrm(26,"i",223),e.k0s(),e.j41(27,"div",19),e.nrm(28,"strong",224)(29,"span",225)(30,"br")(31,"small",226),e.k0s()()()())}function Wg(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",227),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let Jg=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I){super(r,o,x,l,c,h,g),this.salesManReportService=t,this.router=n,this.paramsEncryptionService=i,this.routerActive=r,this.baseService=l,this.excelService=C,this.encrptAervice=I,this.title="client.clientCompany.title",this.targetSales={},this.statusClient={},this.targetCollection={},this.visitCount={},this.invoices={},this.customer={},this.totalCountInvoice=0,this.activeListNew=[{id:1,name:"Active",nameAr:"\u0645\u0641\u0639\u0644"},{id:2,name:"Not Active",nameAr:"\u063a\u064a\u0631 \u0645\u0641\u0639\u0644"}],this.activeClient=[{id:null,name:"All",nameAr:"\u0627\u0644\u0643\u0644"},{id:1,name:"Active",nameAr:"\u0646\u0634\u0637"},{id:2,name:"No Active",nameAr:"\u063a\u064a\u0631 \u0646\u0634\u0637"},{id:3,name:"New",nameAr:"\u062c\u062f\u064a\u062f"}],this.clientGroups=[],this.regions=[],this.sales=[],this.priceList=[],this.cities={},this.searchForm={},this.pagination={pageNumber:1,pageSize:10,employeeIds:[]},this.controlDate=(y,j,F)=>{if(y?.from||y?.to){const N=y.to||y.from;this.pagination[j]=this.datePipe.transform(y.from||y.to,"yyyy-MM-ddT00:00:00"),this.pagination[F]=this.datePipe.transform(N,"yyyy-MM-ddT23:59:59.999")}else{const O=new Date,N=new Date;N.setDate(O.getDate()-30),this.pagination[j]=this.datePipe.transform(N,"yyyy-MM-dd"),this.pagination[F]=this.datePipe.transform(O,"yyyy-MM-dd")}}}ngOnInitMore(){this.setDefaultDate(),this.controlDate(this.dates,"dateFrom","dateTo"),this.GetTargetSales(),this.GetStatusClient(),this.GetTargetCollection(),this.GetVisitCount(),this.GetInvoiceDue(),this.GetNewCustomerTarget(),this.GetAgentLookUps()}GetAgentLookUps(){this.baseService.CustomerCompanyLookUps().subscribe(t=>{this.regions=t.data.regions,this.cities=t.data.cities,this.clientGroups=t.data.clientGroups,this.sales=t.data.employees,this.clientGroups=t.data.clientGroups,this.priceList=t.data.priceList},t=>{console.log(t)})}GetTargetSales(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetTargetSales(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{this.targetSales=t.data},t=>{this.alertService.error("general.message."+t)})}GetTargetCollection(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetTargetCollection(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{this.targetCollection=t.data},t=>{this.alertService.error("general.message."+t)})}GetStatusClient(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetStatusClient(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{this.statusClient=t.data},t=>{this.alertService.error("general.message."+t)})}GetVisitCount(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetVisitCount(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{this.visitCount=t.data},t=>{this.alertService.error("general.message."+t)})}GetInvoiceDue(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetInvoiceDue(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{let n=t.data;this.invoices=n,t.data.invoices.length>0&&t.data.invoices.length>3?(this.totalCountInvoice=t.data.invoices.length,this.invoices.invoices=[t.data.invoices[0],t.data.invoices[1],t.data.invoices[2],t.data.invoices[3]]):this.invoices=n},t=>{this.alertService.error("general.message."+t)})}GetNewCustomerTarget(){this.ngxLoader.startLoader("assignLoader"),this.salesManReportService.GetNewCustomerTarget(this.pagination).pipe((0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(t=>{this.customer=t.data},t=>{this.alertService.error("general.message."+t)})}goInvoice(){this.router.navigateByUrl("/sales/sales-invoices")}goClient(t){let n="/crm/my-clients?clientCategory";null!=t&&(n=n+"="+t),this.router.navigateByUrl(n)}mapUrl(t,n){return`https://www.google.com/maps/dir//${t},${n}/@${t},${n},17z?hl=en-US`}loadentities(){this.pagination.clientType=1,this.baseService.GetAgentDashboardAll(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({Ref_ID:n.odooId,name:n.agentName,mobile:n.mobile,City_Name:n.cityName,discount:n.discount,National_Address:n.nationalAddress,client_Group_Name:n.clientGroupName,Credit_Limit:n.creditLimit,Vat_Number:n.vatNumber,Commercial_Registration_Number:n.commercialRegistrationNumber,IsActive:this.getTranslationText("general.table.active")})}),t}onSearch(){this.ngxLoader.startLoader(f.a7),this.pagination.isActive=1==this.pagination.active||2!=this.pagination.active&&null,this.loadentities()}setCurrentMonthRange(){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());this.searchForm.dates={from:n,to:i}}goVisit(t){this.router.navigateByUrl("/sales/visits?status="+t)}setDefaultDate(){let t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);this.dates={from:n,to:i}}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Dg.G),e.rXU(w.Ix),e.rXU(pi.h),e.rXU(w.nX),e.rXU(b.c$),e.rXU(ve.X),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(Ng._))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-DashboardSalesRep"]],features:[e.Vt3],decls:277,vars:103,consts:[["ClientInfo",""],["tableMaster",""],["tooltipContent",""],[1,"row","justify-content-between"],[1,"col-12","col-md-4","mb-3"],[1,"card","shadow-sm","card-animate","rounded-4","mb-4","border-0","h-100"],[1,"card-header","login-modal","rounded-top-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"ri-funds-line","fs-4","text-white","me-2"],["translate","sales.dashboardSalesRep.monthlySalesTarget",1,"mb-0","text-white"],[1,"text-success","fw-semibold","d-flex","align-items-center","small"],[1,"bx","bxs-up-arrow-alt","me-1","bx-sm","text-success"],[1,"card-body"],[1,"position-relative","me-4"],["width","100%","height","100%","viewBox","0 0 36 36",1,"circular-chart"],["d","M18 2.0845\n             a 15.9155 15.9155 0 0 1 0 31.831\n             a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#eee","stroke-width","2.5",1,"circle-bg"],["d","M18 2.0845\n             a 15.9155 15.9155 0 0 1 0 31.831\n             a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#4f68bb","stroke-width","2.5",1,"circle"],[1,"position-absolute","top-50","start-50","translate-middle","fw-bold","display-6"],[1,"flex-grow-1"],["translate","sales.dashboardSalesRep.monthlyTarget",1,"text-sm","font-medium","text-muted-foreground"],[1,"fw-bold","fs-4","text-primary","d-flex","align-items-center","gap-1"],[1,"bx","bx-target-lock","fs-4","text-primary"],[1,"badge","bg-primary-subtle","text-primary","fw-bold","px-3","py-2"],["translate","sales.dashboardSalesRep.salesAchieved",1,"text-sm","font-medium","text-muted-foreground"],[1,"fw-bold","fs-4","badge","bg-danger"],["translate","sales.dashboardSalesRep.targetTillToday",1,"text-sm","font-medium","text-muted-foreground"],[1,"ff-secondary","fw-bold","fs-5"],["translate","sales.dashboardSalesRep.RemainingToTarget",1,"text-sm","font-medium","text-muted-foreground"],[1,"text-danger","fw-bold","fs-5"],[1,"ri-coins-line","fs-4","text-white","me-2"],["translate","sales.dashboardSalesRep.monthlyCollectionTarget",1,"mb-0","text-white"],["d","M18 2.0845\n             a 15.9155 15.9155 0 0 1 0 31.831\n             a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#299cdb","stroke-width","2.5",1,"circle"],["translate","sales.dashboardSalesRep.collectionAchieved",1,"text-sm","font-medium","text-muted-foreground"],[1,"fw-bold","fs-4","badge","bg-warning"],[1,"text-warning","fw-bold","fs-5"],["translate","sales.dashboardSalesRep.monthlyNewCustomersTarget",1,"mb-0","text-white"],["d","M18 2.0845\n               a 15.9155 15.9155 0 0 1 0 31.831\n               a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#eee","stroke-width","2.5",1,"circle-bg"],["d","M18 2.0845\n               a 15.9155 15.9155 0 0 1 0 31.831\n               a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#0ab39c","stroke-width","2.5",1,"circle"],["translate","sales.dashboardSalesRep.clientAchieved",1,"text-sm","font-medium","text-muted-foreground"],[1,"fw-bold","fs-4","badge","bg-success"],[1,"text-success","fw-bold","fs-5"],[1,"row","mb-4"],[1,"col-12","col-xxl-3","col-sm-3","mb-3","cursor-pointer",3,"click"],[1,"card","card-animate","rounded-4","h-100","border-1","border-black"],[1,"card-body","position-relative"],[1,"position-absolute","top-0","end-0","m-3"],[1,"avatar-sm"],[1,"avatar-title","text-black","rounded-4","fs-5",2,"background-color","#f0f8ff"],[1,"ri-group-fill"],["translate","sales.dashboardSalesRep.allCustomers",1,"fw-medium","text-black","fs-4","mb-1"],[1,"mt-2","ff-secondary","fw-bold","fs-4","text-black"],[1,"card","card-animate","rounded-4","h-100","border-1","border-primary"],["translate","sales.dashboardSalesRep.activeCustomers",1,"fw-medium","text-primary","fs-4","mb-1"],[1,"mt-2","ff-secondary","fw-bold","fs-4","text-primary"],[1,"mb-0","text-muted","small"],[1,"ri-add-fill","text-success"],[1,"text-success"],[1,"card","card-animate","rounded-4","h-100","border-1","border-success"],[1,"avatar-title","text-black","rounded-4","fs-5",2,"background-color","#dfffd6"],["translate","sales.dashboardSalesRep.newCustomers",1,"fw-medium","text-primary","fs-4","mb-1"],[1,"mt-2","ff-secondary","fw-bold","fs-4","text-success"],[1,"card","card-animate","rounded-4","h-100","border-1","border-danger"],[1,"avatar-title","text-black","rounded-4","fs-5",2,"background-color","#ffcccc"],["translate","sales.dashboardSalesRep.inactiveCustomers",1,"fw-medium","text-primary","fs-4","mb-1"],[1,"mt-2","ff-secondary","fw-bold","fs-4","text-danger"],[1,"ri-subtract-line","text-danger"],[1,"text-danger"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-3"],[1,"card","shadow-sm","card-animate","rounded-4","mb-4","border-0"],[1,"ri-service-line","fs-4","text-white","me-2"],["translate","sales.dashboardSalesRep.monthlyVisitTarget",1,"mb-0","text-white"],[1,"text-danger","fw-semibold","d-flex","align-items-center","small"],[1,"bx","bxs-down-arrow-alt","me-1","bx-sm","text-danger"],[1,"col-12"],[1,"mb-4"],[1,"d-flex","justify-content-between","mb-2"],["translate","sales.dashboardSalesRep.progress",1,"progress-text"],[1,"progress-text"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-success"],[1,"row","text-center","mb-4"],[1,"col"],[1,"target-numbers","completed-text"],["translate","sales.dashboardSalesRep.Completed",1,"text-muted","small"],[1,"col-auto","px-0","d-flex","align-items-center"],[1,"divider"],[1,"target-numbers","target-text"],["translate","sales.dashboardSalesRep.Target",1,"text-muted","small"],[1,"remaining-container","text-center"],["translate","sales.dashboardSalesRep.RemainingToTarget",1,"remaining-text","mb-1"],[1,"target-numbers","text-warning","fw-bold","fs-5"],[1,"col-xxl-4","col-sm-4","mb-3",3,"click"],[1,"card","card-animate","rounded-4","h-100","border-1"],[1,"avatar-title","bg-light","text-primary","rounded-4","fs-5"],[1,"ri-calendar-line"],["translate","sales.dashboardSalesRep.scheduledVisits",1,"fw-medium","text-muted","mb-1"],[1,"mt-2","ff-secondary","fw-bold","fs-4"],["translate","sales.dashboardSalesRep.today",1,"mb-0","text-muted","small"],["translate","sales.dashboardSalesRep.completedVisits",1,"fw-medium","text-muted","mb-1"],["translate","sales.dashboardSalesRep.overdueVisits",1,"fw-medium","text-muted","mb-1"],[1,"col-md-6"],[1,"card","p-3"],[1,"d-flex","justify-content-between","mb-3"],["translate","sales.dashboardSalesRep.invoicesDue"],[1,"badge","bg-primary"],[1,"mb-3","fw-bold"],["translate","sales.dashboardSalesRep.totalAmountDue"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["class","text-center mt-2 text-primary",4,"ngIf"],["class","card p-3",4,"ngIf"],["class","card p-3 border-0 shadow-sm",4,"ngIf"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addPermission","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["InputTirmFilter","","type","search","id","creditLimit","name","creditLimit",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","search","id","vatNumber","name","vatNumber",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","search","id","commercialRegistrationNumber","name","commercialRegistrationNumber",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","active","bindValue","id",3,"ngModelChange","items","multiple","placeholder","bindLabel","ngModel"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","odooId","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","agentName","translate","",2,"width","20%"],["pSortableColumn","cityCode","translate","",2,"width","6%"],["translate","",2,"width","5%"],["pSortableColumn","clientGroupId","translate","",2,"width","8%"],["pSortableColumn","creditLimit","translate","",2,"width","10%"],["pSortableColumn","vatNumber","translate","",2,"width","10%"],["pSortableColumn","commercialRegistrationNumber","translate","",2,"width","8%"],[1,"fs-5"],[3,"ngClass"],[3,"click"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["target","_blank",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover",3,"href"],[1,"badge","bg-danger-subtle","text-danger","fs-4","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"list-group-item"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[1,"d-flex","justify-content-end"],[1,"text-muted","ms-2"],[1,"text-center","mt-2","text-primary"],["translate","sales.dashboardSalesRep.more",3,"click"],["translate","sales.dashboardSalesRep.upcomingVisits",1,"mb-3"],[1,"table","table-borderless"],["translate","sales.dashboardSalesRep.customerName"],["translate","sales.dashboardSalesRep.visitType"],["translate","sales.dashboardSalesRep.Location"],["translate","sales.dashboardSalesRep.Time"],[1,"bi","bi-person-circle","me-2"],["translate","sales.dashboardSalesRep.sales",1,"badge","bg-primary"],[1,"bi","bi-geo-alt","me-2"],[1,"bi","bi-calendar-event","me-2"],[1,"text-end"],[1,"bi","bi-three-dots"],[1,"badge","bg-success"],["translate","sales.dashboardSalesRep.collection",1,"badge","bg-success"],[1,"badge","bg-light","text-dark"],["translate","sales.dashboardSalesRep.follow-up",1,"badge","bg-light","text-dark"],[1,"card","p-3","border-0","shadow-sm"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["translate","sales.dashboardSalesRep.notifications",1,"mb-0"],[1,"badge","bg-secondary","rounded-pill"],["href","#","translate","sales.dashboardSalesRep.viewAll",1,"text-primary","small"],[1,"mb-3"],[1,"d-flex","align-items-start","mb-2"],[1,"badge","rounded-circle","border","border-primary","me-2","p-1","d-flex","justify-content-center","align-items-center",2,"width","30px","height","30px","background-color","transparent","color","#c63b3b"],[1,"mdi","mdi-alert-circle-outline"],["translate","sales.dashboardSalesRep.overdueVisit",1,"d-block"],["translate","sales.dashboardSalesRep.yourScheduledVisit",1,"text-muted","small"],["translate","sales.dashboardSalesRep.hourAgo",1,"text-muted"],["href","#","translate","sales.dashboardSalesRep.markAsRead",1,"text-primary","small","ms-2"],[1,"d-flex","align-items-start","mb-2","border-primary"],[1,"badge","rounded-circle","me-2","p-2",2,"background-color","#cce5ff","color","white"],[1,"bx","bxl-snapchat"],["translate","sales.dashboardSalesRep.visitCanceled",1,"d-block"],["translate","sales.dashboardSalesRep.saudiTech",1,"text-muted","small"],["translate","sales.dashboardSalesRep.hoursAgo",1,"text-muted"],["href","#","translate","sales.dashboardSalesRep.saudiTech",1,"text-primary","small","ms-2"],[1,"badge","rounded-circle","me-2","p-2",2,"background-color","#ffcc00","color","white"],[1,"bx","bx-time-five"],["translate","sales.dashboardSalesRep.paymentReminder",1,"d-block"],[1,"text-muted","small"],[1,"text-muted"],[1,"text-center","mt-2"],["href","#","translate","sales.dashboardSalesRep.moreNotifications",1,"text-primary","small"],["translate","sales.dashboardSalesRep.recentActivity",1,"mb-3"],[1,"badge","bg-success","rounded-circle","me-2","p-2"],[1,"bi","bi-check-circle"],["translate","sales.dashboardSalesRep.visitCompleted",1,"d-block"],["translate","sales.dashboardSalesRep.discussed",1,"text-muted","small"],[1,"badge","bg-primary","rounded-circle","me-2","p-2"],[1,"bi","bi-cart"],["translate","sales.dashboardSalesRep.newSaleRecorded",1,"d-block"],[1,"bi","bi-cash"],["translate","sales.dashboardSalesRep.collectionMade",1,"d-block"],["translate","sales.dashboardSalesRep.received",1,"text-muted","small"],["translate","sales.dashboardSalesRep.yesterday",1,"text-muted"],[3,"dismiss","clientId"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),e.nrm(6,"i",9)(7,"h5",10),e.k0s(),e.j41(8,"div",11),e.nrm(9,"i",12),e.j41(10,"span"),e.EFF(11),e.nI1(12,"translate"),e.k0s()()()(),e.j41(13,"div",13)(14,"div",7)(15,"div",14),e.qSk(),e.j41(16,"svg",15),e.nrm(17,"path",16)(18,"path",17),e.k0s(),e.joV(),e.j41(19,"div",18),e.EFF(20),e.k0s()(),e.j41(21,"div")(22,"div",19),e.nrm(23,"span",20),e.j41(24,"h2",21),e.nrm(25,"i",22),e.j41(26,"span",23),e.EFF(27),e.nI1(28,"translate"),e.k0s()(),e.nrm(29,"span",24),e.j41(30,"h2",25),e.EFF(31),e.nI1(32,"translate"),e.k0s()(),e.nrm(33,"span",26),e.j41(34,"h2",27),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.nrm(37,"span",28),e.j41(38,"h2",29),e.EFF(39),e.nI1(40,"translate"),e.k0s()()()()()(),e.j41(41,"div",4)(42,"div",5)(43,"div",6)(44,"div",7)(45,"div",8),e.nrm(46,"i",30)(47,"h5",31),e.k0s(),e.j41(48,"div",11),e.nrm(49,"i",12),e.j41(50,"span"),e.EFF(51),e.nI1(52,"translate"),e.k0s()()()(),e.j41(53,"div",13)(54,"div",7)(55,"div",14),e.qSk(),e.j41(56,"svg",15),e.nrm(57,"path",16)(58,"path",32),e.k0s(),e.joV(),e.j41(59,"div",18),e.EFF(60),e.k0s()(),e.j41(61,"div")(62,"div",19),e.nrm(63,"span",20),e.j41(64,"h2",21),e.nrm(65,"i",22),e.j41(66,"span",23),e.EFF(67),e.nI1(68,"translate"),e.k0s()(),e.nrm(69,"span",33),e.j41(70,"h2",34),e.EFF(71),e.nI1(72,"translate"),e.k0s()(),e.nrm(73,"span",26),e.j41(74,"h2",27),e.EFF(75),e.nI1(76,"translate"),e.k0s(),e.nrm(77,"span",28),e.j41(78,"h2",35),e.EFF(79),e.nI1(80,"translate"),e.k0s()()()()()(),e.j41(81,"div",4)(82,"div",5)(83,"div",6)(84,"div",7)(85,"div",8),e.nrm(86,"i",30)(87,"h5",36),e.k0s(),e.j41(88,"div",11),e.nrm(89,"i",12),e.j41(90,"span"),e.EFF(91),e.nI1(92,"translate"),e.k0s()()()(),e.j41(93,"div",13)(94,"div",7)(95,"div",14),e.qSk(),e.j41(96,"svg",15),e.nrm(97,"path",37)(98,"path",38),e.k0s(),e.joV(),e.j41(99,"div",18),e.EFF(100),e.k0s()(),e.j41(101,"div")(102,"div",19),e.nrm(103,"span",20),e.j41(104,"h2",21),e.nrm(105,"i",22),e.j41(106,"span",23),e.EFF(107),e.nI1(108,"translate"),e.k0s()(),e.nrm(109,"span",39),e.j41(110,"h2",40),e.EFF(111),e.nI1(112,"translate"),e.k0s()(),e.nrm(113,"span",26),e.j41(114,"h2",27),e.EFF(115),e.nI1(116,"translate"),e.k0s(),e.nrm(117,"span",28),e.j41(118,"h2",41),e.EFF(119),e.nI1(120,"translate"),e.k0s()()()()()()(),e.j41(121,"div",42)(122,"div",43),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goClient(null))}),e.j41(123,"div",44)(124,"div",45)(125,"div",46)(126,"div",47)(127,"span",48),e.nrm(128,"i",49),e.k0s()()(),e.nrm(129,"p",50),e.j41(130,"h2",51),e.EFF(131),e.k0s()()()(),e.j41(132,"div",43),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goClient(1))}),e.j41(133,"div",52)(134,"div",45)(135,"div",46)(136,"div",47)(137,"span",48),e.nrm(138,"i",49),e.k0s()()(),e.nrm(139,"p",53),e.j41(140,"h2",54),e.EFF(141),e.k0s(),e.j41(142,"p",55),e.nrm(143,"i",56),e.j41(144,"span",57),e.EFF(145,"0%"),e.k0s(),e.EFF(146),e.nI1(147,"translate"),e.k0s()()()(),e.j41(148,"div",43),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goClient(3))}),e.j41(149,"div",58)(150,"div",45)(151,"div",46)(152,"div",47)(153,"span",59),e.nrm(154,"i",49),e.k0s()()(),e.nrm(155,"p",60),e.j41(156,"h2",61),e.EFF(157),e.k0s(),e.j41(158,"p",55),e.nrm(159,"i",56),e.j41(160,"span",57),e.EFF(161,"0%"),e.k0s(),e.EFF(162),e.nI1(163,"translate"),e.k0s()()()(),e.j41(164,"div",43),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goClient(2))}),e.j41(165,"div",62)(166,"div",45)(167,"div",46)(168,"div",47)(169,"span",63),e.nrm(170,"i",49),e.k0s()()(),e.nrm(171,"p",64),e.j41(172,"h2",65),e.EFF(173),e.k0s(),e.j41(174,"p",55),e.nrm(175,"i",66),e.j41(176,"span",67),e.EFF(177,"0%"),e.k0s(),e.EFF(178),e.nI1(179,"translate"),e.k0s()()()()(),e.DNE(180,Yg,55,66,"div",68),e.j41(181,"div",69)(182,"div",70)(183,"div",71)(184,"div",6)(185,"div",7)(186,"div",8),e.nrm(187,"i",72)(188,"h5",73),e.k0s(),e.j41(189,"div",74),e.nrm(190,"i",75),e.j41(191,"span"),e.EFF(192),e.nI1(193,"translate"),e.k0s()()()(),e.j41(194,"div",13)(195,"div",69)(196,"div",76)(197,"div",77)(198,"div",78),e.nrm(199,"span",79),e.j41(200,"span",80),e.EFF(201),e.k0s()(),e.j41(202,"div",81),e.nrm(203,"div",82),e.k0s()(),e.j41(204,"div",83)(205,"div",84)(206,"div",85),e.EFF(207),e.k0s(),e.nrm(208,"div",86),e.k0s(),e.j41(209,"div",87),e.nrm(210,"div",88),e.k0s(),e.j41(211,"div",84)(212,"div",89),e.EFF(213),e.k0s(),e.nrm(214,"div",90),e.k0s()(),e.j41(215,"div",91),e.nrm(216,"p",92),e.j41(217,"h3",93),e.EFF(218),e.k0s()()()(),e.j41(219,"div",69)(220,"div",94),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goVisit(10))}),e.j41(221,"div",95)(222,"div",45)(223,"div",46)(224,"div",47)(225,"span",96),e.nrm(226,"i",97),e.k0s()()(),e.nrm(227,"p",98),e.j41(228,"h2",99),e.EFF(229),e.k0s(),e.nrm(230,"p",100),e.k0s()()(),e.j41(231,"div",94),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goVisit(30))}),e.j41(232,"div",95)(233,"div",45)(234,"div",46)(235,"div",47)(236,"span",59),e.nrm(237,"i",97),e.k0s()()(),e.nrm(238,"p",101),e.j41(239,"h2",61),e.EFF(240),e.k0s(),e.nrm(241,"p",100),e.k0s()()(),e.j41(242,"div",94),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goVisit(40))}),e.j41(243,"div",95)(244,"div",45)(245,"div",46)(246,"div",47)(247,"span",63),e.nrm(248,"i",97),e.k0s()()(),e.nrm(249,"p",102),e.j41(250,"h2",65),e.EFF(251),e.k0s(),e.j41(252,"p",55),e.nrm(253,"i",66),e.j41(254,"span",67),e.EFF(255," 0%"),e.k0s(),e.EFF(256),e.nI1(257,"translate"),e.k0s()()()()()()()(),e.j41(258,"div",103)(259,"div",104)(260,"div",105),e.nrm(261,"h5",106),e.j41(262,"span",107),e.EFF(263),e.k0s()(),e.j41(264,"span",108),e.nrm(265,"span",109),e.j41(266,"span"),e.EFF(267),e.nI1(268,"translate"),e.k0s()(),e.j41(269,"div",110),e.DNE(270,zg,11,9,"div",111),e.k0s(),e.DNE(271,Ug,4,1,"div",112),e.k0s()()(),e.DNE(272,qg,80,0,"div",113)(273,Hg,42,0,"div",114)(274,Qg,32,0,"div",114)(275,Wg,1,1,"ng-template",null,0,e.C5r)}2&n&&(e.R7$(11),e.SpI("0 % ",e.bMT(12,61,"sales.dashboardSalesRep.VsLastMonth"),""),e.R7$(7),e.BMQ("stroke-dasharray",(null==i.targetSales?null:i.targetSales.precentage)+",100"),e.R7$(2),e.SpI(" %",null==i.targetSales?null:i.targetSales.precentage," "),e.R7$(7),e.Lme(" ",null==i.targetSales?null:i.targetSales.targetMounth," ",e.bMT(28,63,"general.table.currancy")," "),e.R7$(4),e.Lme("",null==i.targetSales?null:i.targetSales.salesDone," ",e.bMT(32,65,"general.table.currancy")," "),e.R7$(4),e.Lme("",null==i.targetSales?null:i.targetSales.targetToDay," ",e.bMT(36,67,"general.table.currancy"),""),e.R7$(4),e.Lme("",null==i.targetSales?null:i.targetSales.targetReset," ",e.bMT(40,69,"general.table.currancy")," "),e.R7$(12),e.SpI("0 % ",e.bMT(52,71,"sales.dashboardSalesRep.VsLastMonth"),""),e.R7$(7),e.BMQ("stroke-dasharray",(null==i.targetCollection?null:i.targetCollection.precentage)+",100"),e.R7$(2),e.SpI(" %",null==i.targetCollection?null:i.targetCollection.precentage," "),e.R7$(7),e.Lme(" ",null==i.targetCollection?null:i.targetCollection.targetMounth," ",e.bMT(68,73,"general.table.currancy")," "),e.R7$(4),e.Lme("",null==i.targetCollection?null:i.targetCollection.salesDone," ",e.bMT(72,75,"general.table.currancy"),""),e.R7$(4),e.Lme("",null==i.targetCollection?null:i.targetCollection.targetToDay," ",e.bMT(76,77,"general.table.currancy"),""),e.R7$(4),e.Lme("",null==i.targetCollection?null:i.targetCollection.targetReset," ",e.bMT(80,79,"general.table.currancy"),""),e.R7$(12),e.SpI("0 % ",e.bMT(92,81,"sales.dashboardSalesRep.VsLastMonth"),""),e.R7$(7),e.BMQ("stroke-dasharray",(null==i.customer?null:i.customer.precentage)+",100"),e.R7$(2),e.SpI(" %",null==i.customer?null:i.customer.precentage," "),e.R7$(7),e.Lme(" ",null==i.customer?null:i.customer.target," ",e.bMT(108,83,"sales.dashboardSalesRep.customer")," "),e.R7$(4),e.Lme("",null==i.customer?null:i.customer.targetDone," ",e.bMT(112,85,"sales.dashboardSalesRep.customer"),""),e.R7$(4),e.Lme("",null==i.customer?null:i.customer.targetToDay," ",e.bMT(116,87,"sales.dashboardSalesRep.customer")," "),e.R7$(4),e.Lme("",null==i.customer?null:i.customer.targetReset," ",e.bMT(120,89,"sales.dashboardSalesRep.customer")," "),e.R7$(12),e.JRh(null==i.statusClient?null:i.statusClient.all),e.R7$(10),e.JRh(null==i.statusClient?null:i.statusClient.clientsActive),e.R7$(5),e.SpI(" ",e.bMT(147,91,"sales.dashboardSalesRep.VsLastMonth")," "),e.R7$(11),e.JRh(null==i.statusClient?null:i.statusClient.clientNew),e.R7$(5),e.SpI(" ",e.bMT(163,93,"sales.dashboardSalesRep.VsLastMonth")," "),e.R7$(11),e.JRh(null==i.statusClient?null:i.statusClient.clientsUnActive),e.R7$(5),e.SpI(" ",e.bMT(179,95,"sales.dashboardSalesRep.VsLastMonth")," "),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(12),e.SpI(" 0% ",e.bMT(193,97,"sales.dashboardSalesRep.VsLastMonth"),""),e.R7$(9),e.SpI("",null==i.visitCount?null:i.visitCount.precentage,"%"),e.R7$(2),e.xc7("width",null==i.visitCount?null:i.visitCount.precentage,"%"),e.BMQ("aria-valuenow",null==i.visitCount?null:i.visitCount.precentage),e.R7$(4),e.JRh(i.visitCount.complete),e.R7$(6),e.JRh(i.visitCount.targetVisit),e.R7$(5),e.JRh(i.visitCount.reset),e.R7$(11),e.JRh(i.visitCount.schedule),e.R7$(11),e.JRh(i.visitCount.complete),e.R7$(11),e.JRh(i.visitCount.delay),e.R7$(5),e.SpI("",e.bMT(257,99,"sales.dashboardSalesRep.VsLastMonth")," "),e.R7$(7),e.JRh(null==i.invoices?null:i.invoices.totalCount),e.R7$(4),e.Lme(" : ",i.invoices.total," ",e.bMT(268,101,"general.table.currancy")," "),e.R7$(3),e.Y8G("ngForOf",i.invoices.invoices),e.R7$(),e.Y8G("ngIf",i.totalCountInvoice>0),e.R7$(),e.Y8G("ngIf",!1),e.R7$(),e.Y8G("ngIf",!1),e.R7$(),e.Y8G("ngIf",!1))},dependencies:[m.YU,m.Sq,m.bT,d.me,d.BC,d.vS,_.s5,ie.b,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,_.md,X.m,m.vh,b.D9]})}}return a})();const Zg=()=>["salesOrder.register"],Kg=()=>["salesOrderStore.assignTrunk"],eh=()=>["salesOrderStore.prepare"],ui=a=>[a];function th(a,s){1&a&&(e.j41(0,"th",65),e.EFF(1," sales.salesOrder.trunck "),e.k0s())}function ih(a,s){if(1&a&&(e.j41(0,"tr",52),e.nrm(1,"th",53),e.j41(2,"th",54),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",55),e.nrm(5,"i",56),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",57),e.nrm(8,"i",56),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",58),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",59),e.nrm(13,"i",56),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",60),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",61),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",62),e.nrm(20,"i",56),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",63),e.nrm(23,"i",56),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.DNE(25,th,2,0,"th",64),e.nrm(26,"th",61),e.k0s()),2&a){const t=e.XpG();e.R7$(25),e.Y8G("ngIf",t.showInfo)}}function nh(a,s){1&a&&e.nrm(0,"span",76)}function ah(a,s){if(1&a&&(e.j41(0,"a",77),e.nrm(1,"i",78),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("href",n.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function rh(a,s){if(1&a&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div",79),e.EFF(4),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.driverName)}}function sh(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",81),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(103);return e.Njj(r.openShippingModal(i.id,o,"lg"))}),e.nrm(2,"i",82),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrderStore.trunkAssign"))}function oh(a,s){if(1&a&&(e.qex(0),e.DNE(1,sh,3,3,"button",80),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",32==t.offerOrderStatus)}}function lh(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",84),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(97);return e.Njj(r.openStatusModal(i.id,o,32,"md"))}),e.nrm(2,"i",85),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrderStore.ready"))}function dh(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",81),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.PrintStoreReport(i.id))}),e.nrm(2,"i",86),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.print"))}function ch(a,s){if(1&a&&(e.qex(0),e.DNE(1,lh,3,3,"button",83)(2,dh,3,3,"button",80),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus),e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus)}}function mh(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",66)(1,"td"),e.nrm(2,"button",67),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",68),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",69),e.k0s()(),e.j41(14,"td",70),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(95);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(15,"a",71),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.DNE(18,nh,1,0,"span",72)(19,ah,2,1,"a",73),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.DNE(27,rh,5,2,"td",74),e.j41(28,"td"),e.DNE(29,oh,2,1,"ng-container",75)(30,ch,3,2,"ng-container",75),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=s.expanded,r=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(n+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,18,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",r.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(24,21,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(),e.Y8G("ngIf",r.showInfo),e.R7$(2),e.Y8G("hasPermission",e.lJ4(24,Kg)),e.R7$(),e.Y8G("hasPermission",e.lJ4(25,eh))}}function ph(a,s){if(1&a&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s()(),e.bVm()),2&a){const t=s.$implicit,n=s.index;e.R7$(3),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity)}}function uh(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",87)(2,"div")(3,"table",88)(4,"thead")(5,"tr",89)(6,"th",90),e.EFF(7,"# "),e.k0s(),e.nrm(8,"th",91)(9,"th",92)(10,"th",93),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,ph,10,4,"ng-container",94),e.k0s()()()()()),2&a){const t=s.$implicit;e.R7$(12),e.Y8G("ngForOf",t.offerOrderDetails)}}function gh(a,s){1&a&&(e.j41(0,"div",95),e.EFF(1," general.table.noData "),e.k0s())}function hh(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",96)(1,"div",97),e.nrm(2,"ngb-pagination-info",98),e.j41(3,"table-length",99),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",100)(5,"ngb-pagination",101),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function _h(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",102),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function fh(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",103),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function bh(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",104),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function vh(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",104),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function xh(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",105),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function yh(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",106,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",107),e.j41(3,"div",108)(4,"div",109)(5,"button",110),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",111)(7,"div",112),e.nrm(8,"lord-icon",113),e.j41(9,"div",114),e.nrm(10,"h3",115)(11,"p",116),e.k0s()(),e.j41(12,"div",117),e.nrm(13,"button",118),e.j41(14,"button",119),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Ch(a,s){1&a&&(e.j41(0,"div",126),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Sh(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",106,10),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",107),e.j41(3,"div",108)(4,"div",109)(5,"button",110),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",111)(7,"div",120)(8,"label",121),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",122,11),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.changeQuantityMessage,i)||(r.form.changeQuantityMessage=i),e.Njj(i)}),e.k0s(),e.DNE(12,Ch,2,0,"div",123),e.k0s(),e.j41(13,"div",117),e.nrm(14,"button",124),e.j41(15,"button",125),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),n=e.sdS(11),i=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.deleteLoader),e.R7$(8),e.R50("ngModel",i.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Ih(a,s){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",127),e.bIt("success",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.reload())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function kh(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",156),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(5,"td")(6,"input",157),e.bIt("ngModelChange",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.quantitySelect(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,ui,n))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,ui,n)),e.R50("ngModel",t.quantity)}}function Th(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",158),e.nrm(1,"td",159),e.j41(2,"td",160)(3,"table",161)(4,"tbody")(5,"tr"),e.nrm(6,"td",162),e.j41(7,"td",163),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",164),e.j41(12,"td",163)(13,"div",165)(14,"ng-select",166),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscountType,i)||(r.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(15,"input",167),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscount,i)||(r.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"tr",168),e.nrm(17,"td",169),e.j41(18,"td",163),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",170),e.nrm(22,"th",171),e.j41(23,"th",163),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function jh(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",128)(1,"div",129)(2,"h4",130),e.nrm(3,"span",131),e.k0s(),e.j41(4,"button",132),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",111),e.nrm(6,"ngx-ui-loader",107),e.j41(7,"form",133,10),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateTruck())}),e.j41(9,"div",28)(10,"div",134)(11,"label",135),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",136),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.dateChangeModal(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.acutalVisitDate,i)||(r.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(14,"div",134),e.nrm(15,"label",137),e.j41(16,"ng-select",138),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientLocationId,i)||(r.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",139)(18,"label",135),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",140),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.shippingTruckId,i)||(r.form.shippingTruckId=i),e.Njj(i)}),e.k0s()()(),e.j41(21,"div",141)(22,"div",14)(23,"div",142)(24,"div",143),e.nrm(25,"h5",144),e.k0s()(),e.j41(26,"div",44)(27,"div",145)(28,"table",146)(29,"thead",147)(30,"tr"),e.nrm(31,"th",148)(32,"th",149)(33,"th",150),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,kh,7,10,"tr",null,e.Vm6),e.DNE(37,Th,26,15,"tr",151),e.k0s()()()()()(),e.j41(38,"div",152)(39,"button",153),e.nrm(40,"i",154)(41,"span",155),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",n.locations),e.R50("ngModel",n.form.clientLocationId),e.R7$(4),e.Y8G("items",n.truncks),e.R50("ngModel",n.form.shippingTruckId),e.R7$(15),e.Dyx(n.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}let wh=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y,j,F){super(t,n,c,i,r,o,l),this.baseService=i,this.authDaamService=h,this.teamService=g,this.employeeService=x,this.regionService=v,this.cityService=C,this.storesService=I,this.excelService=y,this.router=j,this.orderReceivedService=F,this.title="sales.salesOrderStore.title",this.titleOperation="sales.salesOrderStore.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.pagination={pageNumber:1,pageSize:10,status:30},this.showInfo=!1,this.stores=[],this.nameSerach="salesOrderStore",this.setDates=(O,N,U)=>{if(O?.from||O?.to){const fe=O.to||O.from;this.pagination[N]=this.datePipe.transform(O.from||O.to,"yyyy-MM-ddT00:00:00"),this.pagination[U]=this.datePipe.transform(fe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[N]=null,this.pagination[U]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetStores(),this.GetOfferOrderCount()}GetOfferOrderCount(){this.baseService.GetOfferOrderStoreCount().subscribe(t=>{this.count=t.data})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetStores(){this.storesService.getDropDown().subscribe(t=>{this.stores=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{n?this.alertService.success():this.alertService.error("general.message."+n)},n=>{this.alertService.error()})}mapRegisterForm(t){let n={...t};return n.employeeCode=0,n}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(n=>{t.push({Code:n.id,CreatorName:n.creatorName,creationTime:n.creationTime,clientName:n.clientName,Status:this.getTranslationText("sales.salesOrder."+n.offerOrderStatusValue),salse_Person:n.salsePersonName,"Delivery.Date":n.acutalVisitDate,"T.Quantity":n.totalQuantity," T.Discount":n.totalDiscount,Tax:n.totalTax,Net:n.netPrice,Reason:n.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,n,i="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(n,{centered:!0,size:i})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.showInfo=!1,-1==t?this.pagination.status=null:0==t?(this.pagination.statusList=[30,40,32,50,60,100],this.pagination.status=null,this.showInfo=!0):(this.pagination.statusList=[],this.pagination.status=t),this.onSearch()}openStatusModal(t,n,i,r="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:i},this.modalService.open(n,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(f.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const n=new Date(t);return n.getDate().toString().padStart(2,"0")+"-"+(n.getMonth()+1).toString().padStart(2,"0")+"-"+n.getFullYear()+" "+n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0")}openShippingModal(t,n,i="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(o=>{o.success?(this.form=o.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=o.data.truncks,this.locations=o.data.locations,this.modalService.open(n,{centered:!0,size:i})):this.alertService.error("general.message."+o.message)},o=>{this.alertService.error("general.message."+o)})}getTotal(){let t=0,n=0,i=0;this.form.details.forEach(r=>{r.discount<0&&(r.discoun=0);let o=r.quantity*r.price,l=0;1===r.discountType?l=r.discount:2===r.discountType&&(l=o*r.discount/100),n=+l;let c=o-l;r.net=c,t=+c}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(n=>({id:0,itemId:n.itemId,itemName:n.itemName,quantity:n.quantity,unitId:n.unitId,price:n.price,isFree:n.isFree,originalPrice:n.originalPrice,discount:n.discount,discountType:n.discountType,clientQuantity:n.clientQuantity,approvedQuantity:n.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.reload():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[n,i,r,o,l]=t.split(/[-\s:]/);return`${r}-${i}-${n}T${o}:${l}:00`}}dateChangeModal(t){t=new Date(t);let n={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(n).subscribe(i=>{i.success?this.truncks=i.data.truncks:this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}quantitySelect(t,n){t&&(t<=0&&(t=1),this.form.details[n].quantity=parseInt(t),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity,this.discountSelect(this.form.details[n].discount,n),this.getTotal())}discountSelect(t,n,i=1){if(t){(t=parseInt(t))<=0&&(this.form.details[n].discount=0),1==i&&(this.form.details[n].discount=t);let r=0;1==this.form.details[n].discountType?r=this.form.details[n].discount:(r=this.form.details[n].price*this.form.details[n].quantity*this.form.details[n].discount/100,r=+r.toFixed(2)),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity-r,this.form.details[n].net=this.form.details[n].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}mapUrl(t,n){return null===t||null==n?"":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}loadentities(){""!=this.nameSerach&&localStorage.setItem(this.nameSerach,JSON.stringify(this.pagination)),this.baseService.GetOrderStore(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}PrintStoreReport(t){this.ngxLoader.startLoader("allLoader"),this.baseService.PrintStoreReport(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error()})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(re.A),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(He.n),e.rXU(se.O),e.rXU(Ge.S),e.rXU(xe.h),e.rXU(Qe.a),e.rXU(K.V),e.rXU(w.Ix),e.rXU(Be.B))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-salesman-order"]],features:[e.Vt3],decls:104,vars:68,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-3","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","bg-warning","border","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrderStore.deliveries",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.ready",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.return",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-primary","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.history",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","storeId","bindValue","id","bindLabel","nameAR",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","15%"],["translate","",2,"width","3%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["style","width:12%","translate","",4,"ngIf"],["translate","",2,"width","12%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[3,"translate"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"ngIf"],[4,"hasPermission"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-primary"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],[1,"ri-printer-fill","align-bottom"],["colspan","17"],["dataKey","id"],[1,"bg-light"],[2,"width","8%"],["translate","sales.salesOrder.itemName",2,"width","20%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",12)(1,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(30))}),e.j41(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e.nrm(6,"i",18),e.k0s()(),e.j41(7,"div",19)(8,"h5",20),e.EFF(9),e.k0s(),e.nrm(10,"p",21),e.k0s()()()(),e.j41(11,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(32))}),e.j41(12,"div",14)(13,"div",15)(14,"div",16)(15,"div",22),e.nrm(16,"i",18),e.k0s()(),e.j41(17,"div",19)(18,"h5",20),e.EFF(19),e.k0s(),e.nrm(20,"p",23),e.k0s()()()(),e.j41(21,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(100))}),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"div",24),e.nrm(26,"i",18),e.k0s()(),e.j41(27,"div",19)(28,"h5",20),e.EFF(29),e.k0s(),e.nrm(30,"p",25),e.k0s()()()(),e.j41(31,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(0))}),e.j41(32,"div",14)(33,"div",15)(34,"div",16)(35,"div",26),e.nrm(36,"i",18),e.k0s()(),e.j41(37,"div",19),e.nrm(38,"p",27),e.k0s()()()()(),e.j41(39,"div",28)(40,"div",29)(41,"div",30),e.nrm(42,"ngx-ui-loader",31),e.j41(43,"base-filter",32),e.bIt("addNew",function(){return e.eBV(r),e.Njj(i.goNew())})("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())}),e.qex(44,33),e.j41(45,"div",34)(46,"div",35)(47,"input",36),e.nI1(48,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.id,l)||(i.pagination.id=l),e.Njj(l)}),e.k0s(),e.nrm(49,"i",37),e.k0s()(),e.j41(50,"div",34)(51,"input",38),e.nI1(52,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(53,"div",34)(54,"div",35)(55,"input",39),e.nI1(56,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(57,"i",37),e.k0s()(),e.j41(58,"div",34)(59,"div",35)(60,"ng-select",40),e.nI1(61,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(62,"div",34)(63,"input",38),e.nI1(64,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.dates,l)||(i.searchForm.dates=l),e.Njj(l)}),e.k0s()(),e.j41(65,"div",34)(66,"div",35)(67,"ng-select",41),e.nI1(68,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(69,"div",34)(70,"div",35)(71,"ng-select",42),e.nI1(72,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(73,"div",34)(74,"div",35)(75,"ng-select",43),e.nI1(76,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.storeId,l)||(i.pagination.storeId=l),e.Njj(l)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(77,"div",44)(78,"div",45)(79,"p-table",46,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(81,ih,27,1,"ng-template",47)(82,mh,31,26,"ng-template",48)(83,uh,13,1,"ng-template",49),e.k0s()(),e.DNE(84,gh,2,0,"div",50)(85,hh,6,8,"div",51),e.k0s()()()(),e.DNE(86,_h,1,0,"ng-template",null,1,e.C5r)(88,fh,1,1,"ng-template",null,2,e.C5r)(90,bh,1,3,"ng-template",null,3,e.C5r)(92,vh,1,3,"ng-template",null,4,e.C5r)(94,xh,1,1,"ng-template",null,5,e.C5r)(96,yh,15,3,"ng-template",null,6,e.C5r)(98,Sh,16,6,"ng-template",null,7,e.C5r)(100,Ih,1,1,"ng-template",null,8,e.C5r)(102,jh,42,15,"ng-template",null,9,e.C5r)}2&n&&(e.R7$(2),e.AVh("bg-primary-subtle",30==i.pagination.status),e.R7$(7),e.JRh(i.count.storeDeliveryOrder),e.R7$(3),e.AVh("bg-primary-subtle",32==i.pagination.status),e.R7$(7),e.JRh(i.count.repareOrder),e.R7$(3),e.AVh("bg-primary-subtle",100==i.pagination.status),e.R7$(7),e.JRh(i.count.return),e.R7$(3),e.AVh("bg-primary-subtle",0==i.pagination.status),e.R7$(10),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(67,Zg))("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(48,51,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(52,53,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(56,55,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(61,57,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(64,59,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(68,61,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(72,63,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(76,65,"sales.salesOrder.storeName")),e.Y8G("items",i.stores)("multiple",!1),e.R50("ngModel",i.pagination.storeId),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,ge.x,b.Mm,E.XI,te.Ei,E.Tg,E.FP,R.Cv,$.vr,X.m,W.p,ke.m,We,Je,m.vh,b.D9],encapsulation:2})}}return a})();var ut=u(32454);const Mh=(a,s)=>({"text-success":a,"text-danger":s}),Rh=()=>["visits.detail"];function Fh(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goMangeVisit())}),e.k0s()}}function Oh(a,s){if(1&a){const t=e.RV6();e.j41(0,"span",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.checkLocation())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.arrive")," "))}function Vh(a,s){if(1&a){const t=e.RV6();e.j41(0,"span",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.checkLocation())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.notArrive")," "))}function Eh(a,s){if(1&a&&(e.qex(0),e.EFF(1," > "),e.DNE(2,Oh,3,5,"span",52)(3,Vh,3,5,"span",53),e.bVm()),2&a){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isArrive),e.R7$(),e.Y8G("ngIf",!t.isArrive)}}function Dh(a,s){if(1&a&&(e.j41(0,"div"),e.nrm(1,"span",56),e.j41(2,"span",57),e.EFF(3),e.k0s(),e.nrm(4,"span",58),e.k0s()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("hidden",t.isDisdanceLoad),e.R7$(),e.JRh(t.distance.toFixed(2))}}function Nh(a,s){if(1&a&&(e.qex(0),e.DNE(1,Dh,5,2,"div",16),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf","-"!=t.distance)}}function Lh(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",59),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function Ph(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",59),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function Gh(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",72),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.goToDetails(null==i?null:i.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("disabled",t.visiting),e.R7$(),e.SpI(" ",e.bMT(2,2,"sales.visits.details")," ")}}function $h(a,s){if(1&a&&(e.j41(0,"div",37)(1,"div",60)(2,"div",61)(3,"span"),e.nrm(4,"span",17),e.k0s(),e.j41(5,"div",62)(6,"div",63)(7,"div",64)(8,"div")(9,"small",19),e.EFF(10),e.k0s()(),e.DNE(11,Ph,3,1,"ng-container",28),e.k0s(),e.j41(12,"div",65)(13,"div"),e.nrm(14,"i",66),e.EFF(15),e.k0s()()(),e.j41(16,"div",63)(17,"div",65)(18,"div"),e.nrm(19,"i",67),e.EFF(20),e.k0s(),e.j41(21,"div"),e.nrm(22,"i",68),e.EFF(23),e.k0s()(),e.j41(24,"div",69),e.nrm(25,"i",26),e.EFF(26),e.nI1(27,"date"),e.nrm(28,"span",27),e.k0s()(),e.j41(29,"div",70),e.DNE(30,Gh,3,4,"button",71),e.k0s()()()()()),2&a){const t=s.$implicit,n=e.XpG();e.R7$(3),e.ZvI("ribbon ",n.getRibbonStatus(null==t?null:t.status)," round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==t?null:t.statusValue,""),e.R7$(6),e.SpI(" #VISIT# ",null==t?null:t.id,""),e.R7$(),e.Y8G("ngForOf",null==t?null:t.visitObjectivePlans),e.R7$(4),e.SpI("",null==t?null:t.clientCity," "),e.R7$(5),e.SpI("",null==t?null:t.visitTypenameAr," "),e.R7$(3),e.SpI("",null==t?null:t.clientPhone," "),e.R7$(3),e.SpI(" ",e.i5U(27,15,null==t?null:t.date,"yyyy-MM-dd HH:mm")," "),e.R7$(2),e.ZvI("rounded-circle badge ",n.getBgStatus(null==t?null:t.status)," d-inline-block ms-2"),e.R7$(2),e.Y8G("hasPermission",e.lJ4(18,Rh))}}function Bh(a,s){1&a&&(e.j41(0,"div",73),e.EFF(1," general.table.noData "),e.k0s())}function Ah(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",74)(1,"div",75),e.nrm(2,"ngb-pagination-info",76),e.j41(3,"table-length",77),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",78)(5,"ngb-pagination",79),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Xh(a,s){1&a&&e.nrm(0,"p",43)}function Yh(a,s){if(1&a&&(e.j41(0,"div",44)(1,"div",80),e.nrm(2,"img",81),e.k0s(),e.j41(3,"div",82)(4,"h5",83)(5,"span",84),e.EFF(6),e.k0s(),e.j41(7,"small",19),e.EFF(8),e.nI1(9,"date"),e.k0s()(),e.j41(10,"p",19),e.EFF(11),e.k0s()()()),2&a){const t=s.$implicit,n=e.XpG();e.Y8G("dir",n.checkPosition(t.isMain)),e.R7$(6),e.JRh(t.creatorName),e.R7$(2),e.JRh(e.i5U(9,4,t.creationTime,"mediumDate")),e.R7$(3),e.JRh(t.message)}}let gi=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(n,i,h,r,o,l,c),this.router=t,this.baseService=r,this.authDaamService=g,this.excelService=x,this._formDataService=v,this.visit={},this.visiting=!1,this.submitted=!1,this.pagination={pageNumber:1,pageSize:5},this.starting=!1,this.isArrive=!1,this.distance="-",this.isDisdanceLoad=!1}ngOnInitMore(){this.routeDataConfig()}goMangeVisit(){this.router.navigate([`/sales/manage-visits/${this.visit.id}`])}routeDataConfig(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.visit=t.data.data,this.visitId=this.visit.id,this.checkLocation(),this.loadentities()},t=>{this.alertService.error()})}getDetails(){this.baseService.GetVisitView(this.visitId).subscribe(t=>{this.visit=t.data,this.visiting=!1,this.loadentities()},t=>{this.alertService.error()})}getBgStatus(t){return 10==t?"bg-warning":20==t?"bg-info":30==t?"bg-success":40==t?"bg-danger":"bg-warning"}getRibbonStatus(t){return 10==t?"ribbon-warning":20==t?"ribbon-info":30==t?"ribbon-success":40==t?"ribbon-danger":"ribbon-warning"}goBack(){this.router.navigate(["/sales/visits"])}loadentities(){this.pagination.clientId=this.visit?.clientId,this.pagination.exceptId=this.visit?.id,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}goToDetails(t){this.visitId=t,this.visiting=!0,this.getDetails()}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}sendComment(){this.form.visitId=this.visit.id,this.submitted=!0,this.baseService.sendComment(this.form).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.submitted=!1,this.modalService.dismissAll(),this.getDetails(),this.form={}):this.alertService.error("general.message."+t.message)},t=>{this.submitted=!1,this.alertService.error("general.message."+t)})}checkPosition(t){return t&&"en"==this.lang?"ltr":t&&"ar"==this.lang||!t&&"en"==this.lang?"rtl":"ltr"}startVisit(t){if(t>=20)this.router.navigate(["/sales/startVisits"],{state:{id:this.visit.id}});else{let n={id:this.visit.id,status:20};this.starting=!0,this.baseService.changeVisitStatus(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(i=>(0,Q.$)(i))).subscribe({next:i=>{this.getDetails(),this.starting=!0,this.router.navigate(["/sales/startVisits"],{state:{id:this.visit.id}})},error:i=>{this.alertService.error()}})}}getDistanceInMeters(t,n,i,r){const l=v=>v*Math.PI/180,c=l(i-t),h=l(r-n),g=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(t))*Math.cos(l(i))*Math.sin(h/2)*Math.sin(h/2);return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))*6371e3}checkLocation(){try{this.isDisdanceLoad=!0,navigator.geolocation.watchPosition(t=>{const r=this.getDistanceInMeters(this.visit.lat,this.visit.lng,t.coords.latitude,t.coords.longitude);this.distance=r,this.isArrive=r<=500,this.isDisdanceLoad=!1},t=>{console.error(t),this.isDisdanceLoad=!1},{enableHighAccuracy:!0,maximumAge:0,timeout:2e3})}catch{this.isDisdanceLoad=!1}}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix),e.rXU(w.nX),e.rXU(b.c$),e.rXU(Oe),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(K.V),e.rXU(we.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-VisitDetails"]],features:[e.Vt3],decls:79,vars:37,consts:[["formEntity","ngForm"],["myInput",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[1,"container","py-4"],[1,"text-muted","cursor-pointer","mb-3","d-flex","align-items-center",3,"click"],[1,"ri-arrow-right-fill","me-2","text-dark","fs-4"],["translate","general.action.back"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],["translate","sales.visitDetails.startVisit",1,"btn","btn-dark","m-1",3,"click","disabled"],["class","btn btn-outline-dark","translate","sales.visitDetails.manageVisits",3,"click",4,"ngIf"],[1,"col-12","mt-5"],[1,"card","shadow-sm","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[1,"card-body"],[4,"ngIf"],[3,"translate"],[1,"d-flex","justify-content-between","align-items-start"],[1,"text-muted"],[1,"mt-3","text-muted"],[1,"text-bold","fs-4"],[1,"ri-map-pin-2-line","me-1","fs-4",3,"ngClass"],[1,"ri-alarm-warning-line","me-1","text-primary"],[1,"ri-phone-line","me-1","text-primary"],[1,"mt-3","small","text-muted"],[1,"ri-calendar-line","me-1"],[2,"width","10px","height","10px"],[4,"ngFor","ngForOf"],["role","tablist",1,"nav","nav-tabs","my-4"],[1,"nav-item"],["data-bs-toggle","tab","href","#history","translate","sales.visitDetails.visitHistory",1,"nav-link","active"],["data-bs-toggle","tab","href","#notes","translate","sales.visitDetails.notes",1,"nav-link"],[1,"tab-content"],["id","history",1,"tab-pane","fade","show","active"],[1,"card","border-0","mb-3"],[1,"row","gy-4"],[1,"col-12","sm:px-1","md:px-5"],["class","sm:px-1 md:px-5 text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","sm:px-1 md:px-5 row text-center   pt-3 overflow-hidden",4,"ngIf"],["id","notes",1,"tab-pane","fade"],["translate","",1,"card-title","mb-4"],[1,"px-3","mx-n3",2,"height","300px"],["translate","sales.visitDetails.noCommentsAvailable",1,"text-muted","text-center"],[1,"d-flex","mb-4",3,"dir"],["action","javascript:void(0);",1,"mt-3",3,"ngSubmit"],[1,"row","g-3"],["for","exampleFormControlTextarea1",1,"form-label"],["name","message","required","","id","exampleFormControlTextarea1","rows","3",1,"form-control","bg-light","border-light",3,"ngModelChange","ngModel","placeholder"],[1,"col-lg-12","text-end"],["translate","",1,"btn","btn-success",3,"disabled"],["translate","sales.visitDetails.manageVisits",1,"btn","btn-outline-dark",3,"click"],["class","bg-success ribbon round-shape cursor-pointer",3,"top","click",4,"ngIf"],["class","bg-danger ribbon round-shape cursor-pointer",3,"top","click",4,"ngIf"],[1,"bg-success","ribbon","round-shape","cursor-pointer",3,"click"],[1,"bg-danger","ribbon","round-shape","cursor-pointer",3,"click"],["translate","sales.startVisits.distance"],[1,"text-primary","fs-4","mx-2",3,"hidden"],["translate","sales.startVisits.meter",1,"mx-2"],[1,"badge","badge-pill","bg-primary","mx-1"],[1,"card","shadow-lg","rounded-4","border-0","sm:px-1","md:px-3","card","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","mb-lg-0","material-shadow"],[1,"card-body","py-3"],[1,"row","align-items-center"],[1,"col-md-5"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap"],[1,"mt-2","text-muted","small"],[1,"ri-map-pin-2-line","me-1","text-warning"],[1,"ri-alarm-warning-line","me-1","text-info"],[1,"ri-phone-line","me-1","text-success"],[1,"mt-2","small","text-muted","d-flex","align-items-center"],[1,"col-md-2"],["class","btn btn-outline-primary btn-md px-3",3,"disabled","click",4,"hasPermission"],[1,"btn","btn-outline-primary","btn-md","px-3",3,"click","disabled"],["translate","",1,"sm:px-1","md:px-5","text-center","text-danger","text-bold","fs-6","p-3"],[1,"sm:px-1","md:px-5","row","text-center","pt-3","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"flex-shrink-0"],["src","assets/images/user-dummy-img.jpg","alt","",1,"avatar-xs","rounded-circle"],[1,"flex-grow-1","ms-3"],[1,"fs-13"],[1,"fw-bolder","ms-1"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"a",6),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goBack())}),e.nrm(5,"i",7)(6,"span",8),e.k0s(),e.j41(7,"div",9)(8,"h3",10),e.EFF(9),e.k0s(),e.j41(10,"div")(11,"button",11),e.bIt("click",function(){return e.eBV(r),e.Njj(i.startVisit(null==i.visit?null:i.visit.status))}),e.k0s(),e.DNE(12,Fh,1,0,"button",12),e.k0s()(),e.j41(13,"div",13)(14,"div",14)(15,"div",15),e.DNE(16,Eh,4,2,"ng-container",16),e.j41(17,"span"),e.nrm(18,"span",17),e.k0s(),e.j41(19,"div",18)(20,"div")(21,"bdi")(22,"small",19),e.EFF(23),e.k0s()(),e.DNE(24,Nh,2,1,"ng-container",16),e.k0s()(),e.j41(25,"div",20)(26,"div",21)(27,"i",22)(28,"span"),e.EFF(29),e.k0s()()(),e.j41(30,"div"),e.nrm(31,"i",23),e.j41(32,"span"),e.EFF(33),e.k0s()(),e.j41(34,"div"),e.nrm(35,"i",24),e.j41(36,"span"),e.EFF(37),e.k0s()()(),e.j41(38,"div",25),e.EFF(39),e.nI1(40,"date"),e.nrm(41,"i",26)(42,"span",27),e.k0s(),e.DNE(43,Lh,3,1,"ng-container",28),e.k0s()()(),e.j41(44,"ul",29)(45,"li",30),e.nrm(46,"a",31),e.k0s(),e.j41(47,"li",30),e.nrm(48,"a",32),e.k0s()(),e.j41(49,"div",33)(50,"div",34)(51,"div",35)(52,"div",15)(53,"div",36),e.Z7z(54,$h,31,19,"div",37,e.Vm6),e.k0s(),e.DNE(56,Bh,2,0,"div",38)(57,Ah,6,8,"div",39),e.k0s()()(),e.j41(58,"div",40)(59,"h5",41),e.EFF(60,"sales.visitDetails.comments"),e.k0s(),e.j41(61,"ngx-simplebar",42),e.DNE(62,Xh,1,0,"p",43),e.Z7z(63,Yh,12,7,"div",44,e.fX1),e.k0s(),e.j41(65,"form",45,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(i.sendComment())}),e.j41(67,"div",46)(68,"div",3)(69,"label",47),e.EFF(70),e.nI1(71,"translate"),e.k0s(),e.j41(72,"textarea",48,1),e.nI1(74,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.form.message,l)||(i.form.message=l),e.Njj(l)}),e.EFF(75,"                            "),e.k0s()(),e.j41(76,"div",49)(77,"button",50),e.EFF(78," sales.visitDetails.comment "),e.k0s()()()()()()()()()()}if(2&n){const r=e.sdS(66);e.R7$(9),e.SpI(" ",null==i.visit?null:i.visit.clientName," "),e.R7$(2),e.Y8G("disabled",!(10==(null==i.visit?null:i.visit.status)&&i.isArrive||(null==i.visit?null:i.visit.status)>10)),e.R7$(),e.Y8G("ngIf",30!==i.visit.status&&40!==i.visit.status),e.R7$(4),e.Y8G("ngIf",10==(null==i.visit?null:i.visit.status)),e.R7$(),e.ZvI("ribbon ",i.getRibbonStatus(null==i.visit?null:i.visit.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==i.visit?null:i.visit.statusValue,""),e.R7$(5),e.SpI("#VISIT# ",null==i.visit?null:i.visit.id," "),e.R7$(),e.Y8G("ngIf",10==(null==i.visit?null:i.visit.status)),e.R7$(3),e.Y8G("ngClass",e.l_i(34,Mh,null!=i.visit.lat,null==i.visit.lat)),e.R7$(2),e.JRh(null==i.visit?null:i.visit.cityName),e.R7$(4),e.JRh(null==i.visit?null:i.visit.visitTypeNameAr),e.R7$(4),e.JRh(null==i.visit?null:i.visit.clientPhone),e.R7$(2),e.SpI(" ",e.i5U(40,27,null==i.visit?null:i.visit.date,"HH:mm yyyy-MM-dd ")," "),e.R7$(3),e.ZvI("rounded-circle ",i.getBgStatus(null==i.visit?null:i.visit.status)," d-inline-block ms-2"),e.R7$(),e.Y8G("ngForOf",null==i.visit?null:i.visit.visitObjectivePlans),e.R7$(11),e.Dyx(i.entities),e.R7$(2),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0),e.R7$(5),e.vxM(0==i.visit.visitComments.length?62:-1),e.R7$(),e.Dyx(null==i.visit?null:i.visit.visitComments),e.R7$(7),e.SpI(" ",e.bMT(71,30,"sales.visitDetails.leaveAComment")," "),e.R7$(2),e.FS9("placeholder",e.bMT(74,32,"sales.visitDetails.enterComments")),e.R50("ngModel",i.form.message),e.R7$(5),e.Y8G("disabled",!r.valid||i.submitted)}},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,J.p,Z.g,b.Mm,W.p,Te.ig,ut.H,m.vh,b.D9]})}}return a})();function zh(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",31),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function Uh(a,s){1&a&&(e.j41(0,"div",50),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function qh(a,s){1&a&&(e.j41(0,"div",51),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Hh(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",32)(1,"div",33),e.nrm(2,"h4",34),e.j41(3,"button",35),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",36)(5,"form",37,2),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnReschedule())}),e.j41(7,"div",38),e.nrm(8,"label",39),e.j41(9,"ng-select",40,3),e.nI1(11,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.reschadualReasonId,i)||(r.form.reschadualReasonId=i),e.Njj(i)}),e.k0s(),e.DNE(12,Uh,2,0,"div",41),e.k0s(),e.j41(13,"div",38),e.nrm(14,"label",42),e.j41(15,"input",43,4),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.date,i)||(r.form.date=i),e.Njj(i)}),e.k0s(),e.DNE(17,qh,2,0,"div",44),e.k0s(),e.j41(18,"div",38),e.nrm(19,"label",45),e.j41(20,"textarea",46),e.nI1(21,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.note,i)||(r.form.note=i),e.Njj(i)}),e.EFF(22,"                    "),e.k0s()(),e.j41(23,"div",47),e.nrm(24,"button",48),e.j41(25,"button",49),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cancel"))}),e.k0s()()()()()}if(2&a){const t=e.sdS(6),n=e.sdS(10),i=e.sdS(16),r=e.XpG();e.R7$(9),e.FS9("placeholder",e.bMT(11,11,"sales.mangevisits.reasonForRescheduling")),e.Y8G("items",r.rescheduleReasons),e.R50("ngModel",r.form.reschadualReasonId),e.R7$(3),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(3),e.Y8G("min",r.minDate)("max",r.maxDate),e.R50("ngModel",r.form.date),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(3),e.FS9("placeholder",e.bMT(21,13,"sales.mangevisits.additionalNotes")),e.R50("ngModel",r.form.note),e.R7$(4),e.Y8G("disabled",!t.valid)}}function Qh(a,s){1&a&&(e.j41(0,"div",50),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wh(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",32)(1,"div",33),e.nrm(2,"h4",52),e.j41(3,"button",35),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",36)(5,"form",37,5),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnCancel())}),e.j41(7,"div",38),e.nrm(8,"label",53),e.j41(9,"ng-select",54,6),e.nI1(11,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cancelReasonId,i)||(r.form.cancelReasonId=i),e.Njj(i)}),e.k0s(),e.DNE(12,Qh,2,0,"div",41),e.k0s(),e.j41(13,"div",38),e.nrm(14,"label",45),e.j41(15,"textarea",46),e.nI1(16,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.note,i)||(r.form.note=i),e.Njj(i)}),e.EFF(17,"                    "),e.k0s()(),e.j41(18,"div",47),e.nrm(19,"button",55),e.j41(20,"button",49),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cancel"))}),e.k0s()()()()()}if(2&a){const t=e.sdS(6),n=e.sdS(10),i=e.XpG();e.R7$(9),e.FS9("placeholder",e.bMT(11,7,"sales.mangevisits.reasonForCancellation")),e.Y8G("items",i.cancelReasons),e.R50("ngModel",i.form.cancelReasonId),e.R7$(3),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(3),e.FS9("placeholder",e.bMT(16,9,"sales.mangevisits.additionalNotes")),e.R50("ngModel",i.form.note),e.R7$(4),e.Y8G("disabled",!t.valid)}}let Jh=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(n,i,x,r,c,h,g),this.router=t,this.baseService=r,this.cancelReasonsService=o,this.rescheduleReasonsService=l,this.authDaamService=v,this.originalVisit="Originally scheduled for Friday, May 9, 2025 at 08:15 PM",this.visit={},this.cancelReasons=[],this.rescheduleReasons=[],this.minDate="",this.maxDate="",n.params.subscribe(O=>{this.visitId=O.id,this.getDetails()}),this.getCancelReasons(),this.getRescheduleReasons();const C=new Date,I=C.getFullYear(),y=C.getMonth(),j=new Date(I,y,1),F=new Date(I,y+1,0);this.minDate=j.toISOString().split("T")[0],this.maxDate=F.toISOString().split("T")[0]}goBack(){this.router.navigate(["/sales/visits/detail"],{state:{id:this.visitId}})}getDetails(){this.baseService.GetVisitView(this.visitId).subscribe(t=>{this.visit=t.data,console.log(this.visit)},t=>{this.alertService.error()})}getCancelReasons(){this.cancelReasonsService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{this.alertService.error()})}getRescheduleReasons(){this.rescheduleReasonsService.getDropDown().subscribe(t=>{this.rescheduleReasons=t.data},t=>{this.alertService.error()})}OonSubmit(){this.modalService.dismissAll()}OnCancel(){this.ngxLoader.startLoader(f.ZW),this.baseService.cancelVisit(this.form).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.getDetails(),this.router.navigateByUrl("/sales/visits"),this.form={}):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}OnReschedule(){this.ngxLoader.startLoader(f.ZW),this.baseService.rescheduleVisit(this.form).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.getDetails(),this.router.navigateByUrl("/sales/visits"),this.form={}):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getRibbonStatus(t){return 10==t?"ribbon-warning":20==t?"ribbon-info":30==t?"ribbon-success":40==t?"ribbon-danger":"ribbon-warning"}getBgStatus(t){return 10==t?"bg-warning":20==t?"bg-info":30==t?"bg-success":40==t?"bg-danger":"bg-warning"}openModalTitle(t,n="md"){this.isEditForm=!1,this.form={},this.form.id=this.visit.id,this.modalService.open(t,{centered:!0,size:n})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix),e.rXU(w.nX),e.rXU(b.c$),e.rXU(Oe),e.rXU(at),e.rXU(ft),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-Mangevisits"]],features:[e.Vt3],decls:48,vars:18,consts:[["operation",""],["cancelOperation",""],["formEntity","ngForm"],["reschadualReasonId","ngModel"],["newDate","ngModel"],["cancelForm","ngForm"],["cancelReasonId","ngModel"],[1,"card","container","mt-5"],[1,"card-body","py-3"],[1,"text-decoration-none","cursor-pointer","text-dark","d-flex","align-items-center","mb-3",3,"click"],[1,"ri-arrow-right-fill","me-2","text-dark","fs-4"],["translate","general.action.back"],["translate","sales.mangevisits.title",1,"fw-bold","text-start","mb-4"],[1,"card","shadow-sm","rounded-4","h-100","ribbon-box","right","border","material-shadow"],[1,"card-body"],[3,"translate"],[1,"d-flex","justify-content-between","align-items-start"],[1,"text-muted"],[1,"mt-3","text-muted","small"],[1,"ri-map-pin-2-line","me-1","text-primary"],[1,"ri-user-3-line","me-1","text-primary"],[1,"ri-phone-line","me-1","text-primary"],[1,"mt-3","small","text-muted"],[1,"ri-calendar-line","me-1"],[2,"width","10px","height","10px"],[4,"ngFor","ngForOf"],["translate","sales.mangevisits.visitActions",1,"card-title","fw-bold","mb-3"],[1,"row","justify-content-start","align-items-center"],[1,"col-12","col-md-2"],["translate","sales.mangevisits.rescheduleVisit",1,"btn","btn-primary","mx-2",3,"click"],["translate","sales.mangevisits.cancelVisit",1,"btn","btn-danger","mx-2",3,"click"],[1,"badge","badge-pill","bg-primary","mx-1"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-light"],["translate","sales.mangevisits.rescheduleVisit",1,"card-title","mb-0","fw-bold","fs-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["translate","sales.mangevisits.reasonForRescheduling",1,"form-label","required"],["name","reschadualReasonId","bindLabel","name","bindValue","id","required","",3,"ngModelChange","items","placeholder","ngModel"],["class","text-danger","translate","",4,"ngIf"],["translate","sales.mangevisits.newDate",1,"form-label","required"],["type","date","name","newDate","required","",1,"form-control",3,"ngModelChange","min","max","ngModel"],["class","text-danger",4,"ngIf"],["translate","sales.mangevisits.additionalNotes",1,"form-label"],["rows","3","name","note",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","justify-content-end","gap-2"],["type","submit","translate","sales.mangevisits.confirmReschedule",1,"btn","btn-primary",3,"disabled"],["type","button","translate","sales.mangevisits.cancel",1,"btn","btn-outline-secondary",3,"click"],["translate","",1,"text-danger"],[1,"text-danger"],["translate","sales.mangevisits.cancelVisit",1,"card-title","mb-0","fw-bold","fs-2"],["translate","sales.mangevisits.reasonForCancellation",1,"form-label","required"],["clearable","false","name","cancelReasonId","bindLabel","name","bindValue","id","required","",3,"ngModelChange","items","placeholder","ngModel"],["type","submit","translate","sales.mangevisits.confirmCancellation",1,"btn","btn-danger",3,"disabled"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div")(3,"a",9),e.bIt("click",function(){return e.eBV(r),e.Njj(i.goBack())}),e.nrm(4,"i",10)(5,"span",11),e.k0s(),e.nrm(6,"h2",12),e.k0s(),e.j41(7,"div",13)(8,"div",14),e.EFF(9),e.j41(10,"span"),e.nrm(11,"span",15),e.k0s(),e.j41(12,"div",16)(13,"div")(14,"bdi")(15,"small",17),e.EFF(16),e.k0s()()()(),e.j41(17,"div",18)(18,"div")(19,"i",19)(20,"span"),e.EFF(21),e.k0s()()(),e.j41(22,"div"),e.nrm(23,"i",20),e.j41(24,"span"),e.EFF(25),e.k0s()(),e.j41(26,"div"),e.nrm(27,"i",21),e.j41(28,"span"),e.EFF(29),e.k0s()()(),e.j41(30,"div",22),e.EFF(31),e.nI1(32,"date"),e.nrm(33,"i",23)(34,"span",24),e.k0s(),e.DNE(35,zh,3,1,"ng-container",25),e.k0s()(),e.j41(36,"div",13)(37,"div",14),e.nrm(38,"h5",26),e.j41(39,"div",27)(40,"div",28)(41,"button",29),e.bIt("click",function(){e.eBV(r);const l=e.sdS(45);return e.Njj(i.openModalTitle(l,"lg"))}),e.k0s()(),e.j41(42,"div",28)(43,"button",30),e.bIt("click",function(){e.eBV(r);const l=e.sdS(47);return e.Njj(i.openModalTitle(l,"lg"))}),e.k0s()()()()()()(),e.DNE(44,Hh,26,15,"ng-template",null,0,e.C5r)(46,Wh,21,11,"ng-template",null,1,e.C5r)}2&n&&(e.R7$(9),e.SpI(" ",null==i.visit?null:i.visit.cityName," "),e.R7$(),e.ZvI("ribbon ",i.getRibbonStatus(null==i.visit?null:i.visit.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==i.visit?null:i.visit.statusValue,""),e.R7$(5),e.SpI("#VISIT# ",null==i.visit?null:i.visit.id," "),e.R7$(5),e.JRh(null==i.visit?null:i.visit.cityName),e.R7$(4),e.JRh(null==i.visit?null:i.visit.visitTypeNameAr),e.R7$(4),e.JRh(null==i.visit?null:i.visit.clientPhone),e.R7$(2),e.SpI(" ",e.i5U(32,15,null==i.visit?null:i.visit.date,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("rounded-circle ",i.getBgStatus(null==i.visit?null:i.visit.status)," d-inline-block ms-2"),e.R7$(),e.Y8G("ngForOf",null==i.visit?null:i.visit.visitObjectivePlans))},dependencies:[m.Sq,m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,b.Mm,$.vr,m.vh,b.D9]})}}return a})();var Zh=u(30146);function Kh(a,s){1&a&&(e.qex(0),e.j41(1,"p",10),e.nrm(2,"span",11),e.k0s(),e.j41(3,"p",10),e.nrm(4,"span",11),e.k0s(),e.j41(5,"p",10),e.nrm(6,"span",11),e.k0s(),e.bVm())}function e_(a,s){}function t_(a,s){if(1&a&&(e.qex(0),e.j41(1,"h2",13)(2,"button",14)(3,"div",15)(4,"div",16)(5,"div"),e.nrm(6,"i",17),e.k0s()(),e.j41(7,"div",18)(8,"h6",19)(9,"span",20),e.EFF(10),e.k0s(),e.j41(11,"span"),e.nrm(12,"span",21),e.k0s(),e.j41(13,"span",22),e.EFF(14),e.nI1(15,"date"),e.k0s()()()()()(),e.j41(16,"div",23)(17,"div",24),e.DNE(18,e_,0,0,"ng-template"),e.k0s()(),e.bVm()),2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(5),e.ZvI(" ",n.getStepStatus(t.status),"  avatar-title  rounded-circle"),e.R7$(5),e.JRh(t.actionByUserName),e.R7$(),e.ZvI("badge ",n.getStepStatus(t.status),""),e.R7$(),e.FS9("translate","approvals.approvalRequests."+t.statusValue),e.R7$(2),e.SpI(" ",e.i5U(15,9,t.approvedAt,"yyyy-MM-dd HH:mm:ss"),"")}}function i_(a,s){if(1&a&&(e.qex(0),e.DNE(1,t_,19,12,"ng-container",12),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.steps)}}let hi=(()=>{class a{constructor(t){this.approvalRequestsService=t,this.requestId=0,this.type=0,this.dismiss=new e.bkB,this.steps=[],this.showData=!1,this.objectKeys=Object.keys}ngOnInit(){this.getSteps()}getSteps(){0!=this.requestId&&this.approvalRequestsService.GetApprovalStepsByMaster({id:this.requestId,type:this.type}).subscribe(n=>{this.showData=!0,this.steps=n.data})}dismissFn(){this.dismiss.emit(!0)}getStepStatus(t){return 1==t||10==t||2==t?"bg-warning-subtle text-warning":4==t?"bg-success-subtle text-success":3==t?"bg-danger-subtle text-danger":5==t?"bg-info-subtle text-info":"bg-warning-subtle text-warning"}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(Zh.p))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["view-steps"]],inputs:{requestId:"requestId",type:"type"},outputs:{dismiss:"dismiss"},decls:11,vars:3,consts:[["accordion","ngbAccordion"],[1,"modal-header","p-3","bg-success-subtle"],["id","createTaskLabel","translate","approvals.approvalRequests.trackStep",1,"modal-title"],["type","button","data-bs-dismiss","modal","id","createTaskBtn-close","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"card-body"],[1,"profile-timeline","order-status"],["ngbAccordion",""],["ngbAccordionItem","",3,"collapsed"],[4,"ngIf"],[1,"card-text","placeholder-glow"],[1,"placeholder","col-12","bg-primary"],[4,"ngFor","ngForOf"],["ngbAccordionHeader",""],["ngbAccordionButton","","aria-expanded","true",1,"accordion-button","p-2","shadow-none"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","avatar-xs"],[1,"ri-arrow-down-fill"],[1,"flex-grow-1","ms-3"],[1,"fs-14","mb-0"],[1,"mx-2"],[3,"translate"],[1,"fw-normal","mx-4"],["ngbAccordionCollapse",""],["ngbAccordionBody","",1,"ms-2","ps-5","pt-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1),e.nrm(1,"h5",2),e.j41(2,"button",3),e.bIt("click",function(){return e.eBV(r),e.Njj(i.dismissFn())}),e.k0s()(),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7,0)(8,"div",8),e.DNE(9,Kh,7,0,"ng-container",9)(10,i_,2,1,"ng-container",9),e.k0s()()()()()}2&n&&(e.R7$(8),e.Y8G("collapsed",!1),e.R7$(),e.Y8G("ngIf",i.steps.length<=0),e.R7$(),e.Y8G("ngIf",i.steps.length>0))},dependencies:[m.Sq,m.bT,_.WP,_.r6,_.tW,_.x7,_.UA,_.$R,b.Mm,m.vh]})}}return a})();const n_=()=>["salesRequest.register"],a_=()=>["salesRequest.sendApproval"],r_=()=>["salesRequest.changeQuantity"],s_=()=>["salesRequest.cancel"],_i=a=>[a];function o_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(-1))}),e.j41(1,"div",17)(2,"div",52)(3,"div",19)(4,"div",53),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"p",54),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.AVh("bg-primary-subtle",null==t.pagination.status),e.R7$(6),e.JRh(t.count.all)}}function l_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(0))}),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",55),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"p",56),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.AVh("bg-primary-subtle",0==t.pagination.status),e.R7$(7),e.JRh(t.count.draft)}}function d_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(5))}),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",55),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"p",57),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.AVh("bg-primary-subtle",5==t.pagination.status),e.R7$(7),e.JRh(t.count.changeQuantity)}}function c_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(20))}),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",58),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"small",59),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.AVh("bg-primary-subtle",20==t.pagination.status),e.R7$(7),e.JRh(t.count.underReview)}}function m_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(30))}),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",60),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"p",61),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.AVh("bg-primary-subtle",30==t.pagination.status),e.R7$(7),e.JRh(t.count.repareOrder)}}function p_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectStatus(50))}),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",62),e.nrm(5,"i",21),e.k0s()(),e.j41(6,"div",22)(7,"h5",23),e.EFF(8),e.k0s(),e.nrm(9,"p",63),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.AVh("bg-primary-subtle",50==t.pagination.status),e.R7$(7),e.JRh(t.count.assign)}}function u_(a,s){1&a&&(e.j41(0,"th",82),e.EFF(1," sales.salesOrder.trunck "),e.k0s())}function g_(a,s){1&a&&(e.j41(0,"th",73),e.EFF(1," sales.salesOrder.cancelReasonName "),e.k0s())}function h_(a,s){if(1&a&&(e.j41(0,"tr",64),e.nrm(1,"th",65),e.j41(2,"th",66),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",67),e.nrm(5,"i",68),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",69),e.nrm(8,"i",68),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",70),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",71),e.nrm(13,"i",68),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",72),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",73),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",74),e.nrm(20,"i",68),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",75),e.nrm(23,"i",68),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(25,"th",76),e.nrm(26,"i",68),e.EFF(27," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(28,"th",77),e.EFF(29," orderManagement.order.totalTax "),e.k0s(),e.j41(30,"th",78),e.nrm(31,"i",68),e.EFF(32," sales.salesOrder.netPrice "),e.k0s(),e.DNE(33,u_,2,0,"th",79)(34,g_,2,0,"th",80),e.nrm(35,"th",81),e.k0s()),2&a){const t=e.XpG();e.R7$(33),e.Y8G("ngIf",50==t.pagination.status),e.R7$(),e.Y8G("ngIf",40==t.pagination.status||5==t.pagination.status)}}function __(a,s){if(1&a){const t=e.RV6();e.j41(0,"i",104),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(99);return e.Njj(r.openModal(i.id,o,"lg"))}),e.k0s()}}function f_(a,s){1&a&&e.nrm(0,"span",105)}function b_(a,s){if(1&a&&(e.j41(0,"a",106),e.nrm(1,"i",107),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("href",n.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function v_(a,s){if(1&a&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.driverName)}}function x_(a,s){if(1&a&&(e.j41(0,"td")(1,"span",108),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.cancelReasonName," ")}}function y_(a,s){if(1&a&&(e.j41(0,"td")(1,"span",108),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.changeQuantityMessage," ")}}function C_(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",109),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(97);return e.Njj(r.getInvoiceAttachments(i.id,o))}),e.nrm(2,"i",110),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.attachment"))}function S_(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",112),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(89);return e.Njj(r.openStatusModal(i.id,o,20,"md"))}),e.nrm(2,"i",113),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function I_(a,s){if(1&a&&(e.qex(0),e.DNE(1,S_,3,3,"button",111),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",0==t.salesRequestStatus||5==t.salesRequestStatus)}}function k_(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",85),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(85);return e.Njj(r.openModal(i.id,o,"xl"))}),e.j41(1,"span",114),e.nrm(2,"i",115)(3,"span",116),e.k0s()()}}function T_(a,s){if(1&a&&(e.qex(0),e.DNE(1,k_,4,0,"li",103),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",5==t.salesRequestStatus||0==t.salesRequestStatus||100==t.salesRequestStatus)}}function j_(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",85),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG(),o=e.sdS(93);return e.Njj(r.openModal(i.id,o))}),e.j41(1,"span",114),e.nrm(2,"i",117)(3,"span",118),e.k0s()()}}function w_(a,s){if(1&a&&(e.qex(0),e.DNE(1,j_,4,0,"li",103),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",0==t.salesRequestStatus||100==t.salesRequestStatus)}}function M_(a,s){if(1&a){const t=e.RV6();e.j41(0,"li",85),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(79);return e.Njj(r.openModal(i.id,o))}),e.j41(1,"span",114),e.nrm(2,"i",117)(3,"span",119),e.k0s()()}}function R_(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",83)(1,"td"),e.nrm(2,"button",84),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",85),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.PrintSalesOrder(i.id))}),e.j41(6,"bdi",86),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td",87)(12,"span"),e.nrm(13,"span",88),e.k0s(),e.DNE(14,__,1,0,"i",89),e.k0s(),e.j41(15,"td",85),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(87);return e.Njj(r.openModal(i.clientId,o,"md"))}),e.j41(16,"a",90),e.EFF(17),e.k0s(),e.nrm(18,"i",91),e.k0s(),e.j41(19,"td"),e.DNE(20,f_,1,0,"span",92)(21,b_,2,1,"a",93),e.k0s(),e.j41(22,"td")(23,"div"),e.EFF(24),e.k0s(),e.j41(25,"div",94),e.EFF(26),e.k0s()(),e.j41(27,"td"),e.EFF(28),e.nI1(29,"date"),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td"),e.EFF(33),e.k0s(),e.j41(34,"td"),e.EFF(35),e.k0s(),e.j41(36,"td"),e.EFF(37),e.k0s(),e.DNE(38,v_,5,2,"td",95)(39,x_,3,1,"td",95)(40,y_,3,1,"td",95),e.j41(41,"td"),e.qex(42),e.DNE(43,C_,3,3,"button",96),e.bVm(),e.DNE(44,I_,2,1,"ng-container",97),e.j41(45,"span",98)(46,"div",99)(47,"button",100),e.nrm(48,"i",101),e.k0s(),e.j41(49,"ul",102),e.DNE(50,T_,2,1,"ng-container",97)(51,w_,2,1,"ng-container",97)(52,M_,4,0,"li",103),e.k0s()()()()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=s.expanded,r=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(n+1),e.R7$(3),e.SpI("#SR#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,28,t.creationTime,"HH:mm yyyy-MM-dd")," "),e.R7$(3),e.ZvI("badge d-inline ",r.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.statusName),e.R7$(),e.Y8G("ngIf",20==t.salesRequestStatus||40==t.salesRequestStatus),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(3),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.storeName),e.R7$(2),e.SpI(" ",e.i5U(29,31,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.totalTax),e.R7$(2),e.JRh(t.netPrice),e.R7$(),e.Y8G("ngIf",50==r.pagination.status),e.R7$(),e.Y8G("ngIf",40==r.pagination.status),e.R7$(),e.Y8G("ngIf",5==r.pagination.status),e.R7$(3),e.Y8G("ngIf",60==t.salesRequestStatus),e.R7$(),e.Y8G("hasPermission",e.lJ4(34,a_)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(35,r_)),e.R7$(),e.Y8G("hasPermission",e.lJ4(36,s_)),e.R7$(),e.Y8G("ngIf",0==t.salesRequestStatus)}}function F_(a,s){1&a&&e.nrm(0,"span",132)}function O_(a,s){1&a&&e.nrm(0,"span",133)}function V_(a,s){if(1&a&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,F_,1,0,"span",130)(14,O_,1,0,"span",131),e.k0s()(),e.bVm()),2&a){const t=s.$implicit,n=s.index;e.R7$(),e.AVh("bg-danger-subtle",t.isFree),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(t.price),e.R7$(2),e.Y8G("ngIf",t.isFree),e.R7$(),e.Y8G("ngIf",!t.isFree)}}function E_(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",120)(2,"div")(3,"table",121)(4,"thead")(5,"tr",122)(6,"th",123),e.EFF(7,"#"),e.k0s(),e.nrm(8,"th",124)(9,"th",125)(10,"th",126)(11,"th",127)(12,"th",128),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,V_,15,9,"ng-container",129),e.k0s()()()()()),2&a){const t=s.$implicit;e.R7$(14),e.Y8G("ngForOf",t.salesRequestDetails)}}function D_(a,s){1&a&&(e.j41(0,"div",134),e.EFF(1," general.table.noData "),e.k0s())}function N_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",135)(1,"div",136),e.nrm(2,"ngb-pagination-info",137),e.j41(3,"table-length",138),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",139)(5,"ngb-pagination",140),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function L_(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",141),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function P_(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",142),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function G_(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",143),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function $_(a,s){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",144),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isRequest",!0)("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function B_(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",145),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function A_(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",146,12),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",147),e.j41(3,"div",148)(4,"div",149)(5,"button",150),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",151)(7,"div",152),e.nrm(8,"lord-icon",153),e.j41(9,"div",154),e.nrm(10,"h3",155)(11,"p",156),e.k0s()(),e.j41(12,"div",157),e.nrm(13,"button",158),e.j41(14,"button",159),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function X_(a,s){1&a&&(e.j41(0,"div",166),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Y_(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",146,12),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",147),e.j41(3,"div",148)(4,"div",149)(5,"button",150),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",151)(7,"div",160)(8,"label",161),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",162,13),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.changeQuantityMessage,i)||(r.form.changeQuantityMessage=i),e.Njj(i)}),e.k0s(),e.DNE(12,X_,2,0,"div",163),e.k0s(),e.j41(13,"div",157),e.nrm(14,"button",164),e.j41(15,"button",165),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),n=e.sdS(11),i=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.deleteLoader),e.R7$(8),e.R50("ngModel",i.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function z_(a,s){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",167),e.bIt("success",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.reload())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function U_(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",196),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.unitId,i)||(r.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(5,"td")(6,"input",197),e.bIt("ngModelChange",function(i){const r=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.quantitySelect(i,r))}),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,i)||(r.quantity=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,_i,n))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,_i,n)),e.R50("ngModel",t.quantity)}}function q_(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",198),e.nrm(1,"td",199),e.j41(2,"td",200)(3,"table",201)(4,"tbody")(5,"tr"),e.nrm(6,"td",202),e.j41(7,"td",203),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",204),e.j41(12,"td",203)(13,"div",205)(14,"ng-select",206),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscountType,i)||(r.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(15,"input",207),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.totalAddDiscount,i)||(r.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"tr",208),e.nrm(17,"td",209),e.j41(18,"td",203),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",210),e.nrm(22,"th",211),e.j41(23,"th",203),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,8,"orderManagement.order.currancy"),""),e.R7$(6),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,10,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,12,"orderManagement.order.currancy"),"")}}function H_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",168)(1,"div",169)(2,"h4",170),e.nrm(3,"span",171),e.k0s(),e.j41(4,"button",172),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",151),e.nrm(6,"ngx-ui-loader",147),e.j41(7,"form",173,12),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateTruck())}),e.j41(9,"div",27)(10,"div",174)(11,"label",175),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",176),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.dateChangeModal(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.acutalVisitDate,i)||(r.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(14,"div",174),e.nrm(15,"label",177),e.j41(16,"ng-select",178),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientLocationId,i)||(r.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",179)(18,"label",175),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",180),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.shippingTruckId,i)||(r.form.shippingTruckId=i),e.Njj(i)}),e.k0s()()(),e.j41(21,"div",181)(22,"div",17)(23,"div",182)(24,"div",183),e.nrm(25,"h5",184),e.k0s()(),e.j41(26,"div",44)(27,"div",185)(28,"table",186)(29,"thead",187)(30,"tr"),e.nrm(31,"th",188)(32,"th",189)(33,"th",190),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,U_,7,10,"tr",null,e.Vm6),e.DNE(37,q_,26,14,"tr",191),e.k0s()()()()()(),e.j41(38,"div",192)(39,"button",193),e.nrm(40,"i",194)(41,"span",195),e.k0s()()()()()}if(2&a){const t=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",n.locations),e.R50("ngModel",n.form.clientLocationId),e.R7$(4),e.Y8G("items",n.truncks),e.R50("ngModel",n.form.shippingTruckId),e.R7$(15),e.Dyx(n.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Q_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",174)(1,"p-image",215),e.bIt("error",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(),e.Y8G("src",n.serverPath+t.path)("preview",!0)}}function W_(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",168)(1,"div",169),e.nrm(2,"h2",212),e.j41(3,"button",172),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",213)(5,"div",27),e.DNE(6,Q_,2,2,"div",214),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.images)}}function J_(a,s){if(1&a){const t=e.RV6();e.j41(0,"view-steps",216),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("type",4)("requestId",t.operationId)}}let Z_=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C,I,y,j,F,O,N){super(t,n,g,i,l,c,h),this.baseService=i,this.salesRequestService=r,this.salesInvoicesService=o,this.authDaamService=x,this.teamService=v,this.employeeService=C,this.regionService=I,this.cityService=y,this.excelService=j,this.router=F,this.storesService=O,this.orderReceivedService=N,this.title="sales.salesRequests.title",this.titleOperation="sales.salesRequests.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.showStore=!1,this.statusList=[{id:0,name:"Draft"},{id:5,name:"ChangeQuantity"},{id:20,name:"UnderReview"},{id:30,name:"StoreDeliveryOrder"},{id:32,name:"RepareOrder"},{id:40,name:"Cancel"},{id:50,name:"Assign"},{id:60,name:"Finished"},{id:100,name:"Return"}],this.user=JSON.parse(localStorage.getItem("user")),this.stores=[],this.setting=[],this.images=[],this.serverPath=q.c.mediaUrl,this.nameSerach="salesRequest",this.setDates=(U,de,fe)=>{if(U?.from||U?.to){const M0=U.to||U.from;this.pagination[de]=this.datePipe.transform(U.from||U.to,"yyyy-MM-ddT00:00:00"),this.pagination[fe]=this.datePipe.transform(M0,"yyyy-MM-ddT23:59:59.999")}else this.pagination[de]=null,this.pagination[fe]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetOfferOrderCount(),this.configStatus(),this.GetStores()}onCheckSearch(){}configStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}GetOfferOrderCount(){this.salesRequestService.SalesRequestCount().subscribe(t=>{this.count=t.data})}GetStores(){this.storesService.getDropDown().subscribe(t=>{this.stores=t.data},t=>{console.log(t)})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.GetAllDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{n?this.alertService.success():this.alertService.error("general.message."+n)},n=>{this.alertService.error()})}mapRegisterForm(t){let n={...t};return n.employeeCode=0,n}onSearch(){-1===this.pagination.status?(this.pagination.status=null,this.pagination.statusList=[],this.showStore=!1):30===this.pagination.status?(this.pagination.status=null,this.showStore=!0,this.pagination.statusList=[30,32]):(this.pagination.statusList=[],this.showStore=!1);let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(n=>{t.push({Code:n.id,CreatorName:n.creatorName,creationTime:n.creationTime,clientName:n.clientName,Status:this.getTranslationText("sales.salesOrder."+n.offerOrderStatusValue),salse_Person:n.salsePersonName,"Delivery.Date":n.acutalVisitDate,"T.Quantity":n.totalQuantity," T.Discount":n.totalDiscount,Tax:n.totalTax,Net:n.netPrice,Reason:n.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.salesRequestStatus||5==t.salesRequestStatus?"bg-warning":20==t.salesRequestStatus?"bg-secondary ":30==t.salesRequestStatus?"bg-info":60==t.salesRequestStatus?"bg-success":40==t.salesRequestStatus?"bg-danger":50==t.salesRequestStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,n,i="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(n,{centered:!0,size:i})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.pagination.status=t,this.onSearch()}openStatusModal(t,n,i,r="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:i},this.modalService.open(n,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(f.Fq),this.salesRequestService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{n.success?(this.modalService.dismissAll(),this.reload(),this.alertService.success()):this.alertService.error("general.message."+n.message)}})}cancelOrder(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(f.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe({next:n=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const n=new Date(t);return n.getDate().toString().padStart(2,"0")+"-"+(n.getMonth()+1).toString().padStart(2,"0")+"-"+n.getFullYear()+" "+n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0")}openShippingModal(t,n,i="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(o=>{o.success?(this.form=o.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=o.data.truncks,this.locations=o.data.locations,this.modalService.open(n,{centered:!0,size:i})):this.alertService.error("general.message."+o.message)},o=>{this.alertService.error("general.message."+o)})}getTotal(){let t=0,n=0,i=0;this.form.details.forEach(r=>{r.discount<0&&(r.discoun=0);let o=r.quantity*r.price,l=0;1===r.discountType?l=r.discount:2===r.discountType&&(l=o*r.discount/100),n=+l;let c=o-l;r.net=c,t=+c}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(n=>({id:0,itemId:n.itemId,itemName:n.itemName,quantity:n.quantity,unitId:n.unitId,price:n.price,discount:n.discount,discountType:n.discountType,clientQuantity:n.clientQuantity,approvedQuantity:n.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.reload():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[n,i,r,o,l]=t.split(/[-\s:]/);return`${r}-${i}-${n}T${o}:${l}:00`}}dateChangeModal(t){t=new Date(t);let n={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(n).subscribe(i=>{i.success?this.truncks=i.data.truncks:this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}quantitySelect(t,n){t&&(t<=0&&(t=1),this.form.details[n].quantity=parseInt(t),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity,this.discountSelect(this.form.details[n].discount,n),this.getTotal())}discountSelect(t,n,i=1){if(t){(t=parseInt(t))<=0&&(this.form.details[n].discount=0),1==i&&(this.form.details[n].discount=t);let r=0;1==this.form.details[n].discountType?r=this.form.details[n].discount:(r=this.form.details[n].price*this.form.details[n].quantity*this.form.details[n].discount/100,r=+r.toFixed(2)),this.form.details[n].net=this.form.details[n].price*this.form.details[n].quantity-r,this.form.details[n].net=this.form.details[n].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}openUrl(t){let n=new Blob([t],{type:t.type});var i=URL.createObjectURL(n);window.open(i,"_blank")}PrintSalesOrder(t){this.ngxLoader.startLoader("allLoader"),this.salesRequestService.PrintReport(t).pipe((0,k.O)(),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(n=>{this.openUrl(n)},n=>{this.alertService.error("general.message."+n)})}mapUrl(t,n){return null===t||null==n?"":`https://www.google.com/maps/dir//${n},${t}/@${n},${t},17z?hl=en-US`}loadentities(){localStorage.setItem(this.nameSerach,JSON.stringify(this.pagination)),this.salesRequestService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}setDefaultImage(t,n){t.target.src=n}getInvoiceAttachments(t,n){this.salesInvoicesService.GetInvoiceAttachmentsByOrder(t).subscribe({next:i=>{this.images=i.data,this.modalService.open(n,{centered:!0,size:"md"})}})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(re.A),e.rXU(St.Z),e.rXU(ze.Q),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(He.n),e.rXU(se.O),e.rXU(Ge.S),e.rXU(xe.h),e.rXU(K.V),e.rXU(w.Ix),e.rXU(Qe.a),e.rXU(Be.B))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-request"]],features:[e.Vt3],decls:100,vars:75,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["viewMedia",""],["ViewSteps",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],[1,"row","justify-content-center"],["class","col-sm-12 col-custom-7 cursor-pointer ",3,"click",4,"ngIf"],[1,"col-sm-12","col-custom-7","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrder.completeOrder",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.cancelOrder",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","storeId","bindValue","id","bindLabel","nameAR",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,"card-body","bg-primary-subtle","d-flex","gap-1","align-items-center"],[1,"avatar-title","border","border-opacity-25","rounded-2","fs-17"],["translate","general.table.all",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-warning","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.draft",1,"mb-0","text-muted"],["translate","sales.salesOrder.reopen",1,"mb-0","text-muted"],[1,"avatar-title","bg-secondary","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.approveMangerSM",1,"mb-0","text-muted"],[1,"avatar-title","bg-info","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.storeRepeare",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-info","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.orderShipping",1,"mb-0","text-muted"],[1,""],[2,"width",".2%"],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","15%"],["translate","",2,"width","3%"],["translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","12%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["style","width:12%","translate","",4,"ngIf"],["style","width:10%","translate","",4,"ngIf"],["translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"cursor-pointer"],[3,"translate"],["class"," d-inline ri-external-link-fill",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"d-inline","ri-external-link-fill"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"badge","bg-primary"],[4,"ngIf"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],[4,"hasPermission"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"ngIf"],[1,"d-inline","ri-external-link-fill",3,"click"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-danger-subtle","text-danger"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-image-2-fill","align-bottom"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["translate","general.action.delete"],["colspan","17"],["dataKey","id"],[1,"bg-light"],[2,"width","3%"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.price",2,"width","5%"],["translate","sales.salesOrder.isFree",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","sales.salesOrder.free",4,"ngIf"],["translate","sales.salesOrder.noFree",4,"ngIf"],["translate","sales.salesOrder.free"],["translate","sales.salesOrder.noFree"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","isRequest","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false",3,"change","ngModelChange","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"],["translate","sales.salesOrder.attachments"],[1,"modal-body","p-4"],["class","col-12 col-md-3",4,"ngFor","ngForOf"],["width","80","height","100",3,"error","src","preview"],[3,"dismiss","type","requestId"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",14),e.DNE(1,o_,10,3,"div",15)(2,l_,10,3,"div",15)(3,d_,10,3,"div",15)(4,c_,10,3,"div",15)(5,m_,10,3,"div",15)(6,p_,10,3,"div",15),e.j41(7,"div",16),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(60))}),e.j41(8,"div",17)(9,"div",18)(10,"div",19)(11,"div",20),e.nrm(12,"i",21),e.k0s()(),e.j41(13,"div",22)(14,"h5",23),e.EFF(15),e.k0s(),e.nrm(16,"p",24),e.k0s()()()(),e.j41(17,"div",16),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onSelectStatus(40))}),e.j41(18,"div",17)(19,"div",18)(20,"div",19)(21,"div",25),e.nrm(22,"i",21),e.k0s()(),e.j41(23,"div",22)(24,"h5",23),e.EFF(25),e.k0s(),e.nrm(26,"p",26),e.k0s()()()()(),e.j41(27,"div",27)(28,"div",28)(29,"div",29),e.nrm(30,"ngx-ui-loader",30),e.j41(31,"base-filter",31),e.bIt("addNew",function(){return e.eBV(r),e.Njj(i.goNew())})("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())}),e.qex(32,32),e.j41(33,"div",33)(34,"div",34)(35,"input",35),e.nI1(36,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.id,l)||(i.pagination.id=l),e.Njj(l)}),e.k0s(),e.nrm(37,"i",36),e.k0s()(),e.j41(38,"div",33)(39,"input",37),e.nI1(40,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(41,"div",33)(42,"div",34)(43,"input",38),e.nI1(44,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.clientName,l)||(i.pagination.clientName=l),e.Njj(l)}),e.k0s(),e.nrm(45,"i",36),e.k0s()(),e.j41(46,"div",33)(47,"div",34)(48,"ng-select",39),e.nI1(49,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()()(),e.j41(50,"div",33)(51,"input",37),e.nI1(52,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.dates,l)||(i.searchForm.dates=l),e.Njj(l)}),e.k0s()(),e.j41(53,"div",33)(54,"div",34)(55,"ng-select",40),e.nI1(56,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.regionId,l)||(i.pagination.regionId=l),e.Njj(l)}),e.k0s()()(),e.j41(57,"div",33)(58,"div",34)(59,"ng-select",41),e.nI1(60,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.cityId,l)||(i.pagination.cityId=l),e.Njj(l)}),e.k0s()()(),e.j41(61,"div",33)(62,"div",34)(63,"ng-select",42),e.nI1(64,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.status,l)||(i.pagination.status=l),e.Njj(l)}),e.k0s()()(),e.j41(65,"div",33)(66,"div",34)(67,"ng-select",43),e.nI1(68,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.storeId,l)||(i.pagination.storeId=l),e.Njj(l)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(69,"div",44)(70,"div",45)(71,"p-table",46,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(73,h_,36,2,"ng-template",47)(74,R_,53,37,"ng-template",48)(75,E_,15,1,"ng-template",49),e.k0s()(),e.DNE(76,D_,2,0,"div",50)(77,N_,6,8,"div",51),e.k0s()()()(),e.DNE(78,L_,1,0,"ng-template",null,1,e.C5r)(80,P_,1,1,"ng-template",null,2,e.C5r)(82,G_,1,3,"ng-template",null,3,e.C5r)(84,$_,1,4,"ng-template",null,4,e.C5r)(86,B_,1,1,"ng-template",null,5,e.C5r)(88,A_,15,3,"ng-template",null,6,e.C5r)(90,Y_,16,6,"ng-template",null,7,e.C5r)(92,z_,1,1,"ng-template",null,8,e.C5r)(94,H_,42,15,"ng-template",null,9,e.C5r)(96,W_,7,1,"ng-template",null,10,e.C5r)(98,J_,1,2,"ng-template",null,11,e.C5r)}2&n&&(e.R7$(),e.Y8G("ngIf",12!=i.user.userType),e.R7$(),e.Y8G("ngIf",1==i.user.userType||9==i.user.userType),e.R7$(),e.Y8G("ngIf",1==i.user.userType||9==i.user.userType),e.R7$(),e.Y8G("ngIf",1==i.user.userType||12==i.user.userType),e.R7$(),e.Y8G("ngIf",1==i.user.userType),e.R7$(),e.Y8G("ngIf",1==i.user.userType),e.R7$(2),e.AVh("bg-primary-subtle",60==i.pagination.status),e.R7$(7),e.JRh(i.count.finished),e.R7$(3),e.AVh("bg-primary-subtle",40==i.pagination.status),e.R7$(7),e.JRh(i.count.cancel),e.R7$(5),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(74,n_))("showAdd",!0)("showExport",!0)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(36,56,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(40,58,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(44,60,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(49,62,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(52,64,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(56,66,"client.client.regionName")),e.Y8G("items",i.regions)("multiple",!1),e.R50("ngModel",i.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(60,68,"client.client.cityName")),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(64,70,"orderManagement.order.status")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.pagination.status),e.R7$(4),e.FS9("placeholder",e.bMT(68,72,"sales.salesOrder.storeName")),e.Y8G("items",i.stores)("multiple",!1),e.R50("ngModel",i.pagination.storeId),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.YU,m.Sq,m.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ie.b,ae.w,J.p,Z.g,ge.x,hi,b.Mm,E.XI,te.Ei,E.Tg,E.FP,R.Cv,$.vr,X.m,W.p,ke.m,Ue._,We,Je,m.vh,b.D9]})}}return a})();var fi=u(55999);const K_=()=>["customerRequest.register"],e1=()=>["customerRequest.changeStatus"],t1=()=>["customerRequest.edit"];function n1(a,s){1&a&&(e.j41(0,"tr",48)(1,"th",49),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",50),e.nrm(4,"i",51),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",52),e.nrm(7,"i",51),e.EFF(8," sales.clientCollection.clientName "),e.k0s(),e.j41(9,"th",53),e.nrm(10,"i",51),e.EFF(11," approvals.customerRequest.primaryPhoneNumber "),e.k0s(),e.j41(12,"th",54),e.nrm(13,"i",51),e.EFF(14," approvals.customerRequest.clientGroup "),e.k0s(),e.j41(15,"th",55),e.nrm(16,"i",51),e.EFF(17," approvals.customerRequest.city "),e.k0s(),e.j41(18,"th",56),e.nrm(19,"i",51),e.EFF(20," orderManagement.order.creation "),e.k0s(),e.j41(21,"th",57),e.EFF(22," sales.salesOrder.salsePerson "),e.k0s(),e.j41(23,"th",58),e.nrm(24,"i",51),e.EFF(25," sales.requestPersonSales.requestPersonStatus "),e.k0s(),e.j41(26,"th",59),e.nrm(27,"i",51),e.EFF(28," sales.clientCollection.notes "),e.k0s(),e.nrm(29,"th",60),e.k0s())}function a1(a,s){if(1&a&&(e.nrm(0,"i",68),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",69),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",70),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function r1(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG(),o=e.sdS(83);return e.Njj(r.openModal(i.id,o))}),e.nrm(1,"i",72),e.k0s()}}function s1(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",74),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.Send(i.id))}),e.nrm(2,"i",75),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function o1(a,s){1&a&&(e.qex(0),e.DNE(1,s1,3,3,"button",73),e.bVm()),2&a&&(e.R7$(),e.Y8G("hasPermission",e.lJ4(1,t1)))}function l1(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr",61)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td",62)(19,"span"),e.nrm(20,"span",63),e.k0s(),e.j41(21,"i",64),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(),o=e.sdS(87);return e.Njj(r.openModal(i.id,o,"lg"))}),e.k0s()(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.DNE(25,a1,10,9,"ng-template",null,6,e.C5r),e.nrm(27,"i",65),e.DNE(28,r1,2,0,"button",66)(29,o1,2,2,"ng-container",67),e.k0s()()}if(2&a){const t=s.$implicit,n=s.rowIndex,i=e.sdS(26),r=e.XpG();e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.id),e.R7$(2),e.SpI(" ",t.customerName," "),e.R7$(2),e.JRh(t.primaryPhoneNumber),e.R7$(2),e.JRh(t.clientGroupName),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.SpI(" ",e.i5U(15,16,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(t.creatorName),e.R7$(2),e.ZvI("badge d-inline ",r.getStatus(t.status),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.statusValue),e.R7$(3),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",i),e.R7$(),e.Y8G("hasPermission",e.lJ4(19,e1)),e.R7$(),e.Y8G("ngIf",50==t.requestPersonStatus)}}function d1(a,s){1&a&&(e.j41(0,"div",76),e.EFF(1," general.table.noData"),e.k0s())}function c1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",77)(1,"div",78),e.nrm(2,"ngb-pagination-info",79),e.j41(3,"table-length",80),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",81)(5,"ngb-pagination",82),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function m1(a,s){1&a&&(e.j41(0,"span",105),e.EFF(1,"general.action.register "),e.k0s())}function p1(a,s){1&a&&(e.j41(0,"span",105),e.EFF(1,"general.action.edit "),e.k0s())}function u1(a,s){1&a&&(e.j41(0,"div",106),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function g1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",83)(1,"div",84)(2,"h4",85),e.DNE(3,m1,2,0,"span",86)(4,p1,2,0,"span",86),e.j41(5,"span",87),e.EFF(6),e.k0s()(),e.j41(7,"button",88),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",89),e.nrm(9,"ngx-ui-loader",90),e.j41(10,"form",91,7),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",92)(13,"label",93),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",94),e.bIt("scrollToEnd",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.clientId,i)||(r.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(16,"div",95)(17,"label",96),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",97,8),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(21,u1,2,0,"div",98),e.k0s(),e.j41(22,"div",95)(23,"label",99),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",100,9),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,i)||(r.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(27,"div",101)(28,"button",102),e.nrm(29,"i",103)(30,"span",104),e.k0s()()()()()}if(2&a){const t=e.sdS(11),n=e.sdS(20),i=e.XpG();e.R7$(3),e.Y8G("ngIf",!i.isEditForm),e.R7$(),e.Y8G("ngIf",i.isEditForm),e.R7$(2),e.JRh(i.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",i.clients)("typeahead",i.searchClient)("loading",i.loading)("multiple",!1),e.R50("ngModel",i.form.clientId),e.R7$(4),e.R50("ngModel",i.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function h1(a,s){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",107),e.bIt("deleteConfirm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function _1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",92)(1,"label",112),e.EFF(2,"sales.clientCollection.cost"),e.k0s(),e.j41(3,"input",113),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.DH7(r.form.cost,i)||(r.form.cost=i),e.Njj(i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.cost)}}function f1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",83)(1,"div",84)(2,"h4",85)(3,"span",87),e.EFF(4),e.k0s()(),e.j41(5,"button",88),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",89),e.nrm(7,"ngx-ui-loader",90),e.j41(8,"form",91,7),e.bIt("submit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.OnStatusSubmit())}),e.j41(10,"div",29)(11,"div",92)(12,"label",108),e.EFF(13,"sales.requestPersonSales.requestPersonStatus"),e.k0s(),e.j41(14,"ng-select",109),e.nI1(15,"translate"),e.mxI("ngModelChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.form.requestPersonStatus,i)||(r.form.requestPersonStatus=i),e.Njj(i)}),e.k0s()(),e.DNE(16,_1,4,1,"div",110),e.k0s(),e.j41(17,"div",101)(18,"button",111),e.nrm(19,"i",103)(20,"span",104),e.k0s()()()()()}if(2&a){const t=e.sdS(9),n=e.XpG();e.R7$(4),e.JRh(n.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,10,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",n.status)("multiple",!1),e.R50("ngModel",n.form.requestPersonStatus),e.R7$(2),e.Y8G("ngIf",30==n.form.requestPersonStatus),e.R7$(2),e.Y8G("disabled",!t.valid)}}function b1(a,s){if(1&a){const t=e.RV6();e.j41(0,"client-summary",114),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function v1(a,s){if(1&a){const t=e.RV6();e.j41(0,"view-steps",115),e.bIt("dismiss",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("type",1)("requestId",t.operationId)}}let x1=(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v,C){super(t,n,c,i,r,o,l),this.baseService=i,this.router=h,this.excelService=x,this.clientService=v,this.employeeService=C,this.title="approvals.customerRequest.title",this.titleOperation="approvals.customerRequest.titleOperation",this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new L.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.salesPersons=[],this.nameSerach="clientrequest",this.setDates=(I,y,j)=>{if(I?.from||I?.to){const O=I.to||I.from;this.pagination[y]=this.datePipe.transform(I.from||I.to,"yyyy-MM-ddT00:00:00"),this.pagination[j]=this.datePipe.transform(O,"yyyy-MM-ddT23:59:59.999")}else this.pagination[y]=null,this.pagination[j]=null},this.configRoute(),this.GetSalesPersons()}ngOnInitMore(){this.GetRequestCount(),this.searchClient.pipe((0,Pe.B)(300),(0,Ve.F)(),(0,le.n)(t=>this.loadClient(t))).subscribe(),this.GetRequestLookups()}GetSalesPersons(){this.employeeService.GetAllByType(9).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetRequestCount(){this.baseService.GetRequestCount().pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.requestStatus=t.data})}GetRequestLookups(){this.baseService.GetRequestLookups().pipe((0,p.Q)(this.notifier)).subscribe(t=>{let n=t.data.status;n.forEach(i=>{i.name=this.getTranslationText("sales.salesOrder."+i.name)}),this.status=n})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Ie.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,le.n)(n=>(this.clients=n.data,this.loading=!1,[])),(0,p.Q)(this.notifier))}mapForm(t){return{...t}}mapRegisterForm(t){let n={...t};return n.id=0,n}OnSearch(t){this.ngxLoader.startLoader(f.a7),this.loadentities()}configRoute(){}EditModel(t,n,i="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(r=>{r.success?(this.clientParam.clientId=r.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).pipe((0,p.Q)(this.notifier)).subscribe(o=>{this.clients=o.data}),this.form=r.data):this.alertService.error("general.message."+r.message),this.modalService.open(n,{centered:!0,size:i})},r=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(n=>{t.push({nameAr:n.nameAr,nameEn:n.nameEn,isActive:this.getTranslationText("general.table.active"),notes:n.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getStatus(t){return 10==t||20==t?"bg-warning-subtle text-warning":30==t?"bg-success-subtle text-success":40==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}OnStatusSubmit(){}onStatusSelect(t){this.pagination.status=0==t?null:t,this.loadentities()}Send(t){this.baseService.Send(t).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}goNew(){this.router.navigateByUrl("/approvals/request-new-customer")}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.nX),e.rXU(b.c$),e.rXU(fi.T),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(w.Ix),e.rXU(e.gRc),e.rXU(K.V),e.rXU(ve.X),e.rXU(se.O))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-customer-request-list"]],features:[e.Vt3],decls:88,vars:44,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["operationStatus",""],["ClientInfo",""],["ViewSteps",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row","justify-content-around"],[1,"col-12","col-md-3","cursor-pointer"],[1,"card","card-animate",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","sales.salesOrder.all",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col-12","col-md-2","cursor-pointer"],["translate","sales.salesOrder.UnderReview",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],["translate","sales.salesOrder.Accept",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","sales.salesOrder.Reject",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2","mb-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientId","translate","",2,"width","15%"],["pSortableColumn","primaryPhoneNumber","translate","",2,"width","10%"],["pSortableColumn","clientGroupId","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","requestPersonStatus","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[1,"cursor-pointer"],[3,"translate"],[1,"d-inline","ri-external-link-fill",3,"click"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-warning edit-list mx-2 ",3,"click",4,"hasPermission"],[4,"ngIf"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-exchange-line","align-bottom","mx-1"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],["for","status","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","id","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["for","cost","translate","",1,"required","fw-bold","form-label"],["type","numbers","id","cost","name","cost",1,"form-control",3,"ngModelChange","ngModel"],[3,"dismiss","clientId"],[3,"dismiss","type","requestId"]],template:function(n,i){if(1&n){const r=e.RV6();e.nrm(0,"app-breadcrumbs",10),e.nI1(1,"translate"),e.j41(2,"div",11)(3,"div",12)(4,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(0))}),e.j41(5,"div",14)(6,"div",15)(7,"div"),e.nrm(8,"p",16),e.j41(9,"h2",17),e.nrm(10,"span",18),e.k0s()(),e.j41(11,"div")(12,"div",19)(13,"span",20),e.nrm(14,"i",21),e.k0s()()()()()()(),e.j41(15,"div",22)(16,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(20))}),e.j41(17,"div",14)(18,"div",15)(19,"div"),e.nrm(20,"p",23),e.j41(21,"h2",17),e.nrm(22,"span",18),e.k0s()(),e.j41(23,"div")(24,"div",19)(25,"span",24),e.nrm(26,"i",21),e.k0s()()()()()()(),e.j41(27,"div",22)(28,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(30))}),e.j41(29,"div",14)(30,"div",15)(31,"div"),e.nrm(32,"p",25),e.j41(33,"h2",17),e.nrm(34,"span",18),e.k0s()(),e.j41(35,"div")(36,"div",19)(37,"span",26),e.nrm(38,"i",21),e.k0s()()()()()()(),e.j41(39,"div",22)(40,"div",13),e.bIt("click",function(){return e.eBV(r),e.Njj(i.onStatusSelect(40))}),e.j41(41,"div",14)(42,"div",15)(43,"div"),e.nrm(44,"p",27),e.j41(45,"h2",17),e.nrm(46,"span",18),e.k0s()(),e.j41(47,"div")(48,"div",19)(49,"span",28),e.nrm(50,"i",21),e.k0s()()()()()()()(),e.j41(51,"div",29)(52,"div",30)(53,"div",31)(54,"base-filter",32),e.bIt("reset",function(){return e.eBV(r),e.Njj(i.onReset())})("search",function(){return e.eBV(r),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(i.goNew())}),e.qex(55,33),e.j41(56,"div",34)(57,"div",35)(58,"input",36),e.nI1(59,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.name,l)||(i.pagination.name=l),e.Njj(l)}),e.k0s(),e.nrm(60,"i",37),e.k0s()(),e.j41(61,"div",38)(62,"input",39),e.nI1(63,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.searchForm.creationDates,l)||(i.searchForm.creationDates=l),e.Njj(l)}),e.k0s()(),e.j41(64,"div",40)(65,"ng-select",41),e.nI1(66,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.salesPersonId,l)||(i.pagination.salesPersonId=l),e.Njj(l)}),e.k0s()(),e.j41(67,"div",40)(68,"ng-select",41),e.nI1(69,"translate"),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(i.pagination.requestPersonStatus,l)||(i.pagination.requestPersonStatus=l),e.Njj(l)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(70,"div",14)(71,"div",42)(72,"p-table",43,0),e.bIt("onLazyLoad",function(l){return e.eBV(r),e.Njj(i.tableChange(l))})("selectionChange",function(l){return e.eBV(r),e.Njj(i.onSelectionChange(l))}),e.DNE(74,n1,30,0,"ng-template",44)(75,l1,30,20,"ng-template",45),e.k0s()(),e.DNE(76,d1,2,0,"div",46)(77,c1,6,8,"div",47),e.k0s()()()(),e.DNE(78,g1,31,16,"ng-template",null,1,e.C5r)(80,h1,1,0,"ng-template",null,2,e.C5r)(82,f1,21,12,"ng-template",null,3,e.C5r)(84,b1,1,1,"ng-template",null,4,e.C5r)(86,v1,1,2,"ng-template",null,5,e.C5r)}2&n&&(e.FS9("title",e.bMT(1,33,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(10),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.all)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.underReview)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.accept)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.reject)("options",i.option),e.R7$(8),e.Y8G("addPermission",e.lJ4(43,K_))("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(59,35,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(63,37,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(66,39,"sales.salesOrder.salsePerson")),e.Y8G("items",i.salesPersons)("multiple",!1),e.R50("ngModel",i.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(69,41,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",i.status)("multiple",!1),e.R50("ngModel",i.pagination.requestPersonStatus),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[m.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,_.s5,z.kL,ce.G,Ee.m,ie.b,ae.w,J.p,Z.g,ge.x,hi,b.Mm,E.XI,te.Ei,E.Tg,R.Cv,$.vr,_.md,X.m,W.p,ke.m,m.vh,b.D9],encapsulation:2})}}return a})(),y1=(()=>{class a extends $e.E{constructor(t,n,i){super(t,n,i)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(fi.T),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),bi=(()=>{class a{constructor(t,n,i,r){this.router=t,this.route=n,this.visitDetailService=i,this.alertService=r}resolve(t,n){const r=this.router.getCurrentNavigation()?.extras?.state?.id;return""===r?(this.alertService.error(),this.router.navigateByUrl("/sales/visits"),(0,Ie.of)(null)):this.visitDetailService.GetVisitView(r)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(w.nX),e.KVO(Oe),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const C1=(a,s)=>({"text-success":a,"text-danger":s});function S1(a,s){1&a&&(e.j41(0,"span",59),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.positive")," "))}function I1(a,s){1&a&&(e.j41(0,"span",60),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.xc7("top","50px"),e.R7$(),e.SpI(" ",e.bMT(2,3,"sales.startVisits.negative")," "))}function k1(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function T1(a,s){if(1&a&&(e.j41(0,"div")(1,"span"),e.EFF(2),e.k0s()()),2&a){const t=e.XpG();e.R7$(2),e.JRh(t.visit.visitRescheduleReasonName)}}function j1(a,s){if(1&a&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function w1(a,s){if(1&a&&(e.j41(0,"div",48)(1,"div",62)(2,"div",63)(3,"span"),e.nrm(4,"span",15),e.k0s(),e.j41(5,"div",64)(6,"div",65)(7,"div",66),e.nrm(8,"i",67),e.EFF(9),e.k0s(),e.j41(10,"div",68)(11,"div",66)(12,"small",19),e.EFF(13),e.k0s()(),e.DNE(14,j1,3,1,"ng-container",28),e.k0s(),e.j41(15,"div",69)(16,"div"),e.nrm(17,"i",70),e.EFF(18),e.k0s()()(),e.j41(19,"div",65)(20,"div",69)(21,"div"),e.nrm(22,"i",71),e.EFF(23),e.k0s(),e.j41(24,"div"),e.nrm(25,"i",72),e.EFF(26),e.k0s()(),e.j41(27,"div",73),e.nrm(28,"i",26),e.EFF(29),e.nI1(30,"date"),e.nrm(31,"span",27),e.k0s()()()()()()),2&a){const t=s.$implicit,n=e.XpG();e.R7$(3),e.ZvI("ribbon ",n.getRibbonStatus(null==t?null:t.status)," round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==t?null:t.statusValue,""),e.R7$(5),e.SpI("",null==t?null:t.clientName," "),e.R7$(4),e.SpI(" #VISIT# ",null==t?null:t.id,""),e.R7$(),e.Y8G("ngForOf",null==t?null:t.visitObjectivePlans),e.R7$(4),e.SpI("",null==t?null:t.clientCity," "),e.R7$(5),e.SpI("",null==t?null:t.visitTypenameAr," "),e.R7$(3),e.SpI("",null==t?null:t.clientPhone," "),e.R7$(3),e.SpI(" ",e.i5U(30,15,null==t?null:t.date,"yyyy-MM-dd HH:mm")," "),e.R7$(2),e.ZvI("rounded-circle badge ",n.getBgStatus(null==t?null:t.status)," d-inline-block ms-2")}}function M1(a,s){1&a&&(e.j41(0,"div",74),e.EFF(1," general.table.noData "),e.k0s())}function R1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",75)(1,"div",76),e.nrm(2,"ngb-pagination-info",77),e.j41(3,"table-length",78),e.bIt("lengthChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",79)(5,"ngb-pagination",80),e.bIt("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,i)||(r.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function F1(a,s){if(1&a&&(e.j41(0,"div",48)(1,"div",62)(2,"div",63)(3,"div",64)(4,"div",81)(5,"div"),e.nrm(6,"span",82),e.EFF(7," : "),e.j41(8,"span",83),e.EFF(9),e.k0s()(),e.j41(10,"div"),e.nrm(11,"span",84),e.EFF(12," : "),e.j41(13,"span",83),e.EFF(14),e.k0s()(),e.j41(15,"div"),e.nrm(16,"span",85),e.EFF(17," : "),e.j41(18,"span",83),e.EFF(19),e.k0s()()(),e.j41(20,"div",81)(21,"div"),e.nrm(22,"span",86),e.EFF(23," : "),e.j41(24,"span",83),e.EFF(25),e.k0s()(),e.j41(26,"div"),e.nrm(27,"span",87),e.EFF(28," : "),e.j41(29,"span",83),e.EFF(30),e.k0s()(),e.j41(31,"div"),e.nrm(32,"span",88),e.EFF(33," : "),e.j41(34,"span",83),e.EFF(35),e.nI1(36,"date"),e.k0s()()(),e.j41(37,"div",81)(38,"div"),e.nrm(39,"span",89),e.EFF(40," : "),e.j41(41,"span",83),e.EFF(42),e.k0s()(),e.j41(43,"div"),e.nrm(44,"span",90),e.EFF(45," : "),e.j41(46,"span",83),e.EFF(47),e.k0s()(),e.j41(48,"div"),e.nrm(49,"span",91),e.EFF(50," : "),e.j41(51,"span",83),e.EFF(52),e.nI1(53,"date"),e.k0s()()()()()()()),2&a){const t=s.$implicit;e.R7$(9),e.JRh(null==t?null:t.id),e.R7$(5),e.JRh(null==t?null:t.clientName),e.R7$(5),e.JRh(null==t?null:t.salsePersonName),e.R7$(6),e.JRh(null==t?null:t.totalQuantity),e.R7$(5),e.JRh(null==t?null:t.totalDiscount),e.R7$(5),e.JRh(e.i5U(36,9,null==t?null:t.acutalVisitDate,"yyyy-MM-dd HH:mm")),e.R7$(7),e.JRh(null==t?null:t.vat),e.R7$(5),e.JRh(null==t?null:t.netPrice),e.R7$(5),e.JRh(e.i5U(53,12,null==t?null:t.acutalVisitDate,"yyyy-MM-dd HH:mm"))}}function O1(a,s){if(1&a&&(e.j41(0,"div",48)(1,"div",62)(2,"div",63)(3,"div",64)(4,"div",65)(5,"div"),e.nrm(6,"span",92),e.EFF(7," : "),e.j41(8,"span",83),e.EFF(9),e.k0s()(),e.j41(10,"div"),e.nrm(11,"span",93),e.EFF(12," : "),e.j41(13,"span",83),e.EFF(14),e.k0s()(),e.j41(15,"div"),e.nrm(16,"span",94),e.EFF(17," : "),e.j41(18,"span",83),e.EFF(19),e.k0s()()(),e.j41(20,"div",65)(21,"div"),e.nrm(22,"span",95),e.EFF(23," : "),e.j41(24,"span",83),e.EFF(25),e.k0s()(),e.j41(26,"div"),e.nrm(27,"span",96),e.EFF(28," : "),e.j41(29,"span",83),e.EFF(30),e.k0s()(),e.j41(31,"div"),e.nrm(32,"span",91),e.EFF(33," : "),e.j41(34,"span",83),e.EFF(35),e.nI1(36,"date"),e.k0s()()()()()()()),2&a){const t=s.$implicit;e.R7$(9),e.JRh(null==t?null:t.serial),e.R7$(5),e.JRh(null==t?null:t.clientName),e.R7$(5),e.JRh(null==t?null:t.cost),e.R7$(6),e.JRh(null==t?null:t.paymentTypeName),e.R7$(5),e.JRh(null==t?null:t.depositNumber),e.R7$(5),e.JRh(e.i5U(36,6,null==t?null:t.creationTime,"yyyy-MM-dd HH:mm"))}}function V1(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",48)(1,"div",62)(2,"div",63)(3,"div",64)(4,"div",97)(5,"div"),e.nrm(6,"span",98),e.EFF(7," : "),e.j41(8,"span",83),e.EFF(9),e.k0s()()(),e.j41(10,"div",65)(11,"p-image",99),e.bIt("error",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()()()()()}if(2&a){const t=s.$implicit,n=e.XpG();e.R7$(9),e.JRh(null==t?null:t.serviceName),e.R7$(2),e.Y8G("src",n.serverImage+(null==t?null:t.path))("preview",!0)}}function E1(a,s){1&a&&e.nrm(0,"p",57)}function D1(a,s){if(1&a&&(e.j41(0,"div",58)(1,"div",100),e.nrm(2,"img",101),e.k0s(),e.j41(3,"div",102)(4,"h5",103)(5,"span",104),e.EFF(6),e.k0s(),e.j41(7,"small",19),e.EFF(8),e.nI1(9,"date"),e.k0s()(),e.j41(10,"p",19),e.EFF(11),e.k0s()()()),2&a){const t=s.$implicit,n=e.XpG();e.Y8G("dir",n.checkPosition(t.isMain)),e.R7$(6),e.JRh(t.creatorName),e.R7$(2),e.JRh(e.i5U(9,4,t.creationTime,"mediumDate")),e.R7$(3),e.JRh(t.message)}}const P1=[{path:"salesman-orders",component:wh,data:{permission:["visitPlan.view"]}},{path:"sales-requests",component:Z_,canActivate:[ee.g],data:{permission:["salesRequest.view"]}},{path:"visit-plans",component:zd,canActivate:[ee.g],data:{permission:["visitPlan.view"]}},{path:"visit-plans/register",component:mi,canActivate:[ee.g],data:{permission:["visitPlan.register"]}},{path:"visit-plan-edit/:id",component:mi,resolve:{data:Zp},canActivate:[ee.g],data:{permission:["visitPlan.edit"]}},{path:"sales-orders",component:kt,canActivate:[ee.g],data:{permission:["salesOrder.view"]}},{path:"sales-order-store",component:Td,canActivate:[ee.g],data:{permission:["salesOrderStore.view"]}},{path:"sales-order",component:kt,canActivate:[ee.g],data:{permission:["salesOrder.view"]}},{path:"setting",component:wr,canActivate:[ee.g],data:{permission:["salesSetting.view"]}},{path:"new",component:On},{path:"sales-invoices",component:as,resolve:{data:rs},canActivate:[ee.g],data:{permission:["salesInvoices.view"]}},{path:"Client-Collections",component:Is,resolve:{data:po},canActivate:[ee.g],data:{permission:["clientCollection.view"]}},{path:"Requests-Limit",component:Ys,resolve:{data:Bo},canActivate:[ee.g],data:{permission:["requestPersonSales.view"]}},{path:"open-customer-requests",component:x1,resolve:{data:y1},data:{permission:["customerRequest.view"]}},{path:"Prices-List",component:mo,resolve:{data:Ao},canActivate:[ee.g],data:{permission:["priceList.view"]}},{path:"PriceListItems",component:Ct,canActivate:[ee.g],data:{permission:["priceList.view"]}},{path:"PriceListItems/:id",component:Ct,canActivate:[ee.g],data:{permission:["priceList.view"]}},{path:"assign-truck-orders",component:Ro,canActivate:[ee.g],data:{permission:["assignTruckOrder.view"]}},{path:"visits",component:ju,canActivate:[ee.g],data:{permission:["visits.view"]}},{path:"visits/detail",component:gi,resolve:{data:bi},data:{permission:["visits.view"]}},{path:"startVisits",component:Eg,resolve:{data:bi},data:{permission:["assignTruckOrder.view"]}},{path:"dashboard",component:Jg,data:{permission:["assignTruckOrder.view"]}},{path:"visit-view",component:(()=>{class a extends Y.w{constructor(t,n,i,r,o,l,c,h,g,x,v){super(n,i,h,r,o,l,c),this.router=t,this.baseService=r,this.authDaamService=g,this.excelService=x,this._formDataService=v,this.visit={},this.visiting=!1,this.submitted=!1,this.pagination={pageNumber:1,pageSize:5},this.starting=!1,this.isArrive=!1,this.distance="-",this.isDisdanceLoad=!1,this.serverImage=q.c.mediaUrl}ngOnInitMore(){this.routeDataConfig()}goMangeVisit(){this.router.navigate([`/sales/manage-visits/${this.visit.id}`])}routeDataConfig(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.visit=t.data.data,this.visitId=this.visit.id,this.loadentities()},t=>{this.alertService.error()})}getDetails(){this.baseService.GetVisitView(this.visitId).subscribe(t=>{this.visit=t.data,this.visiting=!1,this.loadentities()},t=>{this.alertService.error()})}getBgStatus(t){return 10==t?"bg-warning":20==t?"bg-info":30==t?"bg-success":40==t?"bg-danger":"bg-warning"}getRibbonStatus(t){return 10==t?"ribbon-warning":20==t?"ribbon-info":30==t?"ribbon-success":40==t?"ribbon-danger":"ribbon-warning"}goBack(){this.router.navigateByUrl("/sales/visits")}loadentities(){this.pagination.clientId=this.visit?.clientId,this.pagination.exceptId=this.visit?.id,this.pagination.representativeVisitPlanMasterId=this.visit?.visitPlanMasterId,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(f.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}goToDetails(t){this.visitId=t,this.visiting=!0,this.getDetails()}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}sendComment(){this.form.visitId=this.visit.id,this.submitted=!0,this.baseService.sendComment(this.form).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(t=>(0,Q.$)(t))).subscribe(t=>{t.success?(this.submitted=!1,this.modalService.dismissAll(),this.getDetails(),this.form={}):this.alertService.error("general.message."+t.message)},t=>{this.submitted=!1,this.alertService.error("general.message."+t)})}checkPosition(t){return t&&"en"==this.lang?"ltr":t&&"ar"==this.lang||!t&&"en"==this.lang?"rtl":"ltr"}startVisit(t){if(t>=20)this.router.navigate(["/sales/startVisits"],{state:{id:this.visit.id}});else{let n={id:this.visit.id,status:20};this.starting=!0,this.baseService.changeVisitStatus(n).pipe((0,k.O)(),(0,M.c)(this.mainDelay),(0,T.Z)(),(0,p.Q)(this.notifier),(0,S.j)(()=>this.ngxLoader.stopLoader(f.ZW)),(0,H.W)(i=>(0,Q.$)(i))).subscribe({next:i=>{this.getDetails(),this.starting=!0,this.router.navigate(["/sales/startVisits"],{state:{id:this.visit.id}})},error:i=>{this.alertService.error()}})}}getDistanceInMeters(t,n,i,r){const l=v=>v*Math.PI/180,c=l(i-t),h=l(r-n),g=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(t))*Math.cos(l(i))*Math.sin(h/2)*Math.sin(h/2);return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))*6371e3}checkLocation(){try{this.isDisdanceLoad=!0,navigator.geolocation.watchPosition(t=>{const r=this.getDistanceInMeters(this.visit.lat,this.visit.lng,t.coords.latitude,t.coords.longitude);this.distance=r,this.isArrive=r<=500,this.isDisdanceLoad=!1},t=>{console.error(t),this.isDisdanceLoad=!1},{enableHighAccuracy:!0,maximumAge:0,timeout:2e3})}catch{this.isDisdanceLoad=!1}}setDefaultImage(t,n){t.target.src=n}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(w.Ix),e.rXU(w.nX),e.rXU(b.c$),e.rXU(Oe),e.rXU(D.u),e.rXU(m.vh),e.rXU(R.eD),e.rXU(_.Bq),e.rXU(he.J),e.rXU(K.V),e.rXU(we.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-visit-view"]],features:[e.Vt3],decls:111,vars:34,consts:[[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[1,"container","py-4"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-2"],[1,"text-muted","cursor-pointer","mb-3","d-flex","align-items-center","fs-6",3,"click"],[1,"ri-arrow-right-fill","me-2","text-dark","fs-4"],["translate","general.action.back"],["translate","sales.visits.history",1,"col-md-2","text-primary","fs-6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"col-12","mt-5"],[1,"card","shadow-sm","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[1,"card-body"],[3,"translate"],["class","bg-success ribbon round-shape",3,"top",4,"ngIf"],["class","bg-danger ribbon round-shape",3,"top",4,"ngIf"],[1,"col-12","col-md-6"],[1,"text-muted"],[1,"mt-3","text-muted"],[1,"text-bold","fs-4"],[1,"ri-map-pin-2-line","me-1","fs-4",3,"ngClass"],[1,"ri-alarm-warning-line","me-1","text-primary"],[1,"ri-phone-line","me-1","text-primary"],[1,"mt-3","small","text-muted"],[1,"ri-calendar-line","me-1"],[2,"width","10px","height","10px"],[4,"ngFor","ngForOf"],[1,"mt-3"],[4,"ngIf"],["role","tablist",1,"nav","nav-tabs","my-4"],[1,"nav-item"],["data-bs-toggle","tab","href","#history",1,"nav-link","active"],["translate","sales.visitDetails.visitHistory"],[1,"badge","bg-danger","ms-1"],["data-bs-toggle","tab","href","#salesRequest",1,"nav-link"],["translate","sales.visitDetails.salesRequest"],["data-bs-toggle","tab","href","#clientColections",1,"nav-link"],["translate","sales.visitDetails.clientColections"],["data-bs-toggle","tab","href","#visitCategory",1,"nav-link"],["translate","sales.visitDetails.visitCategory"],["data-bs-toggle","tab","href","#notes",1,"nav-link"],["translate","sales.visitDetails.notes"],[1,"tab-content"],["id","history",1,"tab-pane","fade","show","active"],[1,"card","border-0","mb-3"],[1,"row","gy-4"],[1,"col-12","sm:px-1","md:px-5"],["class","sm:px-1 md:px-5 text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","sm:px-1 md:px-5 row text-center   pt-3 overflow-hidden",4,"ngIf"],["id","salesRequest",1,"tab-pane","fade","show"],["id","clientColections",1,"tab-pane","fade","show"],["id","visitCategory",1,"tab-pane","fade","show"],["id","notes",1,"tab-pane","fade"],["translate","",1,"card-title","mb-4"],[1,"px-3","mx-n3",2,"height","300px"],["translate","sales.visitDetails.noCommentsAvailable",1,"text-muted","text-center"],[1,"d-flex","mb-4",3,"dir"],[1,"bg-success","ribbon","round-shape"],[1,"bg-danger","ribbon","round-shape"],[1,"badge","badge-pill","bg-primary","mx-1"],[1,"card","shadow-lg","rounded-4","border-0","sm:px-1","md:px-3","card","rounded-4","h-100","ribbon-box","right","card","ribbon-box","border","mb-lg-0","material-shadow"],[1,"card-body","py-3"],[1,"row","align-items-center"],[1,"col-md-5"],[1,"d-block"],[1,"ri-user-settings-fill","me-1","text-info"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap"],[1,"mt-2","text-muted","small"],[1,"ri-map-pin-2-line","me-1","text-warning"],[1,"ri-alarm-warning-line","me-1","text-info"],[1,"ri-phone-line","me-1","text-success"],[1,"mt-2","small","text-muted","d-flex","align-items-center"],["translate","",1,"sm:px-1","md:px-5","text-center","text-danger","text-bold","fs-6","p-3"],[1,"sm:px-1","md:px-5","row","text-center","pt-3","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"col-md-4"],["translate","orderManagement.order.orderCode",1,"mx-2"],[1,"mx-2"],["translate","orderManagement.order.agentName",1,"mx-2"],["translate","sales.salesOrder.salsePerson",1,"mx-2"],["translate","sales.salesOrder.totalQuantity",1,"mx-2"],["translate","sales.salesOrder.totalDiscount",1,"mx-2"],["translate","sales.salesOrder.clientVisitDate",1,"mx-2"],["translate","orderManagement.order.totalTax",1,"mx-2"],["translate","sales.salesOrder.netPrice",1,"mx-2"],["translate","general.table.creationTime",1,"mx-2"],["translate","sales.clientCollection.serial",1,"mx-2"],["translate","sales.clientCollection.clientName",1,"mx-2"],["translate","sales.clientCollection.costCollection",1,"mx-2"],["translate","sales.clientCollection.paymentTypeName",1,"mx-2"],["translate","sales.clientCollection.depositNumber",1,"mx-2"],[1,"col-md-7"],["translate","orderManagement.order.serviceName",1,"mx-2"],["width","80","height","50",3,"error","src","preview"],[1,"flex-shrink-0"],["src","assets/images/user-dummy-img.jpg","alt","",1,"avatar-xs","rounded-circle"],[1,"flex-grow-1","ms-3"],[1,"fs-13"],[1,"fw-bolder","ms-1"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),e.bIt("click",function(){return i.goBack()}),e.nrm(7,"i",7)(8,"span",8),e.k0s()(),e.nrm(9,"div",9),e.k0s(),e.j41(10,"div",10)(11,"h3",11),e.EFF(12),e.k0s()(),e.j41(13,"div",12)(14,"div",13)(15,"div",14)(16,"span"),e.nrm(17,"span",15),e.k0s(),e.DNE(18,S1,3,5,"span",16)(19,I1,3,5,"span",17),e.j41(20,"div",0)(21,"div",18)(22,"div")(23,"bdi")(24,"small",19),e.EFF(25),e.k0s()()(),e.j41(26,"div",20)(27,"div",21)(28,"i",22)(29,"span"),e.EFF(30),e.k0s()()(),e.j41(31,"div"),e.nrm(32,"i",23),e.j41(33,"span"),e.EFF(34),e.k0s()(),e.j41(35,"div"),e.nrm(36,"i",24),e.j41(37,"span"),e.EFF(38),e.k0s()()(),e.j41(39,"div",25),e.EFF(40),e.nI1(41,"date"),e.nrm(42,"i",26)(43,"span",27),e.k0s()(),e.j41(44,"div",18)(45,"div"),e.DNE(46,k1,3,1,"ng-container",28),e.k0s(),e.j41(47,"div",29)(48,"span"),e.EFF(49),e.k0s()(),e.DNE(50,T1,3,1,"div",30),e.k0s()()()()(),e.j41(51,"ul",31)(52,"li",32)(53,"a",33),e.nrm(54,"i",34),e.j41(55,"i",35),e.EFF(56),e.k0s()()(),e.j41(57,"li",32)(58,"a",36),e.nrm(59,"i",37),e.j41(60,"i",35),e.EFF(61),e.k0s()()(),e.j41(62,"li",32)(63,"a",38),e.nrm(64,"i",39),e.j41(65,"i",35),e.EFF(66),e.k0s()()(),e.j41(67,"li",32)(68,"a",40),e.nrm(69,"i",41),e.j41(70,"i",35),e.EFF(71),e.k0s()()(),e.j41(72,"li",32)(73,"a",42),e.nrm(74,"i",43),e.j41(75,"i",35),e.EFF(76),e.k0s()()()(),e.j41(77,"div",44)(78,"div",45)(79,"div",46)(80,"div",14)(81,"div",47),e.Z7z(82,w1,32,18,"div",48,e.Vm6),e.k0s(),e.DNE(84,M1,2,0,"div",49)(85,R1,6,8,"div",50),e.k0s()()(),e.j41(86,"div",51)(87,"div",46)(88,"div",14)(89,"div",47),e.Z7z(90,F1,54,15,"div",48,e.Vm6),e.k0s()()()(),e.j41(92,"div",52)(93,"div",46)(94,"div",14)(95,"div",47),e.Z7z(96,O1,37,9,"div",48,e.Vm6),e.k0s()()()(),e.j41(98,"div",53)(99,"div",46)(100,"div",14)(101,"div",47),e.Z7z(102,V1,12,3,"div",48,e.Vm6),e.k0s()()()(),e.j41(104,"div",54)(105,"h5",55),e.EFF(106,"sales.visitDetails.comments"),e.k0s(),e.j41(107,"ngx-simplebar",56),e.DNE(108,E1,1,0,"p",57),e.Z7z(109,D1,12,7,"div",58,e.fX1),e.k0s()()()()()()()),2&n&&(e.R7$(12),e.SpI(" ",null==i.visit?null:i.visit.clientName," "),e.R7$(4),e.ZvI("ribbon ",i.getRibbonStatus(null==i.visit?null:i.visit.status),"  round-shape"),e.R7$(),e.Mz_("translate","sales.visits.",null==i.visit?null:i.visit.statusValue,""),e.R7$(),e.Y8G("ngIf",10===i.visit.type),e.R7$(),e.Y8G("ngIf",20===i.visit.type),e.R7$(6),e.SpI("#VISIT# ",null==i.visit?null:i.visit.id," "),e.R7$(3),e.Y8G("ngClass",e.l_i(31,C1,null!=i.visit.lat,null==i.visit.lat)),e.R7$(2),e.JRh(null==i.visit?null:i.visit.cityName),e.R7$(4),e.JRh(null==i.visit?null:i.visit.visitTypeNameAr),e.R7$(4),e.JRh(null==i.visit?null:i.visit.clientPhone),e.R7$(2),e.SpI(" ",e.i5U(41,28,null==i.visit?null:i.visit.date,"HH:mm yyyy-MM-dd ")," "),e.R7$(3),e.ZvI("rounded-circle ",i.getBgStatus(null==i.visit?null:i.visit.status)," d-inline-block ms-2"),e.R7$(3),e.Y8G("ngForOf",null==i.visit?null:i.visit.visitObjectivePlans),e.R7$(3),e.JRh(i.visit.salesPerson),e.R7$(),e.Y8G("ngIf",""!=i.visit.visitRescheduleReasonName),e.R7$(6),e.SpI(" ",i.pagination.totalItems,""),e.R7$(5),e.SpI(" ",i.visit.offerOrder.length,""),e.R7$(5),e.SpI(" ",i.visit.clientCollection.length,""),e.R7$(5),e.SpI(" ",i.visit.services.length,""),e.R7$(5),e.SpI(" ",i.visit.visitComments.length,""),e.R7$(6),e.Dyx(i.entities),e.R7$(2),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0),e.R7$(5),e.Dyx(i.visit.offerOrder),e.R7$(6),e.Dyx(i.visit.clientCollection),e.R7$(6),e.Dyx(i.visit.services),e.R7$(6),e.vxM(0==i.visit.visitComments.length?108:-1),e.R7$(),e.Dyx(null==i.visit?null:i.visit.visitComments))},dependencies:[m.YU,m.Sq,m.bT,_.s5,J.p,Z.g,b.Mm,Ue._,Te.ig,ut.H,m.vh,b.D9]})}}return a})(),resolve:{data:(()=>{class a{constructor(t,n,i,r){this.router=t,this.route=n,this.visitDetailService=i,this.alertService=r}resolve(t,n){const r=this.router.getCurrentNavigation()?.extras?.state?.id;return""===r?(this.alertService.error(),this.router.navigateByUrl("/sales/visits"),(0,Ie.of)(null)):this.visitDetailService.visitReport(r)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(w.Ix),e.KVO(w.nX),e.KVO(Oe),e.KVO(D.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})()},canActivate:[ee.g],data:{permission:["visits.detail"]}},{path:"details",component:gi,canActivate:[ee.g],data:{permission:["visits.detail"]}},{path:"manage-visits/:id",component:Jh,data:{permission:["assignTruckOrder.view"]}},{path:"visitRescheduleReasons",component:bt,data:{permission:["visitRescheduleReason.view"]}},{path:"visitCancelReasons",component:vt,data:{permission:["visitCancelReason.view"]}}];let G1=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[w.iI.forChild(P1),w.iI]})}}return a})();var $1=u(71144),B1=u(81141),A1=u(41198);let X1=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[m.MD]})}return a})();var Y1=u(5490);let Q1=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[[m.MD]]}),a})();u(79284),u(16229),u(12822),u(50204);let w0=(()=>{class a{constructor(){(0,B.eV)(A().loadAnimation)}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[m.MD,d.YN,_.zH,_.Pv,_.c9,z.ND,ce.r,G1,me.G,b.h.forChild(),E.bG,yi.q4,be.H_,_.c9,R.th,$.MQ,_.n8,$1.j,_._f,ke.S,Ue.U,B1.tm,A1.TV,d.X1,di.rO,X1,Y1.w8,_e.tP,ut.A,Ne.rJ,dp,Q1]})}}return a})()}}]);