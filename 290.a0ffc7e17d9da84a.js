"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[290],{56701:(H,k,n)=>{n.d(k,{g:()=>M});var o=n(54438),L=n(62984),v=n(51188),N=n(3888);let M=(()=>{class d{constructor(p,u,T){this.authservice=p,this.router=u,this.alertService=T}canActivate(p){return!!this.authservice.permissionMatch(p.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(u){return new(u||d)(o.KVO(L.J),o.KVO(v.Ix),o.KVO(N.u))}}static{this.\u0275prov=o.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},53928:(H,k,n)=>{n.d(k,{O:()=>M});var o=n(67569),L=n(45312),v=n(54438),N=n(21626);let M=(()=>{class d extends o.d{constructor(p){super(p,L.c.apiUrl+"Employee/")}GetEmployeeLookup(){return this.http.get(this.baseUrl+"GetEmployeeLookup")}getAllDropDown(){return this.http.get(this.baseUrl+"GetAllDropDown")}GetAllByType(p){return this.http.get(this.baseUrl+"GetAllByType/"+p)}static{this.\u0275fac=function(u){return new(u||d)(v.KVO(N.Qq))}}static{this.\u0275prov=v.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},69433:(H,k,n)=>{n.d(k,{a:()=>M});var o=n(67569),L=n(45312),v=n(54438),N=n(21626);let M=(()=>{class d extends o.d{constructor(p){super(p,L.c.apiUrl+"Store/")}ToDelete(p){return this.http.delete(`${this.baseUrl}${p}`)}ToEdit(p,u){return this.http.put(this.baseUrl+"Edit/"+p,u)}static{this.\u0275fac=function(u){return new(u||d)(v.KVO(N.Qq))}}static{this.\u0275prov=v.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},60290:(H,k,n)=>{n.r(k),n.d(k,{StatisticsModule:()=>jy});var o=n(60177),L=n(89417),v=n(98982),N=n.n(v),M=n(69005),d=n(32454),i2=n(66900),p=n(91022),u=n(70255),T=n(63789),t2=n(53978),h=n(73955),r2=n(68709),f2=n(65430),m2=n(41631),m=n(1530),g=n(72510),z=n(51188),b=n(21413),C=n(56977),c=n(54438),F=n(33826),D=n(91426),z2=n(26364),j7=n(40724),U=n(4626);function I7(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s(),c.j41(11,"td"),c.EFF(12),c.k0s(),c.j41(13,"td")(14,"span",51),c.EFF(15),c.k0s()(),c.j41(16,"td")(17,"span",52),c.EFF(18),c.k0s()()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.day),c.R7$(2),c.JRh(l.averageNumberofOrders),c.R7$(2),c.JRh(l.numberOfOrders),c.R7$(2),c.JRh(l.numberOfInvoices),c.R7$(2),c.JRh(l.valueInvoices),c.R7$(2),c.JRh(l.percentage),c.R7$(3),c.JRh(l.dailyTarget),c.R7$(3),c.JRh(l.unrealizedRevenue)}}function G7(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.averageDaily)}}function H7(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}function U7(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}function $7(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}let V7=(()=>{class a{constructor(l,e,s,t){this.orderService=l,this.datePipe=e,this.excelService=s,this.translateService=t,this.title="statistics.orderManager.title",this.pagination={},this.teams=[],this.cities=[],this.searchForm={},this.orderDays=[],this.topPages=[],this.zones=[],this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:2},this.dailyOrders={name:"",data:[]},this.totalInvoices={name:"",data:[]},this.invoiceAmount={name:"",data:[]},this.unrealizedRevenue={name:"",data:[]},this.days=[],this.totalBar={avgTimeOrder:0,avgTeamOrder:0,avgValueOrder:0,totalOrder:0,totalInvoices:0},this.tableChart=[],this.notifier=new b.B}ngOnInit(){this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]'),this.setCurrentMonthRange(),this.getScreen(),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]'),this.fillDays(),this.setTopPages(),this.GetChartLookup(),this.setZones()}GetChartData(){this.orderService.GetChartData(this.pagination).subscribe(l=>{this.dailyOrders=l.dailyOrders,this.totalInvoices=l.totalInvoices,this.invoiceAmount=l.invoiceAmount,this.unrealizedRevenue=l.unrealizedRevenue,this.days=l.days,this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]')})}getScreen(){this.filter(),this.GetChartData(),this.GetTotalOrderSummaryChart(),this.GetTotalOrderTableSummaryChart()}GetTotalOrderSummaryChart(){this.orderService.GetTotalOrderSummaryChart(this.pagination).subscribe(l=>{let e=l.data;this.totalBar.avgTimeOrder=e.avgTimeOrder,this.totalBar.avgTeamOrder=e.avgTeamOrder,this.totalBar.avgValueOrder=e.avgValueOrder,this.totalBar.totalOrder=e.totalOrder,this.totalBar.totalInvoices=e.totalInvoices})}GetTotalOrderTableSummaryChart(){this.orderService.GetTotalOrderTableSummaryChart(this.pagination).subscribe(l=>{this.tableChart=l.data})}GetChartLookup(){this.orderService.GetChartLookup().subscribe(l=>{this.teams=l.data.teams,this.cities=l.data.city})}getChartColorsArray(l){return(l=JSON.parse(l)).map(function(e){var s=e.replace(" ","");if(-1===s.indexOf(",")){var t=getComputedStyle(document.documentElement).getPropertyValue(s);return t?t=t.replace(" ",""):s}var r=e.split(",");if(2==r.length){var f=getComputedStyle(document.documentElement).getPropertyValue(r[0]);return"rgba("+f+","+r[1]+")"}return s})}_StackedColumnChart(l){l=this.getChartColorsArray(l),this.StackedColumnChart={series:[{name:this.dailyOrders.name,data:this.dailyOrders.data},{name:this.totalInvoices.name,data:this.totalInvoices.data},{name:this.invoiceAmount.name,data:this.divingResult(this.invoiceAmount.data)},{name:this.unrealizedRevenue.name,data:this.divingResult(this.unrealizedRevenue.data)}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,borderRadius:3,columnWidth:"90%",endingShape:"rounded"},dataLabels:{enabled:!0,style:{fontSize:"12px",colors:["#000"]},formatter:function(e){return e.toFixed(2)},offsetY:-20}},xaxis:{type:"datetime",categories:this.days},legend:{position:"right",offsetY:40},fill:{opacity:1},colors:l}}_Pyramid(l){l=this.getChartColorsArray(l),this.Pyramid={series:[{name:"",data:[501,276,145,95,64,63]}],chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:0,horizontal:!0,distributed:!0,barHeight:"80%",isFunnel:!0}},colors:l,dataLabels:{enabled:!0,formatter:function(e,s){return s.w.globals.labels[s.dataPointIndex]+":  "+e},dropShadow:{enabled:!0}},title:{align:"center"},xaxis:{categories:["\u0627\u0644\u0631\u064a\u0627\u0636","  \u062c\u062f\u0629","\u0627\u0644\u0634\u0631\u0642\u064a\u0629"," \u0627\u0644\u0645\u062f\u064a\u0646\u0629 "," \u062a\u0628\u0648\u0643","\u064a\u0646\u0628\u0639"]},legend:{show:!1}}}fillDays(){this.orderDays=[{day:"1-12-2024",averageNumberofOrders:3.06,dailyOrderCount:72,invoices:52,value:19782,percentage:"71%",dailyTarget:27696,unrealizedRevenue:-7914},{day:"2-12-2024",averageNumberofOrders:3.1,dailyOrderCount:75,invoices:53,value:2e4,percentage:"72%",dailyTarget:28e3,unrealizedRevenue:-8e3},{day:"3-12-2024",averageNumberofOrders:3.12,dailyOrderCount:78,invoices:55,value:20500,percentage:"73%",dailyTarget:28500,unrealizedRevenue:-8100},{day:"4-12-2024",averageNumberofOrders:3.05,dailyOrderCount:80,invoices:54,value:19e3,percentage:"70%",dailyTarget:27e3,unrealizedRevenue:-8500},{day:"5-12-2024",averageNumberofOrders:3.08,dailyOrderCount:74,invoices:53,value:2e4,percentage:"71%",dailyTarget:27500,unrealizedRevenue:-7500},{day:"6-12-2024",averageNumberofOrders:3.07,dailyOrderCount:77,invoices:56,value:21e3,percentage:"74%",dailyTarget:29e3,unrealizedRevenue:-8e3},{day:"7-12-2024",averageNumberofOrders:3.11,dailyOrderCount:79,invoices:58,value:21500,percentage:"75%",dailyTarget:29500,unrealizedRevenue:-8500},{day:"8-12-2024",averageNumberofOrders:3.09,dailyOrderCount:76,invoices:55,value:2e4,percentage:"71%",dailyTarget:28500,unrealizedRevenue:-7800},{day:"9-12-2024",averageNumberofOrders:3.13,dailyOrderCount:81,invoices:57,value:22e3,percentage:"76%",dailyTarget:3e4,unrealizedRevenue:-8e3},{day:"10-12-2024",averageNumberofOrders:3.15,dailyOrderCount:83,invoices:60,value:22500,percentage:"77%",dailyTarget:31e3,unrealizedRevenue:-8200},{day:"11-12-2024",averageNumberofOrders:3.1,dailyOrderCount:79,invoices:59,value:21500,percentage:"75%",dailyTarget:30500,unrealizedRevenue:-8100},{day:"12-12-2024",averageNumberofOrders:3.08,dailyOrderCount:74,invoices:56,value:21e3,percentage:"74%",dailyTarget:29500,unrealizedRevenue:-8e3},{day:"13-12-2024",averageNumberofOrders:3.11,dailyOrderCount:78,invoices:57,value:22e3,percentage:"76%",dailyTarget:3e4,unrealizedRevenue:-7900},{day:"14-12-2024",averageNumberofOrders:3.09,dailyOrderCount:80,invoices:58,value:23e3,percentage:"78%",dailyTarget:31e3,unrealizedRevenue:-7800},{day:"15-12-2024",averageNumberofOrders:3.06,dailyOrderCount:75,invoices:54,value:21e3,percentage:"75%",dailyTarget:29500,unrealizedRevenue:-7700}]}setTopPages(){this.topPages=[{name:"\u0627\u0644\u0637\u064a\u0631\u064a",schedules:"72",invoices:"45",averageOrder:"405",orderValue:"18,226"},{name:"\u0639\u0628\u062f\u0627\u0644\u0644\u0647",schedules:"71",invoices:"45",averageOrder:"438",orderValue:"19,731"},{name:"\u0635\u0628\u062d\u064a",schedules:"72",invoices:"38",averageOrder:"524",orderValue:"19,914"},{name:"\u0627\u0633\u0644\u0627\u0645 \u062d\u0633\u0646",schedules:"73",invoices:"45",averageOrder:"404",orderValue:"18,179"},{name:"\u0639\u0628\u062f\u0627\u0644\u0628\u0627\u0642\u064a",schedules:"68",invoices:"32",averageOrder:"493",orderValue:"15,769"},{name:"\u0627\u0633\u0644\u0627\u0645",schedules:"73",invoices:"32",averageOrder:"487",orderValue:"15,594"},{name:"\u0627\u062f\u0645",schedules:"72",invoices:"39",averageOrder:"441",orderValue:"17,190"}]}setZones(){this.zones=[{name:"\u0627\u0644\u0631\u064a\u0627\u0636",schedules:501,averageDaily:4.8},{name:"\u062c\u062f\u0629",schedules:276,averageDaily:4.6},{name:"\u062a\u0628\u0648\u0643",schedules:64,averageDaily:4.3},{name:"\u0627\u0644\u0634\u0631\u0642\u064a\u0629",schedules:145,averageDaily:4.8},{name:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",schedules:95,averageDaily:3.2},{name:"\u064a\u0646\u0628\u0639",schedules:63,averageDaily:4.2}]}setCurrentMonthRange(){const l=new Date,e=new Date(l.getFullYear(),l.getMonth(),1),s=new Date(l.getFullYear(),l.getMonth(),l.getDate());this.searchForm.dates={from:e,to:s}}filter(){var l=this.searchForm.dates;l+void 0&&"to"in l?(this.pagination.dateFrom=this.datePipe.transform(l.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(l.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null)}divingResult(l){return l.map(s=>(s/1e3).toFixed(2))}onExportXlsx(){let l=this.mapExcel();this.excelService.exportAsExcelFile(l,this.getTranslationText(this.title),[])}mapExcel(){let l=[];return this.tableChart?.forEach(e=>{l.push({day:e.day,averageNumberofOrders:e.averageNumberofOrders,numberOfOrders:e.numberOfOrders,numberOfInvoices:e.numberOfInvoices,valueInvoices:e.valueInvoices,percentage:e.percentage,dailyTarget:e.dailyTarget,unrealizedRevenue:e.unrealizedRevenue})}),l}getTranslationText(l){let e="";return this.translateService.get(l).pipe((0,C.Q)(this.notifier)).subscribe(s=>{e=s}),e}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(e){return new(e||a)(c.rXU(F.Q),c.rXU(o.vh),c.rXU(D.V),c.rXU(h.c$))}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-order-manager"]],decls:249,vars:54,consts:[[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"search-box"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-md-auto","ms-auto"],[1,"d-flex","hastck","gap-2","flex-wrap"],[1,"btn","btn-success",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["translate","general.action.search"],[1,"row"],[1,"col-12","col-md-2"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-money-dollar-circle-fill","align-middle"],[1,"flex-grow-1","ms-3"],["translate","statistics.orderManager.totalInvoices",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"mb-0"],[1,"counter-value",3,"countUp","options"],[1,"avatar-title","bg-light","text-warning","rounded-circle","fs-3"],["translate","statistics.orderManager.totalOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"avatar-title","bg-light","text-success","rounded-circle","fs-3"],["translate","statistics.orderManager.avgValueOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"col-12","col-md-3"],[1,"avatar-title","bg-light","text-danger","rounded-circle","fs-3"],["translate","statistics.orderManager.avgTeamOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"avatar-title","bg-light","text-info","rounded-circle","fs-3"],["translate","statistics.orderManager.avgTimeOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"col-12"],[1,"card-header"],["translate","statistics.orderManager.orderDaily",1,"card-title","mb-0"],["dir","ltr",3,"series","chart","dataLabels","plotOptions","responsive","xaxis","legend","fill","colors"],[3,"exportXlsx","showSearch","showAdd","showAllStr","totalItems","title"],[1,"table-responsive","table-card"],[1,"table","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col"],[1,"col-12","col-md-6"],[1,"card-title","mb-0"],["id","chart"],[1,"apex-charts",3,"series","chart","dataLabels","plotOptions","xaxis","colors","title","legend"],[1,"card","card-height-100"],[1,"card-header","align-items-center","d-flex"],["scope","col",2,"width","62"],[1,"col-xl-4","col-md-6"],[1,"card-title","mb-0","flex-grow-1"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-danger-subtle","text-danger"]],template:function(e,s){1&e&&(c.nrm(0,"app-breadcrumbs",0),c.nI1(1,"translate"),c.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"ng-select",6),c.nI1(8,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.pagination.cityCode,r)||(s.pagination.cityCode=r),r}),c.k0s()()(),c.j41(9,"div",4)(10,"div",5)(11,"ng-select",6),c.nI1(12,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.pagination.teamCode,r)||(s.pagination.teamCode=r),r}),c.k0s()()(),c.j41(13,"div",7)(14,"input",8),c.nI1(15,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.searchForm.dates,r)||(s.searchForm.dates=r),r}),c.k0s()(),c.j41(16,"div",9)(17,"div",10)(18,"button",11),c.bIt("click",function(){return s.getScreen()}),c.nrm(19,"i",12)(20,"span",13),c.k0s()()()()()(),c.j41(21,"div",14)(22,"div",15)(23,"div",1)(24,"div",2)(25,"div",16)(26,"div",17)(27,"span",18),c.nrm(28,"i",19),c.k0s()(),c.j41(29,"div",20),c.nrm(30,"p",21),c.j41(31,"h4",22),c.nrm(32,"span",23),c.k0s()()()()()(),c.j41(33,"div",15)(34,"div",1)(35,"div",2)(36,"div",16)(37,"div",17)(38,"span",24),c.nrm(39,"i",19),c.k0s()(),c.j41(40,"div",20),c.nrm(41,"p",25),c.j41(42,"h4",22),c.nrm(43,"span",23),c.k0s()()()()()(),c.j41(44,"div",15)(45,"div",1)(46,"div",2)(47,"div",16)(48,"div",17)(49,"span",26),c.nrm(50,"i",19),c.k0s()(),c.j41(51,"div",20),c.nrm(52,"p",27),c.j41(53,"h4",22),c.nrm(54,"span",23),c.k0s()()()()()(),c.j41(55,"div",28)(56,"div",1)(57,"div",2)(58,"div",16)(59,"div",17)(60,"span",29),c.nrm(61,"i",19),c.k0s()(),c.j41(62,"div",20),c.nrm(63,"p",30),c.j41(64,"h4",22),c.nrm(65,"span",23),c.k0s()()()()()(),c.j41(66,"div",28)(67,"div",1)(68,"div",2)(69,"div",16)(70,"div",17)(71,"span",31),c.nrm(72,"i",19),c.k0s()(),c.j41(73,"div",20),c.nrm(74,"p",32),c.j41(75,"h4",22),c.nrm(76,"span",23),c.k0s()()()()()()(),c.j41(77,"div",14)(78,"div",33)(79,"div",1)(80,"div",34),c.nrm(81,"h4",35),c.k0s(),c.j41(82,"div",2),c.nrm(83,"apx-chart",36),c.k0s()()(),c.j41(84,"div",33)(85,"div",1)(86,"base-filter",37),c.bIt("exportXlsx",function(){return s.onExportXlsx()}),c.k0s(),c.j41(87,"div",2)(88,"div",38)(89,"table",39)(90,"thead",40)(91,"tr")(92,"th",41),c.EFF(93,"\u0627\u0644\u064a\u0648\u0645"),c.k0s(),c.j41(94,"th",41),c.EFF(95,"\u0645\u062a\u0648\u0633\u0637 \u0639\u062f\u062f\u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s(),c.j41(96,"th",41),c.EFF(97,"\u0639\u062f\u062f \u0627\u0644\u0637\u0644\u0628\u0627\u062a "),c.k0s(),c.j41(98,"th",41),c.EFF(99,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(100,"th",41),c.EFF(101,"\u0642\u064a\u0645\u0629"),c.k0s(),c.j41(102,"th",41),c.EFF(103,"\u0627\u0644\u0646\u0633\u0628\u0629 "),c.k0s(),c.j41(104,"th",41),c.EFF(105,"\u0627\u0644\u0647\u062f\u0641 \u0627\u0644\u064a\u0648\u0645\u0629"),c.k0s(),c.j41(106,"th",41),c.EFF(107,"\u0627\u064a\u0631\u0627\u062f \u063a\u064a\u0631 \u0645\u062d\u0642\u0642"),c.k0s()()(),c.j41(108,"tbody"),c.Z7z(109,I7,19,8,"tr",null,c.Vm6),c.k0s()()()()()()(),c.j41(111,"div",14)(112,"div",42)(113,"div",1)(114,"div",34)(115,"h4",43),c.EFF(116,"\u0627\u0644\u0645\u062f\u0646 - \u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s()(),c.j41(117,"div",2)(118,"div",44),c.nrm(119,"apx-chart",45),c.k0s()()()(),c.j41(120,"div",42)(121,"div",46)(122,"div",47)(123,"h4",43),c.EFF(124,"\u0627\u0644\u0645\u062f\u0646 - \u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s()(),c.j41(125,"div",2)(126,"div",38)(127,"table",39)(128,"thead",40)(129,"tr")(130,"th",48),c.EFF(131,"\u0627\u0644\u0645\u0646\u0637\u0642\u0629 "),c.k0s(),c.j41(132,"th",41),c.EFF(133,"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u0634\u0647\u0631\u064a\u0629"),c.k0s(),c.j41(134,"th",41),c.EFF(135,"\u0627\u0644\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u064a\u0648\u0645\u064a"),c.k0s()()(),c.j41(136,"tbody"),c.Z7z(137,G7,7,3,"tr",null,c.Vm6),c.j41(139,"tr")(140,"th",48),c.EFF(141," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(142,"th",41),c.EFF(143,"1,144"),c.k0s(),c.j41(144,"th",41),c.EFF(145,"4.5"),c.k0s()()()()()()()()(),c.j41(146,"div",14)(147,"div",49)(148,"div",46)(149,"div",47)(150,"h4",50),c.EFF(151," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0634\u0631\u0642\u064a\u0629 \u0648\u0627\u0644\u0645\u062f\u064a\u0646\u0629 : \u0645\u062d\u0645\u062f \u0628\u0644\u0627\u0644"),c.k0s()(),c.j41(152,"div",2)(153,"div",38)(154,"table",39)(155,"thead",40)(156,"tr")(157,"th",48),c.EFF(158,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(159,"th",41),c.EFF(160,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(161,"th",41),c.EFF(162,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(163,"th",41),c.EFF(164,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(165,"th",41),c.EFF(166,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(167,"tbody"),c.Z7z(168,H7,11,5,"tr",null,c.Vm6),c.j41(170,"tr")(171,"th",48),c.EFF(172," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(173,"th",41),c.EFF(174,"501"),c.k0s(),c.j41(175,"th",41),c.EFF(176,"276"),c.k0s(),c.j41(177,"th",41),c.EFF(178,"451 "),c.k0s(),c.j41(179,"th",41),c.EFF(180,"124,603"),c.k0s()()()()()()()(),c.j41(181,"div",49)(182,"div",46)(183,"div",47)(184,"h4",50),c.EFF(185," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u062c\u062f\u0629 : \u0645\u0644\u0627\u0643 \u0627\u0644\u062c\u0628\u0631\u064a\u0646"),c.k0s()(),c.j41(186,"div",2)(187,"div",38)(188,"table",39)(189,"thead",40)(190,"tr")(191,"th",48),c.EFF(192,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(193,"th",41),c.EFF(194,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(195,"th",41),c.EFF(196,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(197,"th",41),c.EFF(198,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(199,"th",41),c.EFF(200,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(201,"tbody"),c.Z7z(202,U7,11,5,"tr",null,c.Vm6),c.j41(204,"tr")(205,"th",48),c.EFF(206," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(207,"th",41),c.EFF(208,"501"),c.k0s(),c.j41(209,"th",41),c.EFF(210,"276"),c.k0s(),c.j41(211,"th",41),c.EFF(212,"451 "),c.k0s(),c.j41(213,"th",41),c.EFF(214,"124,603"),c.k0s()()()()()()()(),c.j41(215,"div",49)(216,"div",46)(217,"div",47)(218,"h4",50),c.EFF(219," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0634\u0631\u0642\u064a\u0629 \u0648\u0627\u0644\u0645\u062f\u064a\u0646\u0629 : \u0645\u062d\u0645\u062f \u0628\u0644\u0627\u0644"),c.k0s()(),c.j41(220,"div",2)(221,"div",38)(222,"table",39)(223,"thead",40)(224,"tr")(225,"th",48),c.EFF(226,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(227,"th",41),c.EFF(228,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(229,"th",41),c.EFF(230,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(231,"th",41),c.EFF(232,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(233,"th",41),c.EFF(234,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(235,"tbody"),c.Z7z(236,$7,11,5,"tr",null,c.Vm6),c.j41(238,"tr")(239,"th",48),c.EFF(240," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(241,"th",41),c.EFF(242,"501"),c.k0s(),c.j41(243,"th",41),c.EFF(244,"276"),c.k0s(),c.j41(245,"th",41),c.EFF(246,"451 "),c.k0s(),c.j41(247,"th",41),c.EFF(248,"124,603"),c.k0s()()()()()()()()()),2&e&&(c.FS9("title",c.bMT(1,46,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.FS9("placeholder",c.bMT(8,48,"statistics.orderReview.cities")),c.Y8G("items",s.cities)("multiple",!1),c.R50("ngModel",s.pagination.cityCode),c.R7$(4),c.FS9("placeholder",c.bMT(12,50,"statistics.orderReview.teams")),c.Y8G("items",s.teams)("multiple",!1),c.R50("ngModel",s.pagination.teamCode),c.R7$(3),c.FS9("placeholder",c.bMT(15,52,"statistics.orderReview.dateReview")),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.searchForm.dates),c.R7$(18),c.Y8G("countUp",s.totalBar.totalInvoices)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.totalOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgValueOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgTeamOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgTimeOrder)("options",s.option),c.R7$(7),c.Y8G("series",s.StackedColumnChart.series)("chart",s.StackedColumnChart.chart)("dataLabels",s.StackedColumnChart.dataLabels)("plotOptions",s.StackedColumnChart.plotOptions)("responsive",s.StackedColumnChart.responsive)("xaxis",s.StackedColumnChart.xaxis)("legend",s.StackedColumnChart.legend)("fill",s.StackedColumnChart.fill)("colors",s.StackedColumnChart.colors),c.R7$(3),c.Y8G("showSearch",!1)("showAdd",!1)("showAllStr",!1)("totalItems",10)("title","statistics.orderManager.orderForDays"),c.R7$(23),c.Dyx(s.tableChart),c.R7$(10),c.Y8G("series",s.Pyramid.series)("chart",s.Pyramid.chart)("dataLabels",s.Pyramid.dataLabels)("plotOptions",s.Pyramid.plotOptions)("xaxis",s.Pyramid.xaxis)("colors",s.Pyramid.colors)("title",s.Pyramid.title)("legend",s.Pyramid.legend),c.R7$(18),c.Dyx(s.zones),c.R7$(31),c.Dyx(s.topPages),c.R7$(34),c.Dyx(s.topPages),c.R7$(34),c.Dyx(s.topPages))},dependencies:[L.me,L.BC,L.vS,p.kL,u.G,z2.m,j7.b,h.Mm,g.vr,U.Q,h.D9],encapsulation:2})}}return a})();var r1=n(67569),$=n(45312),L2=n(21626);let q7=(()=>{class a extends r1.d{constructor(l){super(l,$.c.apiUrl+"OrderReport/")}GetTeamByCity(l){return this.http.post(this.baseUrl+"GetTeamByCity",l)}DailyLookups(){return this.http.get(this.baseUrl+"DailyLookups/")}static{this.\u0275fac=function(e){return new(e||a)(c.KVO(L2.Qq))}}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var W7=n(50204),R=n(50969);const O_icon=[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192l293.8 0-26.1-74.6C372.3 104.6 360.2 96 346.6 96L165.4 96c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32l181.2 0c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2l0 144 0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L96 400l0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L0 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"];var o1=n(38542);function Tk(a,i){if(1&a){const l=c.RV6();c.j41(0,"map-marker",13,0),c.bIt("mapClick",function(){const s=c.eBV(l).$implicit,t=c.sdS(1),r=c.XpG(2);return c.Njj(r.openInfo(t,s))}),c.k0s()}2&a&&c.Y8G("position",i.$implicit.center)}function Dk(a,i){if(1&a&&(c.qex(0),c.DNE(1,Tk,2,1,"map-marker",12),c.bVm()),2&a){const l=c.XpG();c.R7$(),c.Y8G("ngForOf",l.markers)}}function Bk(a,i){if(1&a&&(c.qex(0),c.nrm(1,"map-marker",14)(2,"map-polyline",15),c.bVm()),2&a){const l=c.XpG();c.R7$(),c.Y8G("position",l.markersPath)("options",l.arrayOfOptions),c.R7$(),c.Y8G("options",l.polylineOptions)}}function Pk(a,i){if(1&a&&(c.qex(0),c.j41(1,"span",16),c.nI1(2,"translate"),c.EFF(3),c.k0s(),c.bVm()),2&a){const l=i.$implicit,e=c.XpG();c.R7$(),c.FCK("routerLink","",null==e.data?null:e.data.orderCode,"/",l.teamId,""),c.FS9("pTooltip",c.bMT(2,5,"maps.moreDetails")),c.R7$(2),c.SpI(" ",null==l?null:l.teamName,"")}}let E7=(()=>{class a{scroll(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}constructor(){this.mapType="",this.selectedCity={},this.zoom=5,this.markers=[],this.path=[],this.NewMarkers=[],this.markersPath={},this.arrayOfOptions={draggable:!1,icon:{path:O_icon[4],fillColor:"orange",fillOpacity:1,anchor:new google.maps.Point(O_icon[0],O_icon[1]),strokeWeight:1,strokeColor:"orange",scale:.045}},this.mapOptions={scrollwheel:!0,disableDoubleClickZoom:!0,mapTypeId:google.maps.MapTypeId.HYBRID},this.center={lat:24.718694510120354,lng:46.68111315541776}}ngOnInit(){}ngOnChanges(l){"markers"==this.mapType?(this.NewMarkers=this.markers,console.log(this.markers),this.center={lat:this.selectedCity.center.lat,lng:this.selectedCity.center.lng},this.zoom=this.selectedCity.zoom):"path"==this.mapType&&this.startPath()}startPath(){let l=[];this.path.forEach(s=>{l.push({lat:parseFloat(s.lat),lng:parseFloat(s.lng)}),this.polylineOptions={path:l,strokeColor:"orange",strokeOpacity:1,strokeWeight:2},this.markersPath={lat:parseFloat(s.lat),lng:parseFloat(s.lng)},this.center={lat:parseFloat(s.lat),lng:parseFloat(s.lng)},console.log(l,"this.NewPath")})}openInfo(l,e){this.data=e,console.log(e),this.info?.open(l)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-google-map"]],viewQuery:function(e,s){if(1&e&&(c.GBs(R.u6,5),c.GBs(R.D1,5)),2&e){let t;c.mGM(t=c.lsd())&&(s.map=t.first),c.mGM(t=c.lsd())&&(s.info=t.first)}},inputs:{mapType:"mapType",selectedCity:"selectedCity",zoom:"zoom",markers:"markers",path:"path"},features:[c.OA$],decls:36,vars:39,consts:[["markerEle","mapMarker"],[1,"google-map-ani"],["width","100%","height","600px",3,"options","zoom","center"],[4,"ngIf"],[1,"me-3"],[1,""],[1,"me-2"],[1,"text-start","mb-3",2,"min-width","300px"],[1,"ri-group-fill","text-primary","me-1","align-bottom"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["target","_blank",1,"me-5",3,"href"],[3,"position","mapClick",4,"ngFor","ngForOf"],[3,"mapClick","position"],[3,"position","options"],[3,"options"],["tooltipPosition","top",1,"badge","bg-primary-subtle","text-primary","mx-1","cursor-pointer",3,"routerLink","pTooltip"]],template:function(e,s){1&e&&(c.j41(0,"div",1)(1,"google-map",2),c.DNE(2,Dk,2,1,"ng-container",3)(3,Bk,3,3,"ng-container",3),c.j41(4,"map-info-window")(5,"div")(6,"h6"),c.EFF(7),c.nI1(8,"translate"),c.k0s(),c.j41(9,"h6")(10,"span",4),c.EFF(11),c.nI1(12,"translate"),c.k0s(),c.j41(13,"span",5),c.EFF(14),c.nI1(15,"translate"),c.k0s()(),c.j41(16,"h6")(17,"span",6),c.EFF(18),c.nI1(19,"translate"),c.k0s(),c.j41(20,"span",5),c.EFF(21),c.nI1(22,"translate"),c.k0s()(),c.j41(23,"h6",5),c.EFF(24),c.nI1(25,"translate"),c.k0s(),c.j41(26,"div",7)(27,"h6"),c.nrm(28,"i",8),c.EFF(29),c.nI1(30,"translate"),c.k0s(),c.DNE(31,Pk,4,7,"ng-container",9),c.k0s(),c.j41(32,"div",10)(33,"a",11),c.EFF(34),c.nI1(35,"translate"),c.k0s()()()()()()),2&e&&(c.R7$(),c.Y8G("options",s.mapOptions)("zoom",s.zoom)("center",s.center),c.R7$(),c.Y8G("ngIf","markers"==s.mapType),c.R7$(),c.Y8G("ngIf","path"==s.mapType),c.R7$(4),c.Lme("",c.bMT(8,23,"maps.orderCode"),": #SO#",null==s.data?null:s.data.orderCode,""),c.R7$(4),c.Lme("",c.bMT(12,25,"maps.city"),": ",null==s.data?null:s.data.cityName,""),c.R7$(3),c.Lme("",c.bMT(15,27,"maps.district"),": ",null==s.data?null:s.data.districtName,""),c.R7$(4),c.Lme("",c.bMT(19,29,"maps.agentName"),": ",null==s.data?null:s.data.agentName,""),c.R7$(3),c.Lme("",c.bMT(22,31,"maps.mobile"),": ",null==s.data?null:s.data.mobile,""),c.R7$(3),c.Lme("",c.bMT(25,33,"maps.servicesName"),": ",null==s.data?null:s.data.servicesName,""),c.R7$(5),c.JRh(c.bMT(30,35,"orderManagement.order.assignTo")),c.R7$(2),c.Y8G("ngForOf",null==s.data?null:s.data.teamDetails),c.R7$(2),c.FCK("href","https://www.google.com/maps?q=",null==s.data?null:s.data.center.lat,",",null==s.data?null:s.data.center.lng,"",c.B4B),c.R7$(),c.JRh(c.bMT(35,37,"maps.openInGoogleMaps")))},dependencies:[o.Sq,o.bT,R.u6,R.D1,R.fU,R.ZC,z.Wk,o1.m,h.D9],styles:[".google-map-ani[_ngcontent-%COMP%]{transition:transform 1s ease-in-out}"]})}}return a})();function Ok(a,i){if(1&a&&(c.j41(0,"div",17)(1,"div",2)(2,"div",3)(3,"div",60)(4,"div",61)(5,"span",62),c.nrm(6,"i",63),c.k0s()(),c.j41(7,"div",64)(8,"p",65),c.EFF(9),c.k0s(),c.j41(10,"h4",66),c.nrm(11,"span",67),c.k0s()()()()()()),2&a){const l=i.$implicit,e=c.XpG();c.R7$(9),c.SpI("",l.time," "),c.R7$(2),c.Y8G("countUp",l.total)("options",e.option)}}function Ek(a,i){if(1&a&&(c.j41(0,"div",68)(1,"div",2)(2,"div",3)(3,"div",60)(4,"div",61)(5,"span",62),c.nrm(6,"i",63),c.k0s()(),c.j41(7,"div",64),c.nrm(8,"p",69),c.j41(9,"h4",66),c.nrm(10,"span",70),c.k0s()()()()()()),2&a){const l=c.XpG();c.R7$(10),c.Y8G("countUp",l.getTotal())("options",l.option)}}function _k(a,i){if(1&a&&(c.j41(0,"span",74),c.nI1(1,"translate"),c.EFF(2),c.k0s()),2&a){const l=c.XpG().$implicit;c.FS9("pTooltip",c.bMT(1,2,"statistics.orderDaily.totalCity")),c.R7$(2),c.JRh(l.total)}}function jk(a,i){if(1&a&&(c.j41(0,"span",75),c.nI1(1,"translate"),c.EFF(2),c.k0s()),2&a){const l=c.XpG().$implicit;c.FS9("pTooltip",c.bMT(1,2,"statistics.orderDaily.totalAvailable")),c.R7$(2),c.JRh(l.totalNoOreder)}}function Ik(a,i){if(1&a&&(c.qex(0),c.j41(1,"th",71),c.DNE(2,_k,3,4,"span",72)(3,jk,3,4,"span",73),c.EFF(4),c.k0s(),c.bVm()),2&a){const l=i.$implicit,e=i.index,s=c.XpG();c.R7$(),c.STu("border-1 ",l.class," text-center  text-white ",s.randomColor(e),""),c.BMQ("colspan",0===e?l.teams.length+1:l.teams.length),c.R7$(),c.Y8G("ngIf",l.total>0),c.R7$(),c.Y8G("ngIf",l.totalNoOreder>0),c.R7$(),c.SpI(" ",l.cityName," ")}}function Gk(a,i){if(1&a&&(c.qex(0),c.j41(1,"th",71),c.EFF(2),c.k0s(),c.bVm()),2&a){const l=i.$implicit,e=i.index,s=c.XpG(2);c.R7$(),c.ZvI(" text-center text-white ",s.randomColor(e),""),c.R7$(),c.SpI("",l.teamName," ")}}function Hk(a,i){if(1&a&&(c.qex(0),c.DNE(1,Gk,3,4,"ng-container",51),c.bVm()),2&a){const l=i.$implicit;c.R7$(),c.Y8G("ngForOf",l.teams)}}function Uk(a,i){if(1&a){const l=c.RV6();c.j41(0,"div",79)(1,"button",80),c.EFF(2),c.k0s(),c.j41(3,"div",81),c.bIt("click",function(){c.eBV(l);const s=c.XpG().$implicit,t=c.XpG(2),r=c.sdS(107);return c.Njj(t.openModal(s,r,"xl"))}),c.nrm(4,"button",82),c.k0s()()}if(2&a){const l=c.XpG().$implicit;c.R7$(),c.ZvI("btn w-100 ",l.teamStatusName," text-white"),c.FS9("pTooltip",l.orderCode),c.Y8G("id","dropdownBasic"+l.teamCode),c.R7$(),c.SpI(" ",l.total," "),c.R7$(),c.BMQ("aria-labelledby","dropdownBasic"+l.teamCode)}}function $k(a,i){1&a&&(c.j41(0,"div"),c.nrm(1,"button",83),c.k0s())}function Vk(a,i){1&a&&(c.j41(0,"div"),c.nrm(1,"button",84),c.k0s())}function qk(a,i){1&a&&(c.j41(0,"div"),c.nrm(1,"button",85),c.k0s())}function Wk(a,i){if(1&a&&(c.j41(0,"td",76),c.DNE(1,Uk,5,7,"div",77)(2,$k,2,0,"div",78)(3,Vk,2,0,"div",78)(4,qk,2,0,"div",78),c.k0s()),2&a){const l=i.$implicit;c.R7$(),c.Y8G("ngIf",l.isFound&&!l.isReOrder&&!l.isHoliday),c.R7$(),c.Y8G("ngIf",!l.isFound&&!l.isReOrder&&!l.isHoliday),c.R7$(),c.Y8G("ngIf",l.isHoliday),c.R7$(),c.Y8G("ngIf",l.isReOrder)}}function Yk(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.Z7z(3,Wk,5,4,"td",76,c.Vm6),c.j41(5,"td"),c.EFF(6),c.k0s()(),c.nrm(7,"tr")),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.timeName),c.R7$(),c.Dyx(l.orderTeamTimeDailys),c.R7$(3),c.SpI(" ",l.total," ")}}function Xk(a,i){if(1&a&&(c.qex(0),c.j41(1,"td",76),c.EFF(2),c.k0s(),c.bVm()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l)}}function Jk(a,i){if(1&a&&(c.qex(0),c.j41(1,"th",71),c.EFF(2),c.k0s(),c.bVm()),2&a){const l=i.$implicit,e=i.index;c.R7$(),c.ZvI("border-1 ",l.class," text-center   "),c.BMQ("colspan",0===e?l.teams.length+1:l.teams.length),c.R7$(),c.SpI(" ",l.total," ")}}function Qk(a,i){if(1&a&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s()()),2&a){const l=i.$implicit;c.R7$(2),c.JRh(l.time),c.R7$(2),c.JRh(l.total)}}function Kk(a,i){if(1&a&&(c.j41(0,"div",16)(1,"div",86)(2,"div",2)(3,"div",20),c.nrm(4,"h4",87),c.k0s(),c.j41(5,"div",3)(6,"div",88),c.nrm(7,"apx-chart",89),c.k0s()()()(),c.j41(8,"div",86)(9,"div",90)(10,"div",91),c.nrm(11,"h4",92),c.k0s(),c.j41(12,"div",3)(13,"div",48)(14,"table",93)(15,"thead",94)(16,"tr"),c.nrm(17,"th",95)(18,"th",96),c.k0s()(),c.j41(19,"tbody"),c.Z7z(20,Qk,5,2,"tr",null,c.Vm6),c.j41(22,"tr"),c.nrm(23,"th",97),c.j41(24,"th",71),c.EFF(25),c.k0s()()()()()()()()()),2&a){const l=c.XpG();c.R7$(7),c.Y8G("series",l.Pyramid.series)("chart",l.Pyramid.chart)("dataLabels",l.Pyramid.dataLabels)("plotOptions",l.Pyramid.plotOptions)("xaxis",l.Pyramid.xaxis)("colors",l.Pyramid.colors)("title",l.Pyramid.title)("legend",l.Pyramid.legend),c.R7$(13),c.Dyx(l.timeTeamTotal),c.R7$(5),c.JRh(l.getTotal())}}function Zk(a,i){if(1&a&&c.nrm(0,"order-operation",98),2&a){const l=c.XpG();c.Y8G("isOrderEdit",l.isEdit)("isInner",!0)("orderCode",l.orderId)}}let cy=(()=>{class a{constructor(l,e,s,t,r){this.order=l,this.orderReportService=e,this.datePipe=s,this.ngxLoader=t,this.modalService=r,this.title="statistics.orderDaily.title",this.pagination={},this.teams=[],this.citiesForMap=[],this.cities=[],this.searchForm={},this.orders=[],this.orderDays=[],this.topPages=[],this.zones=[],this.cityTeams=[],this.times=[],this.teamsCities=[],this.timesList=[],this.teamTotals=[],this.timeTotal=[],this.time=[],this.timeTeamTotal=[],this.orderTeamTimeDaily=[],this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:2},this.teamDrop=[],this.orderId=0,this.isEdit=!1}ngOnInit(){this.breadCrumbItems=[],this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]'),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]'),this.setCurrentMonthRange(),this.filter(),this.GetTeamByCity(),this.getOrderLocation(),this.getOrderReport()}setCurrentMonthRange(){const l=new Date,e=new Date(l.getFullYear(),l.getMonth(),l.getDate());this.searchForm.dates=e}OnSearch(){this.filter(),this.GetTeamByCity(),this.getOrderLocation()}setCity(){this.selectedCity={id:null,name:"",center:{lat:24.718694510120354,lng:46.68111315541776},zoom:5}}getOrderReport(){this.orderReportService.DailyLookups().subscribe(l=>{this.teamDrop=l.data.teams,this.cities=l.data.cities})}getOrderLocation(){this.order.GetOrderAssign(this.pagination).subscribe(l=>{let e=[];l.data.forEach(s=>{e.push({...s,center:{lat:parseFloat(s.orderLocations[0].lat),lng:parseFloat(s.orderLocations[0].lng)}})}),this.orders=e})}GetTeamByCity(){this.ngxLoader.startLoader("orders"),this.orderReportService.GetTeamByCity(this.pagination).subscribe(l=>{this.teams=l.data.teams,this.orderTeamTimeDaily=l.data.orderTeamTimeDaily,this.teamsCities=l.data.teamCity,this.teamTotals=l.data.teamTotals,this.timeTotal=l.data.timeTotal,this.timeTeamTotal=l.data.timeTeamTotal,this.times=l.data.times,this.getTotal(),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]'),this.ngxLoader.stopLoader("orders")},()=>{this.ngxLoader.stopLoader("orders")})}getTimesList(l){const e=l.reduce((t,r)=>(r.teams.forEach(f=>{f.workTimes.forEach(G=>{const{workTime:x,totalOrder:S,status:y}=G;t.has(x)||t.set(x,{workTime:x,total:[]}),t.get(x).total.push({totalOrder:S,teamName:f.teamName,status:y})})}),t),new Map),s=Array.from(e.values());return console.log(s),s}filter(){var l=this.searchForm.dates;l+void 0?(this.pagination.dateFrom=this.datePipe.transform(l,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(l,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null),this.pagination.teamId=this.searchForm.teamId,this.pagination.cityId=this.searchForm.cityId}getChartColorsArray(l){return(l=JSON.parse(l)).map(function(e){var s=e.replace(" ","");if(-1===s.indexOf(",")){var t=getComputedStyle(document.documentElement).getPropertyValue(s);return t?t=t.replace(" ",""):s}var r=e.split(",");if(2==r.length){var f=getComputedStyle(document.documentElement).getPropertyValue(r[0]);return"rgba("+f+","+r[1]+")"}return s})}_StackedColumnChart(l){l=this.getChartColorsArray(l),this.StackedColumnChart={series:[{name:"\u0639\u062f\u062f \u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u064a\u0648\u0645\u064a\u0629",data:[72,75,83,79,80,77,79,75,79,76,70,80,78,76,65]},{name:" \u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",data:[52,65,55,60,33,18,60,54,51,61,44,40,10,48,32]},{name:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645\u064a\u0629",data:[19.782,18.539,26.679,23.701,14.136,7.742,23.876,21.185,20.172,22.612,22.484,16.062,6.406,24.798,20.209]},{name:"\u0625\u064a\u0631\u0627\u062f \u063a\u064a\u0631 \u0645\u062d\u0642\u0642",data:[-7.914,-9.157,-10.17,-3.995,-3.174,-2.644,-.382,-6.511,-7.524,-5.084,-5.212,-1.248,-.398,-2.898,-7.487]}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,borderRadius:3,columnWidth:"90%",endingShape:"rounded"},dataLabels:{enabled:!0,style:{fontSize:"12px",colors:["#000"]},formatter:function(e){return e.toFixed(3)},offsetY:-20}},xaxis:{type:"datetime",categories:["01/01/2024 GMT","01/02/2024 GMT","01/03/2024 GMT","01/04/2024 GMT","01/05/2024 GMT"]},legend:{position:"right",offsetY:40},fill:{opacity:1},colors:l}}_Pyramid(l){l=this.getChartColorsArray(l),this.Pyramid={series:[{name:"",data:this.timeTotal}],chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:0,horizontal:!0,distributed:!0,barHeight:"80%",isFunnel:!0}},colors:l,dataLabels:{enabled:!0,formatter:function(e,s){return s.w.globals.labels[s.dataPointIndex]+":  "+e},dropShadow:{enabled:!0}},title:{align:"center"},xaxis:{categories:this.times},legend:{show:!1}}}setTopPages(){this.topPages=[{name:"\u0627\u0644\u0637\u064a\u0631\u064a",schedules:"72",invoices:"45",averageOrder:"405",orderValue:"18,226"},{name:"\u0639\u0628\u062f\u0627\u0644\u0644\u0647",schedules:"71",invoices:"45",averageOrder:"438",orderValue:"19,731"},{name:"\u0635\u0628\u062d\u064a",schedules:"72",invoices:"38",averageOrder:"524",orderValue:"19,914"},{name:"\u0627\u0633\u0644\u0627\u0645 \u062d\u0633\u0646",schedules:"73",invoices:"45",averageOrder:"404",orderValue:"18,179"},{name:"\u0639\u0628\u062f\u0627\u0644\u0628\u0627\u0642\u064a",schedules:"68",invoices:"32",averageOrder:"493",orderValue:"15,769"},{name:"\u0627\u0633\u0644\u0627\u0645",schedules:"73",invoices:"32",averageOrder:"487",orderValue:"15,594"},{name:"\u0627\u062f\u0645",schedules:"72",invoices:"39",averageOrder:"441",orderValue:"17,190"}]}getTotal(){return this.timeTeamTotal.reduce((e,s)=>e+s.total,0).toFixed(2)}getTeamStatus(l){return 0==l||1==l||2==l||3==l?"bg-info text-white  fs-6":4==l?"bg-success text-white  fs-6":5==l||6==l?"bg-danger text-white  fs-6":7==l?"bg-success text-white fs-6":""}randomColor(l){return 0==l?"bg-gray-400  ":1==l?"bg-gray-500 ":2==l?"bg-gray-400 ":3==l?"bg-gray-500 ":4==l?"bg-gray-400 ":5==l?"bg-gray-500 ":6==l?"bg-gray-400 ":7==l?"bg-gray-500 ":8==l?"bg-gray-400 ":""}openModal(l,e,s="md"){this.orderId=l.orderCode,this.isEdit=7!=l.teamStatus,this.modalService.open(e,{centered:!0,size:s})}static{this.\u0275fac=function(e){return new(e||a)(c.rXU(F.Q),c.rXU(q7),c.rXU(o.vh),c.rXU(m.eD),c.rXU(M.Bq))}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-order-daily"]],decls:108,vars:47,consts:[["orderModel",""],[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"search-box"],["id","id","name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","teamId","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","single",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-md-auto","ms-auto"],[1,"d-flex","hastck","gap-2","flex-wrap"],["data-bs-toggle","modal","data-bs-target","#adddeals",1,"btn","btn-success",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["translate","general.action.search"],[1,"row"],[1,"col-12","col-md-4","col-lg-2"],["class","col-12 col-md-2",4,"ngIf"],[1,"col-12"],[1,"card-header"],[1,"col-12","p-0"],["translate","statistics.orderDaily.orderDays",1,"card-title","mb-0","flex-grow-1"],[1,"row","row-cols-3","row-cols-lg-6"],[1,"col","d-flex","align-items-center"],[1,"callClientAndSure","small-indicator","me-2"],["translate","orderManagement.order.callClientAndSure",1,"text-muted","mb-0"],[1,"enRouteToCustomer","small-indicator","me-2"],["translate","orderManagement.order.enRouteToCustomer",1,"text-muted","mb-0"],[1,"arrivedAtLocation","small-indicator","me-2"],["translate","orderManagement.order.arrivedAtLocation",1,"text-muted","mb-0"],[1,"startWork","small-indicator","me-2"],["translate","orderManagement.order.startWork",1,"text-muted","mb-0"],[1,"clientNotResponse","small-indicator","me-2"],["translate","orderManagement.order.clientNotResponse",1,"text-muted","mb-0"],[1,"requestCancellation","small-indicator","me-2"],["translate","orderManagement.order.requestCancellation",1,"text-muted","mb-0"],[1,"clientDelayOrder","small-indicator","me-2"],["translate","orderManagement.order.clientDelayOrder",1,"text-muted","mb-0"],[1,"requestFinished","small-indicator","me-2"],["translate","orderManagement.order.requestFinished",1,"text-muted","mb-0"],[1,"bg-warning","small-indicator","me-2"],["translate","statistics.orderDaily.noOrder",1,"text-muted","mb-0"],[1,"btn-teamHoliday","small-indicator","me-2"],["translate","statistics.orderDaily.teamHoliday",1,"text-muted","mb-0"],[1,"bg-success","small-indicator","me-2"],["translate","statistics.orderDaily.reorder",1,"text-muted","mb-0"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"table-responsive","table-card"],[1,"table","table-border","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","border","table-light"],[4,"ngFor","ngForOf"],["scope","col",1,"text-center"],["class","row",4,"ngIf"],[1,"col-lg-12"],[1,"card-title"],[1,"col-12","col-lg-6"],["bindLabel","name",3,"ngModelChange","clear","placeholder","ngModel","items","multiple"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[3,"mapType","markers","selectedCity"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-money-dollar-circle-fill","align-middle"],[1,"flex-grow-1","ms-3"],[1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"mb-0"],[1,"counter-value",3,"countUp","options"],[1,"col-12","col-md-2"],["translate","statistics.orderDaily.total",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"counter-value","fs-4","text-danger",3,"countUp","options"],["scope","col"],["tooltipPosition","top","class","badge bg-success mx-1",3,"pTooltip",4,"ngIf"],["tooltipPosition","top","class","badge bg-warning mx-1",3,"pTooltip",4,"ngIf"],["tooltipPosition","top",1,"badge","bg-success","mx-1",3,"pTooltip"],["tooltipPosition","top",1,"badge","bg-warning","mx-1",3,"pTooltip"],[1,"text-center"],["ngbDropdown","","class","d-inline-block  w-100",4,"ngIf"],[4,"ngIf"],["ngbDropdown","",1,"d-inline-block","w-100"],["tooltipPosition","top","type","button","ngbDropdownToggle","",3,"pTooltip","id"],["ngbDropdownMenu","",3,"click"],["ngbDropdownItem","","translate","general.action.view"],["type","button","translate","statistics.orderDaily.noOrder",1,"btn","w-100","btn-warning"],["type","button","translate","statistics.orderDaily.teamHoliday",1,"btn","w-100","btn-teamHoliday"],["type","button","translate","statistics.orderDaily.reorder",1,"btn","w-100","btn-success"],[1,"col-12","col-md-6"],["translate","statistics.orderDaily.revenueTime",1,"card-title","mb-0"],["id","chart"],[1,"apex-charts",3,"series","chart","dataLabels","plotOptions","xaxis","colors","title","legend"],[1,"card","card-height-100"],[1,"card-header","align-items-center","d-flex"],["translate","statistics.orderDaily.cityTime",1,"card-title","mb-0"],[1,"table","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col","translate","statistics.orderDaily.time",2,"width","62"],["scope","col","translate","statistics.orderDaily.revenue"],["scope","col","translate","statistics.orderDaily.total",2,"width","62"],[3,"isOrderEdit","isInner","orderCode"]],template:function(e,s){if(1&e){const t=c.RV6();c.nrm(0,"app-breadcrumbs",1),c.nI1(1,"translate"),c.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"ng-select",7),c.nI1(8,"translate"),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.searchForm.cityId,f)||(s.searchForm.cityId=f),c.Njj(f)}),c.k0s()()(),c.j41(9,"div",5)(10,"div",6)(11,"ng-select",8),c.nI1(12,"translate"),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.searchForm.teamId,f)||(s.searchForm.teamId=f),c.Njj(f)}),c.k0s()()(),c.j41(13,"div",9)(14,"input",10),c.nI1(15,"translate"),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.searchForm.dates,f)||(s.searchForm.dates=f),c.Njj(f)}),c.k0s()(),c.j41(16,"div",11)(17,"div",12)(18,"button",13),c.bIt("click",function(){return c.eBV(t),c.Njj(s.OnSearch())}),c.nrm(19,"i",14)(20,"span",15),c.k0s()()()()()(),c.j41(21,"div",16),c.Z7z(22,Ok,12,3,"div",17,c.Vm6),c.DNE(24,Ek,11,2,"div",18),c.k0s(),c.j41(25,"div",16)(26,"div",19)(27,"div",2)(28,"div",20)(29,"div",16)(30,"div",21),c.nrm(31,"h4",22),c.k0s(),c.j41(32,"div",19)(33,"div",23)(34,"div",24),c.nrm(35,"div",25)(36,"p",26),c.k0s(),c.j41(37,"div",24),c.nrm(38,"div",27)(39,"p",28),c.k0s(),c.j41(40,"div",24),c.nrm(41,"div",29)(42,"p",30),c.k0s(),c.j41(43,"div",24),c.nrm(44,"div",31)(45,"p",32),c.k0s(),c.j41(46,"div",24),c.nrm(47,"div",33)(48,"p",34),c.k0s(),c.j41(49,"div",24),c.nrm(50,"div",35)(51,"p",36),c.k0s(),c.j41(52,"div",24),c.nrm(53,"div",37)(54,"p",38),c.k0s(),c.j41(55,"div",24),c.nrm(56,"div",39)(57,"p",40),c.k0s(),c.j41(58,"div",24),c.nrm(59,"div",41)(60,"p",42),c.k0s(),c.j41(61,"div",24),c.nrm(62,"div",43)(63,"p",44),c.k0s(),c.j41(64,"div",24),c.nrm(65,"div",45)(66,"p",46),c.k0s()()()()(),c.j41(67,"div",3),c.nrm(68,"ngx-ui-loader",47),c.j41(69,"div",48)(70,"table",49)(71,"thead",50)(72,"tr"),c.DNE(73,Ik,5,8,"ng-container",51),c.k0s(),c.j41(74,"tr")(75,"th",52),c.EFF(76,"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f "),c.k0s(),c.DNE(77,Hk,2,1,"ng-container",51),c.j41(78,"th",52),c.EFF(79,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u0649 "),c.k0s()()(),c.j41(80,"tbody"),c.Z7z(81,Yk,8,2,null,null,c.Vm6),c.j41(83,"tr")(84,"td"),c.EFF(85,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u0649"),c.k0s(),c.DNE(86,Xk,3,1,"ng-container",51),c.k0s(),c.j41(87,"tr"),c.DNE(88,Jk,3,5,"ng-container",51),c.k0s()()()()()()()(),c.DNE(89,Kk,26,9,"div",53),c.j41(90,"div",16)(91,"div",54)(92,"div",2)(93,"div",20)(94,"h4",55),c.EFF(95),c.nI1(96,"translate"),c.k0s(),c.j41(97,"div",16)(98,"div",56)(99,"ng-select",57),c.nI1(100,"translate"),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.selectedCity,f)||(s.selectedCity=f),c.Njj(f)}),c.bIt("clear",function(){return c.eBV(t),c.Njj(s.setCity())}),c.k0s()(),c.j41(101,"div",56)(102,"ng-select",58),c.nI1(103,"translate"),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.selectedTeam,f)||(s.selectedTeam=f),c.Njj(f)}),c.k0s()()()(),c.j41(104,"div",3),c.nrm(105,"app-google-map",59),c.k0s()()()(),c.DNE(106,Zk,1,3,"ng-template",null,0,c.C5r)}2&e&&(c.FS9("title",c.bMT(1,33,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.FS9("placeholder",c.bMT(8,35,"statistics.orderReview.cities")),c.Y8G("items",s.cities)("multiple",!1),c.R50("ngModel",s.searchForm.cityId),c.R7$(4),c.FS9("placeholder",c.bMT(12,37,"statistics.orderReview.teams")),c.Y8G("items",s.teamDrop)("multiple",!1),c.R50("ngModel",s.searchForm.teamId),c.R7$(3),c.FS9("placeholder",c.bMT(15,39,"statistics.orderReview.dateReview")),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.searchForm.dates),c.R7$(8),c.Dyx(s.timeTeamTotal),c.R7$(2),c.Y8G("ngIf",s.timeTeamTotal.length>0),c.R7$(44),c.Y8G("loaderId","orders"),c.R7$(5),c.Y8G("ngForOf",s.teamsCities),c.R7$(4),c.Y8G("ngForOf",s.teamsCities),c.R7$(4),c.Dyx(s.orderTeamTimeDaily),c.R7$(5),c.Y8G("ngForOf",s.teamTotals),c.R7$(2),c.Y8G("ngForOf",s.teamsCities),c.R7$(),c.Y8G("ngIf",!1),c.R7$(6),c.JRh(c.bMT(96,41,"statistics.orderReview.ordersMap")),c.R7$(4),c.FS9("placeholder",c.bMT(100,43,"statistics.orderReview.cities")),c.R50("ngModel",s.selectedCity),c.Y8G("items",s.citiesForMap)("multiple",!1),c.R7$(3),c.FS9("placeholder",c.bMT(103,45,"statistics.orderReview.teams")),c.Y8G("items",s.teams)("multiple",!1),c.R50("ngModel",s.selectedTeam),c.R7$(3),c.Y8G("mapType","markers")("markers",s.orders)("selectedCity",s.selectedCity))},dependencies:[o.Sq,o.bT,L.me,L.BC,L.vS,M.tg,M.do,M.U0,M._H,M.Eu,p.kL,u.G,z2.m,W7.L,E7,h.Mm,m.Cv,g.vr,U.Q,o1.m,h.D9],encapsulation:2})}}return a})();var ly=n(82391),n1=n(3888),sy=n(87413);function ey(a,i){if(1&a&&(c.j41(0,"span",27),c.EFF(1),c.k0s()),2&a){const l=c.XpG();c.R7$(),c.SpI("",null==l.selectedOrder?null:l.selectedOrder.districtName," ")}}let ay=(()=>{class a{constructor(l,e,s,t,r){this.order=l,this.datePipe=e,this.activatedRoute=s,this.alertService=t,this._tokenService=r,this.title="statistics.orderDaily.title2",this.envDomain=$.c.url,this.path=[],this.activatedRoute.params.subscribe(f=>{this.query={orderId:+f.orderCode,teamId:+f.teamId},this.getTestOrder(),this.openHub()})}getTestOrder(){this.order.GetOrderAssignDetails(this.query).subscribe(l=>{this.selectedOrder=l.data[0]})}openHub(){const l=(new ly.$).withUrl(this.envDomain+"orderTrackerHub",{accessTokenFactory:()=>localStorage.getItem("token")}).withAutomaticReconnect().build();l.start().then(()=>{console.log("SignalR Connected!"),this.getLocations()}).catch(e=>console.log("err",e?.toString())),l.on("ReceiveLocation",()=>{this.getLocations()})}ngOnInit(){}copytext(l){navigator.clipboard.writeText(l),this.alertService.info(l)}getLocations(){this.order.GetLocations(this.query).subscribe(l=>{console.log(l.data),this.path=[],l.data.forEach(e=>{this.path.push({lat:e.latitude,lng:e.longitude})})})}getTeamStatus(l){return 0==l||1==l||2==l?"bg-warning-subtle text-warning":3==l||4==l?"bg-danger-subtle text-danger":5==l||6==l?"bg-info-subtle text-info":"bg-success-subtle text-success"}getTimes(l){return l.split(",")}static{this.\u0275fac=function(e){return new(e||a)(c.rXU(F.Q),c.rXU(o.vh),c.rXU(z.nX),c.rXU(n1.u),c.rXU(sy.I))}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-order-daily-details"]],decls:50,vars:28,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-3"],[1,"col-lg-8","col-12"],[1,"d-flex","gap-4","mb-2","justify-content-between"],[1,"text-muted"],[1,"ri-user-2-fill","text-muted","me-1","align-bottom"],[1,"ri-calendar-2-fill","text-muted","me-1","align-bottom"],[1,"text-success"],[1,"ri-map-pin-2-line","text-success","me-1","align-bottom"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-flex","gap-4"],[1,"ri-shake-hands-fill","text-primary","me-1","align-bottom"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"col-lg-4","col-12","d-flex","text-center"],[1,"w-50","text-left"],[1,"ri-group-fill","text-primary","me-1","align-bottom"],[1,"w-50","text-right"],[1,"ri-history-fill","text-primary","me-1","align-bottom"],[1,"card-body"],[3,"mapType","path","zoom"],[1,"badge","bg-success-subtle","text-success"]],template:function(e,s){1&e&&(c.nrm(0,"app-breadcrumbs",0),c.nI1(1,"translate"),c.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h4",5),c.EFF(7),c.nI1(8,"translate"),c.k0s(),c.j41(9,"div",1)(10,"div",6)(11,"div",7)(12,"div",8),c.nrm(13,"i",9),c.EFF(14),c.k0s(),c.j41(15,"div",8),c.nrm(16,"i",10),c.EFF(17),c.nI1(18,"date"),c.k0s(),c.j41(19,"div",11),c.nrm(20,"i",12),c.EFF(21),c.DNE(22,ey,2,1,"span",13),c.k0s(),c.j41(23,"div"),c.nrm(24,"i",14),c.j41(25,"span",15),c.bIt("click",function(){return s.copytext(null==s.selectedOrder?null:s.selectedOrder.mobile)}),c.EFF(26),c.nrm(27,"i",16),c.k0s()()(),c.j41(28,"div",17)(29,"div"),c.nrm(30,"i",18),c.j41(31,"span",19),c.EFF(32),c.k0s()()()(),c.j41(33,"div",20)(34,"div",21)(35,"h6"),c.nrm(36,"i",22),c.EFF(37),c.nI1(38,"translate"),c.k0s(),c.j41(39,"span",19),c.EFF(40),c.k0s()(),c.j41(41,"div",23)(42,"h6"),c.nrm(43,"i",24),c.EFF(44),c.nI1(45,"translate"),c.k0s(),c.j41(46,"span",19),c.EFF(47),c.k0s()()()()(),c.j41(48,"div",25),c.nrm(49,"app-google-map",26),c.k0s()()()()),2&e&&(c.FS9("title",c.bMT(1,17,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.Lme("",c.bMT(8,19,"statistics.orderReview.ordersDetails")," #SO#",null==s.selectedOrder?null:s.selectedOrder.orderCode,""),c.R7$(7),c.SpI(" ",null==s.selectedOrder?null:s.selectedOrder.agentName," "),c.R7$(3),c.SpI(" ",c.i5U(18,21,null==s.selectedOrder?null:s.selectedOrder.visitDate,"yyyy-MM-dd")," "),c.R7$(4),c.SpI(" ",null==s.selectedOrder?null:s.selectedOrder.cityName," "),c.R7$(),c.Y8G("ngIf",null!==(null==s.selectedOrder?null:s.selectedOrder.districtName)),c.R7$(4),c.SpI("",null==s.selectedOrder?null:s.selectedOrder.mobile," "),c.R7$(6),c.JRh(null==s.selectedOrder?null:s.selectedOrder.services),c.R7$(5),c.SpI(" ",c.bMT(38,24,"orderManagement.order.assignTo"),""),c.R7$(3),c.JRh(null==s.selectedOrder?null:s.selectedOrder.teamNames),c.R7$(4),c.SpI(" ",c.bMT(45,26,"orderManagement.order.workTimes"),""),c.R7$(3),c.JRh(null==s.selectedOrder?null:s.selectedOrder.workTimes),c.R7$(2),c.Y8G("mapType","path")("path",s.path)("zoom",18))},dependencies:[o.bT,z2.m,E7,o.vh,h.D9],encapsulation:2})}}return a})();var I=n(56701),oy=n(70152),ny=n(23294),_7=n(25558),i1=n(7673),ty=(n(83229),n(37021)),ry=n(45236),fy=n(70980),my=n(36158),zy=n(53928),Ly=n(12260);let py=(()=>{class a{constructor(l){this.http=l,this.baseUrl=$.c.apiUrl+"ReportBuilder/"}GetReport(l,e){switch(e){case 1:return this.GetTargetSalesAndCollection(l);case 2:return this.ComprehensiveSalesReport(l);case 3:return this.DebtReport(l);case 4:return this.ActiveAndInactiveCustomersReport(l);case 5:return this.NewCustomersReport(l);case 6:return this.CustomersAndItemsCountReport(l);case 7:return this.PerformanceReport(l);case 8:return this.SoldItemsByWarehouseInCartonsReport(l);case 9:return this.MonthlyDeliveriesReport(l);case 10:return this.DeliveryComplianceReport(l);default:return(0,i1.of)()}}GetTargetSalesAndCollection(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"GetTargetSalseAndCollectionReport?"+e,{responseType:"blob"})}ComprehensiveSalesReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"ComprehensiveSalesReport?"+e,{responseType:"blob"})}DebtReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"DebtReport?"+e,{responseType:"blob"})}ActiveAndInactiveCustomersReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"ActiveAndInactiveCustomersReport?"+e,{responseType:"blob"})}NewCustomersReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"NewCustomersReport?"+e,{responseType:"blob"})}CustomersAndItemsCountReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"CustomersAndItemsCountReport?"+e,{responseType:"blob"})}PerformanceReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"PerformanceReport?"+e,{responseType:"blob"})}SoldItemsByWarehouseInCartonsReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"SoldItemsByWarehouseInCartonsReport?"+e,{responseType:"blob"})}MonthlyDeliveriesReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"MonthlyDeliveriesReport?"+e,{responseType:"blob"})}DeliveryComplianceReport(l){let e=this.toQueryString(l);return this.http.get(this.baseUrl+"DeliveryComplianceReport?"+e,{responseType:"blob"})}toQueryString(l){return Object.keys(l).filter(e=>null!=l[e]).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(l[e])).join("&")}static{this.\u0275fac=function(e){return new(e||a)(c.KVO(L2.Qq))}}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var My=n(69433),dy=n(75922);const Cy=["pdfIframe"];function uy(a,i){if(1&a&&c.EFF(0),2&a){const l=i.items,e=c.XpG();c.SpI(" ",e.getLabels(l)," ")}}function hy(a,i){if(1&a&&c.EFF(0),2&a){const l=i.items,e=c.XpG();c.SpI(" ",e.getLabels(l)," ")}}function gy(a,i){if(1&a&&c.EFF(0),2&a){const l=i.items,e=c.XpG();c.SpI(" ",e.getLabels(l)," ")}}function xy(a,i){if(1&a&&c.EFF(0),2&a){const l=i.items,e=c.XpG();c.SpI(" ",e.getLabels(l)," ")}}function Ny(a,i){if(1&a){const l=c.RV6();c.qex(0),c.j41(1,"button",33),c.bIt("click",function(){const s=c.eBV(l).$implicit,t=c.XpG();return c.Njj(t.changeReportType(s))}),c.nrm(2,"span",34),c.k0s(),c.bVm()}if(2&a){const l=i.$implicit,e=c.XpG();c.R7$(),c.AVh("btn-outline-danger",e.typeSelected.id!=l.id)("btn-success",e.typeSelected.id==l.id),c.Y8G("disabled",e.isLoad),c.R7$(),c.Mz_("translate","statistics.reportBuilder.",l.name,"")}}function by(a,i){1&a&&(c.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"div"),c.nrm(4,"lord-icon",38),c.k0s(),c.j41(5,"div",39),c.nrm(6,"h4",40),c.k0s()()()())}let vy=(()=>{class a{constructor(l,e,s,t,r,f,G,x){this.employeeService=l,this.cityService=e,this.alertService=s,this.reportBuilderService=t,this.ngxLoader=r,this.storesService=f,this.datePipe=G,this.clientService=x,this.notifier=new b.B,this.typeSelected={id:0,name:""},this.reportPath="",this.form={dateFrom:"",dateTo:""},this.salesPersons=[],this.cities=[],this.loaderSearchShap=my.cX,this.isLoad=!1,this.stores=[],this.reports=[{name:"targetSalesCollections",disable:!1,id:1},{name:"comprehensiveSalesReport",disable:!0,id:2},{name:"debtReport",disable:!0,id:3},{name:"activeAndInactiveCustomersReport",disable:!1,id:4},{name:"newCustomersReport",disable:!1,id:5},{name:"customersAndItemsCountReport",disable:!1,id:6},{name:"performanceReport",disable:!1,id:7},{name:"soldItemsByWarehouseInCartonsReport",disable:!1,id:8},{name:"monthlyDeliveriesReport",disable:!1,id:9},{name:"deliveryComplianceReport",disable:!1,id:10}],this.searchClient=new b.B,this.loading=!1,this.clients=[],this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.setDates=(S,y,w)=>{if(S?.from||S?.to){const Iy=S.to||S.from;this.form[y]=this.datePipe.transform(S.from||S.to,"yyyy-MM-ddT00:00:00"),this.form[w]=this.datePipe.transform(Iy,"yyyy-MM-ddT23:59:59.999")}else this.form[y]=null,this.form[w]=null}}ngOnInit(){this.typeSelected=this.reports[0],this.searchClient.pipe((0,oy.B)(300),(0,ny.F)(),(0,_7.n)(l=>this.loadClient(l))).subscribe(),this.GetSalesPersons(),this.GetCities(),this.GetStores()}loadClient(l){return this.loading=!0,""==l||null==l?(this.loading=!1,(0,i1.of)([])):this.getClientDropdwon(l)}getClientDropdwon(l=""){return this.clientParam.search=l,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,_7.n)(e=>(this.clients=e.data,this.loading=!1,[])))}GetStores(){this.storesService.getDropDown().subscribe(l=>{this.stores=l.data},l=>{console.log(l)})}GetCities(){this.cityService.GetAllDropDown().subscribe(l=>{this.cities=l.data},l=>{console.log(l)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(l=>{this.salesPersons=l.data},l=>{console.log(l)})}changeReportType(l){this.typeSelected=this.reports.find(e=>e.id==l.id)}getLabels(l){return l?l.length<=3?l.map(e=>e.name).join("  ,   "):l.slice(0,3).map(e=>e.name).join(", ")+` +${l.length-3} +`:""}onReset(){this.form={},this.reportPath=""}onSubmit(){switch(this.typeSelected.id){case 1:return this.GetTargetSalesAndCollection();case 2:return this.ComprehensiveSalesReport();case 3:return this.DebtReport();case 4:return this.ActiveAndInactiveCustomersReport();case 5:return this.NewCustomersReport();case 6:return this.CustomersAndItemsCountReport();case 7:return this.PerformanceReport();case 8:return this.SoldItemsByWarehouseInCartonsReport();case 9:return this.MonthlyDeliveriesReport();case 10:return this.DeliveryComplianceReport();default:return(0,i1.of)()}}ComprehensiveSalesReport(){this.getReport(this.getSearch())}DebtReport(){this.getReport(this.getSearch())}ActiveAndInactiveCustomersReport(){this.getReport(this.getSearch())}NewCustomersReport(){this.getReport(this.getSearch())}CustomersAndItemsCountReport(){this.getReport(this.getSearch())}PerformanceReport(){this.getReport(this.getSearch())}SoldItemsByWarehouseInCartonsReport(){this.getReport(this.getSearch())}MonthlyDeliveriesReport(){this.getReport(this.getSearch())}DeliveryComplianceReport(){this.getReport(this.getSearch())}GetTargetSalesAndCollection(){let l=this.checkReportSelect();l&&(l=this.checkForm(),l)&&(this.setDates(this.form.dates,"dateFrom","dateTo"),delete{...this.form}.dates,this.getReport(this.getSearch()))}getSearch(){this.setDates(this.form.dates,"dateFrom","dateTo");let l={...this.form};return delete l.dates,l}getReport(l){this.isLoad=!0,this.ngxLoader.startLoader("searchLoader"),this.reportBuilderService.GetReport(l,this.typeSelected.id).pipe((0,ty.O)(),(0,ry.Z)(),(0,C.Q)(this.notifier),(0,fy.j)(()=>{this.isLoad=!1,this.ngxLoader.stopLoader("searchLoader")})).subscribe(e=>{this.openUrl(e)},e=>{this.alertService.error()})}checkReportSelect(){return!(this.typeSelected&&this.typeSelected.id<=0&&(this.alertService.error("statistics.reportBuilder.mustSelectedReport"),1))}checkForm(){return!(this.form&&!this.form.dates&&(this.alertService.error("statistics.reportBuilder.mustSelectedDate"),1))}openUrl(l){const e=new Blob([l],{type:"application/pdf"}),s=URL.createObjectURL(e);this.reportPath="data",this.pdfIframe.nativeElement.src=s}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(l=>{this.clients=[...this.clients,...l.data]})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(e){return new(e||a)(c.rXU(zy.O),c.rXU(Ly.h),c.rXU(n1.u),c.rXU(py),c.rXU(m.eD),c.rXU(My.a),c.rXU(o.vh),c.rXU(dy.X))}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-ReportBuilder"]],viewQuery:function(e,s){if(1&e&&c.GBs(Cy,7),2&e){let t;c.mGM(t=c.lsd())&&(s.pdfIframe=t.first)}},decls:43,vars:26,consts:[["pdfIframe",""],[1,"py-4","px-5"],[1,"row","bg-white","justify-content-around"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"col-12","col-md-3"],[1,"card","p-3","shadow-lg"],[1,"d-flex","justify-content-center","gap-2","mb-3"],["type","button","translate","approvals.reportBuilder.deleteReport",1,"btn","btn-soft-danger","w-100",3,"click","disabled"],["type","button","translate","approvals.reportBuilder.viewReport",1,"btn","btn-soft-info","w-100",3,"click","disabled"],["type","button","translate","approvals.reportBuilder.searchCriteria",1,"btn","btn-primary","mb-3","w-100"],[1,"row","mb-1"],[1,"col-12","mb-1"],["translate","statistics.reportBuilder.dateFromTo",1,"form-label"],["type","text","mwlFlatpickr","","id","dates","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","ngModel"],["translate","statistics.reportBuilder.salesPerson",1,"form-label"],[1,"search-box"],["name","name","bindValue","id","clearable","true","closeOnSelect","false","clearOnBackspace","true","markFirst","true","bindLabel","name",3,"ngModelChange","minTermLength","items","multiple","ngModel"],["ng-multi-label-tmp",""],["translate","statistics.reportBuilder.cities",1,"form-label"],["name","name","bindValue","code","clearable","true","closeOnSelect","false","clearOnBackspace","true","markFirst","true","bindLabel","name",3,"ngModelChange","minTermLength","items","multiple","ngModel"],["translate","statistics.reportBuilder.stores",1,"form-label"],["name","name","bindValue","id","clearable","true","closeOnSelect","false","clearOnBackspace","true","markFirst","true","bindLabel","nameAR",3,"ngModelChange","minTermLength","items","multiple","ngModel"],["for","nameAr","translate","",1,"fw-bold","form-label"],["clearable","true","closeOnSelect","false","bindLabel","displayName","bindValue","id","name","clientId",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"col-12","col-md-9"],[1,"card","p-3","shadow-lg","mb-3"],[1,"d-flex","flex-wrap","gap-2"],[1,"hstack","flex-wrap","gap-2","mb-3","mb-lg-0"],[4,"ngFor","ngForOf"],[1,"card","shadow-lg"],[1,"card-body","p-0"],["class","row  justify-content-center h-100",4,"ngIf"],["width","100%","height","750","frameborder","0"],[1,"btn","fs-6","btn-border",3,"click","disabled"],[3,"translate"],[1,"row","justify-content-center","h-100"],[1,"col-12","h-100"],[1,"py-4","text-center"],["src","https://cdn.lordicon.com/msoeawqm.json","trigger","loop","colors","primary:#405189,secondary:#0ab39c",2,"width","72px","height","72px"],[1,"mt-4"],["translate","statistics.reportBuilder.noResult",1,"text-danger"]],template:function(e,s){if(1&e){const t=c.RV6();c.j41(0,"div",1)(1,"div",2),c.nrm(2,"ngx-ui-loader",3),c.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"button",7),c.bIt("click",function(){return c.eBV(t),c.Njj(s.onReset())}),c.k0s(),c.j41(7,"button",8),c.bIt("click",function(){return c.eBV(t),c.Njj(s.onSubmit())}),c.k0s()(),c.nrm(8,"button",9),c.j41(9,"div",10)(10,"div",11),c.nrm(11,"label",12),c.j41(12,"input",13),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.form.dates,f)||(s.form.dates=f),c.Njj(f)}),c.k0s()()(),c.j41(13,"div",11),c.nrm(14,"label",14),c.j41(15,"div",15)(16,"ng-select",16),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.form.salesPersonId,f)||(s.form.salesPersonId=f),c.Njj(f)}),c.DNE(17,uy,1,1,"ng-template",17),c.k0s()()(),c.j41(18,"div",11),c.nrm(19,"label",18),c.j41(20,"div",15)(21,"ng-select",19),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.form.cityId,f)||(s.form.cityId=f),c.Njj(f)}),c.DNE(22,hy,1,1,"ng-template",17),c.k0s()()(),c.j41(23,"div",11),c.nrm(24,"label",20),c.j41(25,"div",15)(26,"ng-select",21),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.form.storeId,f)||(s.form.storeId=f),c.Njj(f)}),c.DNE(27,gy,1,1,"ng-template",17),c.k0s()()(),c.j41(28,"div",11)(29,"label",22),c.EFF(30,"sales.clientCollection.clientName"),c.k0s(),c.j41(31,"ng-select",23),c.bIt("scrollToEnd",function(){return c.eBV(t),c.Njj(s.scrollClient())}),c.mxI("ngModelChange",function(f){return c.eBV(t),c.DH7(s.form.clientId,f)||(s.form.clientId=f),c.Njj(f)}),c.DNE(32,xy,1,1,"ng-template",17),c.k0s()()()(),c.j41(33,"div",24)(34,"div",25)(35,"div",26)(36,"div",27),c.DNE(37,Ny,3,7,"ng-container",28),c.k0s()()(),c.j41(38,"div",29)(39,"div",30),c.DNE(40,by,7,0,"div",31),c.nrm(41,"iframe",32,0),c.k0s()()()()()}2&e&&(c.R7$(2),c.Y8G("loaderId","searchLoader"),c.R7$(4),c.Y8G("disabled",s.isLoad),c.R7$(),c.Y8G("disabled",s.isLoad),c.R7$(5),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.form.dates),c.R7$(4),c.Y8G("minTermLength",2)("items",s.salesPersons)("multiple",!0),c.R50("ngModel",s.form.salesPersonId),c.R7$(5),c.Y8G("minTermLength",2)("items",s.cities)("multiple",!0),c.R50("ngModel",s.form.cityId),c.R7$(5),c.Y8G("minTermLength",2)("items",s.stores)("multiple",!0),c.R50("ngModel",s.form.storeId),c.R7$(5),c.Y8G("virtualScroll",!0)("items",s.clients)("typeahead",s.searchClient)("loading",s.loading)("multiple",!0),c.R50("ngModel",s.form.clientId),c.R7$(6),c.Y8G("ngForOf",s.reports),c.R7$(3),c.Y8G("ngIf",""==s.reportPath))},dependencies:[o.Sq,o.bT,L.me,L.BC,L.vS,p.kL,h.Mm,m.Cv,g.vr,g.EY]})}}return a})();var Sy=n(75622),ky=n(99902);let yy=(()=>{class a extends r1.d{constructor(l,e){super(l,$.c.apiUrl+"SalesStatistics/"),this.bodyControlService=e}getDashboardStats(l){let e=this.bodyControlService.formatBody(l);return this.http.post(this.baseUrl+"dashboard-stats",e)}getTopCustomer(l){let e=this.bodyControlService.formatBody(l);return this.http.post(this.baseUrl+"top-customers",e)}getTopProduct(l){let e=this.bodyControlService.formatBody(l);return this.http.post(this.baseUrl+"top-products",e)}getTopSalesPerson(l){let e=this.bodyControlService.formatBody(l);return this.http.post(this.baseUrl+"top-sales-persons",e)}getAllProducts(l){let e=this.bodyControlService.formatBody(l);return this.http.post(this.baseUrl+"all-products",e)}static{this.\u0275fac=function(e){return new(e||a)(c.KVO(L2.Qq),c.KVO(ky.Q))}}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var wy=n(79429),Fy=n(80065);const t1=(a,i)=>({"bg-success":a,"bg-gray-400":i});function Ry(a,i){if(1&a&&(c.j41(0,"div",44)(1,"div",45)(2,"span",46),c.EFF(3),c.k0s(),c.j41(4,"div")(5,"h6",47),c.EFF(6),c.k0s(),c.j41(7,"small",41),c.EFF(8),c.nI1(9,"translate"),c.k0s()()(),c.j41(10,"div",48)(11,"h6",47),c.EFF(12),c.nI1(13,"number"),c.nI1(14,"translate"),c.k0s(),c.j41(15,"span",49),c.EFF(16),c.k0s()()()),2&a){const l=i.$implicit,e=i.index;c.R7$(2),c.Y8G("ngClass",c.l_i(14,t1,0<=e,e>2)),c.R7$(),c.SpI(" ",e+1," "),c.R7$(3),c.JRh(l.customerName),c.R7$(2),c.Lme(" ",l.totalDeals," ",c.bMT(9,8,"statistics.salesReports.deals"),""),c.R7$(4),c.Lme(" ",c.bMT(13,10,l.totalSales)," ",c.bMT(14,12,"general.table.currancy")," "),c.R7$(4),c.SpI(" ",l.customerType," ")}}function Ay(a,i){if(1&a&&(c.j41(0,"div",44)(1,"div",45)(2,"span",46),c.EFF(3),c.k0s(),c.j41(4,"div")(5,"h6",47),c.EFF(6),c.k0s(),c.j41(7,"small",41),c.EFF(8),c.k0s()()(),c.j41(9,"div",48)(10,"h6",47),c.EFF(11),c.nI1(12,"number"),c.nI1(13,"translate"),c.k0s(),c.j41(14,"small",50),c.EFF(15),c.k0s()()()),2&a){const l=i.$implicit,e=i.index;c.R7$(2),c.Y8G("ngClass",c.l_i(12,t1,0<=e,e>2)),c.R7$(),c.SpI(" ",e+1," "),c.R7$(3),c.JRh(l.productName),c.R7$(2),c.JRh(l.productCategory),c.R7$(3),c.Lme("",c.bMT(12,8,l.totalSalesAmount)," ",c.bMT(13,10,"general.table.currancy"),""),c.R7$(3),c.Y8G("ngClass",l.totalQuantitySold>=0?"text-success":"text-danger"),c.R7$(),c.SpI(" ",l.totalQuantitySold>=0?l.totalQuantitySold:"0"," ")}}function Ty(a,i){if(1&a&&(c.j41(0,"div",44)(1,"div",45)(2,"span",46),c.EFF(3),c.k0s(),c.j41(4,"div")(5,"h6",47),c.EFF(6),c.k0s(),c.j41(7,"small",41),c.EFF(8),c.nI1(9,"translate"),c.k0s()()(),c.j41(10,"div",48)(11,"h6",47),c.EFF(12),c.nI1(13,"number"),c.nI1(14,"translate"),c.k0s()()()),2&a){const l=i.$implicit,e=i.index;c.R7$(2),c.Y8G("ngClass",c.l_i(13,t1,0<=e,e>2)),c.R7$(),c.SpI(" ",e+1," "),c.R7$(3),c.JRh(l.salesPersonName),c.R7$(2),c.Lme(" ",l.totalDeals," ",c.bMT(9,7,"statistics.salesReports.deals")," "),c.R7$(4),c.Lme("",c.bMT(13,9,l.totalSales)," ",c.bMT(14,11,"general.table.currancy")," ")}}const By=[{path:"order-manager",component:V7,canActivate:[I.g],data:{permissions:["orderManager.view"]}},{path:"order-daily",component:cy,canActivateChild:[I.g],data:{permissions:["orderDaily.view"]}},{path:"order-daily/:orderCode/:teamId",component:ay,canActivateChild:[I.g],data:{permissions:["orderDaily.view"]}},{path:"reportBuilder",component:vy,canActivate:[I.g],data:{permissions:["reportBuilder.view"]}},{path:"sales-reports",component:(()=>{class a extends Sy.w{constructor(l,e,s,t,r,f,G){super(l,e,G,s,t,r,f),this.baseService=s,this.selectedPeriod="monthly",this.selectedRegion="all",this.filter={quarterVal:null,year:(new Date).getFullYear(),dateFrom:"",dateTo:""},this.years=this.getYears(),this.dates={},this.topProduct={},this.topSalesPerson={},this.topCustomer={},this.topProducts=[],this.topSalesPersons=[],this.topCustomers=[],this.quarters=[{nameEn:"Quarter1",nameAr:"\u0627\u0644\u0631\u0628\u0639 \u0627\u0644\u0627\u0648\u0644",value:1},{nameEn:"Quarter2",nameAr:"\u0627\u0644\u0631\u0628\u0639 \u0627\u0644\u062b\u0627\u0646\u064a",value:2},{nameEn:"Quarter3",nameAr:"\u0627\u0644\u0631\u0628\u0639 \u0627\u0644\u062b\u0627\u0644\u062b",value:3},{nameEn:"Quarter4",nameAr:"\u0627\u0644\u0631\u0628\u0639 \u0627\u0644\u0631\u0627\u0628\u0639",value:4}],this.monthlyData=[{month:"Jan",revenue:45e3,target:5e4,deals:23,newCustomers:15},{month:"Feb",revenue:52e3,target:5e4,deals:28,newCustomers:18},{month:"Mar",revenue:48e3,target:55e3,deals:25,newCustomers:12},{month:"Apr",revenue:61e3,target:55e3,deals:32,newCustomers:22},{month:"May",revenue:58e3,target:6e4,deals:29,newCustomers:19},{month:"Jun",revenue:67e3,target:6e4,deals:35,newCustomers:25}],this.quarterlyData=[{quarter:"Q1",revenue:145e3,target:155e3,deals:76,newCustomers:45},{quarter:"Q2",revenue:186e3,target:175e3,deals:96,newCustomers:66},{quarter:"Q3",revenue:198e3,target:18e4,deals:102,newCustomers:71},{quarter:"Q4",revenue:21e4,target:19e4,deals:108,newCustomers:78}],this.productData=[{name:"Product A",value:35,revenue:234e3},{name:"Product B",value:28,revenue:187e3},{name:"Product C",value:22,revenue:148e3},{name:"Product D",value:15,revenue:95e3}],this.salesTeamData=[{name:"John Smith",deals:45,revenue:89e3,conversion:72,quota:85e3,growth:15.2},{name:"Sarah Johnson",deals:38,revenue:76e3,conversion:68,quota:7e4,growth:8.6},{name:"Mike Chen",deals:42,revenue:82e3,conversion:75,quota:8e4,growth:12.3},{name:"Emily Davis",deals:35,revenue:71e3,conversion:65,quota:75e3,growth:-5.3},{name:"Alex Rodriguez",deals:40,revenue:78e3,conversion:70,quota:72e3,growth:8.3}],this.topProductsDetailed=[{name:"Enterprise Software",revenue:234e3,units:145,growth:23.5,margin:68,category:"Software"},{name:"Professional Services",revenue:187e3,units:89,growth:15.2,margin:45,category:"Services"},{name:"Cloud Solutions",revenue:148e3,units:234,growth:34.7,margin:72,category:"Software"},{name:"Hardware Systems",revenue:95e3,units:67,growth:-8.3,margin:35,category:"Hardware"},{name:"Training & Support",revenue:73e3,units:156,growth:12.1,margin:58,category:"Services"}],this.controlDate=(x,S,y)=>{if(x?.from||x?.to){const A=x.to||x.from;this.filter[S]=this.datePipe.transform(x.from||x.to,"yyyy-MM-ddT00:00:00"),this.filter[y]=this.datePipe.transform(A,"yyyy-MM-ddT23:59:59.999")}else{const w=new Date,A=new Date;A.setDate(w.getDate()-30),this.filter[S]=this.datePipe.transform(A,"yyyy-MM-dd"),this.filter[y]=this.datePipe.transform(w,"yyyy-MM-dd")}},this.Math=Math,this.setDefaultDate()}setDefaultDate(){let l=new Date,e=new Date;e.setDate(l.getDate()-30),this.dates={from:e,to:l},this.search()}search(){this.controlDate(this.dates,"dateFrom","dateTo"),this.getDashboardStats(),this.getTopCustomer(),this.getTopProduct(),this.getTopSalesPerson(),this.getAllProducts(),this.initDealsTrendCharts(),this.initRevenueTargetCharts()}getDashboardStats(){this.baseService.getDashboardStats(this.filter).subscribe({next:l=>{this.dashboardStats=l.data}})}getTopCustomer(){this.baseService.getTopCustomer(this.filter).subscribe({next:l=>{l.data.length>0&&(this.topCustomers=l.data,this.topCustomer={id:l.data[0]?.customerId,name:l.data[0]?.customerName,total:l.data[0]?.totalSales,avg:l.data[0]?.avg,totalDeals:l.data[0]?.totalDeals,type:l.data[0]?.customerType,city:l.data[0]?.city},this.initCustomerRevenueCharts())}})}getTopProduct(){this.baseService.getTopProduct(this.filter).subscribe({next:l=>{l.data.length>0&&(this.topProducts=l.data,this.topProduct={id:l.data[0]?.productId,name:l.data[0]?.productName,total:l.data[0]?.totalSalesAmount,quantity:l.data[0]?.totalQuantitySold,type:l.data[0]?.productCategory},this.initProductDistributionCharts())}})}getTopSalesPerson(){this.baseService.getTopSalesPerson(this.filter).subscribe({next:l=>{l.data.length>0&&(this.topSalesPersons=l.data,this.topSalesPerson={id:l.data[0]?.salesPersonId,name:l.data[0]?.salesPersonName,total:l.data[0]?.totalSales,totalDeals:l.data[0]?.totalDeals})}})}getAllProducts(){this.baseService.getAllProducts(this.filter).subscribe({next:l=>{l.data.length>0&&(this.productDistributionOptions={series:l.data.map(e=>e.totalSalesAmount),chart:{type:"pie",height:350},labels:l.data.map(e=>e.productName),colors:["#3B82F6","#10B981","#F59E0B","#EF4444"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],tooltip:{y:{formatter:(e,{seriesIndex:s})=>`${e}% (SAR${l.data[s].totalSalesAmount.toLocaleString()})`}}})}})}getYears(){const e=[];for(let s=(new Date).getFullYear();s>=2010;s--)e.push(s);return e}isMonthlyData(l){return"monthly"===this.selectedPeriod}get currentData(){return"monthly"===this.selectedPeriod?this.monthlyData:this.quarterlyData}get totalRevenue(){return this.currentData.reduce((l,e)=>l+e.revenue,0)}get totalTarget(){return this.currentData.reduce((l,e)=>l+e.target,0)}get totalDeals(){return this.currentData.reduce((l,e)=>l+e.deals,0)}get totalNewCustomers(){return this.currentData.reduce((l,e)=>l+e.newCustomers,0)}get achievementRate(){return(this.totalRevenue/this.totalTarget*100).toFixed(1)}get avgDealSize(){return(this.totalRevenue/this.totalDeals).toFixed(0)}initRevenueTargetCharts(){this.revenueTargetOptions={series:[{name:"Revenue",data:this.currentData.map(l=>l.revenue)},{name:"Target",data:this.currentData.map(l=>l.target)}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:this.currentData.map(l=>this.isMonthlyData(l)?l.month:l.quarter)},yaxis:{title:{text:"$ (thousands)"}},fill:{opacity:1},colors:["#3B82F6","#E5E7EB"],tooltip:{y:{formatter:l=>`$${l.toLocaleString()}`}}}}initDealsTrendCharts(){this.dealsTrendOptions={series:[{name:"Deals Closed",data:this.currentData.map(l=>l.deals)},{name:"New Customers",data:this.currentData.map(l=>l.newCustomers)}],chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},colors:["#10B981","#F59E0B"],xaxis:{categories:this.currentData.map(l=>this.isMonthlyData(l)?l.month:l.quarter)},tooltip:{y:{formatter:l=>`${l}`}}}}initProductDistributionCharts(){this.productDistributionOptions={series:this.productData.map(l=>l.value),chart:{type:"pie",height:350},labels:this.productData.map(l=>l.name),colors:["#3B82F6","#10B981","#F59E0B","#EF4444"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],tooltip:{y:{formatter:(l,{seriesIndex:e})=>`${l}% ($${this.productData[e].revenue.toLocaleString()})`}}}}initCustomerRevenueCharts(){this.customerRevenueOptions={series:[{name:"Revenue",data:this.topCustomers.map(l=>l.totalSales)}],chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:4,horizontal:!1}},dataLabels:{enabled:!1},colors:["#8B5CF6"],xaxis:{categories:this.topCustomers.map(l=>l.customerName),labels:{style:{fontSize:"12px"}}},tooltip:{y:{formatter:(l,{dataPointIndex:e})=>{const s=this.topCustomers[e];return`$${l.toLocaleString()}<br/>\n                            Deals: ${s.deals}<br/>\n                            Industry: ${s.industry}`}}}}}getStatusClasses(l){return"Enterprise"===l?"bg-primary text-white":"Premium"===l?"bg-warning text-dark":"bg-secondary text-white"}static{this.\u0275fac=function(e){return new(e||a)(c.rXU(z.nX),c.rXU(h.c$),c.rXU(yy),c.rXU(n1.u),c.rXU(o.vh),c.rXU(m.eD),c.rXU(M.Bq))}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-sales-reports"]],features:[c.Vt3],decls:134,vars:133,consts:[[1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],["translate","",1,"h2","mb-4"],[1,"d-flex","gap-3"],[3,"ngModelChange","placeholder","items","ngModel","clearable"],["bindValue","value",3,"ngModelChange","placeholder","items","ngModel","clearable","bindLabel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"btn","btn-danger"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search",3,"click"],[1,"col-md-6","col-lg-3","mb-3"],["icon","bx-dollar-circle","color","success",3,"title","value","change"],["icon","bx-target-lock","color","primary",3,"title","value","change"],["icon","bx-calendar","color","info",3,"title","value","change"],["icon","bx-user","color","warning",3,"title","value","change"],[1,"col-12","mb-4"],[1,"h4"],[1,"col-md-4","mb-3"],["icon","bx-user-check","gradientClass","gradient-purple",3,"title","data"],["icon","bxl-product-hunt","gradientClass","gradient-green",3,"title","data"],["icon","bx-user-pin","gradientClass","gradient-blue",3,"title","data"],[1,"col-lg-6","mb-3"],[1,"card","h-100"],[1,"card-body"],[1,"card-title"],[2,"height","300px",3,"series","chart","dataLabels","plotOptions","xaxis","yaxis","stroke","fill","colors","tooltip"],[2,"height","300px",3,"series","chart","dataLabels","stroke","colors","xaxis","tooltip"],[1,"col-lg-4","mb-3"],[1,"card-title","d-flex","align-items-center"],["name","users","width","20","height","20",1,"me-2","text-purple-600"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["name","target","width","20","height","20",1,"me-2","text-success"],["name","dollar-sign","width","20","height","20",1,"me-2","text-primary"],[2,"height","300px",3,"series","chart","labels","colors","responsive","tooltip"],[2,"height","300px",3,"series","chart","plotOptions","dataLabels","colors","xaxis","tooltip"],[1,"row"],[1,"card"],[1,"col-md-4","text-center","py-3"],[1,"h2","text-primary"],[1,"text-muted"],[1,"h2","text-success"],[1,"h2","text-info"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"badge","me-2",3,"ngClass"],[1,"mb-0"],[1,"text-end"],[1,"badge","bg-secondary","text-white"],[3,"ngClass"]],template:function(e,s){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),c.EFF(4,"statistics.salesReports.title"),c.k0s(),c.j41(5,"div",4)(6,"div")(7,"ng-select",5),c.nI1(8,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.filter.year,r)||(s.filter.year=r),r}),c.k0s()(),c.j41(9,"div")(10,"ng-select",6),c.nI1(11,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.filter.quarterVal,r)||(s.filter.quarterVal=r),r}),c.k0s()(),c.j41(12,"div")(13,"input",7),c.nI1(14,"translate"),c.mxI("ngModelChange",function(r){return c.DH7(s.dates,r)||(s.dates=r),r}),c.k0s()(),c.j41(15,"div")(16,"button",8),c.nrm(17,"i",9),c.j41(18,"span",10),c.bIt("click",function(){return s.search()}),c.k0s()()()()()(),c.j41(19,"div",1)(20,"div",11),c.nrm(21,"app-metric-card",12),c.nI1(22,"translate"),c.nI1(23,"translate"),c.k0s(),c.j41(24,"div",11),c.nrm(25,"app-metric-card",13),c.nI1(26,"translate"),c.k0s(),c.j41(27,"div",11),c.nrm(28,"app-metric-card",14),c.nI1(29,"translate"),c.k0s(),c.j41(30,"div",11),c.nrm(31,"app-metric-card",15),c.nI1(32,"translate"),c.k0s()(),c.j41(33,"div",1)(34,"div",16)(35,"h2",17),c.EFF(36),c.nI1(37,"translate"),c.k0s()(),c.j41(38,"div",18),c.nrm(39,"app-top-performer-card",19),c.nI1(40,"translate"),c.k0s(),c.j41(41,"div",18),c.nrm(42,"app-top-performer-card",20),c.nI1(43,"translate"),c.k0s(),c.j41(44,"div",18),c.nrm(45,"app-top-performer-card",21),c.nI1(46,"translate"),c.k0s()(),c.j41(47,"div",1)(48,"div",22)(49,"div",23)(50,"div",24)(51,"h5",25),c.EFF(52),c.nI1(53,"translate"),c.k0s(),c.nrm(54,"apx-chart",26),c.k0s()()(),c.j41(55,"div",22)(56,"div",23)(57,"div",24)(58,"h5",25),c.EFF(59),c.nI1(60,"translate"),c.k0s(),c.nrm(61,"apx-chart",27),c.k0s()()()(),c.j41(62,"div",1)(63,"div",28)(64,"div",23)(65,"div",24)(66,"h5",29),c.nrm(67,"i-lucide",30),c.EFF(68),c.nI1(69,"translate"),c.k0s(),c.j41(70,"div",31),c.DNE(71,Ry,17,17,"div",32),c.k0s()()()(),c.j41(72,"div",28)(73,"div",23)(74,"div",24)(75,"h5",29),c.nrm(76,"i-lucide",33),c.EFF(77),c.nI1(78,"translate"),c.k0s(),c.j41(79,"div",31),c.DNE(80,Ay,16,15,"div",32),c.k0s()()()(),c.j41(81,"div",28)(82,"div",23)(83,"div",24)(84,"h5",29),c.nrm(85,"i-lucide",34),c.EFF(86),c.nI1(87,"translate"),c.k0s(),c.j41(88,"div",31),c.DNE(89,Ty,15,16,"div",32),c.k0s()()()()(),c.j41(90,"div",1)(91,"div",22)(92,"div",23)(93,"div",24)(94,"h5",25),c.EFF(95),c.nI1(96,"translate"),c.k0s(),c.nrm(97,"apx-chart",35),c.k0s()()(),c.j41(98,"div",22)(99,"div",23)(100,"div",24)(101,"h5",25),c.EFF(102),c.nI1(103,"translate"),c.k0s(),c.nrm(104,"apx-chart",36),c.k0s()()()(),c.j41(105,"div",37)(106,"div",2)(107,"div",38)(108,"div",24)(109,"h5",25),c.EFF(110),c.nI1(111,"translate"),c.k0s(),c.j41(112,"div",37)(113,"div",39)(114,"p",40),c.EFF(115),c.nI1(116,"number"),c.k0s(),c.j41(117,"p",41),c.EFF(118),c.nI1(119,"translate"),c.k0s()(),c.j41(120,"div",39)(121,"p",42),c.EFF(122),c.nI1(123,"number"),c.k0s(),c.j41(124,"p",41),c.EFF(125),c.nI1(126,"translate"),c.k0s()(),c.j41(127,"div",39)(128,"p",43),c.EFF(129),c.nI1(130,"number"),c.k0s(),c.j41(131,"p",41),c.EFF(132),c.nI1(133,"translate"),c.k0s()()()()()()()()),2&e&&(c.R7$(7),c.FS9("placeholder",c.bMT(8,79,"statistics.salesReports.selectYear")),c.Y8G("items",s.years),c.R50("ngModel",s.filter.year),c.Y8G("clearable",!1),c.R7$(3),c.FS9("placeholder",c.bMT(11,81,"statistics.salesReports.selectQuarter")),c.FS9("bindLabel","en"==s.lang?"nameEn":"nameAr"),c.Y8G("items",s.quarters),c.R50("ngModel",s.filter.quarterVal),c.Y8G("clearable",!1),c.R7$(3),c.FS9("placeholder",c.bMT(14,83,"hr.target.fromToDate")),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.dates),c.R7$(8),c.FS9("title",c.bMT(22,85,"statistics.salesReports.totalRevenue")),c.Y8G("value",(null==s.dashboardStats?null:s.dashboardStats.totalRevenue.toLocaleString())+" "+c.bMT(23,87,"general.table.currancy"))("change",12.5),c.R7$(4),c.FS9("title",c.bMT(26,89,"statistics.salesReports.targetAchievement")),c.Y8G("value","0")("change",-2.3),c.R7$(3),c.FS9("title",c.bMT(29,91,"statistics.salesReports.totalDeals")),c.Y8G("value",null==s.dashboardStats?null:s.dashboardStats.totalDeals.toString())("change",8.1),c.R7$(3),c.FS9("title",c.bMT(32,93,"statistics.salesReports.newCustomers")),c.Y8G("value",null==s.dashboardStats?null:s.dashboardStats.newCustomers.toString())("change",15.7),c.R7$(5),c.SpI("\u{1f3c6} ",c.bMT(37,95,"statistics.salesReports.topPerformers")," "),c.R7$(3),c.FS9("title",c.bMT(40,97,"statistics.salesReports.topCustomer")),c.Y8G("data",s.topCustomer),c.R7$(3),c.FS9("title",c.bMT(43,99,"statistics.salesReports.topProduct")),c.Y8G("data",s.topProduct),c.R7$(3),c.FS9("title",c.bMT(46,101,"statistics.salesReports.topSalesPerson")),c.Y8G("data",s.topSalesPerson),c.R7$(7),c.JRh(c.bMT(53,103,"statistics.salesReports.revenueVSTarget")),c.R7$(2),c.Y8G("series",s.revenueTargetOptions.series)("chart",s.revenueTargetOptions.chart)("dataLabels",s.revenueTargetOptions.dataLabels)("plotOptions",s.revenueTargetOptions.plotOptions)("xaxis",s.revenueTargetOptions.xaxis)("yaxis",s.revenueTargetOptions.yaxis)("stroke",s.revenueTargetOptions.stroke)("fill",s.revenueTargetOptions.fill)("colors",s.revenueTargetOptions.colors)("tooltip",s.revenueTargetOptions.tooltip),c.R7$(5),c.JRh(c.bMT(60,105,"statistics.salesReports.collectionVSTarget")),c.R7$(2),c.Y8G("series",s.dealsTrendOptions.series)("chart",s.dealsTrendOptions.chart)("dataLabels",s.dealsTrendOptions.dataLabels)("stroke",s.dealsTrendOptions.stroke)("colors",s.dealsTrendOptions.colors)("xaxis",s.dealsTrendOptions.xaxis)("tooltip",s.dealsTrendOptions.tooltip),c.R7$(7),c.SpI(" ",c.bMT(69,107,"statistics.salesReports.topCustomers")," "),c.R7$(3),c.Y8G("ngForOf",s.topCustomers),c.R7$(6),c.SpI(" ",c.bMT(78,109,"statistics.salesReports.topProducts")," "),c.R7$(3),c.Y8G("ngForOf",s.topProducts),c.R7$(6),c.SpI(" ",c.bMT(87,111,"statistics.salesReports.topSalesPersons")," "),c.R7$(3),c.Y8G("ngForOf",s.topSalesPersons),c.R7$(6),c.JRh(c.bMT(96,113,"statistics.salesReports.revenueDistribution")),c.R7$(2),c.Y8G("series",s.productDistributionOptions.series)("chart",s.productDistributionOptions.chart)("labels",s.productDistributionOptions.labels)("colors",s.productDistributionOptions.colors)("responsive",s.productDistributionOptions.responsive)("tooltip",s.productDistributionOptions.tooltip),c.R7$(5),c.JRh(c.bMT(103,115,"statistics.salesReports.topCustomerRevenue")),c.R7$(2),c.Y8G("series",s.customerRevenueOptions.series)("chart",s.customerRevenueOptions.chart)("plotOptions",s.customerRevenueOptions.plotOptions)("dataLabels",s.customerRevenueOptions.dataLabels)("colors",s.customerRevenueOptions.colors)("xaxis",s.customerRevenueOptions.xaxis)("tooltip",s.customerRevenueOptions.tooltip),c.R7$(6),c.JRh(c.bMT(111,117,"statistics.salesReports.keyInsights")),c.R7$(5),c.SpI("$",c.bMT(116,119,s.avgDealSize),""),c.R7$(3),c.JRh(c.bMT(119,121,"statistics.salesReports.averageDealSize")),c.R7$(4),c.SpI("",c.i5U(123,123,s.totalDeals/s.totalNewCustomers*100,"1.0-0")," %"),c.R7$(3),c.JRh(c.bMT(126,126,"statistics.salesReports.customerAcquisitionRate")),c.R7$(4),c.JRh(c.i5U(130,128,s.totalRevenue/s.currentData.length,"1.0-0")),c.R7$(3),c.JRh(c.bMT(133,131,"statistics.salesReports.avgRevenuePerPeriod")))},dependencies:[o.YU,o.Sq,L.me,L.BC,L.vS,p.kL,h.Mm,g.vr,U.Q,wy.A,Fy.d,o.QX,h.D9],styles:[".card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 1px 3px #0000001a;border:1px solid #dee2e6}"]})}}return a})(),canActivate:[I.g],data:{permissions:["reportBuilder.view"]}}];let Py=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=c.$C({type:a})}static{this.\u0275inj=c.G2t({imports:[z.iI.forChild(By),z.iI]})}}return a})();var Oy=n(42820),Ey=n(34386),_y=n(86839);let jy=(()=>{class a{constructor(){(0,T.eV)(N().loadAnimation)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=c.$C({type:a})}static{this.\u0275inj=c.G2t({imports:[o.MD,L.YN,L.X1,M.zH,M.Pv,M.Gk,M.h_,M.c9,d.A,i2.JG,p.ND,u.r,Py,t2.G,h.h,r2.bG,f2.q4,m2.H_,M.c9,m.th,g.MQ,M.n8,U.J,Ey.A,o1.S,Oy.sN.forRoot({echarts:()=>n.e(697).then(n.bind(n,19697))}),_y.DashboardsModule]})}}return a})()},40724:(H,k,n)=>{n.d(k,{b:()=>m2});var o=n(54438),L=n(73955),v=n(60177),N=n(69005),M=n(94575);const d=[[["","menuBtn",""]],[["","control",""]]],i2=["[menuBtn]","[control]"];function p(m,g){1&m&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&m&&(o.R7$(),o.JRh(o.bMT(2,1,"general.table.all")))}function u(m,g){if(1&m){const z=o.RV6();o.j41(0,"a",17),o.bIt("click",function(){o.eBV(z),o.XpG(2);const C=o.sdS(11);return o.Njj(C.toggle())}),o.nrm(1,"i",18)(2,"span",19),o.k0s()}if(2&m){const z=o.XpG(2);o.BMQ("aria-expanded",!z.isCollapsed)}}function T(m,g){if(1&m){const z=o.RV6();o.j41(0,"div",21)(1,"button",22),o.nrm(2,"i",23)(3,"span",24),o.k0s(),o.j41(4,"ul",25)(5,"li",26),o.bIt("click",function(){o.eBV(z);const C=o.XpG(3);return o.Njj(C.onExportXlsx())}),o.j41(6,"a",27),o.nrm(7,"span",28),o.k0s()(),o.j41(8,"li",26),o.bIt("click",function(){o.eBV(z);const C=o.XpG(3);return o.Njj(C.onExportPDF())}),o.j41(9,"a",27),o.nrm(10,"span",29),o.k0s()()()()}if(2&m){const z=o.XpG(3);o.FS9("placement","en"===z.lang?"bottom-start":"bottom-end"),o.R7$(),o.Y8G("disabled",z.totalItems<=0)}}function t2(m,g){if(1&m&&(o.qex(0),o.DNE(1,T,11,2,"div",20),o.bVm()),2&m){const z=o.XpG(2);o.R7$(),o.Y8G("hasPermission",z.exportPermission)}}function h(m,g){if(1&m){const z=o.RV6();o.j41(0,"a",31),o.bIt("click",function(){o.eBV(z);const C=o.XpG(3);return o.Njj(C.onAddNew())}),o.nrm(1,"i",32),o.j41(2,"span"),o.EFF(3),o.nI1(4,"translate"),o.k0s()()}if(2&m){const z=o.XpG(3);o.R7$(3),o.JRh(o.bMT(4,1,z.newLocal))}}function r2(m,g){if(1&m&&(o.qex(0),o.DNE(1,h,5,3,"a",30),o.bVm()),2&m){const z=o.XpG(2);o.R7$(),o.Y8G("hasPermission",z.addPermission)}}function f2(m,g){if(1&m&&(o.j41(0,"div",15),o.DNE(1,u,3,1,"a",16)(2,t2,2,1,"ng-container",4)(3,r2,2,1,"ng-container",4),o.k0s()),2&m){const z=o.XpG();o.R7$(),o.Y8G("ngIf",z.showSearch),o.R7$(),o.Y8G("ngIf",z.showExport),o.R7$(),o.Y8G("ngIf",z.showAdd)}}let m2=(()=>{class m{constructor(z){this.translateService=z,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new o.bkB,this.exportXlsx=new o.bkB,this.exportPDF=new o.bkB,this.search=new o.bkB,this.reset=new o.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(b){return new(b||m)(o.rXU(L.c$))}}static{this.\u0275cmp=o.VBU({type:m,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:i2,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(b,C){if(1&b){const c=o.RV6();o.NAR(d),o.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),o.SdG(4),o.k0s(),o.j41(5,"span"),o.DNE(6,p,3,3,"span",4),o.EFF(7),o.nI1(8,"translate"),o.k0s()(),o.DNE(9,f2,4,3,"div",5),o.k0s(),o.j41(10,"div",6,0),o.mxI("ngbCollapseChange",function(D){return o.eBV(c),o.DH7(C.isCollapsed,D)||(C.isCollapsed=D),o.Njj(D)}),o.j41(12,"div",7),o.SdG(13,1),o.j41(14,"div",8)(15,"button",9),o.bIt("click",function(){return o.eBV(c),o.Njj(C.onSearch())}),o.nrm(16,"i",10)(17,"span",11),o.k0s(),o.j41(18,"button",12),o.bIt("click",function(){return o.eBV(c),o.Njj(C.onReset())}),o.nrm(19,"i",13)(20,"span",14),o.k0s()()()()()}2&b&&(o.R7$(6),o.Y8G("ngIf",C.showAllStr),o.R7$(),o.Lme(" ",o.bMT(8,5,C.title)," ",C.titleMore,""),o.R7$(2),o.Y8G("ngIf",C.showAction),o.R7$(),o.R50("ngbCollapse",C.isCollapsed))},dependencies:[v.bT,N.tg,N.do,N.U0,L.Mm,N.$G,M.p,L.D9],encapsulation:2})}}return m})()}}]);