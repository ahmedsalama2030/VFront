"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[76],{94562:(v,i,e)=>{e.d(i,{c:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Position/")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}GetPositionsByDepartment(t){return this.http.get(this.baseUrl+"GetPositionsByDepartment/"+t)}GetHeadDropDown(){return this.http.get(this.baseUrl+"GetHeadDropDown")}GetDropDown(){return this.http.get(this.baseUrl+"GetDropDown")}GetManagementChainAsync(t){return this.http.get(this.baseUrl+"GetManagementChainAsync/"+t)}delete(t){return this.http.delete(`${this.baseUrl}SoftDelete/${t}`,this.httpOptions)}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},95883:(v,i,e)=>{e.d(i,{O:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Branch/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},91020:(v,i,e)=>{e.d(i,{e:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"CancelReason/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},35419:(v,i,e)=>{e.d(i,{S:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Region/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},75312:(v,i,e)=>{e.d(i,{Y:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"ReturnReason/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},56009:(v,i,e)=>{e.d(i,{j:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"ServiceCategory/")}serviceCategoryLookUp(){return this.http.get(this.baseUrl+"serviceCategoryLookUp")}serviceCategoryGetDropDown(){return this.http.get(this.baseUrl+"GetDropDown")}getServiceCategoryByType(t=!0){return this.http.get(this.baseUrl+"GetServiceCategoryByType/"+t)}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},84205:(v,i,e)=>{e.d(i,{t:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"ClientGroup/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},61351:(v,i,e)=>{e.d(i,{F:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"ClientCollection/")}print(t){return this.http.get(this.baseUrl+"Print/"+t,{responseType:"blob"})}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},34578:(v,i,e)=>{e.d(i,{N:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"PositionName/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},79284:(v,i,e)=>{e.d(i,{G:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"WorkTime/")}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},45943:(v,i,e)=>{e.d(i,{L:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"ProductOffer/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}GetActiveOffer(){return this.http.get(this.baseUrl+"GetActiveOffer")}checkItemOffer(t,s){return this.checkOffers(t,s)}checkOffers(t,s){const l=s.filter(u=>{const h=u.productServicesX.map(E=>E.id),O=t.items.filter(E=>h.includes(E.itemId)&&!E.isFree).reduce((E,D)=>E+D.quantity,0);if(6===u.offerType){const E=u.productOfferQuantities.filter(D=>O>=D.quantityX);if(E.length){const D=E.reduce((P,M)=>M.quantityX>P.quantityX?M:P);return u.quantityX=D.quantityX,u.quantityY=D.quantityY,!0}return!1}return O>=u.quantityX});return 0===l.length?(t.itemsOffers=[],t.items=t.items.filter(u=>!u.isFree),t):(t.itemsOffers=[],t.offerNames=[],l.forEach(u=>{[1,6].includes(u.offerType)&&this.checkOfferXToY(t,u)}),t)}checkOfferXToY(t,s){const l=t.items.reduce((h,d)=>h+(s.productServicesX.some(E=>E.id===d.itemId&&!d.isFree)?d.quantity:0),0);if(s.quantityY=this.getBestQuantity(l,s),t.items.some(h=>s.productServicesX.some(d=>d.id===h.itemId))&&l>=s.quantityX){s.productServicesY.forEach(d=>{d.isSelected=!1,d.quantityY=s.quantityY}),t.offerNames.push({id:s.id,title:s.title,isSelected:!1,count:s.productServicesY.length});const h=6===s.offerType?this.resetQuantityX(s.quantityY,s.productServicesY):s.productServicesY;t.itemsOffers.push(...h)}else t.itemsOffers=[];return this.updateLimit(t)}updateLimit(t){return t.items.filter(s=>s.isFree).forEach(s=>{const l=t.itemsOffers.find(u=>u.id===s.itemId);l&&(s.quantityY=l.quantityY,s.quantity=Math.min(s.quantity,l.quantityY))}),t.items=this.removeExceededOfferItems(t.items),t}removeExceededOfferItems(t){const s={};t.forEach(u=>{const h=u.offerId;s[h]||(s[h]={total:0,max:u.quantityY}),s[h].total+=u.quantity});const l=Object.entries(s).filter(([u,h])=>h.total>h.max).map(([u])=>+u);return t.filter(u=>!l.includes(u.offerId))}resetQuantityX(t,s){return s.map(l=>({...l,quantityY:t}))}getBestQuantity(t,s){let l=t,u=0;const h=[...s.productOfferQuantities].sort((d,O)=>O.quantityX-d.quantityX);for(let d of h){const O=Math.floor(l/d.quantityX);O>0&&(u+=O*d.quantityY,l-=O*d.quantityX)}return u}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},63022:(v,i,e)=>{e.d(i,{U:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Invoice/")}SaveInvoice(t){return this.http.post(this.baseUrl+"SaveInvoice",t)}GetOrderServiceAndPayment(t){return this.http.get(this.baseUrl+`GetOrderServiceAndPayment/${t}`)}GetByCode(t){return this.http.get(this.baseUrl+`GetByCode/${t}`)}SendInvoice(t){return this.http.post(this.baseUrl+`SendInvoice/${t}`,{})}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},70072:(v,i,e)=>{e.d(i,{A:()=>r});var a=e(84412),c=e(67569),n=e(45312),o=e(54438),_=e(21626);let r=(()=>{class p extends c.d{constructor(s){super(s,n.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new a.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.GetOrderCountSource=new a.t(!0),this.GetOrderCount=this.GetOrderCountSource.asObservable(),this.removeServiceQ=new a.t(0),this.removeService=this.removeServiceQ.asObservable(),this.removeServiceOfferQ=new a.t(0),this.removeServiceOffer=this.removeServiceOfferQ.asObservable(),this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.salesOrderForm={itemsOffers:[],id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,serviceCategoryCode:0,isCustomerDataValid:!1},this.requesturl=n.c.apiUrl+"salesRequest/"}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(s){return this.http.put(this.baseUrl+"ChangeStatus/",s)}UpdateQuantity(s){return this.http.put(this.baseUrl+"UpdateQuantity",s)}updateTruck(s){return this.http.put(this.baseUrl+"updateTruck",s)}GetTrucks(s){return this.http.post(this.baseUrl+"GetTrucks/",s)}CancelOfferOrder(s){return this.http.post(this.baseUrl+"CancelOfferOrder",s)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetOfferOrderStoreCount(){return this.http.get(this.baseUrl+"GetOfferOrderStoreCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}GetOrderDetail(s){return this.http.get(this.baseUrl+"GetOrderDetail/"+s)}RequestChangeQuantity(s){return this.http.post(this.baseUrl+"RequestChangeQuantity/",s)}GetOrderStore(s){return this.http.post(this.baseUrl+"GetOrderStore/",s)}PrintSalesOrder(s){return this.http.get(this.baseUrl+"PrintSalesOrder/"+s,{responseType:"blob"})}PrintStoreReport(s){return this.http.get(this.baseUrl+"PrintStoreReport/"+s,{responseType:"blob"})}registerRequestSales(s){return this.http.post(this.requesturl+"register",s)}static{this.\u0275fac=function(l){return new(l||p)(o.KVO(_.Qq))}}static{this.\u0275prov=o.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},86865:(v,i,e)=>{e.d(i,{B:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{getTrunckStatus(){return[{id:20,name:"ArriveStore"},{id:30,name:"GoClient"},{id:40,name:"ArriveClient"},{id:50,name:"DeliveryClient"}]}constructor(t){super(t,c.c.apiUrl+"OrderReceived/")}GetOrderAssignTrunk(t){return this.http.post(this.baseUrl+"OrderAssignTrunk",t)}changeStatus(t){return this.http.post(this.baseUrl+"changeStatus",t)}PrintOrderReceived(t){return this.http.get(this.baseUrl+"PrintOrderReceived/"+t,{responseType:"blob"})}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},12128:(v,i,e)=>{e.d(i,{z:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"PaymentType/")}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(t){return this.http.put(this.baseUrl+"ChangeStatus/",t)}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},96357:(v,i,e)=>{e.d(i,{Q:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"InvoiceMaster/")}register(t){return this.http.post(this.baseUrl+"AddPaymentToInvoice",t)}edit(t){return this.http.post(this.baseUrl+"EditPayment",t)}softDelete(t){return this.http.delete(this.baseUrl+`SoftDelete/${t}`)}finishOrder(t){return this.http.post(this.baseUrl+"finishOrder",t)}getInvoiceAttachments(t){return this.http.get(this.baseUrl+"GetInvoiceAttachments/"+t)}GetInvoiceAttachmentsByOrder(t){return this.http.get(this.baseUrl+"GetInvoiceAttachmentsByOrder/"+t)}print(t){return this.http.get(this.baseUrl+"print/"+t,{responseType:"blob"})}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},34618:(v,i,e)=>{e.d(i,{S:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Unit/")}ToDelete(t){return this.http.delete(`${this.baseUrl}${t}`)}ToEdit(t,s){return this.http.put(this.baseUrl+"Edit/"+t,s)}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},69433:(v,i,e)=>{e.d(i,{a:()=>_});var a=e(67569),c=e(45312),n=e(54438),o=e(21626);let _=(()=>{class r extends a.d{constructor(t){super(t,c.c.apiUrl+"Store/")}ToDelete(t){return this.http.delete(`${this.baseUrl}${t}`)}ToEdit(t,s){return this.http.put(this.baseUrl+"Edit/"+t,s)}static{this.\u0275fac=function(s){return new(s||r)(n.KVO(o.Qq))}}static{this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},83229:(v,i,e)=>{e.d(i,{s:()=>_});var a=e(39974),c=e(85343),n=e(54360),o=e(58750);function _(r){return(0,a.N)((p,t)=>{let s=!1,l=null,u=null;const h=()=>{if(u?.unsubscribe(),u=null,s){s=!1;const d=l;l=null,t.next(d)}};p.subscribe((0,n._)(t,d=>{u?.unsubscribe(),s=!0,l=d,u=(0,n._)(t,h,c.l),(0,o.Tg)(r(d)).subscribe(u)},()=>{h(),t.complete()},void 0,()=>{l=u=null}))})}}}]);